!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var e,n=(e=!0,function(t,n){var r=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}),r=n(void 0,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));r();function i(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var s=i[3+o],a=i[3+o+1];r.push(s===a?null:i.subarray(s,a))}var u=i[3+r.length],c=i[3+r.length+1];this.keys=i.subarray(u,c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}i.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},i.prototype.query=function(t,e,n,r,i){var o=this.min,s=this.max;if(t<=o&&e<=o&&s<=n&&s<=r&&!i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{},i),a},i.prototype._queryCell=function(t,e,n,r,i,o,s,a){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,h=0;h<u.length;h++){var A=u[h];if(void 0===s[A]){var f=4*A;(a?a(l[f+0],l[f+1],l[f+2],l[f+3]):t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&r>=l[f+1])?(s[A]=!0,o.push(c[A])):s[A]=!1}}},i.prototype._forEachCell=function(t,e,n,r,i,o,s,a){for(var u=this._convertToCellCoord(t),c=this._convertToCellCoord(e),l=this._convertToCellCoord(n),h=this._convertToCellCoord(r),A=u;A<=l;A++)for(var f=c;f<=h;f++){var p=this.d*f+A;if((!a||a(this._convertFromCellCoord(A),this._convertFromCellCoord(f),this._convertFromCellCoord(A+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,p,o,s,a))return}},i.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},i.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,s=0;s<t.length;s++){var a=t[s];i[3+s]=o,i.set(a,o),o+=a.length}return i[3+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[3+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var o,s=(o=!0,function(t,e){var n=o?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return o=!1,n}),a=s(void 0,(function(){return a.toString().search("(((.+)+)+)+$").toString().constructor(a).search("(((.+)+)+)+$")}));a();var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function h(t){return(t=Math.round(t))<0?0:t>255?255:t}function A(t){return t<0?0:t>1?1:t}function p(t){return"%"===t[t.length-1]?h(parseFloat(t)/100*255):h(parseInt(t))}function d(t){return"%"===t[t.length-1]?A(parseFloat(t)/100):A(parseFloat(t))}function y(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}const m=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),I=m(void 0,(function(){return I.toString().search("(((.+)+)+)+$").toString().constructor(I).search("(((.+)+)+)+$")}));I();class C{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof C)return t;if("string"!=typeof t)return;const e=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in l)return l[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),s=n.substr(r+1,i-(r+1)).split(","),a=1;switch(o){case"rgba":if(4!==s.length)return null;a=d(s.pop());case"rgb":return 3!==s.length?null:[p(s[0]),p(s[1]),p(s[2]),a];case"hsla":if(4!==s.length)return null;a=d(s.pop());case"hsl":if(3!==s.length)return null;var u=(parseFloat(s[0])%360+360)%360/360,c=d(s[1]),A=d(s[2]),f=A<=.5?A*(c+1):A+c-A*c,g=2*A-f;return[h(255*y(g,f,u+1/3)),h(255*y(g,f,u)),h(255*y(g,f,u-1/3)),a];default:return null}}return null}(t);return e?new C(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return"rgba("+Math.round(t)+","+Math.round(e)+","+Math.round(n)+","+r+")"}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}C.black=new C(0,0,0,1),C.white=new C(1,1,1,1),C.transparent=new C(0,0,0,0),C.red=new C(1,0,0,1);const E=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),b=E(void 0,(function(){return b.toString().search("(((.+)+)+)+$").toString().constructor(b).search("(((.+)+)+)+$")}));function v(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}b();var x=function(t){var e,n=(e=!0,function(t,n){var r=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}),r=n(this,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));function i(e,n){t.call(this,n),this.message=n,this.key=e}return r(),t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Error);const w=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),M=w(void 0,(function(){return M.toString().search("(((.+)+)+)+$").toString().constructor(M).search("(((.+)+)+)+$")}));M();class B{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new B(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const _={kind:"null"},S={kind:"number"},Q={kind:"string"},R={kind:"boolean"},D={kind:"color"},T={kind:"object"},O={kind:"value"},N={kind:"collator"},F={kind:"formatted"},z={kind:"resolvedImage"};function k(t,e){const n=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),r=n(this,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));return r(),{kind:"array",itemType:t,N:e}}function L(t){if("array"===t.kind){const e=L(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}const P=[_,S,Q,R,D,F,T,k(O),z];function j(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!j(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of P)if(!j(t,e))return null}return"Expected "+L(t)+" but found "+L(e)+" instead."}function U(t,e){return e.some((e=>e.kind===t.kind))}function q(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var K,Y=(K=!0,function(t,e){var n=K?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return K=!1,n}),G=Y(void 0,(function(){return G.toString().search("(((.+)+)+)+$").toString().constructor(G).search("(((.+)+)+)+$")}));G();var V=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};V.prototype.compare=function(t,e){return this.collator.compare(t,e)},V.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};const X=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),W=X(void 0,(function(){return W.toString().search("(((.+)+)+)+$").toString().constructor(W).search("(((.+)+)+)+$")}));W();class J{constructor(t,e,n,r,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class Z{constructor(t){this.sections=t}static fromString(t){return new Z([new J(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Z?t:Z.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}var $,tt=($=!0,function(t,e){var n=$?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return $=!1,n}),et=tt(void 0,(function(){return et.toString().search("(((.+)+)+)+$").toString().constructor(et).search("(((.+)+)+)+$")}));et();class nt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new nt({name:t,available:!1}):null}serialize(){return["image",this.name]}}const rt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),it=rt(void 0,(function(){return it.toString().search("(((.+)+)+)+$").toString().constructor(it).search("(((.+)+)+)+$")}));function ot(t,e,n,r){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255)){return"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1."}function st(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof C)return!0;if(t instanceof V)return!0;if(t instanceof Z)return!0;if(t instanceof nt)return!0;if(Array.isArray(t)){for(const e of t)if(!st(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!st(t[e]))return!1;return!0}return!1}function at(t){if(null===t)return _;if("string"==typeof t)return Q;if("boolean"==typeof t)return R;if("number"==typeof t)return S;if(t instanceof C)return D;if(t instanceof V)return N;if(t instanceof Z)return F;if(t instanceof nt)return z;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=at(e);if(n){if(n===t)continue;n=O;break}n=t}return k(n||O,e)}return T}function ut(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof C||t instanceof Z||t instanceof nt?t.toString():JSON.stringify(t)}it();const ct=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),lt=ct(void 0,(function(){return lt.toString().search("(((.+)+)+)+$").toString().constructor(lt).search("(((.+)+)+)+$")}));lt();class ht{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!st(t[1]))return e.error("invalid value");const n=t[1];let r=at(n);const i=e.expectedType;return"array"===r.kind&&0===r.N&&i&&"array"===i.kind&&("number"!=typeof i.N||0===i.N)&&(r=i),new ht(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof C?["rgba"].concat(this.value.toArray()):this.value instanceof Z?this.value.serialize():this.value}}var At,ft=(At=!0,function(t,e){var n=At?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return At=!1,n}),pt=ft(void 0,(function(){return pt.toString().search("(((.+)+)+)+$").toString().constructor(pt).search("(((.+)+)+)+$")}));pt();var dt=function(t){this.name="ExpressionEvaluationError",this.message=t};dt.prototype.toJSON=function(){return this.message};const gt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),yt=gt(void 0,(function(){return yt.toString().search("(((.+)+)+)+$").toString().constructor(yt).search("(((.+)+)+)+$")}));yt();const mt={string:Q,number:S,boolean:R,object:T};class It{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in mt)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=mt[n],r++}else i=O;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=k(i,o)}else n=mt[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,O);if(!n)return null;o.push(n)}return new It(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!j(this.type,at(n)))return n;if(e===this.args.length-1)throw new dt("Expected value to be of type "+L(this.type)+", but found "+L(at(n))+" instead.")}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}const Ct=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Et=Ct(void 0,(function(){return Et.toString().search("(((.+)+)+)+$").toString().constructor(Et).search("(((.+)+)+)+$")}));Et();class bt{constructor(t){this.type=F,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,S),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,k(Q)),!n))return null;let s=null;if(o["text-color"]&&(s=e.parse(o["text-color"],1,D),!s))return null;const a=r[r.length-1];a.scale=t,a.font=n,a.textColor=s}else{const o=e.parse(t[n],1,O);if(!o)return null;const s=o.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new bt(r)}evaluate(t){return new Z(this.sections.map((e=>{const n=e.content.evaluate(t);return at(n)===z?new J("",n,null,null,null):new J(ut(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}const vt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),xt=vt(void 0,(function(){return xt.toString().search("(((.+)+)+)+$").toString().constructor(xt).search("(((.+)+)+)+$")}));xt();class wt{constructor(t){this.type=z,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Q);return n?new wt(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=nt.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Mt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Bt=Mt(void 0,(function(){return Bt.toString().search("(((.+)+)+)+$").toString().constructor(Bt).search("(((.+)+)+)+$")}));Bt();const _t={"to-boolean":R,"to-color":D,"to-number":S,"to-string":Q};class St{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=_t[n],i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],n,O);if(!r)return null;i.push(r)}return new St(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof C)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ot(e[0],e[1],e[2],e[3]),!n))return new C(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new dt(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new dt("Could not convert "+JSON.stringify(e)+" to number.")}return"formatted"===this.type.kind?Z.fromString(ut(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?nt.fromString(ut(this.args[0].evaluate(t))):ut(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new bt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new wt(this.args[0]).serialize();const t=["to-"+this.type.kind];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Qt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Rt=Qt(void 0,(function(){return Rt.toString().search("(((.+)+)+)+$").toString().constructor(Rt).search("(((.+)+)+)+$")}));Rt();const Dt=["Unknown","Point","LineString","Polygon"];class Tt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord,i=n*e-t[0],o=r*e-t[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return!e&&(e=this._parseColorCache[t]=C.parse(t)),e}}const Ot=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Nt=Ot(void 0,(function(){return Nt.toString().search("(((.+)+)+)+$").toString().constructor(Nt).search("(((.+)+)+)+$")}));Nt();let Ft={};class zt{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=Ft[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[r,o]of s){a=new ye(e.registry,e.path,null,e.scope);const s=[];let u=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(r)?r[e-1]:r.type,o=a.parse(n,1+s.length,i);if(!o){u=!0;break}s.push(o)}if(!u)if(Array.isArray(r)&&r.length!==s.length)a.error("Expected "+r.length+" arguments, but found "+s.length+" instead.");else{for(let t=0;t<s.length;t++){const e=Array.isArray(r)?r[t]:r.type,n=s[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new zt(n,i,o,s)}}if(1===s.length)e.errors.push(...a.errors);else{const n=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?"("+e.map(L).join(", ")+")":"("+L(e.type)+"...)";var e})).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(L(i.type))}e.error("Expected arguments of type "+n+", but found ("+r.join(", ")+") instead.")}return null}static register(t,e){Ft=e;for(const n in e)t[n]=zt}}const kt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Lt=kt(void 0,(function(){return Lt.toString().search("(((.+)+)+)+$").toString().constructor(Lt).search("(((.+)+)+)+$")}));Lt();class Pt{constructor(t,e,n){this.type=N,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,R);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,R);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,Q),!o)?null:new Pt(r,i,o)}evaluate(t){return new V(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const jt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ut=jt(void 0,(function(){return Ut.toString().search("(((.+)+)+)+$").toString().constructor(Ut).search("(((.+)+)+)+$")}));Ut();const qt=8192;function Kt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ht(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function Yt(t,e){const n=(180+t[0])/360,r=(o=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360),i=Math.pow(2,e.z);var o;return[Math.round(n*i*qt),Math.round(r*i*qt)]}function Gt(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],s=t[1]-n[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function Vt(t,e){let n=!1;for(let s=0,a=e.length;s<a;s++){const a=e[s];for(let e=0,s=a.length;e<s-1;e++){if(Gt(t,a[e],a[e+1]))return!1;r=t,i=a[e],o=a[e+1],i[1]>r[1]!=o[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function Xt(t,e){for(let n=0;n<e.length;n++)if(Vt(t,e[n]))return!0;return!1}function Wt(t,e,n,r){const i=t[0]-n[0],o=t[1]-n[1],s=e[0]-n[0],a=e[1]-n[1],u=r[0]-n[0],c=r[1]-n[1],l=i*c-u*o,h=s*c-u*a;return l>0&&h<0||l<0&&h>0}function Jt(t,e,n,r){const i=[e[0]-t[0],e[1]-t[1]],o=[r[0]-n[0],r[1]-n[1]];return 0!=(s=o)[0]*(a=i)[1]-s[1]*a[0]&&!(!Wt(t,e,n,r)||!Wt(n,r,t,e));var s,a}function Zt(t,e,n){for(const r of n)for(let n=0;n<r.length-1;++n)if(Jt(t,e,r[n],r[n+1]))return!0;return!1}function $t(t,e){for(let n=0;n<t.length;++n)if(!Vt(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(Zt(t[n],t[n+1],e))return!1;return!0}function te(t,e){for(let n=0;n<e.length;n++)if($t(t,e[n]))return!0;return!1}function ee(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const s=Yt(t[i][r],n);Kt(e,s),o.push(s)}r.push(o)}return r}function ne(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=ee(t[i],e,n);r.push(o)}return r}function re(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}Kt(e,t)}function ie(t,e,n,r){const i=Math.pow(2,r.z)*qt,o=[r.x*qt,r.y*qt],s=[];if(!t)return s;for(const r of t)for(const t of r){const r=[t.x+o[0],t.y+o[1]];re(r,e,n,i),s.push(r)}return s}function oe(t,e,n,r){const i=Math.pow(2,r.z)*qt,o=[r.x*qt,r.y*qt],s=[];if(!t)return s;for(const n of t){const t=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];Kt(e,n),t.push(n)}s.push(t)}if(e[2]-e[0]<=i/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const r of t)re(r,e,n,i)}var a;return s}class se{constructor(t,e){this.type=R,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(st(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new se(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new se(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new se(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=ee(e.coordinates,r,i),s=ie(t.geometry(),n,r,i);if(!Ht(n,r))return!1;for(const t of s)if(!Vt(t,o))return!1}if("MultiPolygon"===e.type){const o=ne(e.coordinates,r,i),s=ie(t.geometry(),n,r,i);if(!Ht(n,r))return!1;for(const t of s)if(!Xt(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=ee(e.coordinates,r,i),s=oe(t.geometry(),n,r,i);if(!Ht(n,r))return!1;for(const t of s)if(!$t(t,o))return!1}if("MultiPolygon"===e.type){const o=ne(e.coordinates,r,i),s=oe(t.geometry(),n,r,i);if(!Ht(n,r))return!1;for(const t of s)if(!te(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const ae=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ue=ae(void 0,(function(){return ue.toString().search("(((.+)+)+)+$").toString().constructor(ue).search("(((.+)+)+)+$")}));function ce(t){if(t instanceof zt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof se)return!1;let e=!0;return t.eachChild((t=>{e&&!ce(t)&&(e=!1)})),e}function le(t){if(t instanceof zt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!le(t)&&(e=!1)})),e}function he(t,e){if(t instanceof zt&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!he(t,e)&&(n=!1)})),n}ue();const Ae=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),fe=Ae(void 0,(function(){return fe.toString().search("(((.+)+)+)+$").toString().constructor(fe).search("(((.+)+)+)+$")}));fe();class pe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new pe(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}const de=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ge=de(void 0,(function(){return ge.toString().search("(((.+)+)+)+$").toString().constructor(ge).search("(((.+)+)+)+$")}));ge();class ye{constructor(t,e=[],n,r=new B,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>"["+t+"]")).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new It(e,[t]):"coerce"===n?new St(e,[t]):t}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof ht)&&"resolvedImage"!==r.type.kind&&me(r)){const t=new Tt;try{r=new ht(r.type,r.evaluate(t))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new ye(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=""+this.key+e.map((t=>"["+t+"]")).join("");this.errors.push(new x(n,t))}checkSubtype(t,e){const n=j(t,e);return n&&this.error(n),n}}function me(t){if(t instanceof pe)return me(t.boundExpression);if(t instanceof zt&&"error"===t.name)return!1;if(t instanceof Pt)return!1;if(t instanceof se)return!1;const e=t instanceof St||t instanceof It;let n=!0;return t.eachChild((t=>{n=e?n&&me(t):n&&t instanceof ht})),!!n&&(ce(t)&&he(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}const Ie=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ce=Ie(void 0,(function(){return Ce.toString().search("(((.+)+)+)+$").toString().constructor(Ce).search("(((.+)+)+)+$")}));function Ee(t,e){const n=t.length-1;let r,i,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=t[a],i=t[a+1],r<=e){if(a===n||e<i)return a;o=a+1}else{if(!(r>e))throw new dt("Input is not a number.");s=a-1}return 0}Ce();const be=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ve=be(void 0,(function(){return ve.toString().search("(((.+)+)+)+$").toString().constructor(ve).search("(((.+)+)+)+$")}));ve();class xe{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,S);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],s=t[n+1],a=n,u=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(s,u,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new xe(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);return n[Ee(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var we,Me=(we=!0,function(t,e){var n=we?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return we=!1,n}),Be=Me(void 0,(function(){return Be.toString().search("(((.+)+)+)+$").toString().constructor(Be).search("(((.+)+)+)+$")}));function _e(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}Be(),_e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var s=0,a=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Se,Qe=(Se=!0,function(t,e){var n=Se?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Se=!1,n}),Re=Qe(void 0,(function(){return Re.toString().search("(((.+)+)+)+$").toString().constructor(Re).search("(((.+)+)+)+$")}));function De(t,e,n){return t*(1-n)+e*n}Re();var Te=Object.freeze({__proto__:null,number:De,color:function(t,e,n){return new C(De(t.r,e.r,n),De(t.g,e.g,n),De(t.b,e.b,n),De(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,r)=>De(t,e[r],n)))}});const Oe=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ne=Oe(void 0,(function(){return Ne.toString().search("(((.+)+)+)+$").toString().constructor(Ne).search("(((.+)+)+)+$")}));Ne();const Fe=.95047,ze=1.08883,ke=4/29,Le=6/29,Pe=.12841854934601665,je=Math.PI/180,Ue=180/Math.PI;function qe(t){return t>.008856451679035631?Math.pow(t,1/3):t/Pe+ke}function Ke(t){return t>Le?t*t*t:Pe*(t-ke)}function He(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ge(t){const e=Ye(t.r),n=Ye(t.g),r=Ye(t.b),i=qe((.4124564*e+.3575761*n+.1804375*r)/Fe),o=qe((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-qe((.0193339*e+.119192*n+.9503041*r)/ze)),alpha:t.a}}function Ve(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Ke(e),n=Fe*Ke(n),r=ze*Ke(r),new C(He(3.2404542*n-1.5371385*e-.4985314*r),He(-.969266*n+1.8760108*e+.041556*r),He(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Xe(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const We={forward:Ge,reverse:Ve,interpolate:function(t,e,n){return{l:De(t.l,e.l,n),a:De(t.a,e.a,n),b:De(t.b,e.b,n),alpha:De(t.alpha,e.alpha,n)}}},Je={forward:function(t){const{l:e,a:n,b:r}=Ge(t),i=Math.atan2(r,n)*Ue;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*je,n=t.c;return Ve({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Xe(t.h,e.h,n),c:De(t.c,e.c,n),l:De(t.l,e.l,n),alpha:De(t.alpha,e.alpha,n)}}};var Ze=Object.freeze({__proto__:null,lab:We,hcl:Je});const $e=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),tn=$e(void 0,(function(){return tn.toString().search("(((.+)+)+)+$").toString().constructor(tn).search("(((.+)+)+)+$")}));tn();class en{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,r){let i=0;if("exponential"===t.name)i=nn(e,t.base,n,r);else if("linear"===t.name)i=nn(e,1,n,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new _e(o[0],o[1],o[2],o[3]).solve(nn(e,1,n,r))}return i}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,S),!i)return null;const s=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=D:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],r=o[t+1],i=t+3,u=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(s.length&&s[s.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=e.parse(r,u,a);if(!c)return null;a=a||c.type,s.push([n,c])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new en(a,n,r,i,s):e.error("Type "+L(a)+" is not interpolatable.")}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=Ee(e,r),s=e[o],a=e[o+1],u=en.interpolationFactor(this.interpolation,r,s,a),c=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Te[this.type.kind.toLowerCase()](c,l,u):"interpolate-hcl"===this.operator?Je.reverse(Je.interpolate(Je.forward(c),Je.forward(l),u)):We.reverse(We.interpolate(We.forward(c),We.forward(l),u))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function nn(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}const rn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),on=rn(void 0,(function(){return on.toString().search("(((.+)+)+)+$").toString().constructor(on).search("(((.+)+)+)+$")}));on();class sn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of t.slice(1)){const t=e.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>j(r,t.type)));return new sn(o?O:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(t),n&&n instanceof nt&&!n.available&&(!e&&(e=n),n=null,r===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const an=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),un=an(void 0,(function(){return un.toString().search("(((.+)+)+)+$").toString().constructor(un).search("(((.+)+)+)+$")}));un();class cn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new cn(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}const ln=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),hn=ln(void 0,(function(){return hn.toString().search("(((.+)+)+)+$").toString().constructor(hn).search("(((.+)+)+)+$")}));hn();class An{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");const n=e.parse(t[1],1,S),r=e.parse(t[2],2,k(e.expectedType||O));if(!n||!r)return null;const i=r.type;return new An(i.itemType,n,r)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new dt("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new dt("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new dt("Array index must be an integer, but found "+e+" instead.");return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}const fn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),pn=fn(void 0,(function(){return pn.toString().search("(((.+)+)+)+$").toString().constructor(pn).search("(((.+)+)+)+$")}));pn();class dn{constructor(t,e){this.type=R,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");const n=e.parse(t[1],1,O),r=e.parse(t[2],2,O);return n&&r?U(n.type,[R,Q,S,_,O])?new dn(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+L(n.type)+" instead"):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!q(e,["boolean","string","number","null"]))throw new dt("Expected first argument to be of type boolean, string, number or null, but found "+L(at(e))+" instead.");if(!q(n,["string","array"]))throw new dt("Expected second argument to be of type array or string, but found "+L(at(n))+" instead.");return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}const gn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),yn=gn(void 0,(function(){return yn.toString().search("(((.+)+)+)+$").toString().constructor(yn).search("(((.+)+)+)+$")}));yn();class mn{constructor(t,e,n){this.type=S,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");const n=e.parse(t[1],1,O),r=e.parse(t[2],2,O);if(!n||!r)return null;if(!U(n.type,[R,Q,S,_,O]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+L(n.type)+" instead");if(4===t.length){const i=e.parse(t[3],3,S);return i?new mn(n,r,i):null}return new mn(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!q(e,["boolean","string","number","null"]))throw new dt("Expected first argument to be of type boolean, string, number or null, but found "+L(at(e))+" instead.");if(!q(n,["string","array"]))throw new dt("Expected second argument to be of type array or string, but found "+L(at(n))+" instead.");if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}const In=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Cn=In(void 0,(function(){return Cn.toString().search("(((.+)+)+)+$").toString().constructor(Cn).search("(((.+)+)+)+$")}));Cn();class En{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let s=2;s<t.length-1;s+=2){let a=t[s];const u=t[s+1];!Array.isArray(a)&&(a=[a]);const c=e.concat(s);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,at(t)))return null}else n=at(t);if(void 0!==i[String(t)])return c.error("Branch labels must be unique.");i[String(t)]=o.length}const l=e.parse(u,s,r);if(!l)return null;r=r||l.type,o.push(l)}const s=e.parse(t[1],1,O);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,r);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(n,s.type)?null:new En(n,r,s,i,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(at(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const t of e){const e=r[this.cases[t]];void 0===e?(r[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,r]of n)1===r.length?t.push(i(r[0])):t.push(r.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}const bn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),vn=bn(void 0,(function(){return vn.toString().search("(((.+)+)+)+$").toString().constructor(vn).search("(((.+)+)+)+$")}));vn();class xn{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,R);if(!o)return null;const s=e.parse(t[i+1],i+1,n);if(!s)return null;r.push([o,s]),n=n||s.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new xn(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const wn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Mn=wn(void 0,(function(){return Mn.toString().search("(((.+)+)+)+$").toString().constructor(Mn).search("(((.+)+)+)+$")}));Mn();class Bn{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");const n=e.parse(t[1],1,O),r=e.parse(t[2],2,S);if(!n||!r)return null;if(!U(n.type,[k(O),Q,O]))return e.error("Expected first argument to be of type array or string, but found "+L(n.type)+" instead");if(4===t.length){const i=e.parse(t[3],3,S);return i?new Bn(n.type,n,r,i):null}return new Bn(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!q(e,["string","array"]))throw new dt("Expected first argument to be of type array or string, but found "+L(at(e))+" instead.");if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function _n(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Sn(t,e,n,r){return 0===r.compare(e,n)}function Qn(t,e,n){const r=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),i=r(this,(function(){return i.toString().search("(((.+)+)+)+$").toString().constructor(i).search("(((.+)+)+)+$")}));i();const o="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=R,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let i=e.parse(t[1],1,O);if(!i)return null;if(!_n(n,i.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+L(i.type)+"'.");let s=e.parse(t[2],2,O);if(!s)return null;if(!_n(n,s.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+L(s.type)+"'.");if(i.type.kind!==s.type.kind&&"value"!==i.type.kind&&"value"!==s.type.kind)return e.error("Cannot compare types '"+L(i.type)+"' and '"+L(s.type)+"'.");o&&("value"===i.type.kind&&"value"!==s.type.kind?i=new It(s.type,[i]):"value"!==i.type.kind&&"value"===s.type.kind&&(s=new It(i.type,[s])));let a=null;if(4===t.length){if("string"!==i.type.kind&&"string"!==s.type.kind&&"value"!==i.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,N),!a)return null}return new r(i,s,a)}evaluate(r){const i=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(o&&this.hasUntypedArgument){const e=at(i),n=at(s);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new dt('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+e.kind+", "+n.kind+") instead.")}if(this.collator&&!o&&this.hasUntypedArgument){const t=at(i),n=at(s);if("string"!==t.kind||"string"!==n.kind)return e(r,i,s)}return this.collator?n(r,i,s,this.collator.evaluate(r)):e(r,i,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Rn=Qn("==",(function(t,e,n){return e===n}),Sn),Dn=Qn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!Sn(0,e,n,r)})),Tn=Qn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),On=Qn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Nn=Qn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Fn=Qn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),zn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),kn=zn(void 0,(function(){return kn.toString().search("(((.+)+)+)+$").toString().constructor(kn).search("(((.+)+)+)+$")}));kn();class Ln{constructor(t,e,n,r,i,o){this.type=Q,this.number=t,this.locale=e,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,S);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,Q),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,Q),!o))return null;let s=null;if(r.unit&&(s=e.parse(r.unit,1,Q),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,S),!a))return null;let u=null;return r["max-fraction-digits"]&&(u=e.parse(r["max-fraction-digits"],1,S),!u)?null:new Ln(n,i,o,s,a,u)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}const Pn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),jn=Pn(void 0,(function(){return jn.toString().search("(((.+)+)+)+$").toString().constructor(jn).search("(((.+)+)+)+$")}));jn();class Un{constructor(t){this.type=S,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+L(n.type)+" instead."):new Un(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new dt("Expected value to be of type string or array, but found "+L(at(e))+" instead.")}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const qn=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Kn=qn(void 0,(function(){return Kn.toString().search("(((.+)+)+)+$").toString().constructor(Kn).search("(((.+)+)+)+$")}));Kn();const Hn={"==":Rn,"!=":Dn,">":On,"<":Tn,">=":Fn,"<=":Nn,array:It,at:An,boolean:It,case:xn,coalesce:sn,collator:Pt,format:bt,image:wt,in:dn,"index-of":mn,interpolate:en,"interpolate-hcl":en,"interpolate-lab":en,length:Un,let:cn,literal:ht,match:En,number:It,"number-format":Ln,object:It,slice:Bn,step:xe,string:It,"to-boolean":St,"to-color":St,"to-number":St,"to-string":St,var:pe,within:se};function Yn(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const o=i?i.evaluate(t):1,s=ot(e,n,r,o);if(s)throw new dt(s);return new C(e/255*o,n/255*o,r/255*o,o)}function Gn(t,e){return t in e}function Vn(t,e){const n=e[t];return void 0===n?null:n}function Xn(t){return{type:t}}zt.register(Hn,{error:[{kind:"error"},[Q],(t,[e])=>{throw new dt(e.evaluate(t))}],typeof:[Q,[O],(t,[e])=>L(at(e.evaluate(t)))],"to-rgba":[k(S,4),[D],(t,[e])=>e.evaluate(t).toArray()],rgb:[D,[S,S,S],Yn],rgba:[D,[S,S,S,S],Yn],has:{type:R,overloads:[[[Q],(t,[e])=>Gn(e.evaluate(t),t.properties())],[[Q,T],(t,[e,n])=>Gn(e.evaluate(t),n.evaluate(t))]]},get:{type:O,overloads:[[[Q],(t,[e])=>Vn(e.evaluate(t),t.properties())],[[Q,T],(t,[e,n])=>Vn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[O,[Q],(t,[e])=>Vn(e.evaluate(t),t.featureState||{})],properties:[T,[],t=>t.properties()],"geometry-type":[Q,[],t=>t.geometryType()],id:[O,[],t=>t.id()],zoom:[S,[],t=>t.globals.zoom],pitch:[S,[],t=>t.globals.pitch||0],"distance-from-center":[S,[],t=>t.distanceFromCenter()],"heatmap-density":[S,[],t=>t.globals.heatmapDensity||0],"line-progress":[S,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[S,[],t=>t.globals.skyRadialProgress||0],accumulated:[O,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[S,Xn(S),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[S,Xn(S),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:S,overloads:[[[S,S],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[S],(t,[e])=>-e.evaluate(t)]]},"/":[S,[S,S],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[S,[S,S],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[S,[],()=>Math.LN2],pi:[S,[],()=>Math.PI],e:[S,[],()=>Math.E],"^":[S,[S,S],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[S,[S],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[S,[S],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[S,[S],(t,[e])=>Math.log(e.evaluate(t))],log2:[S,[S],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[S,[S],(t,[e])=>Math.sin(e.evaluate(t))],cos:[S,[S],(t,[e])=>Math.cos(e.evaluate(t))],tan:[S,[S],(t,[e])=>Math.tan(e.evaluate(t))],asin:[S,[S],(t,[e])=>Math.asin(e.evaluate(t))],acos:[S,[S],(t,[e])=>Math.acos(e.evaluate(t))],atan:[S,[S],(t,[e])=>Math.atan(e.evaluate(t))],min:[S,Xn(S),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[S,Xn(S),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[S,[S],(t,[e])=>Math.abs(e.evaluate(t))],round:[S,[S],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[S,[S],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[S,[S],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[R,[Q,O],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[R,[O],(t,[e])=>t.id()===e.value],"filter-type-==":[R,[Q],(t,[e])=>t.geometryType()===e.value],"filter-<":[R,[Q,O],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[R,[O],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[R,[Q,O],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[R,[O],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[R,[Q,O],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[R,[O],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[R,[Q,O],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[R,[O],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[R,[O],(t,[e])=>e.value in t.properties()],"filter-has-id":[R,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[R,[k(Q)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[R,[k(O)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[R,[Q,k(O)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[R,[Q,k(O)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:R,overloads:[[[R,R],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[Xn(R),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:R,overloads:[[[R,R],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[Xn(R),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[R,[R],(t,[e])=>!e.evaluate(t)],"is-supported-script":[R,[Q],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Q,[Q],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Q,[Q],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Q,Xn(O),(t,e)=>e.map((e=>ut(e.evaluate(t)))).join("")],"resolved-locale":[Q,[N],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Wn,Jn=(Wn=!0,function(t,e){var n=Wn?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Wn=!1,n}),Zn=Jn(void 0,(function(){return Zn.toString().search("(((.+)+)+)+$").toString().constructor(Zn).search("(((.+)+)+)+$")}));function $n(t){return{result:"success",value:t}}function tr(t){return{result:"error",value:t}}Zn();var er,nr=(er=!0,function(t,e){var n=er?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return er=!1,n}),rr=nr(void 0,(function(){return rr.toString().search("(((.+)+)+)+$").toString().constructor(rr).search("(((.+)+)+)+$")}));function ir(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function or(t){return!!t.expression&&t.expression.interpolated}rr();var sr,ar=(sr=!0,function(t,e){var n=sr?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return sr=!1,n}),ur=ar(void 0,(function(){return ur.toString().search("(((.+)+)+)+$").toString().constructor(ur).search("(((.+)+)+)+$")}));function cr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}ur();const lr=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),hr=lr(void 0,(function(){return hr.toString().search("(((.+)+)+)+$").toString().constructor(hr).search("(((.+)+)+)+$")}));function Ar(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function fr(t){return t}function pr(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||void 0!==t.property,o=r||!i,s=t.type||(or(e)?"exponential":"interval");if(n&&((t=v({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],C.parse(t[1])]))),t.default?t.default=C.parse(t.default):t.default=C.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Ze[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let a,u,c;if("exponential"===s)a=mr;else if("interval"===s)a=yr;else if("categorical"===s){a=gr,u=Object.create(null);for(const e of t.stops)u[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==s)throw new Error('Unknown function type "'+s+'"');a=Ir}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,pr(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:en.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:({zoom:n},r)=>mr({stops:i,base:t.base},e,n).evaluate(n,r)}}if(o){const n="exponential"===s?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:en.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>a(t,e,n,u,c)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?dr(t.default,e.default):a(t,e,i,u,c)}}}function dr(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function gr(t,e,n,r,i){return dr(typeof n===i?r[n]:void 0,t.default,e.default)}function yr(t,e,n){if("number"!==cr(n))return dr(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=Ee(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function mr(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==cr(n))return dr(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=Ee(t.stops.map((t=>t[0])),n),s=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],u=t.stops[o+1][1];let c=Te[e.type]||fr;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Ze[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),s))}return"function"==typeof a.evaluate?{evaluate(...t){const e=a.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return c(e,n,s)}}:c(a,u,s)}function Ir(t,e,n){return"color"===e.type?n=C.parse(n):"formatted"===e.type?n=Z.fromString(n.toString()):"resolvedImage"===e.type?n=nt.fromString(n.toString()):cr(n)!==e.type&&("enum"!==e.type||!e.values[n])&&(n=void 0),dr(n,t.default,e.default)}hr();const Cr=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Er=Cr(void 0,(function(){return Er.toString().search("(((.+)+)+)+$").toString().constructor(Er).search("(((.+)+)+)+$")}));Er();class br{constructor(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new Tt,this._defaultValue=e?"color"===(n=e).type&&(Ar(n.default)||Array.isArray(n.default))?new C(0,0,0,0):"color"===n.type?C.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,s,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o,s,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new dt("Expected value to be one of "+Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")+", but found "+JSON.stringify(t)+" instead.");return t}catch(t){return!this._warningHistory[t.message]&&(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function vr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Hn}function xr(t,e){const n=new ye(Hn,[],e?function(t){const e={color:D,string:Q,number:S,enum:Q,boolean:R,formatted:F,resolvedImage:z};return"array"===t.type?k(e[t.value]||O,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?$n(new br(r,e)):tr(n.errors)}class wr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!le(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class Mr{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!le(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?en.interpolationFactor(this.interpolationType,t,e,n):0}}function Br(t,e){if("error"===(t=xr(t,e)).result)return t;const n=t.value.expression,r=ce(n);if(!r&&!ir(e))return tr([new x("","data expressions not supported")]);const i=he(n,["zoom","pitch","distance-from-center"]);if(!(i||(o=e,o.expression&&o.expression.parameters.indexOf("zoom")>-1)))return tr([new x("","zoom expressions not supported")]);var o;const s=Sr(n);if(!s&&!i)return tr([new x("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof x)return tr([s]);if(s instanceof en&&!or(e))return tr([new x("",'"interpolate" expressions cannot be used with this property')]);if(!s)return $n(new wr(r?"constant":"source",t.value));const a=s instanceof en?s.interpolation:void 0;return $n(new Mr(r?"camera":"composite",t.value,s.labels,a))}class _r{constructor(t,e){this._parameters=t,this._specification=e,v(this,pr(this._parameters,this._specification))}static deserialize(t){return new _r(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Sr(t){let e=null;if(t instanceof cn)e=Sr(t.result);else if(t instanceof sn){for(const n of t.args)if(e=Sr(n),e)break}else(t instanceof xe||t instanceof en)&&t.input instanceof zt&&"zoom"===t.input.name&&(e=t);return e instanceof x||t.eachChild((t=>{const n=Sr(t);n instanceof x?e=n:!e&&n?e=new x("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new x("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}var Qr,Rr=(Qr=!0,function(t,e){var n=Qr?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Qr=!1,n}),Dr=Rr(void 0,(function(){return Dr.toString().search("(((.+)+)+)+$").toString().constructor(Dr).search("(((.+)+)+)+$")}));function Tr(t,e){this.x=t,this.y=e}function Or(t){return null!=t}function Nr(t){var e;this.name="DeveloperError",this.message=t;try{throw new Error}catch(t){e=t.stack}this.stack=e}Dr(),Tr.prototype={clone:function(){return new Tr(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Tr.convert=function(t){return t instanceof Tr?t:Array.isArray(t)?new Tr(t[0],t[1]):t},Or(Object.create)&&(Nr.prototype=Object.create(Error.prototype),Nr.prototype.constructor=Nr),Nr.prototype.toString=function(){var t=this.name+": "+this.message;return Or(this.stack)&&(t+="\n"+this.stack.toString()),t},Nr.throwInstantiationError=function(){throw new Nr("This function defines an interface and should not be called directly.")};var Fr={};function zr(t,e,n){return"Expected "+n+" to be typeof "+e+", actual typeof was "+t}Fr.typeOf={},Fr.defined=function(t,e){if(!Or(e))throw new Nr(function(t){return t+" is required, actual value was undefined"}(t))},Fr.typeOf.func=function(t,e){if("function"!=typeof e)throw new Nr(zr(typeof e,"function",t))},Fr.typeOf.string=function(t,e){if("string"!=typeof e)throw new Nr(zr(typeof e,"string",t))},Fr.typeOf.number=function(t,e){if("number"!=typeof e)throw new Nr(zr(typeof e,"number",t))},Fr.typeOf.number.lessThan=function(t,e,n){if(Fr.typeOf.number(t,e),e>=n)throw new Nr("Expected "+t+" to be less than "+n+", actual value was "+e)},Fr.typeOf.number.lessThanOrEquals=function(t,e,n){if(Fr.typeOf.number(t,e),e>n)throw new Nr("Expected "+t+" to be less than or equal to "+n+", actual value was "+e)},Fr.typeOf.number.greaterThan=function(t,e,n){if(Fr.typeOf.number(t,e),e<=n)throw new Nr("Expected "+t+" to be greater than "+n+", actual value was "+e)},Fr.typeOf.number.greaterThanOrEquals=function(t,e,n){if(Fr.typeOf.number(t,e),e<n)throw new Nr("Expected "+t+" to be greater than or equal to"+n+", actual value was "+e)},Fr.typeOf.object=function(t,e){if("object"!=typeof e)throw new Nr(zr(typeof e,"object",t))},Fr.typeOf.bool=function(t,e){if("boolean"!=typeof e)throw new Nr(zr(typeof e,"boolean",t))},Fr.typeOf.number.equals=function(t,e,n,r){if(Fr.typeOf.number(t,n),Fr.typeOf.number(e,r),n!==r)throw new Nr(t+" must be equal to "+e+", the actual values are "+n+" and "+r)};var kr=Fr;function Lr(t,e){return null!=t?t:e}Lr.EMPTY_OBJECT=Object.freeze({});var Pr,jr,Ur="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kr=function(){if(jr)return Pr;jr=1;var t=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};return t.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(t,e){var n,r,i;for(this.init_seed(19650218),n=1,r=0,i=this.N>e?this.N:e;i;i--){var o=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&o)>>>16)<<16)+1664525*(65535&o))+t[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(i=this.N-1;i;i--){o=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&o)>>>16)<<16)+1566083941*(65535&o))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},Pr=t}(),Hr=qr(Kr),Yr={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,WEB_MERCATOR_MAX_EXTENT:20037508.342789244};Yr.sign=Lr(Math.sign,(function(t){return 0===(t=+t)||t!=t?t:t>0?1:-1})),Yr.signNotZero=function(t){return t<0?-1:1},Yr.toSNorm=function(t,e){return e=Lr(e,255),Math.round((.5*Yr.clamp(t,-1,1)+.5)*e)},Yr.fromSNorm=function(t,e){return e=Lr(e,255),Yr.clamp(t,0,e)/e*2-1},Yr.normalize=function(t,e,n){return 0===(n=Math.max(n-e,0))?0:Yr.clamp((t-e)/n,0,1)},Yr.sinh=Lr(Math.sinh,(function(t){return(Math.exp(t)-Math.exp(-t))/2})),Yr.cosh=Lr(Math.cosh,(function(t){return(Math.exp(t)+Math.exp(-t))/2})),Yr.lerp=function(t,e,n){return(1-n)*t+n*e},Yr.PI=Math.PI,Yr.ONE_OVER_PI=1/Math.PI,Yr.PI_OVER_TWO=Math.PI/2,Yr.PI_OVER_THREE=Math.PI/3,Yr.PI_OVER_FOUR=Math.PI/4,Yr.PI_OVER_SIX=Math.PI/6,Yr.THREE_PI_OVER_TWO=3*Math.PI/2,Yr.TWO_PI=2*Math.PI,Yr.ONE_OVER_TWO_PI=1/(2*Math.PI),Yr.RADIANS_PER_DEGREE=Math.PI/180,Yr.DEGREES_PER_RADIAN=180/Math.PI,Yr.RADIANS_PER_ARCSECOND=Yr.RADIANS_PER_DEGREE/3600,Yr.toRadians=function(t){if(!Or(t))throw new Nr("degrees is required.");return t*Yr.RADIANS_PER_DEGREE},Yr.toDegrees=function(t){if(!Or(t))throw new Nr("radians is required.");return t*Yr.DEGREES_PER_RADIAN},Yr.convertLongitudeRange=function(t){if(!Or(t))throw new Nr("angle is required.");var e=Yr.TWO_PI,n=t-Math.floor(t/e)*e;return n<-Math.PI?n+e:n>=Math.PI?n-e:n},Yr.clampToLatitudeRange=function(t){if(!Or(t))throw new Nr("angle is required.");return Yr.clamp(t,-1*Yr.PI_OVER_TWO,Yr.PI_OVER_TWO)},Yr.negativePiToPi=function(t){if(!Or(t))throw new Nr("angle is required.");return Yr.zeroToTwoPi(t+Yr.PI)-Yr.PI},Yr.zeroToTwoPi=function(t){if(!Or(t))throw new Nr("angle is required.");var e=Yr.mod(t,Yr.TWO_PI);return Math.abs(e)<Yr.EPSILON14&&Math.abs(t)>Yr.EPSILON14?Yr.TWO_PI:e},Yr.mod=function(t,e){if(!Or(t))throw new Nr("m is required.");if(!Or(e))throw new Nr("n is required.");return(t%e+e)%e},Yr.equalsEpsilon=function(t,e,n,r){if(!Or(t))throw new Nr("left is required.");if(!Or(e))throw new Nr("right is required.");if(!Or(n))throw new Nr("relativeEpsilon is required.");r=Lr(r,n);var i=Math.abs(t-e);return i<=r||i<=n*Math.max(Math.abs(t),Math.abs(e))},Yr.lessThan=function(t,e,n){if(!Or(t))throw new Nr("first is required.");if(!Or(e))throw new Nr("second is required.");if(!Or(n))throw new Nr("relativeEpsilon is required.");return t-e<-n},Yr.lessThanOrEquals=function(t,e,n){if(!Or(t))throw new Nr("first is required.");if(!Or(e))throw new Nr("second is required.");if(!Or(n))throw new Nr("relativeEpsilon is required.");return t-e<n},Yr.greaterThan=function(t,e,n){if(!Or(t))throw new Nr("first is required.");if(!Or(e))throw new Nr("second is required.");if(!Or(n))throw new Nr("relativeEpsilon is required.");return t-e>n},Yr.greaterThanOrEquals=function(t,e,n){if(!Or(t))throw new Nr("first is required.");if(!Or(e))throw new Nr("second is required.");if(!Or(n))throw new Nr("relativeEpsilon is required.");return t-e>-n};var Gr=[1];Yr.factorial=function(t){if("number"!=typeof t||t<0)throw new Nr("A number greater than or equal to 0 is required.");var e=Gr.length;if(t>=e)for(var n=Gr[e-1],r=e;r<=t;r++){var i=n*r;Gr.push(i),n=i}return Gr[t]},Yr.incrementWrap=function(t,e,n){if(n=Lr(n,0),!Or(t))throw new Nr("n is required.");if(e<=n)throw new Nr("maximumValue must be greater than minimumValue.");return++t>e&&(t=n),t},Yr.isPowerOfTwo=function(t){if("number"!=typeof t||t<0)throw new Nr("A number greater than or equal to 0 is required.");return 0!==t&&!(t&t-1)},Yr.nextPowerOfTwo=function(t){if("number"!=typeof t||t<0)throw new Nr("A number greater than or equal to 0 is required.");return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},Yr.clamp=function(t,e,n){if(!Or(t))throw new Nr("value is required");if(!Or(e))throw new Nr("min is required.");if(!Or(n))throw new Nr("max is required.");return t<e?e:t>n?n:t};var Vr=new Hr;Yr.setRandomNumberSeed=function(t){if(!Or(t))throw new Nr("seed is required.");Vr=new Hr(t)},Yr.nextRandomNumber=function(){return Vr.random()},Yr.randomBetween=function(t,e){return Yr.nextRandomNumber()*(e-t)+t},Yr.acosClamped=function(t){if(!Or(t))throw new Nr("value is required.");return Math.acos(Yr.clamp(t,-1,1))},Yr.asinClamped=function(t){if(!Or(t))throw new Nr("value is required.");return Math.asin(Yr.clamp(t,-1,1))},Yr.chordLength=function(t,e){if(!Or(t))throw new Nr("angle is required.");if(!Or(e))throw new Nr("radius is required.");return 2*e*Math.sin(.5*t)},Yr.logBase=function(t,e){if(!Or(t))throw new Nr("number is required.");if(!Or(e))throw new Nr("base is required.");return Math.log(t)/Math.log(e)},Yr.cbrt=Lr(Math.cbrt,(function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e})),Yr.log2=Lr(Math.log2,(function(t){return Math.log(t)*Math.LOG2E})),Yr.fog=function(t,e){var n=t*e;return 1-Math.exp(-n*n)},Yr.fastApproximateAtan=function(t){return kr.typeOf.number("x",t),t*(-.1784*Math.abs(t)-.0663*t*t+1.0301)},Yr.fastApproximateAtan2=function(t,e){var n,r;kr.typeOf.number("x",t),kr.typeOf.number("y",e);var i=Math.abs(t);n=Math.abs(e),r=Math.max(i,n);var o=(n=Math.min(i,n))/r;if(isNaN(o))throw new Nr("either x or y must be nonzero");return i=Yr.fastApproximateAtan(o),i=Math.abs(e)>Math.abs(t)?Yr.PI_OVER_TWO-i:i,i=t<0?Yr.PI-i:i,i=e<0?-i:i};var Xr=Yr;function Wr(t,e,n){this.x=Lr(t,0),this.y=Lr(e,0),this.z=Lr(n,0)}Wr.fromSpherical=function(t,e){kr.typeOf.object("spherical",t),Or(e)||(e=new Wr);var n=t.clock,r=t.cone,i=Lr(t.magnitude,1),o=i*Math.sin(r);return e.x=o*Math.cos(n),e.y=o*Math.sin(n),e.z=i*Math.cos(r),e},Wr.fromElements=function(t,e,n,r){return Or(r)?(r.x=t,r.y=e,r.z=n,r):new Wr(t,e,n)},Wr.clone=function(t,e){if(Or(t))return Or(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e):new Wr(t.x,t.y,t.z)},Wr.fromCartesian4=Wr.clone,Wr.packedLength=3,Wr.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.x,e[n++]=t.y,e[n]=t.z,e},Wr.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new Wr),n.x=t[e++],n.y=t[e++],n.z=t[e],n},Wr.packArray=function(t,e){kr.defined("array",t);var n=t.length,r=3*n;if(Or(e)){if(!Array.isArray(e)&&e.length!==r)throw new Nr("If result is a typed array, it must have exactly array.length * 3 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(var i=0;i<n;++i)Wr.pack(t[i],e,3*i);return e},Wr.unpackArray=function(t,e){if(kr.defined("array",t),kr.typeOf.number.greaterThanOrEquals("array.length",t.length,3),t.length%3!=0)throw new Nr("array length must be a multiple of 3.");var n=t.length;Or(e)?e.length=n/3:e=new Array(n/3);for(var r=0;r<n;r+=3){var i=r/3;e[i]=Wr.unpack(t,r,e[i])}return e},Wr.fromArray=Wr.unpack,Wr.maximumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z)},Wr.minimumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z)},Wr.minimumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n},Wr.maximumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n},Wr.magnitudeSquared=function(t){return kr.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z},Wr.magnitude=function(t){return Math.sqrt(Wr.magnitudeSquared(t))};var Jr=new Wr;Wr.distance=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),Wr.subtract(t,e,Jr),Wr.magnitude(Jr)},Wr.distanceSquared=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),Wr.subtract(t,e,Jr),Wr.magnitudeSquared(Jr)},Wr.normalize=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=Wr.magnitude(t);if(0===n)return t;if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new Nr("normalized result is not a number");return e},Wr.dot=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z},Wr.multiplyComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n},Wr.divideComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n},Wr.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n},Wr.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n},Wr.multiplyByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n},Wr.divideByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},Wr.negate=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e},Wr.abs=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e};var Zr=new Wr;Wr.lerp=function(t,e,n,r){return kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r),Wr.multiplyByScalar(e,n,Zr),r=Wr.multiplyByScalar(t,1-n,r),Wr.add(Zr,r,r)};var $r=new Wr,ti=new Wr;Wr.angleBetween=function(t,e){kr.typeOf.object("left",t),kr.typeOf.object("right",e),Wr.normalize(t,$r),Wr.normalize(e,ti);var n=Wr.dot($r,ti),r=Wr.magnitude(Wr.cross($r,ti,$r));return Math.atan2(r,n)};var ei=new Wr;Wr.mostOrthogonalAxis=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=Wr.normalize(t,ei);return Wr.abs(n,n),e=n.x<=n.y?n.x<=n.z?Wr.clone(Wr.UNIT_X,e):Wr.clone(Wr.UNIT_Z,e):n.y<=n.z?Wr.clone(Wr.UNIT_Y,e):Wr.clone(Wr.UNIT_Z,e)},Wr.projectVector=function(t,e,n){kr.defined("a",t),kr.defined("b",e),kr.defined("result",n);var r=Wr.dot(t,e)/Wr.dot(e,e);return Wr.multiplyByScalar(e,r,n)},Wr.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z},Wr.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]},Wr.equalsEpsilon=function(t,e,n,r){return t===e||Or(t)&&Or(e)&&Xr.equalsEpsilon(t.x,e.x,n,r)&&Xr.equalsEpsilon(t.y,e.y,n,r)&&Xr.equalsEpsilon(t.z,e.z,n,r)},Wr.cross=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n);var r=t.x,i=t.y,o=t.z,s=e.x,a=e.y,u=e.z,c=i*u-o*a,l=o*s-r*u,h=r*a-i*s;return n.x=c,n.y=l,n.z=h,n},Wr.midpoint=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=.5*(t.x+e.x),n.y=.5*(t.y+e.y),n.z=.5*(t.z+e.z),n},Wr.fromDegrees=function(t,e,n,r,i){return kr.typeOf.number("longitude",t),kr.typeOf.number("latitude",e),t=Xr.toRadians(t),e=Xr.toRadians(e),Wr.fromRadians(t,e,n,r,i)};var ni=new Wr,ri=new Wr,ii=new Wr(40680631590769,40680631590769,40408299984661.445);Wr.fromRadians=function(t,e,n,r,i){kr.typeOf.number("longitude",t),kr.typeOf.number("latitude",e),n=Lr(n,0);var o=Or(r)?r.radiiSquared:ii,s=Math.cos(e);ni.x=s*Math.cos(t),ni.y=s*Math.sin(t),ni.z=Math.sin(e),ni=Wr.normalize(ni,ni),Wr.multiplyComponents(o,ni,ri);var a=Math.sqrt(Wr.dot(ni,ri));return ri=Wr.divideByScalar(ri,a,ri),ni=Wr.multiplyByScalar(ni,n,ni),Or(i)||(i=new Wr),Wr.add(ri,ni,i)},Wr.fromDegreesArray=function(t,e,n){if(kr.defined("coordinates",t),t.length<2||t.length%2!=0)throw new Nr("the number of coordinates must be a multiple of 2 and at least 2");var r=t.length;Or(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var o=t[i],s=t[i+1],a=i/2;n[a]=Wr.fromDegrees(o,s,0,e,n[a])}return n},Wr.fromRadiansArray=function(t,e,n){if(kr.defined("coordinates",t),t.length<2||t.length%2!=0)throw new Nr("the number of coordinates must be a multiple of 2 and at least 2");var r=t.length;Or(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var o=t[i],s=t[i+1],a=i/2;n[a]=Wr.fromRadians(o,s,0,e,n[a])}return n},Wr.fromDegreesArrayHeights=function(t,e,n){if(kr.defined("coordinates",t),t.length<3||t.length%3!=0)throw new Nr("the number of coordinates must be a multiple of 3 and at least 3");var r=t.length;Or(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var o=t[i],s=t[i+1],a=t[i+2],u=i/3;n[u]=Wr.fromDegrees(o,s,a,e,n[u])}return n},Wr.fromRadiansArrayHeights=function(t,e,n){if(kr.defined("coordinates",t),t.length<3||t.length%3!=0)throw new Nr("the number of coordinates must be a multiple of 3 and at least 3");var r=t.length;Or(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var o=t[i],s=t[i+1],a=t[i+2],u=i/3;n[u]=Wr.fromRadians(o,s,a,e,n[u])}return n},Wr.reflectVector=function(t,e,n){var r=2*Wr.dot(t,e),i=new Wr;Wr.multiplyByScalar(e,r,i),Wr.subtract(t,i,n)},Wr.ZERO=Object.freeze(new Wr(0,0,0)),Wr.ONE=Object.freeze(new Wr(1,1,1)),Wr.UNIT_X=Object.freeze(new Wr(1,0,0)),Wr.UNIT_Y=Object.freeze(new Wr(0,1,0)),Wr.UNIT_Z=Object.freeze(new Wr(0,0,1)),Wr.UNIT_XYZ=Object.freeze(new Wr(1,1,1)),Wr.prototype.clone=function(t){return Wr.clone(this,t)},Wr.prototype.equals=function(t){return Wr.equals(this,t)},Wr.prototype.equalsEpsilon=function(t,e,n){return Wr.equalsEpsilon(this,t,e,n)},Wr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Wr.prototype.toArray=function(t,e){Wr.pack(this,t,e)},Wr.globalOffset=new Wr(0,0,0);var oi=new Wr,si=new Wr;function ai(t,e,n,r,i){if(!Or(t))throw new Nr("cartesian is required.");if(!Or(e))throw new Nr("oneOverRadii is required.");if(!Or(n))throw new Nr("oneOverRadiiSquared is required.");if(!Or(r))throw new Nr("centerToleranceSquared is required.");var o=t.x,s=t.y,a=t.z,u=e.x,c=e.y,l=e.z,h=o*o*u*u,A=s*s*c*c,f=a*a*l*l,p=h+A+f,d=Math.sqrt(1/p),g=Wr.multiplyByScalar(t,d,oi);if(p<r)return isFinite(d)?Wr.clone(g,i):void 0;var y=n.x,m=n.y,I=n.z,C=si;C.x=g.x*y*2,C.y=g.y*m*2,C.z=g.z*I*2;var E,b,v,x,w,M,B,_=(1-d)*Wr.magnitude(t)/(.5*Wr.magnitude(C)),S=0;do{S=(E=h*(w=(b=1/(1+(_-=S)*y))*b)+A*(M=(v=1/(1+_*m))*v)+f*(B=(x=1/(1+_*I))*x)-1)/(-2*(h*(w*b)*y+A*(M*v)*m+f*(B*x)*I))}while(Math.abs(E)>Xr.EPSILON12);return Or(i)?(i.x=o*b,i.y=s*v,i.z=a*x,i):new Wr(o*b,s*v,a*x)}function ui(t,e,n){this.longitude=Lr(t,0),this.latitude=Lr(e,0),this.height=Lr(n,0)}ui.fromRadians=function(t,e,n,r){return kr.typeOf.number("longitude",t),kr.typeOf.number("latitude",e),n=Lr(n,0),Or(r)?(r.longitude=t,r.latitude=e,r.height=n,r):new ui(t,e,n)},ui.fromDegrees=function(t,e,n,r){return kr.typeOf.number("longitude",t),kr.typeOf.number("latitude",e),t=Xr.toRadians(t),e=Xr.toRadians(e),ui.fromRadians(t,e,n,r)};var ci=new Wr,li=new Wr,hi=new Wr,Ai=new Wr(1/6378137,1/6378137,1/6356752.314245179),fi=new Wr(1/40680631590769,1/40680631590769,1/40408299984661.445),pi=Xr.EPSILON1;function di(t,e){this.x=Lr(t,0),this.y=Lr(e,0)}ui.fromCartesian=function(t,e,n){var r=Or(e)?e.oneOverRadii:Ai,i=Or(e)?e.oneOverRadiiSquared:fi,o=ai(t,r,i,Or(e)?e._centerToleranceSquared:pi,li);if(Or(o)){var s=Wr.multiplyComponents(o,i,ci);s=Wr.normalize(s,s);var a=Wr.subtract(t,o,hi),u=Math.atan2(s.y,s.x),c=Math.asin(s.z),l=Xr.sign(Wr.dot(a,t))*Wr.magnitude(a);return Or(n)?(n.longitude=u,n.latitude=c,n.height=l,n):new ui(u,c,l)}},ui.toCartesian=function(t,e,n){return kr.defined("cartographic",t),Wr.fromRadians(t.longitude,t.latitude,t.height,e,n)},ui.sphericalDistance=function(t,e,n,r){if(kr.defined("longitudeA",t),kr.defined("longitudeB",n),kr.defined("latitudeA",e),kr.defined("latitudeB",r),t===n&&e===r)return 0;var i=Xr.toRadians(e),o=Xr.toRadians(r),s=Xr.toRadians(t),a=Xr.toRadians(n),u=s*s+i*i,c=a*a+o*o,l=(u+c-((s-a)*(s-a)+(i-o)*(i-o)))/(2*Math.sqrt(u)*Math.sqrt(c));return l=Xr.clamp(l,-1,1),6378137*Math.acos(l)},ui.clone=function(t,e){if(Or(t))return Or(e)?(e.longitude=t.longitude,e.latitude=t.latitude,e.height=t.height,e):new ui(t.longitude,t.latitude,t.height)},ui.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.longitude===e.longitude&&t.latitude===e.latitude&&t.height===e.height},ui.equalsEpsilon=function(t,e,n){return kr.typeOf.number("epsilon",n),t===e||Or(t)&&Or(e)&&Math.abs(t.longitude-e.longitude)<=n&&Math.abs(t.latitude-e.latitude)<=n&&Math.abs(t.height-e.height)<=n},ui.ZERO=Object.freeze(new ui(0,0,0)),ui.prototype.clone=function(t){return ui.clone(this,t)},ui.prototype.equals=function(t){return ui.equals(this,t)},ui.prototype.equalsEpsilon=function(t,e){return ui.equalsEpsilon(this,t,e)},ui.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},di.fromElements=function(t,e,n){return Or(n)?(n.x=t,n.y=e,n):new di(t,e)},di.clone=function(t,e){if(Or(t))return Or(e)?(e.x=t.x,e.y=t.y,e):new di(t.x,t.y)},di.fromCartesian3=di.clone,di.fromCartesian4=di.clone,di.packedLength=2,di.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.x,e[n]=t.y,e},di.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new di),n.x=t[e++],n.y=t[e],n},di.packArray=function(t,e){kr.defined("array",t);var n=t.length,r=2*n;if(Or(e)){if(!Array.isArray(e)&&e.length!==r)throw new Nr("If result is a typed array, it must have exactly array.length * 2 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(var i=0;i<n;++i)di.pack(t[i],e,2*i);return e},di.unpackArray=function(t,e){if(kr.defined("array",t),kr.typeOf.number.greaterThanOrEquals("array.length",t.length,2),t.length%2!=0)throw new Nr("array length must be a multiple of 2.");var n=t.length;Or(e)?e.length=n/2:e=new Array(n/2);for(var r=0;r<n;r+=2){var i=r/2;e[i]=di.unpack(t,r,e[i])}return e},di.fromArray=di.unpack,di.maximumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.max(t.x,t.y)},di.minimumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.min(t.x,t.y)},di.minimumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n},di.maximumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n},di.magnitudeSquared=function(t){return kr.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y},di.magnitude=function(t){return Math.sqrt(di.magnitudeSquared(t))};var gi=new di;di.distance=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),di.subtract(t,e,gi),di.magnitude(gi)},di.distanceSquared=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),di.subtract(t,e,gi),di.magnitudeSquared(gi)},di.normalize=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=di.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,isNaN(e.x)||isNaN(e.y))throw new Nr("normalized result is not a number");return e},di.dot=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),t.x*e.x+t.y*e.y},di.multiplyComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n},di.divideComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n},di.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n},di.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n},di.multiplyByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n},di.divideByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n},di.negate=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e},di.abs=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e};var yi=new di;di.lerp=function(t,e,n,r){return kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r),di.multiplyByScalar(e,n,yi),r=di.multiplyByScalar(t,1-n,r),di.add(yi,r,r)};var mi=new di,Ii=new di;di.angleBetween=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),di.normalize(t,mi),di.normalize(e,Ii),Xr.acosClamped(di.dot(mi,Ii))};var Ci=new di;function Ei(t,e,n,r){this.x=Lr(t,0),this.y=Lr(e,0),this.z=Lr(n,0),this.w=Lr(r,0)}di.mostOrthogonalAxis=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=di.normalize(t,Ci);return di.abs(n,n),e=n.x<=n.y?di.clone(di.UNIT_X,e):di.clone(di.UNIT_Y,e)},di.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.x===e.x&&t.y===e.y},di.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]},di.equalsEpsilon=function(t,e,n,r){return t===e||Or(t)&&Or(e)&&Xr.equalsEpsilon(t.x,e.x,n,r)&&Xr.equalsEpsilon(t.y,e.y,n,r)},di.ZERO=Object.freeze(new di(0,0)),di.UNIT_X=Object.freeze(new di(1,0)),di.UNIT_Y=Object.freeze(new di(0,1)),di.prototype.clone=function(t){return di.clone(this,t)},di.prototype.equals=function(t){return di.equals(this,t)},di.prototype.equalsEpsilon=function(t,e,n){return di.equalsEpsilon(this,t,e,n)},di.prototype.toString=function(){return"("+this.x+", "+this.y+")"},di.prototype.toArray=function(t,e){di.pack(this,t,e)},Ei.fromElements=function(t,e,n,r,i){return Or(i)?(i.x=t,i.y=e,i.z=n,i.w=r,i):new Ei(t,e,n,r)},Ei.fromColor=function(t,e){return kr.typeOf.object("color",t),Or(e)?(e.x=t.red,e.y=t.green,e.z=t.blue,e.w=t.alpha,e):new Ei(t.red,t.green,t.blue,t.alpha)},Ei.clone=function(t,e){if(Or(t))return Or(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new Ei(t.x,t.y,t.z,t.w)},Ei.packedLength=4,Ei.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},Ei.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new Ei),n.x=t[e++],n.y=t[e++],n.z=t[e++],n.w=t[e],n},Ei.packArray=function(t,e){kr.defined("array",t);var n=t.length,r=4*n;if(Or(e)){if(!Array.isArray(e)&&e.length!==r)throw new Nr("If result is a typed array, it must have exactly array.length * 4 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(var i=0;i<n;++i)Ei.pack(t[i],e,4*i);return e},Ei.unpackArray=function(t,e){if(kr.defined("array",t),kr.typeOf.number.greaterThanOrEquals("array.length",t.length,4),t.length%4!=0)throw new Nr("array length must be a multiple of 4.");var n=t.length;Or(e)?e.length=n/4:e=new Array(n/4);for(var r=0;r<n;r+=4){var i=r/4;e[i]=Ei.unpack(t,r,e[i])}return e},Ei.fromArray=Ei.unpack,Ei.maximumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z,t.w)},Ei.minimumComponent=function(t){return kr.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z,t.w)},Ei.minimumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n.w=Math.min(t.w,e.w),n},Ei.maximumByComponent=function(t,e,n){return kr.typeOf.object("first",t),kr.typeOf.object("second",e),kr.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n.w=Math.max(t.w,e.w),n},Ei.magnitudeSquared=function(t){return kr.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},Ei.magnitude=function(t){return Math.sqrt(Ei.magnitudeSquared(t))};var bi=new Ei;Ei.distance=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),Ei.subtract(t,e,bi),Ei.magnitude(bi)},Ei.distanceSquared=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),Ei.subtract(t,e,bi),Ei.magnitudeSquared(bi)},Ei.normalize=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=Ei.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,e.w=t.w/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||isNaN(e.w))throw new Nr("normalized result is not a number");return e},Ei.dot=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},Ei.multiplyComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n.w=t.w*e.w,n},Ei.divideComponents=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n.w=t.w/e.w,n},Ei.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},Ei.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},Ei.multiplyByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},Ei.divideByScalar=function(t,e,n){return kr.typeOf.object("cartesian",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},Ei.negate=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},Ei.abs=function(t,e){return kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e.w=Math.abs(t.w),e};var vi=new Ei;Ei.lerp=function(t,e,n,r){return kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r),Ei.multiplyByScalar(e,n,vi),r=Ei.multiplyByScalar(t,1-n,r),Ei.add(vi,r,r)};var xi=new Ei;Ei.mostOrthogonalAxis=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=Ei.normalize(t,xi);return Ei.abs(n,n),e=n.x<=n.y?n.x<=n.z?n.x<=n.w?Ei.clone(Ei.UNIT_X,e):Ei.clone(Ei.UNIT_W,e):n.z<=n.w?Ei.clone(Ei.UNIT_Z,e):Ei.clone(Ei.UNIT_W,e):n.y<=n.z?n.y<=n.w?Ei.clone(Ei.UNIT_Y,e):Ei.clone(Ei.UNIT_W,e):n.z<=n.w?Ei.clone(Ei.UNIT_Z,e):Ei.clone(Ei.UNIT_W,e)},Ei.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},Ei.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]&&t.w===e[n+3]},Ei.equalsEpsilon=function(t,e,n,r){return t===e||Or(t)&&Or(e)&&Xr.equalsEpsilon(t.x,e.x,n,r)&&Xr.equalsEpsilon(t.y,e.y,n,r)&&Xr.equalsEpsilon(t.z,e.z,n,r)&&Xr.equalsEpsilon(t.w,e.w,n,r)},Ei.ZERO=Object.freeze(new Ei(0,0,0,0)),Ei.UNIT_X=Object.freeze(new Ei(1,0,0,0)),Ei.UNIT_Y=Object.freeze(new Ei(0,1,0,0)),Ei.UNIT_Z=Object.freeze(new Ei(0,0,1,0)),Ei.UNIT_W=Object.freeze(new Ei(0,0,0,1)),Ei.prototype.clone=function(t){return Ei.clone(this,t)},Ei.prototype.equals=function(t){return Ei.equals(this,t)},Ei.prototype.equalsEpsilon=function(t,e,n){return Ei.equalsEpsilon(this,t,e,n)},Ei.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var wi=new Float32Array(1),Mi=256,Bi=1/65536,_i=1/16777216;function Si(t,e,n){kr.defined("array",t),kr.defined("itemToFind",e),kr.defined("comparator",n);for(var r,i,o=0,s=t.length-1;o<=s;)if((i=n(t[r=~~((o+s)/2)],e))<0)o=r+1;else{if(!(i>0))return r;s=r-1}return~(s+1)}function Qi(t,e,n,r,i){this.xPoleWander=t,this.yPoleWander=e,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=i}function Ri(){var t=arguments,e=0,n=t[e++],r=function(t,e,n,r){n||(n=" ");var i=t.length>=e?"":Array(1+e-t.length>>>0).join(n);return r?t+i:i+t},i=function(t,e,n,i,o,s){var a=i-t.length;return a>0&&(t=n||!o?r(t,i,s,n):t.slice(0,e.length)+r("",a,"0",!0)+t.slice(e.length)),t},o=function(t,e,n,o,s,a,u){var c=t>>>0;return t=(n=n&&c&&{2:"0b",8:"0",16:"0x"}[e]||"")+r(c.toString(e),a||0,"0",!1),i(t,n,o,s,u)},s=function(t,e,n,r,o,s){return null!=r&&(t=t.slice(0,r)),i(t,"",e,n,o,s)};return n.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,(function(n,a,u,c,l,h,A){var f,p,d,g,y;if("%%"==n)return"%";for(var m=!1,I="",C=!1,E=!1,b=" ",v=u.length,x=0;u&&x<v;x++)switch(u.charAt(x)){case" ":I=" ";break;case"+":I="+";break;case"-":m=!0;break;case"'":b=u.charAt(x+1);break;case"0":C=!0;break;case"#":E=!0}if((c=c?"*"==c?+t[e++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:0)<0&&(c=-c,m=!0),!isFinite(c))throw new Error("sprintf: (minimum-)width must be finite");switch(h=h?"*"==h?+t[e++]:"*"==h.charAt(0)?+t[h.slice(1,-1)]:+h:"fFeE".indexOf(A)>-1?6:"d"==A?0:void 0,y=a?t[a.slice(0,-1)]:t[e++],A){case"s":return s(String(y),m,c,h,C,b);case"c":return s(String.fromCharCode(+y),m,c,h,C);case"b":return o(y,2,E,m,c,h,C);case"o":return o(y,8,E,m,c,h,C);case"x":return o(y,16,E,m,c,h,C);case"X":return o(y,16,E,m,c,h,C).toUpperCase();case"u":return o(y,10,E,m,c,h,C);case"i":case"d":return f=+y||0,y=(p=(f=Math.round(f-f%1))<0?"-":I)+r(String(Math.abs(f)),h,"0",!1),i(y,p,m,c,C);case"e":case"E":case"f":case"F":case"g":case"G":return p=(f=+y)<0?"-":I,d=["toExponential","toFixed","toPrecision"]["efg".indexOf(A.toLowerCase())],g=["toString","toUpperCase"]["eEfFgG".indexOf(A)%2],y=p+Math.abs(f)[d](h),i(y,p,m,c,C)[g]();default:return n}}))}function Di(t,e,n,r,i,o,s,a){this.year=t,this.month=e,this.day=n,this.hour=r,this.minute=i,this.second=o,this.millisecond=s,this.isLeapSecond=a}function Ti(t){if(null===t||isNaN(t))throw new Nr("year is required and must be a number.");return t%4==0&&t%100!=0||t%400==0}function Oi(t,e){this.julianDate=t,this.offset=e}Ei.packFloat=function(t,e){if(kr.typeOf.number("value",t),Or(e)||(e=new Ei),wi[0]=t,0===(t=wi[0]))return Ei.clone(Ei.ZERO,e);var n,r=t<0?1:0;isFinite(t)?(t=Math.abs(t),n=Math.floor(Xr.logBase(t,10))+1,t/=Math.pow(10,n)):(t=.1,n=38);var i=t*Mi;return e.x=Math.floor(i),i=(i-e.x)*Mi,e.y=Math.floor(i),i=(i-e.y)*Mi,e.z=Math.floor(i),e.w=2*(n+38)+r,e},Ei.unpackFloat=function(t){kr.typeOf.object("packedFloat",t);var e=t.w/2,n=Math.floor(e),r=2*(e-n);if(r=-(r=2*r-1),(n-=38)>=38)return r<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var i=r*t.x*.00390625;return i+=r*t.y*Bi,(i+=r*t.z*_i)*Math.pow(10,n)},Ei.prototype.toArray=function(t,e){Ei.pack(this,t,e)};var Ni=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Fi=Object.freeze({UTC:0,TAI:1}),zi=new Di,ki=[31,28,31,30,31,30,31,31,30,31,30,31];function Li(t,e){return eo.compare(t.julianDate,e.julianDate)}var Pi=new Oi;function ji(t){Pi.julianDate=t;var e=eo.leapSeconds,n=Si(e,Pi,Li);n<0&&(n=~n),n>=e.length&&(n=e.length-1);var r=e[n].offset;n>0&&(eo.secondsDifference(e[n].julianDate,t)>r&&(r=e[--n].offset));eo.addSeconds(t,r,t)}function Ui(t,e){Pi.julianDate=t;var n=eo.leapSeconds,r=Si(n,Pi,Li);if(r<0&&(r=~r),0===r)return eo.addSeconds(t,-n[0].offset,e);if(r>=n.length)return eo.addSeconds(t,-n[r-1].offset,e);var i=eo.secondsDifference(n[r].julianDate,t);return 0===i?eo.addSeconds(t,-n[r].offset,e):i<=1?void 0:eo.addSeconds(t,-n[--r].offset,e)}function qi(t,e,n){var r=e/Ni.SECONDS_PER_DAY|0;return t+=r,(e-=Ni.SECONDS_PER_DAY*r)<0&&(t--,e+=Ni.SECONDS_PER_DAY),n.dayNumber=t,n.secondsOfDay=e,n}function Ki(t,e,n,r,i,o,s){var a=(e-14)/12|0,u=t+4800+a,c=(1461*u/4|0)+(367*(e-2-12*a)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var l=o+(r*Ni.SECONDS_PER_HOUR+i*Ni.SECONDS_PER_MINUTE+s*Ni.SECONDS_PER_MILLISECOND);return l>=43200&&(c-=1),[c,l]}var Hi=/^(\d{4})$/,Yi=/^(\d{4})-(\d{2})$/,Gi=/^(\d{4})-?(\d{3})$/,Vi=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Xi=/^(\d{4})-?(\d{2})-?(\d{2})$/,Wi=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Ji=/^(\d{2})(\.\d+)?/.source+Wi.source,Zi=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Wi.source,$i=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Wi.source,to="Invalid ISO 8601 date.";function eo(t,e,n){this.dayNumber=void 0,this.secondsOfDay=void 0,t=Lr(t,0),e=Lr(e,0),n=Lr(n,Fi.UTC);var r=0|t;qi(r,e+=(t-r)*Ni.SECONDS_PER_DAY,this),n===Fi.UTC&&ji(this)}eo.fromGregorianDate=function(t,e){if(!(t instanceof Di))throw new Nr("date must be a valid GregorianDate.");var n=Ki(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond);return Or(e)?(qi(n[0],n[1],e),ji(e),e):new eo(n[0],n[1],Fi.UTC)},eo.fromDate=function(t,e){if(!(t instanceof Date)||isNaN(t.getTime()))throw new Nr("date must be a valid JavaScript Date.");var n=Ki(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return Or(e)?(qi(n[0],n[1],e),ji(e),e):new eo(n[0],n[1],Fi.UTC)},eo.fromIso8601=function(t,e){if("string"!=typeof t)throw new Nr(to);var n,r,i,o,s,a=(t=t.replace(",",".")).split("T"),u=1,c=1,l=0,h=0,A=0,f=0,p=a[0],d=a[1];if(!Or(p))throw new Nr(to);if(null!==(a=p.match(Xi))){if((o=p.split("-").length-1)>0&&2!==o)throw new Nr(to);n=+a[1],u=+a[2],c=+a[3]}else if(null!==(a=p.match(Yi)))n=+a[1],u=+a[2];else if(null!==(a=p.match(Hi)))n=+a[1];else{var g;if(null!==(a=p.match(Gi))){if(n=+a[1],g=+a[2],i=Ti(n),g<1||i&&g>366||!i&&g>365)throw new Nr(to)}else{if(null===(a=p.match(Vi)))throw new Nr(to);n=+a[1];var y=+a[2],m=+a[3]||0;if((o=p.split("-").length-1)>0&&(!Or(a[3])&&1!==o||Or(a[3])&&2!==o))throw new Nr(to);g=7*y+m-new Date(Date.UTC(n,0,4)).getUTCDay()-3}(r=new Date(Date.UTC(n,0,1))).setUTCDate(g),u=r.getUTCMonth()+1,c=r.getUTCDate()}if(i=Ti(n),u<1||u>12||c<1||(2!==u||!i)&&c>ki[u-1]||i&&2===u&&c>29)throw new Nr(to);if(Or(d)){if(null!==(a=d.match($i))){if((o=d.split(":").length-1)>0&&2!==o&&3!==o)throw new Nr(to);l=+a[1],h=+a[2],A=+a[3],f=1e3*+(a[4]||0),s=5}else if(null!==(a=d.match(Zi))){if((o=d.split(":").length-1)>2)throw new Nr(to);l=+a[1],h=+a[2],A=60*+(a[3]||0),s=4}else{if(null===(a=d.match(Ji)))throw new Nr(to);l=+a[1],h=60*+(a[2]||0),s=3}if(h>=60||A>=61||l>24||24===l&&(h>0||A>0||f>0))throw new Nr(to);var I=a[s],C=+a[s+1],E=+(a[s+2]||0);switch(I){case"+":l-=C,h-=E;break;case"-":l+=C,h+=E;break;case"Z":break;default:h+=new Date(Date.UTC(n,u-1,c,l,h)).getTimezoneOffset()}}var b=60===A;for(b&&A--;h>=60;)h-=60,l++;for(;l>=24;)l-=24,c++;for(r=i&&2===u?29:ki[u-1];c>r;)c-=r,++u>12&&(u-=12,n++),r=i&&2===u?29:ki[u-1];for(;h<0;)h+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,n--),c+=r=i&&2===u?29:ki[u-1];var v=Ki(n,u,c,l,h,A,f);return Or(e)?(qi(v[0],v[1],e),ji(e)):e=new eo(v[0],v[1],Fi.UTC),b&&eo.addSeconds(e,1,e),e},eo.now=function(t){return eo.fromDate(new Date,t)};var no=new eo(0,0,Fi.TAI);eo.toGregorianDate=function(t,e){if(!Or(t))throw new Nr("julianDate is required.");var n=!1,r=Ui(t,no);Or(r)||(eo.addSeconds(t,-1,no),r=Ui(no,no),n=!0);var i=r.dayNumber,o=r.secondsOfDay;o>=43200&&(i+=1);var s=i+68569|0,a=4*s/146097|0,u=4e3*((s=s-((146097*a+3)/4|0)|0)+1)/1461001|0,c=80*(s=s-(1461*u/4|0)+31|0)/2447|0,l=s-(2447*c/80|0)|0,h=c+2-12*(s=c/11|0)|0,A=100*(a-49)+u+s|0,f=o/Ni.SECONDS_PER_HOUR|0,p=o-f*Ni.SECONDS_PER_HOUR,d=p/Ni.SECONDS_PER_MINUTE|0,g=0|(p-=d*Ni.SECONDS_PER_MINUTE),y=(p-g)/Ni.SECONDS_PER_MILLISECOND;return(f+=12)>23&&(f-=24),n&&(g+=1),Or(e)?(e.year=A,e.month=h,e.day=l,e.hour=f,e.minute=d,e.second=g,e.millisecond=y,e.isLeapSecond=n,e):new Di(A,h,l,f,d,g,y,n)},eo.toDate=function(t){if(!Or(t))throw new Nr("julianDate is required.");var e=eo.toGregorianDate(t,zi),n=e.second;return e.isLeapSecond&&(n-=1),new Date(Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,n,e.millisecond))},eo.toIso8601=function(t,e){if(!Or(t))throw new Nr("julianDate is required.");var n=eo.toGregorianDate(t,zi),r=n.year,i=n.month,o=n.day,s=n.hour,a=n.minute,u=n.second,c=n.millisecond;return 1e4===r&&1===i&&1===o&&0===s&&0===a&&0===u&&0===c&&(r=9999,i=12,o=31,s=24),Or(e)||0===c?Or(e)&&0!==e?Ri("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,o,s,a,u,(.01*c).toFixed(e).replace(".","").slice(0,e)):Ri("%04d-%02d-%02dT%02d:%02d:%02dZ",r,i,o,s,a,u):Ri("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,o,s,a,u,(.01*c).toString().replace(".",""))},eo.clone=function(t,e){if(Or(t))return Or(e)?(e.dayNumber=t.dayNumber,e.secondsOfDay=t.secondsOfDay,e):new eo(t.dayNumber,t.secondsOfDay,Fi.TAI)},eo.compare=function(t,e){if(!Or(t))throw new Nr("left is required.");if(!Or(e))throw new Nr("right is required.");var n=t.dayNumber-e.dayNumber;return 0!==n?n:t.secondsOfDay-e.secondsOfDay},eo.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.dayNumber===e.dayNumber&&t.secondsOfDay===e.secondsOfDay},eo.equalsEpsilon=function(t,e,n){if(!Or(n))throw new Nr("epsilon is required.");return t===e||Or(t)&&Or(e)&&Math.abs(eo.secondsDifference(t,e))<=n},eo.totalDays=function(t){if(!Or(t))throw new Nr("julianDate is required.");return t.dayNumber+t.secondsOfDay/Ni.SECONDS_PER_DAY},eo.secondsDifference=function(t,e){if(!Or(t))throw new Nr("left is required.");if(!Or(e))throw new Nr("right is required.");return(t.dayNumber-e.dayNumber)*Ni.SECONDS_PER_DAY+(t.secondsOfDay-e.secondsOfDay)},eo.daysDifference=function(t,e){if(!Or(t))throw new Nr("left is required.");if(!Or(e))throw new Nr("right is required.");return t.dayNumber-e.dayNumber+(t.secondsOfDay-e.secondsOfDay)/Ni.SECONDS_PER_DAY},eo.computeTaiMinusUtc=function(t){Pi.julianDate=t;var e=eo.leapSeconds,n=Si(e,Pi,Li);return n<0&&(n=~n,--n<0&&(n=0)),e[n].offset},eo.addSeconds=function(t,e,n){if(!Or(t))throw new Nr("julianDate is required.");if(!Or(e))throw new Nr("seconds is required.");if(!Or(n))throw new Nr("result is required.");return qi(t.dayNumber,t.secondsOfDay+e,n)},eo.addMinutes=function(t,e,n){if(!Or(t))throw new Nr("julianDate is required.");if(!Or(e))throw new Nr("minutes is required.");if(!Or(n))throw new Nr("result is required.");var r=t.secondsOfDay+e*Ni.SECONDS_PER_MINUTE;return qi(t.dayNumber,r,n)},eo.addHours=function(t,e,n){if(!Or(t))throw new Nr("julianDate is required.");if(!Or(e))throw new Nr("hours is required.");if(!Or(n))throw new Nr("result is required.");var r=t.secondsOfDay+e*Ni.SECONDS_PER_HOUR;return qi(t.dayNumber,r,n)},eo.addDays=function(t,e,n){if(!Or(t))throw new Nr("julianDate is required.");if(!Or(e))throw new Nr("days is required.");if(!Or(n))throw new Nr("result is required.");return qi(t.dayNumber+e,t.secondsOfDay,n)},eo.lessThan=function(t,e){return eo.compare(t,e)<0},eo.lessThanOrEquals=function(t,e){return eo.compare(t,e)<=0},eo.greaterThan=function(t,e){return eo.compare(t,e)>0},eo.greaterThanOrEquals=function(t,e){return eo.compare(t,e)>=0},eo.prototype.clone=function(t){return eo.clone(this,t)},eo.prototype.equals=function(t){return eo.equals(this,t)},eo.prototype.equalsEpsilon=function(t,e){return eo.equalsEpsilon(this,t,e)},eo.prototype.toString=function(){return eo.toIso8601(this)},eo.leapSeconds=[new Oi(new eo(2441317,43210,Fi.TAI),10),new Oi(new eo(2441499,43211,Fi.TAI),11),new Oi(new eo(2441683,43212,Fi.TAI),12),new Oi(new eo(2442048,43213,Fi.TAI),13),new Oi(new eo(2442413,43214,Fi.TAI),14),new Oi(new eo(2442778,43215,Fi.TAI),15),new Oi(new eo(2443144,43216,Fi.TAI),16),new Oi(new eo(2443509,43217,Fi.TAI),17),new Oi(new eo(2443874,43218,Fi.TAI),18),new Oi(new eo(2444239,43219,Fi.TAI),19),new Oi(new eo(2444786,43220,Fi.TAI),20),new Oi(new eo(2445151,43221,Fi.TAI),21),new Oi(new eo(2445516,43222,Fi.TAI),22),new Oi(new eo(2446247,43223,Fi.TAI),23),new Oi(new eo(2447161,43224,Fi.TAI),24),new Oi(new eo(2447892,43225,Fi.TAI),25),new Oi(new eo(2448257,43226,Fi.TAI),26),new Oi(new eo(2448804,43227,Fi.TAI),27),new Oi(new eo(2449169,43228,Fi.TAI),28),new Oi(new eo(2449534,43229,Fi.TAI),29),new Oi(new eo(2450083,43230,Fi.TAI),30),new Oi(new eo(2450630,43231,Fi.TAI),31),new Oi(new eo(2451179,43232,Fi.TAI),32),new Oi(new eo(2453736,43233,Fi.TAI),33),new Oi(new eo(2454832,43234,Fi.TAI),34),new Oi(new eo(2456109,43235,Fi.TAI),35),new Oi(new eo(2457204,43236,Fi.TAI),36),new Oi(new eo(2457754,43237,Fi.TAI),37)];var ro,io={exports:{}},oo={exports:{}},so=oo.exports;var ao,uo={exports:{}},co=uo.exports;
/*!
     * URI.js - Mutating URLs
     * IPv6 Support
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */var lo,ho={exports:{}},Ao=ho.exports;
/*!
     * URI.js - Mutating URLs
     * Second Level Domain (SLD) Support
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */
/*!
     * URI.js - Mutating URLs
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */
var fo,po=io.exports;var go=(fo||(fo=1,function(t){var e,n;e=po,n=function(t,e,n,r){var i=r&&r.URI;function o(t,e){var n=arguments.length>=1;if(!(this instanceof o))return n?arguments.length>=2?new o(t,e):new o(t):new o;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&n)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}o.version="1.19.11";var s=o.prototype,a=Object.prototype.hasOwnProperty;function u(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function l(t){return"Array"===c(t)}function h(t,e){var n,r,i={};if("RegExp"===c(e))i=null;else if(l(e))for(n=0,r=e.length;n<r;n++)i[e[n]]=!0;else i[e]=!0;for(n=0,r=t.length;n<r;n++)(i&&void 0!==i[t[n]]||!i&&e.test(t[n]))&&(t.splice(n,1),r--,n--);return t}function A(t,e){var n,r;if(l(e)){for(n=0,r=e.length;n<r;n++)if(!A(t,e[n]))return!1;return!0}var i=c(e);for(n=0,r=t.length;n<r;n++)if("RegExp"===i){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function f(t,e){if(!l(t)||!l(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function p(t){return t.replace(/^\/+|\/+$/g,"")}function d(t){return escape(t)}function g(t){return encodeURIComponent(t).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.domAttributes[e]}},o.encode=g,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=g,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return void 0===e&&(e=o.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="",void 0===e&&(e=o.escapeQuerySpace);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var y,m={encode:"encode",decode:"decode"},I=function(t,e){return function(n){try{return o[e](n+"").replace(o.characters[t][e].expression,(function(n){return o.characters[t][e].map[n]}))}catch(t){return n}}};for(y in m)o[y+"PathSegment"]=I("pathname",m[y]),o[y+"UrnPathSegment"]=I("urnpath",m[y]);var C=function(t,e,n){return function(r){var i;i=n?function(t){return o[e](o[n](t))}:o[e];for(var s=(r+"").split(t),a=0,u=s.length;a<u;a++)s[a]=i(s[a]);return s.join(t)}};function E(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function b(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="").charAt(0)===e&&(n=n.substring(1)),this._parts[t]=n,this.build(!r),this)}}o.decodePath=C("/","decodePathSegment"),o.decodeUrnPath=C(":","decodeUrnPathSegment"),o.recodePath=C("/","encodePathSegment","decode"),o.recodeUrnPath=C(":","encodeUrnPathSegment","decode"),o.encodeReserved=I("reserved","encode"),o.parse=function(t,e){var n;return e||(e={preventInvalidHostname:o.preventInvalidHostname}),(n=(t=(t=t.replace(o.leading_whitespace_expression,"")).replace(o.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),(n=t.indexOf("?"))>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3).replace(/\\/g,"/")?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0)),e.path=t,e},o.parseHost=function(t,e){t||(t="");var n,r,i=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===i&&(i=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,i)||null,"/"===e.port&&(e.port=null);else{var s=t.indexOf(":"),a=t.indexOf("/"),u=t.indexOf(":",s+1);-1!==u&&(-1===a||u<a)?(e.hostname=t.substring(0,i)||null,e.port=null):(r=t.substring(0,i).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),e.preventInvalidHostname&&o.ensureValidHostname(e.hostname,e.protocol),e.port&&o.ensureValidPort(e.port),t.substring(i)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var r,i=t.indexOf("/"),s=t.lastIndexOf("@",i>-1?i:t.length-1);return s>-1&&(-1===i||s<i)?(r=t.substring(0,s).split(":"),e.username=r[0]?o.decode(r[0]):null,r.shift(),e.password=r[0]?o.decode(r.join(":")):null,t=n.substring(s+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,r,i,s={},u=t.split("&"),c=u.length,l=0;l<c;l++)n=u[l].split("="),r=o.decodeQuery(n.shift(),e),i=n.length?o.decodeQuery(n.join("="),e):null,"__proto__"!==r&&(a.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(i)):s[r]=i);return s},o.build=function(t){var e="",n=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",n=!0),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&n&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username)),t.password&&(e+=":"+o.encode(t.password)),e&&(e+="@"),e},o.buildQuery=function(t,e,n){var r,i,s,u,c="";for(i in t)if("__proto__"!==i&&a.call(t,i))if(l(t[i]))for(r={},s=0,u=t[i].length;s<u;s++)void 0!==t[i][s]&&void 0===r[t[i][s]+""]&&(c+="&"+o.buildQueryParameter(i,t[i][s],n),!0!==e&&(r[t[i][s]+""]=!0));else void 0!==t[i]&&(c+="&"+o.buildQueryParameter(i,t[i],n));return c.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)a.call(e,r)&&o.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),l(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},o.setQuery=function(t,e,n){if("object"==typeof e)for(var r in e)a.call(e,r)&&o.setQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===n?null:n}},o.removeQuery=function(t,e,n){var r,i,s;if(l(e))for(r=0,i=e.length;r<i;r++)t[e[r]]=void 0;else if("RegExp"===c(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"==typeof e)for(s in e)a.call(e,s)&&o.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===c(n)?!l(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=h(t[e],n):t[e]!==String(n)||l(n)&&1!==n.length?l(t[e])&&(t[e]=h(t[e],n)):t[e]=void 0:t[e]=void 0}},o.hasQuery=function(t,e,n,r){switch(c(e)){case"String":break;case"RegExp":for(var i in t)if(a.call(t,i)&&e.test(i)&&(void 0===n||o.hasQuery(t,i,n)))return!0;return!1;case"Object":for(var s in e)if(a.call(e,s)&&!o.hasQuery(t,s,e[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(n)){case"Undefined":return e in t;case"Boolean":return n===Boolean(l(t[e])?t[e].length:t[e]);case"Function":return!!n(t[e],e,t);case"Array":return!!l(t[e])&&(r?A:f)(t[e],n);case"RegExp":return l(t[e])?!!r&&A(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return l(t[e])?!!r&&A(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var t=[],e=[],n=0,r=0;r<arguments.length;r++){var i=new o(arguments[r]);t.push(i);for(var s=i.segment(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&n++}if(!e.length||!n)return new o("");var u=new o("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,s=n.trim||o.findUri.trim,a=n.parens||o.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(t);if(!c)break;var l=c.index;if(n.ignoreHtml){var h=t.slice(Math.max(l-3,0),l);if(h&&u.test(h))continue}for(var A=l+t.slice(l).search(i),f=t.slice(l,A),p=-1;;){var d=a.exec(f);if(!d)break;var g=d.index+d[0].length;p=Math.max(p,g)}if(!((f=p>-1?f.slice(0,p)+f.slice(p).replace(s,""):f.replace(s,"")).length<=c[0].length||n.ignore&&n.ignore.test(f))){var y=e(f,l,A=l+f.length,t);void 0!==y?(y=String(y),t=t.slice(0,l)+y+t.slice(A),r.lastIndex=l+y.length):r.lastIndex=A}}return r.lastIndex=0,t},o.ensureValidHostname=function(e,n){var r=!!e,i=!1;if(!!n&&(i=A(o.hostProtocols,n)),i&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(e&&e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},o.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=i),this},s.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new o(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=E("protocol"),s.username=E("username"),s.password=E("password"),s.hostname=E("hostname"),s.port=E("port"),s.query=b("query","?"),s.fragment=b("fragment","#"),s.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},s.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},s.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=t?o.recodeUrnPath(t):"":this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},s.path=s.pathname,s.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var r=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[o.getDomAttribute(t)]||"",i=!1),!r&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=o.parse(String(t),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var s=r?t._parts:t;for(n in s)"query"!==n&&a.call(this._parts,n)&&(this._parts[n]=s[n]);s.query&&this.query(s.query,!1)}return this.build(!e),this},s.is=function(t){var e=!1,r=!1,i=!1,s=!1,a=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),a=(s=!(e=r||i))&&n&&n.has(this._parts.hostname),u=s&&o.idn_expression.test(this._parts.hostname),c=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var v=s.protocol,x=s.port,w=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return v.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),o.ensureValidPort(t))),x.call(this,t,e))},s.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==o.parseHost(t,n))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(t,this._parts.protocol)}return w.call(this,t,e)},s.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var r=o(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},s.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildHost(this._parts):"";if("/"!==o.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildAuthority(this._parts):"";if("/"!==o.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},s.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},s.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),s=new RegExp("^"+u(i));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&o.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(s,t),this.build(!e),this},s.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var i=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},s.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return!0!==e&&n&&n.list[i.toLowerCase()]&&n.get(this._parts.hostname)||i}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');o=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},s.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}var i=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,i),a=new RegExp("^"+u(s));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t),this.build(!e),this},s.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?o.decodePathSegment(r):r}var i=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(i=!0);var s=new RegExp(u(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(s,t),i?this.normalizePath(e):this.build(!e),this},s.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,i=this.filename(),s=i.lastIndexOf(".");return-1===s?"":(n=i.substring(s+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var a,c=this.suffix();if(c)a=t?new RegExp(u(c)+"$"):new RegExp(u("."+c)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return a&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t)),this.build(!e),this},s.segment=function(t,e,n){var r=this._parts.urn?":":"/",i=this.path(),o="/"===i.substring(0,1),s=i.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(l(e)){s=[];for(var a=0,u=e.length;a<u;a++)(e[a].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(p(e[a])))}else(e||"string"==typeof e)&&(e=p(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=p(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(r),n)},s.segmentCoded=function(t,e,n){var r,i,s;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(l(r=this.segment(t,e,n)))for(i=0,s=r.length;i<s;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(l(e))for(i=0,s=e.length;i<s;i++)e[i]=o.encode(e[i]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.segment(t,e,n)};var M=s.query;return s.query=function(t,e){if(!0===t)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):M.call(this,t,e)},s.setQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in t)a.call(t,i)&&(r[i]=t[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.addQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,t,void 0===e?null:e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.removeQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,t,e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.hasQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,t,e,n)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},s.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},s.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},s.normalizePath=function(t){var e,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var r,i,s="";for("/"!==(n=o.recodePath(n)).charAt(0)&&(e=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=n.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(r=n.search(/\/\.\.(\/|$)/));)0!==r?(-1===(i=n.substring(0,r).lastIndexOf("/"))&&(i=r),n=n.substring(0,i)+n.substring(r+3)):n=n.substring(3);return e&&this.is("relative")&&(n=s+n.substring(1)),this._parts.path=n,this.build(!t),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},s.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},s.unicode=function(){var t=o.encode,e=o.decode;o.encode=g,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",i=0,s=e._parts.query.split("&"),a=s.length;i<a;i++){var u=(s[i]||"").split("=");r+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},s.absoluteTo=function(t){var e,n,r,i=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol)return i;if(i._parts.protocol=t._parts.protocol,this._parts.hostname)return i;for(n=0;r=s[n];n++)i._parts[r]=t._parts[r];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=t._parts.path,i._parts.query||(i._parts.query=t._parts.query)),i.build(),i},s.relativeTo=function(t){var e,n,r,i,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=a._parts,n=t._parts,i=a.path(),s=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==n.hostname||e.port!==n.port)return a.build();if(e.hostname=null,e.port=null,i===s)return e.path="",a.build();if(!(r=o.commonPath(i,s)))return a.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(r.length)||"./",a.build()},s.equals=function(t){var e,n,r,i,s,u=this.clone(),c=new o(t),h={};if(u.normalize(),c.normalize(),u.toString()===c.toString())return!0;if(r=u.query(),i=c.query(),u.query(""),c.query(""),u.toString()!==c.toString())return!1;if(r.length!==i.length)return!1;for(s in e=o.parseQuery(r,this._parts.escapeQuerySpace),n=o.parseQuery(i,this._parts.escapeQuerySpace),e)if(a.call(e,s)){if(l(e[s])){if(!f(e[s],n[s]))return!1}else if(e[s]!==n[s])return!1;h[s]=!0}for(s in n)if(a.call(n,s)&&!h[s])return!1;return!0},s.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},s.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o},t.exports?t.exports=n((ro||(ro=1,function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof Ur&&Ur;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var s,a,u=2147483647,c=36,l=/^xn--/,h=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function g(t){throw new RangeError(f[t])}function y(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+y((t=t.replace(A,".")).split("."),e).join(".")}function I(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function C(t){return y(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=c)t=p(t/35);return p(r+36*t/(t+38))}function v(t){var e,n,r,i,o,s,a,l,h,A,f,d=[],y=t.length,m=0,I=128,E=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&g("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=m,s=1,a=c;i>=y&&g("invalid-input"),((l=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||l>p((u-m)/s))&&g("overflow"),m+=l*s,!(l<(h=a<=E?1:a>=E+26?26:a-E));a+=c)s>p(u/(A=c-h))&&g("overflow"),s*=A;E=b(m-o,e=d.length+1,0==o),p(m/e)>u-I&&g("overflow"),I+=p(m/e),m%=e,d.splice(m++,0,I)}return C(d)}function x(t){var e,n,r,i,o,s,a,l,h,A,f,y,m,C,v,x=[];for(y=(t=I(t)).length,e=128,n=0,o=72,s=0;s<y;++s)(f=t[s])<128&&x.push(d(f));for(r=i=x.length,i&&x.push("-");r<y;){for(a=u,s=0;s<y;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>p((u-n)/(m=r+1))&&g("overflow"),n+=(a-e)*m,e=a,s=0;s<y;++s)if((f=t[s])<e&&++n>u&&g("overflow"),f==e){for(l=n,h=c;!(l<(A=h<=o?1:h>=o+26?26:h-o));h+=c)v=l-A,C=c-A,x.push(d(E(A+v%C,0))),l=p(v/C);x.push(d(E(l,0))),o=b(n,m,r==i),n=0,++r}++n,++e}return x.join("")}if(s={version:"1.3.2",ucs2:{decode:I,encode:C},decode:v,encode:x,toASCII:function(t){return m(t,(function(t){return h.test(t)?"xn--"+x(t):t}))},toUnicode:function(t){return m(t,(function(t){return l.test(t)?v(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else n.punycode=s}(so)}(oo,oo.exports)),oo.exports),(ao||(ao=1,function(t){var e,n;e=co,n=function(t){var e=t&&t.IPv6;return{best:function(t){var e,n,r=t.toLowerCase().split(":"),i=r.length,o=8;for(""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[i-1]&&""===r[i-2]&&r.pop(),-1!==r[(i=r.length)-1].indexOf(".")&&(o=7),e=0;e<i&&""!==r[e];e++);if(e<o)for(r.splice(e,1,"0000");r.length<o;)r.splice(e,0,"0000");for(var s=0;s<o;s++){n=r[s].split("");for(var a=0;a<3&&"0"===n[0]&&n.length>1;a++)n.splice(0,1);r[s]=n.join("")}var u=-1,c=0,l=0,h=-1,A=!1;for(s=0;s<o;s++)A?"0"===r[s]?l+=1:(A=!1,l>c&&(u=h,c=l)):"0"===r[s]&&(A=!0,h=s,l=1);l>c&&(u=h,c=l),c>1&&r.splice(u,c,""),i=r.length;var f="";for(""===r[0]&&(f=":"),s=0;s<i&&(f+=r[s],s!==i-1);s++)f+=":";return""===r[i-1]&&(f+=":"),f},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}},t.exports?t.exports=n():e.IPv6=n(e)}(uo)),uo.exports),(lo||(lo=1,function(t){var e,n;e=Ao,n=function(t){var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return!1;var i=n.list[t.slice(e+1)];return!!i&&i.indexOf(" "+t.slice(r+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var r=n.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return null;var i=n.list[t.slice(e+1)];return i?i.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n},t.exports?t.exports=n():e.SecondLevelDomains=n(e)}(ho)),ho.exports)):e.URI=n(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(io)),io.exports),yo=qr(go);function mo(t,e){if(null===t||"object"!=typeof t)return t;e=Lr(e,!1);var n=new t.constructor;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];e&&(i=mo(i,e)),n[r]=i}return n}function Io(t,e,n){n=Lr(n,!1);var r,i,o,s={},a=Or(t),u=Or(e);if(a)for(r in t)t.hasOwnProperty(r)&&(i=t[r],u&&n&&"object"==typeof i&&e.hasOwnProperty(r)?(o=e[r],s[r]="object"==typeof o?Io(i,o,n):i):s[r]=i);if(u)for(r in e)e.hasOwnProperty(r)&&!s.hasOwnProperty(r)&&(o=e[r],s[r]=o);return s}function Co(){let t,e;const n=new Promise((function(n,r){t=n,e=r}));return{resolve:t,reject:e,promise:n}}function Eo(t,e){var n;return"undefined"!=typeof document&&(n=document),Eo._implementation(t,e,n)}Eo._implementation=function(t,e,n){if(!Or(t))throw new Nr("relative uri is required.");if(!Or(e)){if(void 0===n)return t;e=Lr(n.baseURI,n.location.href)}var r=new yo(t);return""!==r.scheme()?r.toString():r.absoluteTo(e).toString()};var bo={};function vo(t,e,n){Or(e)||(e=t.width),Or(n)||(n=t.height);var r=bo[e];Or(r)||(r={},bo[e]=r);var i=r[n];if(!Or(i)){var o=document.createElement("canvas");o.width=e,o.height=n,(i=o.getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",r[n]=i}return i.drawImage(t,0,0,e,n),i.getImageData(0,0,e,n).data}var xo,wo=/^blob:/i;function Mo(t){return kr.typeOf.string("uri",t),wo.test(t)}var Bo=/^data:/i;function _o(t){return kr.typeOf.string("uri",t),Bo.test(t)}var So=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Qo=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3,PACK:4,BLOCK:5,BLOCKPACK:6});function Ro(t){t=Lr(t,Lr.EMPTY_OBJECT);var e=Lr(t.throttleByServer,!1),n=Lr(t.throttle,!1);this.url=t.url,this.requestFunction=t.requestFunction,this.cancelFunction=t.cancelFunction,this.priorityFunction=t.priorityFunction,this.priority=Lr(t.priority,0),this.throttle=n,this.throttleByServer=e,this.type=Lr(t.type,Qo.OTHER),this.serverKey=void 0,this.state=So.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Do(t,e,n){this.statusCode=t,this.response=e,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(t){var e={};if(!t)return e;for(var n=t.split("\r\n"),r=0;r<n.length;++r){var i=n[r],o=i.indexOf(": ");if(o>0){var s=i.substring(0,o),a=i.substring(o+2);e[s]=a}}return e}(this.responseHeaders))}function To(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Oo(t,e){return e-t}function No(t){kr.typeOf.object("options",t),kr.defined("options.comparator",t.comparator),this._comparator=t.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Fo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Ro.prototype.cancel=function(){this.cancelled=!0},Ro.prototype.clone=function(t){return Or(t)?(t.url=this.url,t.requestFunction=this.requestFunction,t.cancelFunction=this.cancelFunction,t.priorityFunction=this.priorityFunction,t.priority=this.priority,t.throttle=this.throttle,t.throttleByServer=this.throttleByServer,t.type=this.type,t.serverKey=this.serverKey,t.state=this.RequestState.UNISSUED,t.deferred=void 0,t.cancelled=!1,t):new Ro(this)},Do.prototype.toString=function(){var t="Request has failed.";return Or(this.statusCode)&&(t+=" Status Code: "+this.statusCode),t},Object.defineProperties(To.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),To.prototype.addEventListener=function(t,e){kr.typeOf.func("listener",t),this._listeners.push(t),this._scopes.push(e);var n=this;return function(){n.removeEventListener(t,e)}},To.prototype.removeEventListener=function(t,e){kr.typeOf.func("listener",t);for(var n=this._listeners,r=this._scopes,i=-1,o=0;o<n.length;o++)if(n[o]===t&&r[o]===e){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),n[i]=void 0,r[i]=void 0):(n.splice(i,1),r.splice(i,1)),!0)},To.prototype.raiseEvent=function(){var t;this._insideRaiseEvent=!0;var e=this._listeners,n=this._scopes,r=e.length;for(t=0;t<r;t++){Or(e[t])&&e[t].apply(n[t],arguments)}var i=this._toRemove;if((r=i.length)>0){for(i.sort(Oo),t=0;t<r;t++){var o=i[t];e.splice(o,1),n.splice(o,1)}i.length=0}this._insideRaiseEvent=!1},Object.defineProperties(No.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(t){this._maximumLength=t,this._length>t&&t>0&&(this._length=t,this._array.length=t)}},comparator:{get:function(){return this._comparator}}}),No.prototype.reserve=function(t){t=Lr(t,this._length),this._array.length=t},No.prototype.heapify=function(t){t=Lr(t,0);for(var e=this._length,n=this._comparator,r=this._array,i=-1,o=!0;o;){var s=2*(t+1),a=s-1;i=a<e&&n(r[a],r[t])<0?a:t,s<e&&n(r[s],r[i])<0&&(i=s),i!==t?(Fo(r,i,t),t=i):o=!1}},No.prototype.resort=function(){for(var t=this._length,e=Math.ceil(t/2);e>=0;--e)this.heapify(e)},No.prototype.insert=function(t){kr.defined("element",t);var e,n=this._array,r=this._comparator,i=this._maximumLength,o=this._length++;for(o<n.length?n[o]=t:n.push(t);0!==o;){var s=Math.floor((o-1)/2);if(!(r(n[o],n[s])<0))break;Fo(n,o,s),o=s}return Or(i)&&this._length>i&&(e=n[i],n.pop(),this._length=i),e},No.prototype.pop=function(t){if(t=Lr(t,0),0!==this._length){kr.typeOf.number.lessThan("index",t,this._length);var e=this._array,n=e[t];return Fo(e,t,--this._length),e[this._length]=void 0,this.heapify(t),n}};var zo="undefined"!=typeof performance&&"function"==typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()};function ko(t,e){return t.priority-e.priority}var Lo={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0,totalRequestTime:0},Po=20,jo=new No({comparator:ko});jo.maximumLength=Po,jo.reserve(Po);var Uo=[],qo={},Ko="undefined"!=typeof document?new yo(document.location.href):new yo,Ho=new To;function Yo(){}function Go(t){Or(t.priorityFunction)&&(t.priority=t.priorityFunction())}function Vo(t){return Or(t.packKey)||(t.packKey=t.serverKey+"_"+t.providerName),t.packKey}function Xo(t){return Or(t.blockKey)||(t.blockKey=t.serverKey+"_"+t.providerName+"_"+t.quadKey+t.url.substring(t.url.indexOf("dataVersion"))),t.blockKey}function Wo(t){var e=Vo(t);return Or(Yo.packRequestGroup[e])||(Yo.packRequestGroup[e]=[]),Or(Yo.packRequestQuadKey[e])||(Yo.packRequestQuadKey[e]=""),Or(Yo.packRequestPromise[e])||(Yo.packRequestPromise[e]=Co()),Or(Yo.quadKeyIndex[e])||(Yo.quadKeyIndex[e]=0),t.quadKeyIndex=Yo.quadKeyIndex[e]++,t.deferred=Yo.packRequestPromise[e],t.state=So.ISSUED,Yo.packRequestGroup[e].push(t),t.deferred.promise}function Jo(t){for(var e=0,n=t.length;e<n;e++){t[e].state=So.CANCELLED}}function Zo(t){for(var e=[],n={},r=0,i=t.length;r<i;r++){var o=t[r];if(!o.cancelled){var s=o.quadKey;n[s]||(n[s]=!0,e.push(s))}}return e}function $o(){var t=Yo.packRequestGroup;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(n.length<1)continue;var r=n[0].clone(),i=-1!==r.url.indexOf("rest/maps");r.serverKey=n[0].serverKey,r.state=n[0].state;var o=r.url,s=Zo(n);if(s.length<1)continue;Yo.packRequestQuadKey[e]=i?s.join(","):s.join(";");var a=Yo.packRequestQuadKey[e];if(r.throttleByServer&&!Yo.serverHasOpenSlots(r.serverKey)){Jo(n),Yo.packRequestPromise[e].reject();continue}r.deferred=Yo.packRequestPromise[e];var u=new yo(o);i?u.query(0!==u.query().length?u.query()+"&tiles="+a:"tiles="+a):u.query(0!==u.query().length?u.query()+"&extratiles="+a:"extratiles="+a),r.url=u.toString(),ns(r,r.url)}Yo.packRequestGroup={},Yo.packRequestPromise={},Yo.packRequestQuadKey={},Yo.quadKeyIndex={}}function ts(){var t=Yo.blockRequest;for(var e in t){if(t.hasOwnProperty(e))ns(t[e])}Yo.blockRequest={}}function es(t){if(t.state===So.UNISSUED)if(t.state=So.ISSUED,t.type===Qo.PACK||t.type===Qo.BLOCKPACK){var e=Vo(t);Or(Yo.packRequestPromise[e])||(Yo.packRequestPromise[e]=Co()),t.deferred=Yo.packRequestPromise[e]}else t.deferred=Co();return t.deferred.promise}function ns(t,e){var n=es(t);return t.state=So.ACTIVE,Uo.push(t),++Lo.numberOfActiveRequests,++Lo.numberOfActiveRequestsEver,++qo[t.serverKey],t.startTime=zo(),t.requestFunction(e).then(function(t){return function(e){if(t.state!==So.CANCELLED&&(--Lo.numberOfActiveRequests,--qo[t.serverKey],Ho.raiseEvent(),t.state=So.RECEIVED,t.deferred.resolve(e),t.endTime=zo(),(Yo.statisticRequestTime>0||t.type!==Qo.OTHER)&&(Lo.totalRequestTime+=t.endTime-t.startTime),t.type===Qo.BLOCK||t.type===Qo.BLOCKPACK)){var n=Xo(t);Or(Yo.blockDefer[n])&&(Yo.blockDefer[n]=void 0,delete Yo.blockDefer[n])}}}(t)).catch(function(t){return function(e){t.state!==So.CANCELLED&&(++Lo.numberOfFailedRequests,--Lo.numberOfActiveRequests,--qo[t.serverKey],Ho.raiseEvent(e),t.state=So.FAILED,t.deferred.reject(e))}}(t)),n}function rs(t){var e=t.state===So.ACTIVE;t.state=So.CANCELLED,++Lo.numberOfCancelledRequests,t.deferred.reject(),e&&(--Lo.numberOfActiveRequests,--qo[t.serverKey],++Lo.numberOfCancelledActiveRequests),Or(t.cancelFunction)&&t.cancelFunction()}function is(t){var e;this.name="RuntimeError",this.message=t;try{throw new Error}catch(t){e=t.stack}this.stack=e}Yo.TIMEOUT=5e3,Yo.CANCLE_COUNT=3,Yo.RequestThrottleTime=Number.MAX_VALUE,Yo.statisticRequestTime=-1,Yo.maximumRequests=50,Yo.maximumRequestsPerServer=18,Yo.perPacketCount=20,Yo.requestsByServer={},Yo.throttleRequests=!0,Yo.debugShowStatistics=!1,Yo.requestCompletedEvent=Ho,Object.defineProperties(Yo,{activeRequestLength:{get:function(){return Uo.length}},statistics:{get:function(){return Lo}},priorityHeapLength:{get:function(){return Po},set:function(t){if(t<Po)for(;jo.length>t;){rs(jo.pop())}Po=t,jo.maximumLength=t,jo.reserve(t)}}}),Yo.serverHasOpenSlots=function(t,e){e=Lr(e,1);const n=Lr(Yo.requestsByServer[t],Yo.maximumRequestsPerServer);return qo[t]+e<=n},Yo.heapHasOpenSlots=function(t){return jo.length+t<=Po},Yo.packRequestGroup={},Yo.packRequestPromise={},Yo.packRequestQuadKey={},Yo.quadKeyIndex={},Yo.packRequestHeap={},Yo.blockDefer={},Yo.blockRequest={},Yo.update=function(){var t,e,n=0,r=Uo.length;for(t=0;t<r;++t)(e=Uo[t]).cancelled&&rs(e),e.state===So.ACTIVE?n>0&&(Uo[t-n]=e):++n;Uo.length-=n;var i=jo.internalArray,o=jo.length;for(t=0;t<o;++t)Go(i[t]);jo.resort(),function(){for(var t in Yo.packRequestHeap)if(Yo.packRequestHeap.hasOwnProperty(t)){for(var e=Yo.packRequestHeap[t],n=e.internalArray,r=e.length,i=0;i<r;++i)Go(n[i]);e.resort()}}(),ts(),function(){for(var t in Yo.packRequestHeap)if(Yo.packRequestHeap.hasOwnProperty(t))for(var e=Yo.packRequestHeap[t];e.length>0;){var n=e.pop();n.cancelled?rs(n):Wo(n)}$o()}();for(var s=Math.max(Yo.maximumRequests-Uo.length,0),a=0,u=zo();a<s&&jo.length>0;)if((e=jo.pop()).cancelled)rs(e);else if(!e.throttleByServer||Yo.serverHasOpenSlots(e.serverKey)){if(ns(e),++a,zo-u>Yo.RequestThrottleTime)break}else rs(e);!function(){if(!Yo.debugShowStatistics)return;0===Lo.numberOfActiveRequests&&Lo.lastNumberOfActiveRequests>0&&(Lo.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+Lo.numberOfAttemptedRequests),Lo.numberOfAttemptedRequests=0),Lo.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+Lo.numberOfCancelledRequests),Lo.numberOfCancelledRequests=0),Lo.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+Lo.numberOfCancelledActiveRequests),Lo.numberOfCancelledActiveRequests=0),Lo.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+Lo.numberOfFailedRequests),Lo.numberOfFailedRequests=0));Lo.lastNumberOfActiveRequests=Lo.numberOfActiveRequests}()},Yo.getServerKey=function(t){kr.typeOf.string("url",t);var e=new yo(t);""===e.scheme()&&(e=e.absoluteTo(Ko)).normalize();var n=e.authority;return/:/.test(n)||(n=n+":"+("https"===e.scheme?"443":"80")),Or(qo[n])||(qo[n]=0),n},Yo.request=function(t){if(kr.typeOf.object("request",t),kr.typeOf.string("request.url",t.url),kr.typeOf.func("request.requestFunction",t.requestFunction),_o(t.url)||Mo(t.url))return Ho.raiseEvent(),t.state=So.RECEIVED,t.requestFunction();if(++Lo.numberOfAttemptedRequests,Or(t.serverKey)||(t.serverKey=Yo.getServerKey(t.url)),t.type===Qo.BLOCK)return function(t){var e=Xo(t),n=Yo.blockDefer[e];return Or(n)||(n=Yo.blockDefer[e]=Co(),Yo.blockRequest[e]=t),t.deferred=n,t.state=So.ISSUED,t.deferred.promise}(t);if(!t.throttleByServer||Yo.serverHasOpenSlots(t.serverKey)){if(!Yo.throttleRequests||!t.throttle)return ns(t);if(!(Uo.length>=Yo.maximumRequests)){var e;if(Go(t),t.type===Qo.PACK||t.type===Qo.BLOCKPACK){var n=function(t){var e=Vo(t),n=Yo.packRequestHeap[e];return Or(n)||((n=Yo.packRequestHeap[e]=new No({comparator:ko})).maximumLength=Yo.perPacketCount,n.reserve(Po)),n}(t),r=!0;if(t.type===Qo.BLOCKPACK)for(var i=0;i<n.length;i++)if(n._array[i].quadKey===t.quadKey){t.blockRequest=n._array[i],r=!1;break}r&&(e=n.insert(t))}else e=jo.insert(t);if(Or(e)){if(e===t)return;rs(e)}return es(t)}}},Yo.clearForSpecs=function(){for(;jo.length>0;){rs(jo.pop())}for(var t=Uo.length,e=0;e<t;++e)rs(Uo[e]);Uo.length=0,qo={},Lo.numberOfAttemptedRequests=0,Lo.numberOfActiveRequests=0,Lo.numberOfCancelledRequests=0,Lo.numberOfCancelledActiveRequests=0,Lo.numberOfFailedRequests=0,Lo.numberOfActiveRequestsEver=0,Lo.lastNumberOfActiveRequests=0,Lo.totalRequestTime=0},Yo.numberOfActiveRequestsByServer=function(t){return qo[t]},Yo.requestHeap=jo,Or(Object.create)&&(is.prototype=Object.create(Error.prototype),is.prototype.constructor=is),is.prototype.toString=function(){var t=this.name+": "+this.message;return Or(this.stack)&&(t+="\n"+this.stack.toString()),t};var os={},ss={};os.add=function(t,e){if(!Or(t))throw new Nr("host is required.");if(!Or(e)||e<=0)throw new Nr("port is required to be greater than 0.");var n=t.toLowerCase()+":"+e;Or(ss[n])||(ss[n]=!0)},os.remove=function(t,e){if(!Or(t))throw new Nr("host is required.");if(!Or(e)||e<=0)throw new Nr("port is required to be greater than 0.");var n=t.toLowerCase()+":"+e;Or(ss[n])&&delete ss[n]},os.contains=function(t){if(!Or(t))throw new Nr("url is required.");var e=function(t){var e=new yo(t);e.normalize();var n=e.authority();if(0!==n.length){if(-1!==n.indexOf("@")){var r=n.split("@");n=r[1]}if(-1===n.indexOf(":")){var i=e.scheme();if(0===i.length&&(i=(i=window.location.protocol).substring(0,i.length-1)),"http"===i)n+=":80";else{if("https"!==i)return;n+=":443"}}return n}}(t);return!(!Or(e)||!Or(ss[e]))},os.clear=function(){ss={}};var as=os;var us=Object.freeze({Error:"cacheError"});const cs=function(){try{const t=new XMLHttpRequest;return t.open("GET","#",!0),t.responseType="blob","blob"===t.responseType}catch(t){return!1}}();function ls(t){"string"==typeof(t=Lr(t,Lr.EMPTY_OBJECT))&&(t={url:t}),kr.typeOf.string("options.url",t.url),this._url=void 0,this._templateValues=hs(t.templateValues,{}),this._queryParameters=hs(t.queryParameters,{}),this.headers=hs(t.headers,{}),this.request=Lr(t.request,new Ro),this.dbConnector=t.dbConnector,this.proxy=t.proxy,this.retryCallback=t.retryCallback,this.retryAttempts=Lr(t.retryAttempts,0),this._retryCount=0;Lr(t.parseUrl,!0)?this.parseUrl(t.url,!0,!0):this._url=t.url,this._credits=t.credits}function hs(t,e){return Or(t)?mo(t):e}let As;function fs(t,e,n){if(!n)return Io(t,e);const r=mo(t,!0);for(const t in e)if(e.hasOwnProperty(t)){let n=r[t];const i=e[t];Or(n)?(Array.isArray(n)||(n=r[t]=[n]),r[t]=n.concat(i)):r[t]=Array.isArray(i)?i.slice():i}return r}function ps(t){const e=t.resource,n=t.flipY,r=t.skipColorSpaceConversion,i=t.preferImageBitmap,o=e.request;o.url=e.url,o.requestFunction=function(){let t=!1;e.isDataUri||e.isBlobUri||(t=e.isCrossOriginUrl);const s=Co();return Or(e.dbConnector)?e.dbConnector.getElementFromDB(o.url,"blob").then((a=>a===us.Error?(ls._Implementations.createImage(o,t,s,n,r,i,e.dbConnector),s.promise):a)):(ls._Implementations.createImage(o,t,s,n,r,i),s.promise)};const s=Yo.request(o);if(Or(s))return s.catch((function(t){return o.state!==So.FAILED?Promise.reject(t):e.retryOnError(t).then((function(s){return s?(o.state=So.UNISSUED,o.deferred=void 0,ps({resource:e,flipY:n,skipColorSpaceConversion:r,preferImageBitmap:i})):Promise.reject(t)}))}))}function ds(t,e,n){const r={};r[e]=n,t.setQueryParameters(r);const i=t.request,o=t.url;i.url=o,i.requestFunction=function(){const t=Co();return window[n]=function(e){t.resolve(e);try{delete window[n]}catch(t){window[n]=void 0}},ls._Implementations.loadAndExecuteScript(o,n,t),t.promise};const s=Yo.request(i);if(Or(s))return s.catch((function(r){return i.state!==So.FAILED?Promise.reject(r):t.retryOnError(r).then((function(o){return o?(i.state=So.UNISSUED,i.deferred=void 0,ds(t,e,n)):Promise.reject(r)}))}))}function gs(t){if(t.state===So.ISSUED||t.state===So.ACTIVE)throw new is("The Resource is already being fetched.");t.state=So.UNISSUED,t.deferred=void 0}ls.createIfNeeded=function(t){return t instanceof ls?t.getDerivedResource({request:t.request}):"string"!=typeof t?t:new ls({url:t})},ls.supportsImageBitmapOptions=function(){if(Or(As))return As;if("function"!=typeof createImageBitmap)return As=Promise.resolve(!1),As;return As=ls.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then((function(t){return Promise.all([createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(t)])})).then((function(t){const e=vo(t[0]),n=vo(t[1]);return e[1]!==n[1]})).catch((function(){return!1})),As},Object.defineProperties(ls,{isBlobSupported:{get:function(){return cs}}}),Object.defineProperties(ls.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(t){this.parseUrl(t,!1,!1)}},extension:{get:function(){return function(t){if(!Or(t))throw new Nr("uri is required.");var e=new yo(t);e.normalize();var n=e.path(),r=n.lastIndexOf("/");return-1!==r&&(n=n.substr(r+1)),r=n.lastIndexOf("."),-1===r?"":n.substr(r+1)}(this._url)}},isDataUri:{get:function(){return _o(this._url)}},isBlobUri:{get:function(){return Mo(this._url)}},isCrossOriginUrl:{get:function(){return function(t){Or(xo)||(xo=document.createElement("a")),xo.href=window.location.href;var e=xo.host,n=xo.protocol;return xo.href=t,xo.href=xo.href,n!==xo.protocol||e!==xo.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),ls.prototype.toString=function(){return this.getUrlComponent(!0,!0)},ls.prototype.parseUrl=function(t,e,n,r){let i=new yo(t);const o=function(t){if(0===t.length)return{};if(-1===t.indexOf("="))return{[t]:void 0};return function(t){if(!Or(t))throw new Nr("queryString is required.");var e={};if(""===t)return e;for(var n=t.replace(/\+/g,"%20").split(/[&;]/),r=0,i=n.length;r<i;++r){var o=n[r].split("=");if(o.length>2){var s=n[r].indexOf("=");o=[n[r].substring(0,s),n[r].substring(s+1,n[r].length)]}try{var a=decodeURIComponent(o[0])}catch(t){a=o[0]}var u=o[1];if(Or(u))try{u=decodeURIComponent(u)}catch(t){}else u="";var c=e[a];"string"==typeof c?e[a]=[c,u]:Array.isArray(c)?c.push(u):e[a]=u}return e}(t)}(i.query());this._queryParameters=e?fs(o,this.queryParameters,n):o,i.search(""),i.fragment(""),Or(r)&&""===i.scheme()&&(i=i.absoluteTo(Eo(r))),this._url=i.toString()},ls.prototype.getUrlComponent=function(t,e){if(this.isDataUri)return this._url;let n=this._url;t&&(n=`${n}${function(t){const e=Object.keys(t);if(0===e.length)return"";if(1===e.length&&!Or(t[e[0]]))return`?${e[0]}`;return`?${function(t,e){if(!Or(t))throw new Nr("obj is required.");var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=encodeURIComponent(r)+"=";if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)n+=!0===e?o+encodeURI(i[s])+"&":o+encodeURIComponent(i[s])+"&";else n+=!0===e?o+encodeURI(i)+"&":o+encodeURIComponent(i)+"&"}return n.slice(0,-1)}(t)}`}(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");const r=this._templateValues;return Object.keys(r).length>0&&(n=n.replace(/{(.*?)}/g,(function(t,e){const n=r[e];return Or(n)&&"s"===e?encodeURI(n):Or(n)?encodeURIComponent(n):t}))),e&&Or(this.proxy)&&(n=this.proxy.getURL(n)),n},ls.prototype.setQueryParameters=function(t,e){this._queryParameters=e?fs(this._queryParameters,t,!1):fs(t,this._queryParameters,!1)},ls.prototype.appendQueryParameters=function(t){this._queryParameters=fs(t,this._queryParameters,!0)},ls.prototype.setTemplateValues=function(t,e){this._templateValues=e?Io(this._templateValues,t):Io(t,this._templateValues)},ls.prototype.getDerivedResource=function(t){const e=this.clone();if(e._retryCount=0,Or(t.url)){const n=Lr(t.preserveQueryParameters,!1);e.parseUrl(t.url,!0,n,this._url)}return Or(t.queryParameters)&&(e._queryParameters=Io(t.queryParameters,e.queryParameters)),Or(t.templateValues)&&(e._templateValues=Io(t.templateValues,e.templateValues)),Or(t.headers)&&(e.headers=Io(t.headers,e.headers)),Or(t.proxy)&&(e.proxy=t.proxy),Or(t.request)&&(e.request=t.request),Or(t.retryCallback)&&(e.retryCallback=t.retryCallback),Or(t.retryAttempts)&&(e.retryAttempts=t.retryAttempts),e},ls.prototype.retryOnError=function(t){const e=this.retryCallback;if("function"!=typeof e||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);const n=this;return Promise.resolve(e(this,t)).then((function(t){return++n._retryCount,t}))},ls.prototype.clone=function(t){return Or(t)?(t._url=this._url,t._queryParameters=mo(this._queryParameters),t._templateValues=mo(this._templateValues),t.headers=mo(this.headers),t.proxy=this.proxy,t.retryCallback=this.retryCallback,t.retryAttempts=this.retryAttempts,t._retryCount=0,t.request=this.request.clone(),t.dbConnector=this.dbConnector,t):new ls({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:Or(this.credits)?this.credits.slice():void 0})},ls.prototype.getBaseUri=function(t){return function(t,e){if(!Or(t))throw new Nr("uri is required.");var n="",r=t.lastIndexOf("/");return-1!==r&&(n=t.substring(0,r+1)),e?(0!==(t=new yo(t)).query().length&&(n+="?"+t.query()),0!==t.fragment().length&&(n+="#"+t.fragment()),n):n}(this.getUrlComponent(t),t)},ls.prototype.appendForwardSlash=function(){var t;this._url=(0!==(t=this._url).length&&"/"===t[t.length-1]||(t+="/"),t)},ls.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},ls.fetchArrayBuffer=function(t){return new ls(t).fetchArrayBuffer()},ls.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},ls.fetchBlob=function(t){return new ls(t).fetchBlob()},ls.prototype.fetchImage=function(t){t=Lr(t,Lr.EMPTY_OBJECT);const e=Lr(t.preferImageBitmap,!1),n=Lr(t.preferBlob,!1),r=Lr(t.flipY,!1),i=Lr(t.skipColorSpaceConversion,!1);if(gs(this.request),!cs||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return ps({resource:this,flipY:r,skipColorSpaceConversion:i,preferImageBitmap:e});const o=this.fetchBlob();if(!Or(o))return;let s,a,u,c;return ls.supportsImageBitmapOptions().then((function(t){return s=t,a=s&&e,o})).then((function(t){if(!Or(t))return;if(c=t,a)return ls.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:i});const e=window.URL.createObjectURL(t);return u=new ls({url:e}),ps({resource:u,flipY:r,skipColorSpaceConversion:i,preferImageBitmap:!1})})).then((function(t){if(Or(t))return t.blob=c,a||window.URL.revokeObjectURL(u.url),t})).catch((function(t){return Or(u)&&window.URL.revokeObjectURL(u.url),t.blob=c,Promise.reject(t)}))},ls.fetchImage=function(t){return new ls(t).fetchImage({flipY:t.flipY,skipColorSpaceConversion:t.skipColorSpaceConversion,preferBlob:t.preferBlob,preferImageBitmap:t.preferImageBitmap})},ls.prototype.fetchText=function(){return this.fetch({responseType:"text"})},ls.fetchText=function(t){return new ls(t).fetchText()},ls.prototype.fetchJson=function(){const t=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(Or(t))return t.then((function(t){if(Or(t))return JSON.parse(t)}))},ls.fetchJson=function(t){return new ls(t).fetchJson()},ls.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},ls.fetchXML=function(t){return new ls(t).fetchXML()},ls.prototype.fetchJsonp=function(t){let e;t=Lr(t,"callback"),gs(this.request);do{e=`loadJsonp${Xr.nextRandomNumber().toString().substring(2,8)}`}while(Or(window[e]));return ds(this,t,e)},ls.fetchJsonp=function(t){return new ls(t).fetchJsonp(t.callbackParameterName)},ls.prototype._makeRequest=function(t){const e=this;gs(e.request);const n=e.request,r=e.url;n.url=r,n.requestFunction=function(r){const i=t.responseType,o=Io(t.headers,e.headers),s=t.overrideMimeType,a=t.method,u=t.data,c=Co(),l=Or(r)?r:e.url;if(Or(e.dbConnector))return e.dbConnector.getElementFromDB(l,i).then((t=>{if(t===us.Error){var r=ls._Implementations.loadWithXhr(l,i,a,u,o,c,s,e.dbConnector);return Or(r)&&Or(r.abort)&&(n.cancelFunction=function(){r.abort()}),c.promise}return t}));const h=ls._Implementations.loadWithXhr(l,i,a,u,o,c,s);return Or(h)&&Or(h.abort)&&(n.cancelFunction=function(){h.abort()}),c.promise};const i=Yo.request(n);if(Or(i))return i.then((function(t){return n.cancelFunction=void 0,t})).catch((function(r){return n.cancelFunction=void 0,n.state!==So.FAILED?Promise.reject(r):e.retryOnError(r).then((function(i){return i?(n.state=So.UNISSUED,n.deferred=void 0,e.fetch(t)):Promise.reject(r)}))}))};const ys=/^data:(.*?)(;base64)?,(.*)$/;function ms(t,e){const n=decodeURIComponent(e);return t?atob(n):n}function Is(t,e){const n=ms(t,e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(let t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return r}ls.prototype.fetch=function(t){return(t=hs(t,{})).method="GET",this._makeRequest(t)},ls.fetch=function(t){return new ls(t).fetch({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls.prototype.delete=function(t){return(t=hs(t,{})).method="DELETE",this._makeRequest(t)},ls.delete=function(t){return new ls(t).delete({responseType:t.responseType,overrideMimeType:t.overrideMimeType,data:t.data})},ls.prototype.head=function(t){return(t=hs(t,{})).method="HEAD",this._makeRequest(t)},ls.head=function(t){return new ls(t).head({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls.prototype.options=function(t){return(t=hs(t,{})).method="OPTIONS",this._makeRequest(t)},ls.options=function(t){return new ls(t).options({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls.prototype.post=function(t,e){return kr.defined("data",t),(e=hs(e,{})).method="POST",e.data=t,this._makeRequest(e)},ls.post=function(t){return new ls(t).post(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls.prototype.put=function(t,e){return kr.defined("data",t),(e=hs(e,{})).method="PUT",e.data=t,this._makeRequest(e)},ls.put=function(t){return new ls(t).put(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls.prototype.patch=function(t,e){return kr.defined("data",t),(e=hs(e,{})).method="PATCH",e.data=t,this._makeRequest(e)},ls.patch=function(t){return new ls(t).patch(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ls._Implementations={},ls._Implementations.loadImageElement=function(t,e,n){const r=new Image;r.onload=function(){0===r.naturalWidth&&0===r.naturalHeight&&0===r.width&&0===r.height&&(r.width=300,r.height=150),n.resolve(r)},r.onerror=function(t){n.reject(t)},e&&(as.contains(t)?r.crossOrigin="use-credentials":r.crossOrigin=""),r.src=t},ls._Implementations.createImage=function(t,e,n,r,i,o,s){const a=t.url;ls.supportsImageBitmapOptions().then((function(u){if(!u||!o)return void ls._Implementations.loadImageElement(a,e,n);const c=Co(),l=ls._Implementations.loadWithXhr(a,"blob","GET",void 0,void 0,c,void 0,s);return Or(l)&&Or(l.abort)&&(t.cancelFunction=function(){l.abort()}),c.promise.then((function(t){if(Or(t))return ls.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:i});n.reject(new is(`Successfully retrieved ${a} but it contained no content.`))})).then((function(t){n.resolve(t)}))})).catch((function(t){n.reject(t)}))},ls.createImageBitmapFromBlob=function(t,e){return kr.defined("options",e),kr.typeOf.bool("options.flipY",e.flipY),kr.typeOf.bool("options.premultiplyAlpha",e.premultiplyAlpha),kr.typeOf.bool("options.skipColorSpaceConversion",e.skipColorSpaceConversion),createImageBitmap(t,{imageOrientation:e.flipY?"flipY":"none",premultiplyAlpha:e.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:e.skipColorSpaceConversion?"none":"default"})};const Cs="undefined"==typeof XMLHttpRequest;function Es(t){if(t=Lr(t,Lr.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=Lr(t.addNewLeapSeconds,!0),Or(t.data))vs(this,t.data);else if(Or(t.url)){var e=ls.createIfNeeded(t.url),n=this;this._downloadPromise=Promise.resolve(e.fetchJson()).then((function(t){vs(n,t)})).catch((function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+e.url+"."}))}else vs(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function bs(t,e){return eo.compare(t.julianDate,e)}function vs(t,e){if(Or(e.columnNames))if(Or(e.samples)){var n=e.columnNames.indexOf("modifiedJulianDateUtc"),r=e.columnNames.indexOf("xPoleWanderRadians"),i=e.columnNames.indexOf("yPoleWanderRadians"),o=e.columnNames.indexOf("ut1MinusUtcSeconds"),s=e.columnNames.indexOf("xCelestialPoleOffsetRadians"),a=e.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=e.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||i<0||o<0||s<0||a<0||u<0)t._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=t._samples=e.samples,h=t._dates=[];t._dateColumn=n,t._xPoleWanderRadiansColumn=r,t._yPoleWanderRadiansColumn=i,t._ut1MinusUtcSecondsColumn=o,t._xCelestialPoleOffsetRadiansColumn=s,t._yCelestialPoleOffsetRadiansColumn=a,t._taiMinusUtcSecondsColumn=u,t._columnCount=e.columnNames.length,t._lastIndex=void 0;for(var A=t._addNewLeapSeconds,f=0,p=l.length;f<p;f+=t._columnCount){var d=l[f+n],g=l[f+u],y=new eo(d+Ni.MODIFIED_JULIAN_DATE_DIFFERENCE,g,Fi.TAI);if(h.push(y),A){if(g!==c&&Or(c)){var m=eo.leapSeconds,I=Si(m,y,bs);if(I<0){var C=new Oi(y,g);m.splice(~I,0,C)}}c=g}}}}else t._dataError="Error in loaded EOP data: The samples property is required.";else t._dataError="Error in loaded EOP data: The columnNames property is required."}function xs(t,e,n,r,i){var o=n*r;i.xPoleWander=e[o+t._xPoleWanderRadiansColumn],i.yPoleWander=e[o+t._yPoleWanderRadiansColumn],i.xPoleOffset=e[o+t._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=e[o+t._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=e[o+t._ut1MinusUtcSecondsColumn]}function ws(t,e,n){return e+t*(n-e)}function Ms(t,e,n,r,i,o,s){var a=t._columnCount;if(o>e.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=e[i],c=e[o];if(u.equals(c)||r.equals(u))return xs(t,n,i,a,s),s;if(r.equals(c))return xs(t,n,o,a,s),s;var l=eo.secondsDifference(r,u)/eo.secondsDifference(c,u),h=i*a,A=o*a,f=n[h+t._ut1MinusUtcSecondsColumn],p=n[A+t._ut1MinusUtcSecondsColumn],d=p-f;if(d>.5||d<-.5){var g=n[h+t._taiMinusUtcSecondsColumn],y=n[A+t._taiMinusUtcSecondsColumn];g!==y&&(c.equals(r)?f=p:p-=y-g)}return s.xPoleWander=ws(l,n[h+t._xPoleWanderRadiansColumn],n[A+t._xPoleWanderRadiansColumn]),s.yPoleWander=ws(l,n[h+t._yPoleWanderRadiansColumn],n[A+t._yPoleWanderRadiansColumn]),s.xPoleOffset=ws(l,n[h+t._xCelestialPoleOffsetRadiansColumn],n[A+t._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=ws(l,n[h+t._yCelestialPoleOffsetRadiansColumn],n[A+t._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=ws(l,f,p),s}function Bs(t,e,n,r){e=Lr(e,0),n=Lr(n,0),r=Lr(r,0),kr.typeOf.number.greaterThanOrEquals("x",e,0),kr.typeOf.number.greaterThanOrEquals("y",n,0),kr.typeOf.number.greaterThanOrEquals("z",r,0),t._radii=new Wr(e,n,r),t._radiiSquared=new Wr(e*e,n*n,r*r),t._radiiToTheFourth=new Wr(e*e*e*e,n*n*n*n,r*r*r*r),t._oneOverRadii=new Wr(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),t._oneOverRadiiSquared=new Wr(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),t._minimumRadius=Math.min(e,n,r),t._maximumRadius=Math.max(e,n,r),t._centerToleranceSquared=Xr.EPSILON1,0!==t._radiiSquared.z&&(t._squaredXOverSquaredZ=t._radiiSquared.x/t._radiiSquared.z)}function _s(t,e,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,Bs(this,t,e,n)}ls._Implementations.loadWithXhr=function(t,e,n,r,i,o,s,a){var u=t;const c=ys.exec(t);if(null!==c)return void o.resolve(function(t,e){e=Lr(e,"");const n=t[1],r=!!t[2],i=t[3];let o,s;switch(e){case"":case"text":return ms(r,i);case"arraybuffer":return Is(r,i);case"blob":return o=Is(r,i),new Blob([o],{type:n});case"document":return s=new DOMParser,s.parseFromString(ms(r,i),n);case"json":return JSON.parse(ms(r,i));default:throw new Nr(`Unhandled responseType: ${e}`)}}(c,e));if(Cs)return void function(t,e,n,r,i,o){fetch(t,{method:n,headers:i}).then((async t=>{if(!t.ok){const e={};return t.headers.forEach(((t,n)=>{e[n]=t})),void o.reject(new Do(t.status,t,e))}switch(e){case"text":o.resolve(t.text());break;case"json":o.resolve(t.json());break;default:o.resolve(new Uint8Array(await t.arrayBuffer()).buffer)}})).catch((()=>{o.reject(new Do)}))}(t,e,n,0,i,o);const l=new XMLHttpRequest;if(as.contains(t)&&(l.withCredentials=!0),t=t.replace(/{/g,"%7B").replace(/}/g,"%7D"),l.open(n,t,!0),Or(s)&&Or(l.overrideMimeType)&&l.overrideMimeType(s),Or(i))for(const t in i)i.hasOwnProperty(t)&&l.setRequestHeader(t,i[t]);Or(e)&&(l.responseType=e);let h=!1;return"string"==typeof t&&(h=0===t.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),l.onload=function(){if((l.status<200||l.status>=300)&&(!h||0!==l.status))return void o.reject(new Do(l.status,l.response,l.getAllResponseHeaders()));const t=l.response,r=l.responseType;if("HEAD"===n||"OPTIONS"===n){const t=l.getAllResponseHeaders().trim().split(/[\r\n]+/),e={};return t.forEach((function(t){const n=t.split(": "),r=n.shift();e[r]=n.join(": ")})),void o.resolve(e)}if(204===l.status)o.resolve(void 0);else if(!Or(t)||Or(e)&&r!==e)if("json"===e&&"string"==typeof t)try{o.resolve(JSON.parse(t))}catch(t){o.reject(t)}else(""===r||"document"===r)&&Or(l.responseXML)&&l.responseXML.hasChildNodes()?o.resolve(l.responseXML):""!==r&&"text"!==r||!Or(l.responseText)?o.reject(new is("Invalid XMLHttpRequest response type.")):o.resolve(l.responseText);else Or(a)&&a.putElementInDB(void 0,u,t),o.resolve(t)},l.onerror=function(t){o.reject(new Do)},l.send(r),l},ls._Implementations.loadAndExecuteScript=function(t,e,n){return function(t){var e=Co(),n=document.createElement("script");n.async=!0,n.src=t;var r=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,r.removeChild(n),e.resolve()},n.onerror=function(t){e.reject(t)},r.appendChild(n),e.promise}(t).catch((function(t){n.reject(t)}))},ls._DefaultImplementations={},ls._DefaultImplementations.createImage=ls._Implementations.createImage,ls._DefaultImplementations.loadWithXhr=ls._Implementations.loadWithXhr,ls._DefaultImplementations.loadAndExecuteScript=ls._Implementations.loadAndExecuteScript,ls.DEFAULT=Object.freeze(new ls({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Es.NONE=Object.freeze({getPromiseToLoad:function(){return Promise.resolve()},compute:function(t,e){return Or(e)?(e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0):e=new Qi(0,0,0,0,0),e}}),Es.prototype.getPromiseToLoad=function(){return Promise.resolve(this._downloadPromise)},Es.prototype.compute=function(t,e){if(Or(this._samples)){if(Or(e)||(e=new Qi(0,0,0,0,0)),0===this._samples.length)return e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0,e;var n=this._dates,r=this._lastIndex,i=0,o=0;if(Or(r)){var s=n[r],a=n[r+1],u=eo.lessThanOrEquals(s,t),c=!Or(a),l=c||eo.greaterThanOrEquals(a,t);if(u&&l)return i=r,!c&&a.equals(t)&&++i,o=i+1,Ms(this,n,this._samples,t,i,o,e),e}var h=Si(n,t,eo.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(t)&&++h,i=h,o=h):(i=(o=~h)-1)<0&&(i=0),this._lastIndex=i,Ms(this,n,this._samples,t,i,o,e),e}if(Or(this._dataError))throw new is(this._dataError)},Object.defineProperties(_s.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),_s.clone=function(t,e){if(Or(t)){var n=t._radii;return Or(e)?(Wr.clone(n,e._radii),Wr.clone(t._radiiSquared,e._radiiSquared),Wr.clone(t._radiiToTheFourth,e._radiiToTheFourth),Wr.clone(t._oneOverRadii,e._oneOverRadii),Wr.clone(t._oneOverRadiiSquared,e._oneOverRadiiSquared),e._minimumRadius=t._minimumRadius,e._maximumRadius=t._maximumRadius,e._centerToleranceSquared=t._centerToleranceSquared,e):new _s(n.x,n.y,n.z)}},_s.fromCartesian3=function(t,e){return Or(e)||(e=new _s),Or(t)?(Bs(e,t.x,t.y,t.z),e):e},_s.WGS84=Object.freeze(new _s(6378137,6378137,6356752.314245179)),_s.XIAN80=Object.freeze(new _s(6378140,6378140,6356755.29)),_s.CGCS2000=Object.freeze(new _s(6378137,6378137,6356752.31)),_s.UNIT_SPHERE=Object.freeze(new _s(1,1,1)),_s.MOON=Object.freeze(new _s(Xr.LUNAR_RADIUS,Xr.LUNAR_RADIUS,Xr.LUNAR_RADIUS)),_s.prototype.clone=function(t){return _s.clone(this,t)},_s.packedLength=Wr.packedLength,_s.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),Wr.pack(t._radii,e,n),e},_s.unpack=function(t,e,n){kr.defined("array",t),e=Lr(e,0);var r=Wr.unpack(t,e);return _s.fromCartesian3(r,n)},_s.prototype.geocentricSurfaceNormal=Wr.normalize,_s.prototype.geodeticSurfaceNormalCartographic=function(t,e){kr.typeOf.object("cartographic",t);var n=t.longitude,r=t.latitude,i=Math.cos(r),o=i*Math.cos(n),s=i*Math.sin(n),a=Math.sin(r);return Or(e)||(e=new Wr),e.x=o,e.y=s,e.z=a,Wr.normalize(e,e)},_s.prototype.geodeticSurfaceNormal=function(t,e){return Or(e)||(e=new Wr),e=Wr.multiplyComponents(t,this._oneOverRadiiSquared,e),Wr.normalize(e,e)};var Ss=new Wr,Qs=new Wr;_s.prototype.cartographicToCartesian=function(t,e){var n=Ss,r=Qs;this.geodeticSurfaceNormalCartographic(t,n),Wr.multiplyComponents(this._radiiSquared,n,r);var i=Math.sqrt(Wr.dot(n,r));return Wr.divideByScalar(r,i,r),Wr.multiplyByScalar(n,t.height,n),Or(e)||(e=new Wr),Wr.add(r,n,e)},_s.prototype.cartographicArrayToCartesianArray=function(t,e){kr.defined("cartographics",t);var n=t.length;Or(e)?e.length=n:e=new Array(n);for(var r=0;r<n;r++)e[r]=this.cartographicToCartesian(t[r],e[r]);return e};var Rs=new Wr,Ds=new Wr,Ts=new Wr;_s.prototype.cartesianToCartographic=function(t,e){var n=this.scaleToGeodeticSurface(t,Ds);if(Or(n)){var r=this.geodeticSurfaceNormal(n,Rs),i=Wr.subtract(t,n,Ts),o=Math.atan2(r.y,r.x),s=Math.asin(r.z),a=Xr.sign(Wr.dot(i,t))*Wr.magnitude(i);return Or(e)?(e.longitude=o,e.latitude=s,e.height=a,e):new ui(o,s,a)}},_s.prototype.cartesianArrayToCartographicArray=function(t,e){kr.defined("cartesians",t);var n=t.length;Or(e)?e.length=n:e=new Array(n);for(var r=0;r<n;++r)e[r]=this.cartesianToCartographic(t[r],e[r]);return e},_s.prototype.scaleToGeodeticSurface=function(t,e){return ai(t,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,e)},_s.prototype.scaleToGeocentricSurface=function(t,e){kr.typeOf.object("cartesian",t),Or(e)||(e=new Wr);var n=t.x,r=t.y,i=t.z,o=this._oneOverRadiiSquared,s=1/Math.sqrt(n*n*o.x+r*r*o.y+i*i*o.z);return Wr.multiplyByScalar(t,s,e)},_s.prototype.transformPositionToScaledSpace=function(t,e){return Or(e)||(e=new Wr),Wr.multiplyComponents(t,this._oneOverRadii,e)},_s.prototype.transformPositionFromScaledSpace=function(t,e){return Or(e)||(e=new Wr),Wr.multiplyComponents(t,this._radii,e)},_s.prototype.equals=function(t){return this===t||Or(t)&&Wr.equals(this._radii,t._radii)},_s.prototype.toString=function(){return this._radii.toString()},_s.prototype.getSurfaceNormalIntersectionWithZAxis=function(t,e,n){if(kr.typeOf.object("position",t),!Xr.equalsEpsilon(this._radii.x,this._radii.y,Xr.EPSILON15))throw new Nr("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");kr.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),e=Lr(e,0);var r=this._squaredXOverSquaredZ;if(Or(n)||(n=new Wr),n.x=0,n.y=0,n.z=t.z*(1-r),!(Math.abs(n.z)>=this._radii.z-e))return n};const Os=new Wr;function Ns(t,e,n){this.heading=Lr(t,0),this.pitch=Lr(e,0),this.roll=Lr(n,0)}_s.prototype.getLocalCurvature=function(t,e){kr.typeOf.object("surfacePosition",t),Or(e)||(e=new di);const n=this.getSurfaceNormalIntersectionWithZAxis(t,0,Os),r=Wr.distance(t,n),i=r*(this.minimumRadius*r/this.maximumRadius**2)**2;return di.fromElements(1/r,1/i,e)},Ns.fromQuaternion=function(t,e){if(!Or(t))throw new Nr("quaternion is required");Or(e)||(e=new Ns);var n=2*(t.w*t.y-t.z*t.x),r=1-2*(t.x*t.x+t.y*t.y),i=2*(t.w*t.x+t.y*t.z),o=1-2*(t.y*t.y+t.z*t.z),s=2*(t.w*t.z+t.x*t.y);return e.heading=-Math.atan2(s,o),e.roll=Math.atan2(i,r),e.pitch=-Xr.asinClamped(n),e},Ns.fromDegrees=function(t,e,n,r){if(!Or(t))throw new Nr("heading is required");if(!Or(e))throw new Nr("pitch is required");if(!Or(n))throw new Nr("roll is required");return Or(r)||(r=new Ns),r.heading=t*Xr.RADIANS_PER_DEGREE,r.pitch=e*Xr.RADIANS_PER_DEGREE,r.roll=n*Xr.RADIANS_PER_DEGREE,r},Ns.clone=function(t,e){if(Or(t))return Or(e)?(e.heading=t.heading,e.pitch=t.pitch,e.roll=t.roll,e):new Ns(t.heading,t.pitch,t.roll)},Ns.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.heading===e.heading&&t.pitch===e.pitch&&t.roll===e.roll},Ns.equalsEpsilon=function(t,e,n,r){return t===e||Or(t)&&Or(e)&&Xr.equalsEpsilon(t.heading,e.heading,n,r)&&Xr.equalsEpsilon(t.pitch,e.pitch,n,r)&&Xr.equalsEpsilon(t.roll,e.roll,n,r)},Ns.prototype.clone=function(t){return Ns.clone(this,t)},Ns.prototype.equals=function(t){return Ns.equals(this,t)},Ns.prototype.equalsEpsilon=function(t,e,n){return Ns.equalsEpsilon(this,t,e,n)},Ns.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Fs,zs,ks,Ls=/((?:.*\/)|^)SuperMap3D\.js$/;function Ps(t){return"undefined"==typeof document?t:(Or(Fs)||(Fs=document.createElement("a")),Fs.href=t,Fs.href=Fs.href,Fs.href)}function js(){if(Or(zs))return zs;var t;if(t="undefined"!=typeof SUPERMAP3D_BASE_URL?SUPERMAP3D_BASE_URL:"object"==typeof define&&Or(define.amd)&&!define.amd.toUrlUndefined&&Or(require.toUrl)?Eo("..",Ks("Core/buildModuleUrl.js")):function(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;++e){var r=t[e].getAttribute("src"),i=Ls.exec(r);if(null!==i)return i[1]}}(),!Or(t))throw new Nr("Unable to determine SuperMap3D base URL automatically, try defining a global variable called SUPERMAP3D_BASE_URL.");return(zs=new ls({url:Ps(t)})).appendForwardSlash(),zs}function Us(t){return Ps(require.toUrl("../"+t))}function qs(t){return js().getDerivedResource({url:t}).url}function Ks(t){return Or(ks)||(ks="object"==typeof define&&Or(define.amd)&&!define.amd.toUrlUndefined&&Or(require.toUrl)?Us:qs),ks(t)}function Hs(t,e,n){this.x=t,this.y=e,this.s=n}function Ys(t){t=Lr(t,Lr.EMPTY_OBJECT),this._xysFileUrlTemplate=ls.createIfNeeded(t.xysFileUrlTemplate),this._interpolationOrder=Lr(t.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=Lr(t.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new eo(this._sampleZeroJulianEphemerisDate,0,Fi.TAI),this._stepSizeDays=Lr(t.stepSizeDays,1),this._samplesPerXysFile=Lr(t.samplesPerXysFile,1e3),this._totalSamples=Lr(t.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var e=this._interpolationOrder,n=this._denominators=new Array(e+1),r=this._xTable=new Array(e+1),i=Math.pow(this._stepSizeDays,e),o=0;o<=e;++o){n[o]=i,r[o]=o*this._stepSizeDays;for(var s=0;s<=e;++s)s!==o&&(n[o]*=o-s);n[o]=1/n[o]}this._work=new Array(e+1),this._coef=new Array(e+1)}Ks._cesiumScriptRegex=Ls,Ks._buildModuleUrlFromBaseUrl=qs,Ks._clearBaseResource=function(){zs=void 0},Ks.setBaseUrl=function(t){zs=ls.DEFAULT.getDerivedResource({url:t})},Ks.getCesiumBaseUrl=js;var Gs=new eo(0,0,Fi.TAI);function Vs(t,e,n){var r=Gs;return r.dayNumber=e,r.secondsOfDay=n,eo.daysDifference(r,t._sampleZeroDateTT)}function Xs(t,e){if(t._chunkDownloadsInProgress[e])return t._chunkDownloadsInProgress[e];var n,r=Co();t._chunkDownloadsInProgress[e]=r;var i=t._xysFileUrlTemplate;return n=Or(i)?i.getDerivedResource({templateValues:{0:e}}):new ls({url:Ks("Assets/IAU2006_XYS/IAU2006_XYS_"+e+".json")}),Promise.resolve(n.fetchJson()).then((function(n){t._chunkDownloadsInProgress[e]=!1;for(var i=t._samples,o=n.samples,s=e*t._samplesPerXysFile*3,a=0,u=o.length;a<u;++a)i[s+a]=o[a];r.resolve()})).catch((function(t){console.log(t)})),r.promise}function Ws(t,e,n,r,i,o,s,a,u){this[0]=Lr(t,0),this[1]=Lr(r,0),this[2]=Lr(s,0),this[3]=Lr(e,0),this[4]=Lr(i,0),this[5]=Lr(a,0),this[6]=Lr(n,0),this[7]=Lr(o,0),this[8]=Lr(u,0),this.isMatrix3=!0}Ys.prototype.preload=function(t,e,n,r){var i=Vs(this,t,e),o=Vs(this,n,r),s=i/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var a=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;a>=this._totalSamples&&(a=this._totalSamples-1);for(var u=s/this._samplesPerXysFile|0,c=a/this._samplesPerXysFile|0,l=[],h=u;h<=c;++h)l.push(Xs(this,h));return Promise.all(l)},Ys.prototype.computeXysRadians=function(t,e,n){var r=Vs(this,t,e);if(!(r<0)){var i=r/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var o=this._interpolationOrder,s=i-(o/2|0);s<0&&(s=0);var a=s+o;a>=this._totalSamples&&(s=(a=this._totalSamples-1)-o)<0&&(s=0);var u=!1,c=this._samples;if(Or(c[3*s])||(Xs(this,s/this._samplesPerXysFile|0),u=!0),Or(c[3*a])||(Xs(this,a/this._samplesPerXysFile|0),u=!0),!u){Or(n)?(n.x=0,n.y=0,n.s=0):n=new Hs(0,0,0);var l,h,A=r-s*this._stepSizeDays,f=this._work,p=this._denominators,d=this._coef,g=this._xTable;for(l=0;l<=o;++l)f[l]=A-g[l];for(l=0;l<=o;++l){for(d[l]=1,h=0;h<=o;++h)h!==l&&(d[l]*=f[h]);d[l]*=p[l];var y=3*(s+l);n.x+=d[l]*c[y++],n.y+=d[l]*c[y++],n.s+=d[l]*c[y]}return n}}}},Ws.packedLength=9,Ws.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e},Ws.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new Ws),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n},Ws.clone=function(t,e){if(Or(t))return Or(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):new Ws(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},Ws.fromArray=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new Ws),n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n[4]=t[e+4],n[5]=t[e+5],n[6]=t[e+6],n[7]=t[e+7],n[8]=t[e+8],n},Ws.fromColumnMajorArray=function(t,e){return kr.defined("values",t),Ws.clone(t,e)},Ws.fromRowMajorArray=function(t,e){return kr.defined("values",t),Or(e)?(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e):new Ws(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Ws.fromQuaternion=function(t,e){kr.typeOf.object("quaternion",t);var n=t.x*t.x,r=t.x*t.y,i=t.x*t.z,o=t.x*t.w,s=t.y*t.y,a=t.y*t.z,u=t.y*t.w,c=t.z*t.z,l=t.z*t.w,h=t.w*t.w,A=n-s-c+h,f=2*(r-l),p=2*(i+u),d=2*(r+l),g=-n+s-c+h,y=2*(a-o),m=2*(i-u),I=2*(a+o),C=-n-s+c+h;return Or(e)?(e[0]=A,e[1]=d,e[2]=m,e[3]=f,e[4]=g,e[5]=I,e[6]=p,e[7]=y,e[8]=C,e):new Ws(A,f,p,d,g,y,m,I,C)},Ws.fromHeadingPitchRoll=function(t,e){kr.typeOf.object("headingPitchRoll",t);var n=Math.cos(-t.pitch),r=Math.cos(-t.heading),i=Math.cos(t.roll),o=Math.sin(-t.pitch),s=Math.sin(-t.heading),a=Math.sin(t.roll),u=n*r,c=-i*s+a*o*r,l=a*s+i*o*r,h=n*s,A=i*r+a*o*s,f=-a*r+i*o*s,p=-o,d=a*n,g=i*n;return Or(e)?(e[0]=u,e[1]=h,e[2]=p,e[3]=c,e[4]=A,e[5]=d,e[6]=l,e[7]=f,e[8]=g,e):new Ws(u,c,l,h,A,f,p,d,g)},Ws.fromScale=function(t,e){return kr.typeOf.object("scale",t),Or(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=t.y,e[5]=0,e[6]=0,e[7]=0,e[8]=t.z,e):new Ws(t.x,0,0,0,t.y,0,0,0,t.z)},Ws.fromUniformScale=function(t,e){return kr.typeOf.number("scale",t),Or(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=t,e):new Ws(t,0,0,0,t,0,0,0,t)},Ws.fromCrossProduct=function(t,e){return kr.typeOf.object("vector",t),Or(e)?(e[0]=0,e[1]=t.z,e[2]=-t.y,e[3]=-t.z,e[4]=0,e[5]=t.x,e[6]=t.y,e[7]=-t.x,e[8]=0,e):new Ws(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0)},Ws.fromRotationX=function(t,e){kr.typeOf.number("angle",t);var n=Math.cos(t),r=Math.sin(t);return Or(e)?(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=n,e[5]=r,e[6]=0,e[7]=-r,e[8]=n,e):new Ws(1,0,0,0,n,-r,0,r,n)},Ws.fromRotationY=function(t,e){kr.typeOf.number("angle",t);var n=Math.cos(t),r=Math.sin(t);return Or(e)?(e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=1,e[5]=0,e[6]=r,e[7]=0,e[8]=n,e):new Ws(n,0,r,0,1,0,-r,0,n)},Ws.fromRotationZ=function(t,e){kr.typeOf.number("angle",t);var n=Math.cos(t),r=Math.sin(t);return Or(e)?(e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Ws(n,-r,0,r,n,0,0,0,1)},Ws.toArray=function(t,e){return kr.typeOf.object("matrix",t),Or(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},Ws.getElementIndex=function(t,e){return kr.typeOf.number.greaterThanOrEquals("row",e,0),kr.typeOf.number.lessThanOrEquals("row",e,2),kr.typeOf.number.greaterThanOrEquals("column",t,0),kr.typeOf.number.lessThanOrEquals("column",t,2),3*t+e},Ws.getColumn=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,2),kr.typeOf.object("result",n);var r=3*e,i=t[r],o=t[r+1],s=t[r+2];return n.x=i,n.y=o,n.z=s,n},Ws.setColumn=function(t,e,n,r){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,2),kr.typeOf.object("cartesian",n),kr.typeOf.object("result",r);var i=3*e;return(r=Ws.clone(t,r))[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r},Ws.getRow=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,2),kr.typeOf.object("result",n);var r=t[e],i=t[e+3],o=t[e+6];return n.x=r,n.y=i,n.z=o,n},Ws.setRow=function(t,e,n,r){return kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,2),kr.typeOf.object("cartesian",n),kr.typeOf.object("result",r),(r=Ws.clone(t,r))[e]=n.x,r[e+3]=n.y,r[e+6]=n.z,r};var Js=new Wr;Ws.getScale=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e.x=Wr.magnitude(Wr.fromElements(t[0],t[1],t[2],Js)),e.y=Wr.magnitude(Wr.fromElements(t[3],t[4],t[5],Js)),e.z=Wr.magnitude(Wr.fromElements(t[6],t[7],t[8],Js)),e};var Zs=new Wr;Ws.getMaximumScale=function(t){return Ws.getScale(t,Zs),Wr.maximumComponent(Zs)},Ws.multiply=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n);var r=t[0]*e[0]+t[3]*e[1]+t[6]*e[2],i=t[1]*e[0]+t[4]*e[1]+t[7]*e[2],o=t[2]*e[0]+t[5]*e[1]+t[8]*e[2],s=t[0]*e[3]+t[3]*e[4]+t[6]*e[5],a=t[1]*e[3]+t[4]*e[4]+t[7]*e[5],u=t[2]*e[3]+t[5]*e[4]+t[8]*e[5],c=t[0]*e[6]+t[3]*e[7]+t[6]*e[8],l=t[1]*e[6]+t[4]*e[7]+t[7]*e[8],h=t[2]*e[6]+t[5]*e[7]+t[8]*e[8];return n[0]=r,n[1]=i,n[2]=o,n[3]=s,n[4]=a,n[5]=u,n[6]=c,n[7]=l,n[8]=h,n},Ws.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n},Ws.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n},Ws.multiplyByVector=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("cartesian",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z,s=t[0]*r+t[3]*i+t[6]*o,a=t[1]*r+t[4]*i+t[7]*o,u=t[2]*r+t[5]*i+t[8]*o;return n.x=s,n.y=a,n.z=u,n},Ws.multiplyByScalar=function(t,e,n){return kr.typeOf.object("matrix",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n},Ws.multiplyByScale=function(t,e,n){return kr.typeOf.object("matrix",t),kr.typeOf.object("scale",e),kr.typeOf.object("result",n),n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.x,n[3]=t[3]*e.y,n[4]=t[4]*e.y,n[5]=t[5]*e.y,n[6]=t[6]*e.z,n[7]=t[7]*e.z,n[8]=t[8]*e.z,n},Ws.negate=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e},Ws.transpose=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=t[0],r=t[3],i=t[6],o=t[1],s=t[4],a=t[7],u=t[2],c=t[5],l=t[8];return e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=s,e[5]=a,e[6]=u,e[7]=c,e[8]=l,e};var $s=new Wr(1,1,1);Ws.getRotation=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=Wr.divideComponents($s,Ws.getScale(t,Zs),Zs);return e=Ws.multiplyByScale(t,n,e)};var ta=[1,0,0],ea=[2,2,1];function na(t){for(var e=0,n=0;n<3;++n){var r=t[Ws.getElementIndex(ea[n],ta[n])];e+=2*r*r}return Math.sqrt(e)}function ra(t,e){for(var n=Xr.EPSILON15,r=0,i=1,o=0;o<3;++o){var s=Math.abs(t[Ws.getElementIndex(ea[o],ta[o])]);s>r&&(i=o,r=s)}var a=1,u=0,c=ta[i],l=ea[i];if(Math.abs(t[Ws.getElementIndex(l,c)])>n){var h,A=(t[Ws.getElementIndex(l,l)]-t[Ws.getElementIndex(c,c)])/2/t[Ws.getElementIndex(l,c)];u=(h=A<0?-1/(-A+Math.sqrt(1+A*A)):1/(A+Math.sqrt(1+A*A)))*(a=1/Math.sqrt(1+h*h))}return(e=Ws.clone(Ws.IDENTITY,e))[Ws.getElementIndex(c,c)]=e[Ws.getElementIndex(l,l)]=a,e[Ws.getElementIndex(l,c)]=u,e[Ws.getElementIndex(c,l)]=-u,e}var ia=new Ws,oa=new Ws;function sa(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d){this[0]=Lr(t,0),this[1]=Lr(i,0),this[2]=Lr(u,0),this[3]=Lr(A,0),this[4]=Lr(e,0),this[5]=Lr(o,0),this[6]=Lr(c,0),this[7]=Lr(f,0),this[8]=Lr(n,0),this[9]=Lr(s,0),this[10]=Lr(l,0),this[11]=Lr(p,0),this[12]=Lr(r,0),this[13]=Lr(a,0),this[14]=Lr(h,0),this[15]=Lr(d,0),this.isMatrix4=!0}Ws.computeEigenDecomposition=function(t,e){kr.typeOf.object("matrix",t);var n=Xr.EPSILON20,r=0,i=0;Or(e)||(e={});for(var o=e.unitary=Ws.clone(Ws.IDENTITY,e.unitary),s=e.diagonal=Ws.clone(t,e.diagonal),a=n*function(t){for(var e=0,n=0;n<9;++n){var r=t[n];e+=r*r}return Math.sqrt(e)}(s);i<10&&na(s)>a;)ra(s,ia),Ws.transpose(ia,oa),Ws.multiply(s,ia,s),Ws.multiply(oa,s,s),Ws.multiply(o,ia,o),++r>2&&(++i,r=0);return e},Ws.abs=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e},Ws.determinant=function(t){kr.typeOf.object("matrix",t);var e=t[0],n=t[3],r=t[6],i=t[1],o=t[4],s=t[7],a=t[2],u=t[5],c=t[8];return e*(o*c-u*s)+i*(u*r-n*c)+a*(n*s-o*r)},Ws.inverse=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=Ws.determinant(t);if(Math.abs(h)<=Xr.EPSILON15)throw new Nr("matrix is not invertible");e[0]=s*l-c*a,e[1]=c*i-r*l,e[2]=r*a-s*i,e[3]=u*a-o*l,e[4]=n*l-u*i,e[5]=o*i-n*a,e[6]=o*c-u*s,e[7]=u*r-n*c,e[8]=n*s-o*r;var A=1/h;return Ws.multiplyByScalar(e,A,e)},Ws.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Ws.equalsEpsilon=function(t,e,n){return kr.typeOf.number("epsilon",n),t===e||Or(t)&&Or(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n},Ws.IDENTITY=Object.freeze(new Ws(1,0,0,0,1,0,0,0,1)),Ws.ZERO=Object.freeze(new Ws(0,0,0,0,0,0,0,0,0)),Ws.COLUMN0ROW0=0,Ws.COLUMN0ROW1=1,Ws.COLUMN0ROW2=2,Ws.COLUMN1ROW0=3,Ws.COLUMN1ROW1=4,Ws.COLUMN1ROW2=5,Ws.COLUMN2ROW0=6,Ws.COLUMN2ROW1=7,Ws.COLUMN2ROW2=8,Object.defineProperties(Ws.prototype,{length:{get:function(){return Ws.packedLength}}}),Ws.prototype.clone=function(t){return Ws.clone(this,t)},Ws.prototype.equals=function(t){return Ws.equals(this,t)},Ws.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]},Ws.prototype.equalsEpsilon=function(t,e){return Ws.equalsEpsilon(this,t,e)},Ws.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},Ws.prototype.toArray=function(t,e){Ws.pack(this,t,e)},sa.packedLength=16,sa.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e[n++]=t[9],e[n++]=t[10],e[n++]=t[11],e[n++]=t[12],e[n++]=t[13],e[n++]=t[14],e[n]=t[15],e},sa.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new sa),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n[9]=t[e++],n[10]=t[e++],n[11]=t[e++],n[12]=t[e++],n[13]=t[e++],n[14]=t[e++],n[15]=t[e],n},sa.clone=function(t,e){if(Or(t))return Or(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):new sa(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},sa.fromArray=sa.unpack,sa.fromColumnMajorArray=function(t,e){return kr.defined("values",t),sa.clone(t,e)},sa.fromRowMajorArray=function(t,e){return kr.defined("values",t),Or(e)?(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e):new sa(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},sa.fromRotationTranslation=function(t,e,n){return kr.typeOf.object("rotation",t),e=Lr(e,Wr.ZERO),Or(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=0,n[4]=t[3],n[5]=t[4],n[6]=t[5],n[7]=0,n[8]=t[6],n[9]=t[7],n[10]=t[8],n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n):new sa(t[0],t[3],t[6],e.x,t[1],t[4],t[7],e.y,t[2],t[5],t[8],e.z,0,0,0,1)},sa.fromTranslationQuaternionRotationScale=function(t,e,n,r){kr.typeOf.object("translation",t),kr.typeOf.object("rotation",e),kr.typeOf.object("scale",n),Or(r)||(r=new sa);var i=n.x,o=n.y,s=n.z,a=e.x*e.x,u=e.x*e.y,c=e.x*e.z,l=e.x*e.w,h=e.y*e.y,A=e.y*e.z,f=e.y*e.w,p=e.z*e.z,d=e.z*e.w,g=e.w*e.w,y=a-h-p+g,m=2*(u-d),I=2*(c+f),C=2*(u+d),E=-a+h-p+g,b=2*(A-l),v=2*(c-f),x=2*(A+l),w=-a-h+p+g;return r[0]=y*i,r[1]=C*i,r[2]=v*i,r[3]=0,r[4]=m*o,r[5]=E*o,r[6]=x*o,r[7]=0,r[8]=I*s,r[9]=b*s,r[10]=w*s,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r},sa.fromTranslationRotationScale=function(t,e){return kr.typeOf.object("translationRotationScale",t),sa.fromTranslationQuaternionRotationScale(t.translation,t.rotation,t.scale,e)},sa.fromTranslation=function(t,e){return kr.typeOf.object("translation",t),sa.fromRotationTranslation(Ws.IDENTITY,t,e)},sa.fromScale=function(t,e){return kr.typeOf.object("scale",t),Or(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t.y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t.z,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new sa(t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1)},sa.fromUniformScale=function(t,e){return kr.typeOf.number("scale",t),Or(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new sa(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1)};var aa=new Wr,ua=new Wr,ca=new Wr;sa.fromCamera=function(t,e){kr.typeOf.object("camera",t);var n=t.position,r=t.direction,i=t.up;kr.typeOf.object("camera.position",n),kr.typeOf.object("camera.direction",r),kr.typeOf.object("camera.up",i),Wr.normalize(r,aa),Wr.normalize(Wr.cross(aa,i,ua),ua),Wr.normalize(Wr.cross(ua,aa,ca),ca);var o=ua.x,s=ua.y,a=ua.z,u=aa.x,c=aa.y,l=aa.z,h=ca.x,A=ca.y,f=ca.z,p=n.x,d=n.y,g=n.z,y=o*-p+s*-d+a*-g,m=h*-p+A*-d+f*-g,I=u*p+c*d+l*g;return Or(e)?(e[0]=o,e[1]=h,e[2]=-u,e[3]=0,e[4]=s,e[5]=A,e[6]=-c,e[7]=0,e[8]=a,e[9]=f,e[10]=-l,e[11]=0,e[12]=y,e[13]=m,e[14]=I,e[15]=1,e):new sa(o,s,a,y,h,A,f,m,-u,-c,-l,I,0,0,0,1)},sa.computePerspectiveFieldOfView=function(t,e,n,r,i){kr.typeOf.number.greaterThan("fovY",t,0),kr.typeOf.number.lessThan("fovY",t,Math.PI),kr.typeOf.number.greaterThan("near",n,0),kr.typeOf.number.greaterThan("far",r,0),kr.typeOf.object("result",i);var o=1/Math.tan(.5*t),s=o/e,a=(r+n)/(n-r),u=2*r*n/(n-r);return i[0]=s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=a,i[11]=-1,i[12]=0,i[13]=0,i[14]=u,i[15]=0,i},sa.computeOrthographicOffCenter=function(t,e,n,r,i,o,s){kr.typeOf.number("left",t),kr.typeOf.number("right",e),kr.typeOf.number("bottom",n),kr.typeOf.number("top",r),kr.typeOf.number("near",i),kr.typeOf.number("far",o),kr.typeOf.object("result",s);var a=1/(e-t),u=1/(r-n),c=1/(o-i),l=-(e+t)*a,h=-(r+n)*u,A=-(o+i)*c;return a*=2,u*=2,c*=-2,s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=c,s[11]=0,s[12]=l,s[13]=h,s[14]=A,s[15]=1,sa.halfZRange&&sa.multiply(sa.ConvertNDCToHalfZRange,s,s),s},sa.computePerspectiveOffCenter=function(t,e,n,r,i,o,s){kr.typeOf.number("left",t),kr.typeOf.number("right",e),kr.typeOf.number("bottom",n),kr.typeOf.number("top",r),kr.typeOf.number("near",i),kr.typeOf.number("far",o),kr.typeOf.object("result",s);var a=2*i/(e-t),u=2*i/(r-n),c=(e+t)/(e-t),l=(r+n)/(r-n),h=-(o+i)/(o-i),A=-2*o*i/(o-i);return s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=0,s[7]=0,s[8]=c,s[9]=l,s[10]=h,s[11]=-1,s[12]=0,s[13]=0,s[14]=A,s[15]=0,sa.halfZRange&&sa.multiply(sa.ConvertNDCToHalfZRange,s,s),s},sa.computeInfinitePerspectiveOffCenter=function(t,e,n,r,i,o){kr.typeOf.number("left",t),kr.typeOf.number("right",e),kr.typeOf.number("bottom",n),kr.typeOf.number("top",r),kr.typeOf.number("near",i),kr.typeOf.object("result",o);var s=2*i/(e-t),a=2*i/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-2*i;return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=u,o[9]=c,o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=l,o[15]=0,sa.halfZRange&&sa.multiply(sa.ConvertNDCToHalfZRange,o,o),o},sa.computeViewportTransformation=function(t,e,n,r){kr.typeOf.object("result",r),t=Lr(t,Lr.EMPTY_OBJECT);var i=Lr(t.x,0),o=Lr(t.y,0),s=Lr(t.width,0),a=Lr(t.height,0);e=Lr(e,0);var u=.5*s,c=.5*a,l=.5*((n=Lr(n,1))-e),h=u,A=c,f=l,p=i+u,d=o+c,g=e+l;return r[0]=h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=f,r[11]=0,r[12]=p,r[13]=d,r[14]=g,r[15]=1,r},sa.computeView=function(t,e,n,r,i){return kr.typeOf.object("position",t),kr.typeOf.object("direction",e),kr.typeOf.object("up",n),kr.typeOf.object("right",r),kr.typeOf.object("result",i),i[0]=r.x,i[1]=n.x,i[2]=-e.x,i[3]=0,i[4]=r.y,i[5]=n.y,i[6]=-e.y,i[7]=0,i[8]=r.z,i[9]=n.z,i[10]=-e.z,i[11]=0,i[12]=-Wr.dot(r,t),i[13]=-Wr.dot(n,t),i[14]=Wr.dot(e,t),i[15]=1,i},sa.toArray=function(t,e){return kr.typeOf.object("matrix",t),Or(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},sa.getElementIndex=function(t,e){return kr.typeOf.number.greaterThanOrEquals("row",e,0),kr.typeOf.number.lessThanOrEquals("row",e,3),kr.typeOf.number.greaterThanOrEquals("column",t,0),kr.typeOf.number.lessThanOrEquals("column",t,3),4*t+e},sa.getColumn=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,3),kr.typeOf.object("result",n);var r=4*e,i=t[r],o=t[r+1],s=t[r+2],a=t[r+3];return n.x=i,n.y=o,n.z=s,n.w=a,n},sa.setColumn=function(t,e,n,r){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,3),kr.typeOf.object("cartesian",n),kr.typeOf.object("result",r);var i=4*e;return(r=sa.clone(t,r))[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r[i+3]=n.w,r},sa.setTranslation=function(t,e,n){return kr.typeOf.object("matrix",t),kr.typeOf.object("translation",e),kr.typeOf.object("result",n),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=t[15],n};var la=new Wr;sa.setScale=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("scale",e),kr.typeOf.object("result",n);var r=sa.getScale(t,la),i=Wr.divideComponents(e,r,la);return sa.multiplyByScale(t,i,n)},sa.getRow=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,3),kr.typeOf.object("result",n);var r=t[e],i=t[e+4],o=t[e+8],s=t[e+12];return n.x=r,n.y=i,n.z=o,n.w=s,n},sa.setRow=function(t,e,n,r){return kr.typeOf.object("matrix",t),kr.typeOf.number.greaterThanOrEquals("index",e,0),kr.typeOf.number.lessThanOrEquals("index",e,3),kr.typeOf.object("cartesian",n),kr.typeOf.object("result",r),(r=sa.clone(t,r))[e]=n.x,r[e+4]=n.y,r[e+8]=n.z,r[e+12]=n.w,r};var ha=new Wr;sa.getScale=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e.x=Wr.magnitude(Wr.fromElements(t[0],t[1],t[2],ha)),e.y=Wr.magnitude(Wr.fromElements(t[4],t[5],t[6],ha)),e.z=Wr.magnitude(Wr.fromElements(t[8],t[9],t[10],ha)),e};var Aa=new Wr;sa.getMaximumScale=function(t){return sa.getScale(t,Aa),Wr.maximumComponent(Aa)},sa.multiply=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n);var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=t[8],A=t[9],f=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],I=e[0],C=e[1],E=e[2],b=e[3],v=e[4],x=e[5],w=e[6],M=e[7],B=e[8],_=e[9],S=e[10],Q=e[11],R=e[12],D=e[13],T=e[14],O=e[15],N=r*I+a*C+h*E+d*b,F=i*I+u*C+A*E+g*b,z=o*I+c*C+f*E+y*b,k=s*I+l*C+p*E+m*b,L=r*v+a*x+h*w+d*M,P=i*v+u*x+A*w+g*M,j=o*v+c*x+f*w+y*M,U=s*v+l*x+p*w+m*M,q=r*B+a*_+h*S+d*Q,K=i*B+u*_+A*S+g*Q,H=o*B+c*_+f*S+y*Q,Y=s*B+l*_+p*S+m*Q,G=r*R+a*D+h*T+d*O,V=i*R+u*D+A*T+g*O,X=o*R+c*D+f*T+y*O,W=s*R+l*D+p*T+m*O;return n[0]=N,n[1]=F,n[2]=z,n[3]=k,n[4]=L,n[5]=P,n[6]=j,n[7]=U,n[8]=q,n[9]=K,n[10]=H,n[11]=Y,n[12]=G,n[13]=V,n[14]=X,n[15]=W,n},sa.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n},sa.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n},sa.multiplyTransformation=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n);var r=t[0],i=t[1],o=t[2],s=t[4],a=t[5],u=t[6],c=t[8],l=t[9],h=t[10],A=t[12],f=t[13],p=t[14],d=e[0],g=e[1],y=e[2],m=e[4],I=e[5],C=e[6],E=e[8],b=e[9],v=e[10],x=e[12],w=e[13],M=e[14],B=r*d+s*g+c*y,_=i*d+a*g+l*y,S=o*d+u*g+h*y,Q=r*m+s*I+c*C,R=i*m+a*I+l*C,D=o*m+u*I+h*C,T=r*E+s*b+c*v,O=i*E+a*b+l*v,N=o*E+u*b+h*v,F=r*x+s*w+c*M+A,z=i*x+a*w+l*M+f,k=o*x+u*w+h*M+p;return n[0]=B,n[1]=_,n[2]=S,n[3]=0,n[4]=Q,n[5]=R,n[6]=D,n[7]=0,n[8]=T,n[9]=O,n[10]=N,n[11]=0,n[12]=F,n[13]=z,n[14]=k,n[15]=1,n},sa.multiplyByMatrix3=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("rotation",e),kr.typeOf.object("result",n);var r=t[0],i=t[1],o=t[2],s=t[4],a=t[5],u=t[6],c=t[8],l=t[9],h=t[10],A=e[0],f=e[1],p=e[2],d=e[3],g=e[4],y=e[5],m=e[6],I=e[7],C=e[8],E=r*A+s*f+c*p,b=i*A+a*f+l*p,v=o*A+u*f+h*p,x=r*d+s*g+c*y,w=i*d+a*g+l*y,M=o*d+u*g+h*y,B=r*m+s*I+c*C,_=i*m+a*I+l*C,S=o*m+u*I+h*C;return n[0]=E,n[1]=b,n[2]=v,n[3]=0,n[4]=x,n[5]=w,n[6]=M,n[7]=0,n[8]=B,n[9]=_,n[10]=S,n[11]=0,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},sa.multiplyByTranslation=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("translation",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z,s=r*t[0]+i*t[4]+o*t[8]+t[12],a=r*t[1]+i*t[5]+o*t[9]+t[13],u=r*t[2]+i*t[6]+o*t[10]+t[14];return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=s,n[13]=a,n[14]=u,n[15]=t[15],n};var fa=new Wr;sa.multiplyByUniformScale=function(t,e,n){return kr.typeOf.object("matrix",t),kr.typeOf.number("scale",e),kr.typeOf.object("result",n),fa.x=e,fa.y=e,fa.z=e,sa.multiplyByScale(t,fa,n)},sa.multiplyByScale=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("scale",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z;return 1===r&&1===i&&1===o?sa.clone(t,n):(n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=0,n[4]=i*t[4],n[5]=i*t[5],n[6]=i*t[6],n[7]=0,n[8]=o*t[8],n[9]=o*t[9],n[10]=o*t[10],n[11]=0,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=1,n)},sa.multiplyByVector=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("cartesian",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z,s=e.w,a=t[0]*r+t[4]*i+t[8]*o+t[12]*s,u=t[1]*r+t[5]*i+t[9]*o+t[13]*s,c=t[2]*r+t[6]*i+t[10]*o+t[14]*s,l=t[3]*r+t[7]*i+t[11]*o+t[15]*s;return n.x=a,n.y=u,n.z=c,n.w=l,n},sa.multiplyByPointAsVector=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("cartesian",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z,s=t[0]*r+t[4]*i+t[8]*o,a=t[1]*r+t[5]*i+t[9]*o,u=t[2]*r+t[6]*i+t[10]*o;return n.x=s,n.y=a,n.z=u,n},sa.multiplyByPoint=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("cartesian",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z,s=t[0]*r+t[4]*i+t[8]*o+t[12],a=t[1]*r+t[5]*i+t[9]*o+t[13],u=t[2]*r+t[6]*i+t[10]*o+t[14];return n.x=s,n.y=a,n.z=u,n},sa.multiplyByDirection=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("cartesian",e),kr.typeOf.object("result",n);var r=e.x,i=e.y,o=e.z;return n.x=r*t[0]+i*t[4]+o*t[8],n.y=r*t[1]+i*t[5]+o*t[9],n.z=r*t[2]+i*t[6]+o*t[10],n},sa.multiplyByScalar=function(t,e,n){return kr.typeOf.object("matrix",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n},sa.multiplyByPlane=function(t,e,n){kr.typeOf.object("matrix",t),kr.typeOf.object("plane",e),kr.typeOf.object("result",n);var r=new sa,i=new sa;sa.inverse(t,r),sa.transpose(r,i);var o=new Ei(e.normal.x,e.normal.y,e.normal.z,e.distance);sa.multiplyByVector(i,o,o),n.normal.x=o.x,n.normal.y=o.y,n.normal.z=o.z;var s=Wr.magnitude(n.normal);return Wr.normalize(n.normal,n.normal),n.distance=o.w/s,n},sa.negate=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},sa.transpose=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=t[1],r=t[2],i=t[3],o=t[6],s=t[7],a=t[11];return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[10]=t[10],e[11]=t[14],e[12]=i,e[13]=s,e[14]=a,e[15]=t[15],e},sa.abs=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e[9]=Math.abs(t[9]),e[10]=Math.abs(t[10]),e[11]=Math.abs(t[11]),e[12]=Math.abs(t[12]),e[13]=Math.abs(t[13]),e[14]=Math.abs(t[14]),e[15]=Math.abs(t[15]),e},sa.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[3]===e[3]&&t[7]===e[7]&&t[11]===e[11]&&t[15]===e[15]},sa.equalsEpsilon=function(t,e,n){return kr.typeOf.number("epsilon",n),t===e||Or(t)&&Or(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n&&Math.abs(t[9]-e[9])<=n&&Math.abs(t[10]-e[10])<=n&&Math.abs(t[11]-e[11])<=n&&Math.abs(t[12]-e[12])<=n&&Math.abs(t[13]-e[13])<=n&&Math.abs(t[14]-e[14])<=n&&Math.abs(t[15]-e[15])<=n},sa.getTranslation=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e.x=t[12],e.y=t[13],e.z=t[14],e},sa.getMatrix3=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},sa.getRotation=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e};var pa=new Ws,da=new Ws,ga=new Ei,ya=new Ei(0,0,0,1);sa.inverse=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=t[0],r=t[4],i=t[8],o=t[12],s=t[1],a=t[5],u=t[9],c=t[13],l=t[2],h=t[6],A=t[10],f=t[14],p=t[3],d=t[7],g=t[11],y=t[15],m=A*y,I=f*g,C=h*y,E=f*d,b=h*g,v=A*d,x=l*y,w=f*p,M=l*g,B=A*p,_=l*d,S=h*p,Q=m*a+E*u+b*c-(I*a+C*u+v*c),R=I*s+x*u+B*c-(m*s+w*u+M*c),D=C*s+w*a+_*c-(E*s+x*a+S*c),T=v*s+M*a+S*u-(b*s+B*a+_*u),O=I*r+C*i+v*o-(m*r+E*i+b*o),N=m*n+w*i+M*o-(I*n+x*i+B*o),F=E*n+x*r+S*o-(C*n+w*r+_*o),z=b*n+B*r+_*i-(v*n+M*r+S*i),k=(m=i*c)*d+(E=o*a)*g+(b=r*u)*y-((I=o*u)*d+(C=r*c)*g+(v=i*a)*y),L=I*p+(x=n*c)*g+(B=i*s)*y-(m*p+(w=o*s)*g+(M=n*u)*y),P=C*p+w*d+(_=n*a)*y-(E*p+x*d+(S=r*s)*y),j=v*p+M*d+S*g-(b*p+B*d+_*g),U=C*A+v*f+I*h-(b*f+m*h+E*A),q=M*f+m*l+w*A-(x*A+B*f+I*l),K=x*h+S*f+E*l-(_*f+C*l+w*h),H=_*A+b*l+B*h-(M*h+S*A+v*l),Y=n*Q+r*R+i*D+o*T;if(Math.abs(Y)<Xr.EPSILON21){if(Ws.equalsEpsilon(sa.getRotation(t,pa),da,Xr.EPSILON5)&&Ei.equals(sa.getRow(t,3,ga),ya))return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=1,e;throw new is("matrix is not invertible because its determinate is zero.")}return Y=1/Y,e[0]=Q*Y,e[1]=R*Y,e[2]=D*Y,e[3]=T*Y,e[4]=O*Y,e[5]=N*Y,e[6]=F*Y,e[7]=z*Y,e[8]=k*Y,e[9]=L*Y,e[10]=P*Y,e[11]=j*Y,e[12]=U*Y,e[13]=q*Y,e[14]=K*Y,e[15]=H*Y,e},sa.inverseTransformation=function(t,e){kr.typeOf.object("matrix",t),kr.typeOf.object("result",e);var n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],u=t[8],c=t[9],l=t[10],h=t[12],A=t[13],f=t[14],p=-n*h-r*A-i*f,d=-o*h-s*A-a*f,g=-u*h-c*A-l*f;return e[0]=n,e[1]=o,e[2]=u,e[3]=0,e[4]=r,e[5]=s,e[6]=c,e[7]=0,e[8]=i,e[9]=a,e[10]=l,e[11]=0,e[12]=p,e[13]=d,e[14]=g,e[15]=1,e};const ma=new sa;var Ia;sa.inverseTranspose=function(t,e){return kr.typeOf.object("matrix",t),kr.typeOf.object("result",e),sa.inverse(sa.transpose(t,ma),e)},sa.IDENTITY=Object.freeze(new sa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),sa.ZERO=Object.freeze(new sa(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),sa.ConvertNDCToHalfZRange=Object.freeze(new sa(1,0,0,0,0,1,0,0,0,0,.5,.5,0,0,0,1)),sa.COLUMN0ROW0=0,sa.COLUMN0ROW1=1,sa.COLUMN0ROW2=2,sa.COLUMN0ROW3=3,sa.COLUMN1ROW0=4,sa.COLUMN1ROW1=5,sa.COLUMN1ROW2=6,sa.COLUMN1ROW3=7,sa.COLUMN2ROW0=8,sa.COLUMN2ROW1=9,sa.COLUMN2ROW2=10,sa.COLUMN2ROW3=11,sa.COLUMN3ROW0=12,sa.COLUMN3ROW1=13,sa.COLUMN3ROW2=14,sa.COLUMN3ROW3=15,sa.halfZRange=!1,Object.defineProperties(sa.prototype,{length:{get:function(){return sa.packedLength}}}),sa.prototype.clone=function(t){return sa.clone(this,t)},sa.prototype.equals=function(t){return sa.equals(this,t)},sa.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]&&t[9]===e[n+9]&&t[10]===e[n+10]&&t[11]===e[n+11]&&t[12]===e[n+12]&&t[13]===e[n+13]&&t[14]===e[n+14]&&t[15]===e[n+15]},sa.prototype.equalsEpsilon=function(t,e){return sa.equalsEpsilon(this,t,e)},sa.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},sa.prototype.toArray=function(t,e){sa.pack(this,t,e)};var Ca={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Ea={};Object.defineProperties(Ea,{element:{get:function(){if(Ea.supportsFullscreen())return document[Ca.fullscreenElement]}},changeEventName:{get:function(){if(Ea.supportsFullscreen())return Ca.fullscreenchange}},errorEventName:{get:function(){if(Ea.supportsFullscreen())return Ca.fullscreenerror}},enabled:{get:function(){if(Ea.supportsFullscreen())return document[Ca.fullscreenEnabled]}},fullscreen:{get:function(){if(Ea.supportsFullscreen())return null!==Ea.element}}}),Ea.supportsFullscreen=function(){if(Or(Ia))return Ia;Ia=!1;var t=document.body;if("function"==typeof t.requestFullscreen)return Ca.requestFullscreen="requestFullscreen",Ca.exitFullscreen="exitFullscreen",Ca.fullscreenEnabled="fullscreenEnabled",Ca.fullscreenElement="fullscreenElement",Ca.fullscreenchange="fullscreenchange",Ca.fullscreenerror="fullscreenerror",Ia=!0;for(var e,n=["webkit","moz","o","ms","khtml"],r=0,i=n.length;r<i;++r){var o=n[r];("function"==typeof t[e=o+"RequestFullscreen"]||"function"==typeof t[e=o+"RequestFullScreen"])&&(Ca.requestFullscreen=e,Ia=!0),e=o+"ExitFullscreen","function"==typeof document[e]?Ca.exitFullscreen=e:(e=o+"CancelFullScreen","function"==typeof document[e]&&(Ca.exitFullscreen=e)),e=o+"FullscreenEnabled",void 0!==document[e]?Ca.fullscreenEnabled=e:(e=o+"FullScreenEnabled",void 0!==document[e]&&(Ca.fullscreenEnabled=e)),e=o+"FullscreenElement",void 0!==document[e]?Ca.fullscreenElement=e:(e=o+"FullScreenElement",void 0!==document[e]&&(Ca.fullscreenElement=e)),e=o+"fullscreenchange",void 0!==document["on"+e]&&("ms"===o&&(e="MSFullscreenChange"),Ca.fullscreenchange=e),e=o+"fullscreenerror",void 0!==document["on"+e]&&("ms"===o&&(e="MSFullscreenError"),Ca.fullscreenerror=e)}return Ia},Ea.requestFullscreen=function(t,e){Ea.supportsFullscreen()&&t[Ca.requestFullscreen]({vrDisplay:e})},Ea.exitFullscreen=function(){Ea.supportsFullscreen()&&document[Ca.exitFullscreen]()},Ea._names=Ca;var ba,va,xa,wa,Ma,Ba,_a,Sa,Qa,Ra,Da,Ta,Oa,Na,Fa,za,ka,La,Pa=Ea;function ja(t){for(var e=t.split("."),n=0,r=e.length;n<r;++n)e[n]=parseInt(e[n],10);return e}function Ua(){if(!Or(va)&&(va=!1,!Ya())){var t=/ Chrome\/([\.0-9]+)/.exec(ba.userAgent);null!==t&&(va=!0,xa=ja(t[1]))}return va}function qa(){if(!Or(wa)&&(wa=!1,!Ua()&&!Ya()&&/ Safari\/[\.0-9]+/.test(ba.userAgent))){var t=/ Version\/([\.0-9]+)/.exec(ba.userAgent);null!==t&&(wa=!0,Ma=ja(t[1]))}return wa}function Ka(){if(!Or(Ba)){Ba=!1;var t=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(ba.userAgent);null!==t&&(Ba=!0,(_a=ja(t[1])).isNightly=!!t[2])}return Ba}function Ha(){var t;Or(Sa)||(Sa=!1,"Microsoft Internet Explorer"===ba.appName?null!==(t=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(ba.userAgent))&&(Sa=!0,Qa=ja(t[1])):"Netscape"===ba.appName&&null!==(t=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(ba.userAgent))&&(Sa=!0,Qa=ja(t[1])));return Sa}function Ya(){if(!Or(Ra)){Ra=!1;var t=/ Edge\/([\.0-9]+)/.exec(ba.userAgent);null!==t&&(Ra=!0,Da=ja(t[1]))}return Ra}function Ga(){if(!Or(Ta)){Ta=!1;var t=/Firefox\/([\.0-9]+)/.exec(ba.userAgent);null!==t&&(Ta=!0,Oa=ja(t[1]))}return Ta}function Va(){if(!Or(La)){var t=document.createElement("canvas");t.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var e=t.style.imageRendering;(La=Or(e)&&""!==e)&&(ka=e)}return La}function Xa(){if(!Xa.initialized)throw new DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return Xa._result}ba="undefined"!=typeof navigator?navigator:{},Xa._promise=void 0,Xa._result=void 0,Xa.initialize=function(){if(Or(Xa._promise))return Xa._promise;const t=Co();if(Xa._promise=t.promise,Ya())return Xa._result=!1,t.resolve(Xa._result),t.promise;const e=new Image;return e.onload=function(){Xa._result=e.width>0&&e.height>0,t.resolve(Xa._result)},e.onerror=function(){Xa._result=!1,t.resolve(Xa._result)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.promise},Object.defineProperties(Xa,{initialized:{get:function(){return Or(Xa._result)}}});var Wa=[];"undefined"!=typeof ArrayBuffer&&(Wa.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&Wa.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&Wa.push(CanvasPixelArray));var Ja={isChrome:Ua,chromeVersion:function(){return Ua()&&xa},isSafari:qa,safariVersion:function(){return qa()&&Ma},isWebkit:Ka,webkitVersion:function(){return Ka()&&_a},isInternetExplorer:Ha,internetExplorerVersion:function(){return Ha()&&Qa},isEdge:Ya,edgeVersion:function(){return Ya()&&Da},isFirefox:Ga,firefoxVersion:function(){return Ga()&&Oa},isWindows:function(){return Or(Na)||(Na=/Windows/i.test(ba.appVersion)),Na},isNodeJs:function(){return Or(Fa)||(Fa="object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)),Fa},hardwareConcurrency:Lr(ba.hardwareConcurrency,3),supportsPointerEvents:function(){return Or(za)||(za=!Ga()&&"undefined"!=typeof PointerEvent&&(!Or(ba.pointerEnabled)||ba.pointerEnabled)),za},supportsImageRenderingPixelated:Va,supportsWebP:Xa,supportsWebPSync:function(){return Or(undefined)||Xa.initialize(),Xa._result},imageRenderingValue:function(){return Va()?ka:void 0},typedArrayTypes:Wa,isPCBroswer:function(){var t=window.navigator.userAgent.toLowerCase(),e="ipad"==t.match(/ipad/i),n="iphone os"==t.match(/iphone os/i),r="midp"==t.match(/midp/i),i="ucweb"==t.match(/ucweb/i),o="android"==t.match(/android/i),s="windows ce"==t.match(/windows ce/i),a="windows mobile"==t.match(/windows mobile/i);return!(e||n||r||i||o||s||a)}};Ja.supportsFullscreen=function(){return Pa.supportsFullscreen()},Ja.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},Ja.supportsWebWorkers=function(){return"undefined"!=typeof Worker},Ja.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!Ja.isEdge()},Ja.supportsOffscreenCanvas=function(){return"undefined"!=typeof OffscreenCanvas&&!Ja.isEdge()},Ja.supportsEsmWebWorkers=function(){return!Ga()||parseInt(Oa)>=114};var Za=Ja;function $a(t,e,n,r){this.x=Lr(t,0),this.y=Lr(e,0),this.z=Lr(n,0),this.w=Lr(r,0)}var tu=new Wr;$a.fromAxisAngle=function(t,e,n){kr.typeOf.object("axis",t),kr.typeOf.number("angle",e);var r=e/2,i=Math.sin(r),o=(tu=Wr.normalize(t,tu)).x*i,s=tu.y*i,a=tu.z*i,u=Math.cos(r);return Or(n)?(n.x=o,n.y=s,n.z=a,n.w=u,n):new $a(o,s,a,u)};var eu=[1,2,0],nu=new Array(3);$a.fromRotationMatrix=function(t,e){var n,r,i,o,s;kr.typeOf.object("matrix",t);var a=t[Ws.COLUMN0ROW0],u=t[Ws.COLUMN1ROW1],c=t[Ws.COLUMN2ROW2],l=a+u+c;if(l>0)s=.5*(n=Math.sqrt(l+1)),n=.5/n,r=(t[Ws.COLUMN1ROW2]-t[Ws.COLUMN2ROW1])*n,i=(t[Ws.COLUMN2ROW0]-t[Ws.COLUMN0ROW2])*n,o=(t[Ws.COLUMN0ROW1]-t[Ws.COLUMN1ROW0])*n;else{var h=0;u>a&&(h=1),c>a&&c>u&&(h=2);var A=eu[h],f=eu[A];n=Math.sqrt(t[Ws.getElementIndex(h,h)]-t[Ws.getElementIndex(A,A)]-t[Ws.getElementIndex(f,f)]+1);var p=nu;p[h]=.5*n,n=.5/n,s=(t[Ws.getElementIndex(f,A)]-t[Ws.getElementIndex(A,f)])*n,p[A]=(t[Ws.getElementIndex(A,h)]+t[Ws.getElementIndex(h,A)])*n,p[f]=(t[Ws.getElementIndex(f,h)]+t[Ws.getElementIndex(h,f)])*n,r=-p[0],i=-p[1],o=-p[2]}return Or(e)?(e.x=r,e.y=i,e.z=o,e.w=s,e):new $a(r,i,o,s)};var ru=new $a,iu=new $a,ou=new $a,su=new $a;$a.fromHeadingPitchRoll=function(t,e){return kr.typeOf.object("headingPitchRoll",t),su=$a.fromAxisAngle(Wr.UNIT_X,t.roll,ru),ou=$a.fromAxisAngle(Wr.UNIT_Y,-t.pitch,e),e=$a.multiply(ou,su,ou),iu=$a.fromAxisAngle(Wr.UNIT_Z,-t.heading,ru),$a.multiply(iu,e,e)};var au=new Wr,uu=new Wr,cu=new $a,lu=new $a,hu=new $a;$a.packedLength=4,$a.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},$a.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new $a),n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n},$a.packedInterpolationLength=3,$a.convertPackedArrayForInterpolation=function(t,e,n,r){$a.unpack(t,4*n,hu),$a.conjugate(hu,hu);for(var i=0,o=n-e+1;i<o;i++){var s=3*i;$a.unpack(t,4*(e+i),cu),$a.multiply(cu,hu,cu),cu.w<0&&$a.negate(cu,cu),$a.computeAxis(cu,au);var a=$a.computeAngle(cu);r[s]=au.x*a,r[s+1]=au.y*a,r[s+2]=au.z*a}},$a.unpackInterpolationResult=function(t,e,n,r,i){Or(i)||(i=new $a),Wr.fromArray(t,0,uu);var o=Wr.magnitude(uu);return $a.unpack(e,4*r,lu),0===o?$a.clone($a.IDENTITY,cu):$a.fromAxisAngle(uu,o,cu),$a.multiply(cu,lu,i)},$a.clone=function(t,e){if(Or(t))return Or(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new $a(t.x,t.y,t.z,t.w)},$a.conjugate=function(t,e){return kr.typeOf.object("quaternion",t),kr.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=t.w,e},$a.magnitudeSquared=function(t){return kr.typeOf.object("quaternion",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},$a.magnitude=function(t){return Math.sqrt($a.magnitudeSquared(t))},$a.normalize=function(t,e){kr.typeOf.object("result",e);var n=1/$a.magnitude(t),r=t.x*n,i=t.y*n,o=t.z*n,s=t.w*n;return e.x=r,e.y=i,e.z=o,e.w=s,e},$a.inverse=function(t,e){kr.typeOf.object("result",e);var n=$a.magnitudeSquared(t);return e=$a.conjugate(t,e),$a.multiplyByScalar(e,1/n,e)},$a.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},$a.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},$a.negate=function(t,e){return kr.typeOf.object("quaternion",t),kr.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},$a.dot=function(t,e){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},$a.multiply=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n);var r=t.x,i=t.y,o=t.z,s=t.w,a=e.x,u=e.y,c=e.z,l=e.w,h=s*a+r*l+i*c-o*u,A=s*u-r*c+i*l+o*a,f=s*c+r*u-i*a+o*l,p=s*l-r*a-i*u-o*c;return n.x=h,n.y=A,n.z=f,n.w=p,n},$a.multiplyByVec=function(t,e,n){var r=new Wr,i=new Wr,o=new Wr(t.x,t.y,t.z);r=Wr.cross(o,e,r),i=Wr.cross(o,r,i);var s=new Wr;s=Wr.multiplyByScalar(r,2*t.w,s);var a=new Wr;return a=Wr.multiplyByScalar(r,2,a),n=Wr.add(e,s,n),n=Wr.add(n,a,n)},$a.multiplyByScalar=function(t,e,n){return kr.typeOf.object("quaternion",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},$a.divideByScalar=function(t,e,n){return kr.typeOf.object("quaternion",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},$a.computeAxis=function(t,e){kr.typeOf.object("quaternion",t),kr.typeOf.object("result",e);var n=t.w;if(Math.abs(n-1)<Xr.EPSILON6)return e.x=e.y=e.z=0,e;var r=1/Math.sqrt(1-n*n);return e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e},$a.computeAngle=function(t){return kr.typeOf.object("quaternion",t),Math.abs(t.w-1)<Xr.EPSILON6?0:2*Math.acos(t.w)};var Au=new $a;$a.lerp=function(t,e,n,r){return kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r),Au=$a.multiplyByScalar(e,n,Au),r=$a.multiplyByScalar(t,1-n,r),$a.add(Au,r,r)};var fu=new $a,pu=new $a,du=new $a;$a.slerp=function(t,e,n,r){kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r);var i=$a.dot(t,e),o=e;if(i<0&&(i=-i,o=fu=$a.negate(e,fu)),1-i<Xr.EPSILON6)return $a.lerp(t,o,n,r);var s=Math.acos(i);return pu=$a.multiplyByScalar(t,Math.sin((1-n)*s),pu),du=$a.multiplyByScalar(o,Math.sin(n*s),du),r=$a.add(pu,du,r),$a.multiplyByScalar(r,1/Math.sin(s),r)},$a.log=function(t,e){kr.typeOf.object("quaternion",t),kr.typeOf.object("result",e);var n=Xr.acosClamped(t.w),r=0;return 0!==n&&(r=n/Math.sin(n)),Wr.multiplyByScalar(t,r,e)},$a.exp=function(t,e){kr.typeOf.object("cartesian",t),kr.typeOf.object("result",e);var n=Wr.magnitude(t),r=0;return 0!==n&&(r=Math.sin(n)/n),e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e.w=Math.cos(n),e};var gu=new Wr,yu=new Wr,mu=new $a,Iu=new $a;$a.computeInnerQuadrangle=function(t,e,n,r){kr.typeOf.object("q0",t),kr.typeOf.object("q1",e),kr.typeOf.object("q2",n),kr.typeOf.object("result",r);var i=$a.conjugate(e,mu);$a.multiply(i,n,Iu);var o=$a.log(Iu,gu);$a.multiply(i,t,Iu);var s=$a.log(Iu,yu);return Wr.add(o,s,o),Wr.multiplyByScalar(o,.25,o),Wr.negate(o,o),$a.exp(o,mu),$a.multiply(e,mu,r)},$a.squad=function(t,e,n,r,i,o){kr.typeOf.object("q0",t),kr.typeOf.object("q1",e),kr.typeOf.object("s0",n),kr.typeOf.object("s1",r),kr.typeOf.number("t",i),kr.typeOf.object("result",o);var s=$a.slerp(t,e,i,mu),a=$a.slerp(n,r,i,Iu);return $a.slerp(s,a,2*i*(1-i),o)};for(var Cu=new $a,Eu=1.9011074535173003,bu=Za.supportsTypedArrays()?new Float32Array(8):[],vu=Za.supportsTypedArrays()?new Float32Array(8):[],xu=Za.supportsTypedArrays()?new Float32Array(8):[],wu=Za.supportsTypedArrays()?new Float32Array(8):[],Mu=0;Mu<7;++Mu){var Bu=Mu+1,_u=2*Bu+1;bu[Mu]=1/(Bu*_u),vu[Mu]=Bu/_u}function Su(t){this._ellipsoid=Lr(t,_s.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}bu[7]=Eu/136,vu[7]=8*Eu/17,$a.fastSlerp=function(t,e,n,r){kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r);var i,o=$a.dot(t,e);o>=0?i=1:(i=-1,o=-o);for(var s=o-1,a=1-n,u=n*n,c=a*a,l=7;l>=0;--l)xu[l]=(bu[l]*u-vu[l])*s,wu[l]=(bu[l]*c-vu[l])*s;var h=i*n*(1+xu[0]*(1+xu[1]*(1+xu[2]*(1+xu[3]*(1+xu[4]*(1+xu[5]*(1+xu[6]*(1+xu[7])))))))),A=a*(1+wu[0]*(1+wu[1]*(1+wu[2]*(1+wu[3]*(1+wu[4]*(1+wu[5]*(1+wu[6]*(1+wu[7])))))))),f=$a.multiplyByScalar(t,A,Cu);return $a.multiplyByScalar(e,h,r),$a.add(f,r,r)},$a.fastSquad=function(t,e,n,r,i,o){kr.typeOf.object("q0",t),kr.typeOf.object("q1",e),kr.typeOf.object("s0",n),kr.typeOf.object("s1",r),kr.typeOf.number("t",i),kr.typeOf.object("result",o);var s=$a.fastSlerp(t,e,i,mu),a=$a.fastSlerp(n,r,i,Iu);return $a.fastSlerp(s,a,2*i*(1-i),o)},$a.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},$a.equalsEpsilon=function(t,e,n){return kr.typeOf.number("epsilon",n),t===e||Or(t)&&Or(e)&&Math.abs(t.x-e.x)<=n&&Math.abs(t.y-e.y)<=n&&Math.abs(t.z-e.z)<=n&&Math.abs(t.w-e.w)<=n},$a.ZERO=Object.freeze(new $a(0,0,0,0)),$a.IDENTITY=Object.freeze(new $a(0,0,0,1)),$a.prototype.clone=function(t){return $a.clone(this,t)},$a.prototype.equals=function(t){return $a.equals(this,t)},$a.prototype.equalsEpsilon=function(t,e){return $a.equalsEpsilon(this,t,e)},$a.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperties(Su.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Su.prototype.project=function(t,e){var n=this._semimajorAxis,r=t.longitude*n,i=t.latitude*n,o=t.height;return Or(e)?(e.x=r,e.y=i,e.z=o,e):new Wr(r,i,o)},Su.prototype.unproject=function(t,e){if(!Or(t))throw new Nr("cartesian is required");var n=this._oneOverSemimajorAxis,r=t.x*n,i=t.y*n,o=t.z;return Or(e)?(e.longitude=r,e.latitude=i,e.height=o,e):new ui(r,i,o)};var Qu={},Ru={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Du={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Tu={},Ou={east:new Wr,north:new Wr,up:new Wr,west:new Wr,south:new Wr,down:new Wr},Nu=new Wr,Fu=new Wr,zu=new Wr;Qu.localFrameToFixedFrameGenerator=function(t,e){if(!Ru.hasOwnProperty(t)||!Ru[t].hasOwnProperty(e))throw new Nr("firstAxis and secondAxis must be east, north, up, west, south or down.");var n,r=Ru[t][e],i=t+e;return Or(Tu[i])?n=Tu[i]:(n=function(n,i,o){if(!Or(n))throw new Nr("origin is required.");if(Or(o)||(o=new sa),Wr.equalsEpsilon(n,Wr.ZERO,Xr.EPSILON14))Wr.unpack(Du[t],0,Nu),Wr.unpack(Du[e],0,Fu),Wr.unpack(Du[r],0,zu);else if(Xr.equalsEpsilon(n.x,0,Xr.EPSILON14)&&Xr.equalsEpsilon(n.y,0,Xr.EPSILON14)){var s=Xr.sign(n.z);Wr.unpack(Du[t],0,Nu),"east"!==t&&"west"!==t&&Wr.multiplyByScalar(Nu,s,Nu),Wr.unpack(Du[e],0,Fu),"east"!==e&&"west"!==e&&Wr.multiplyByScalar(Fu,s,Fu),Wr.unpack(Du[r],0,zu),"east"!==r&&"west"!==r&&Wr.multiplyByScalar(zu,s,zu)}else{(i=Lr(i,_s.WGS84)).geodeticSurfaceNormal(n,Ou.up);var a=Ou.up,u=Ou.east;u.x=-n.y,u.y=n.x,u.z=0,Wr.normalize(u,Ou.east),Wr.cross(a,u,Ou.north),Wr.multiplyByScalar(Ou.up,-1,Ou.down),Wr.multiplyByScalar(Ou.east,-1,Ou.west),Wr.multiplyByScalar(Ou.north,-1,Ou.south),Nu=Ou[t],Fu=Ou[e],zu=Ou[r]}return o[0]=Nu.x,o[1]=Nu.y,o[2]=Nu.z,o[3]=0,o[4]=Fu.x,o[5]=Fu.y,o[6]=Fu.z,o[7]=0,o[8]=zu.x,o[9]=zu.y,o[10]=zu.z,o[11]=0,o[12]=n.x,o[13]=n.y,o[14]=n.z,o[15]=1,o},Tu[i]=n),n},Qu.eastNorthUpToFixedFrame=Qu.localFrameToFixedFrameGenerator("east","north"),Qu.northEastDownToFixedFrame=Qu.localFrameToFixedFrameGenerator("north","east"),Qu.northUpEastToFixedFrame=Qu.localFrameToFixedFrameGenerator("north","up"),Qu.northWestUpToFixedFrame=Qu.localFrameToFixedFrameGenerator("north","west");var ku=new $a,Lu=new Wr(1,1,1),Pu=new sa;Qu.headingPitchRollToFixedFrame=function(t,e,n,r,i){kr.typeOf.object("HeadingPitchRoll",e),r=Lr(r,Qu.eastNorthUpToFixedFrame);var o=$a.fromHeadingPitchRoll(e,ku),s=sa.fromTranslationQuaternionRotationScale(Wr.ZERO,o,Lu,Pu);return i=r(t,n,i),sa.multiply(i,s,i)};var ju=new sa,Uu=new Ws;Qu.headingPitchRollQuaternion=function(t,e,n,r,i){kr.typeOf.object("HeadingPitchRoll",e);var o=Qu.headingPitchRollToFixedFrame(t,e,n,r,ju),s=sa.getMatrix3(o,Uu);return $a.fromRotationMatrix(s,i)};var qu=new Wr(1,1,1),Ku=new Wr,Hu=new sa,Yu=new sa,Gu=new Ws,Vu=new $a;Qu.fixedFrameToHeadingPitchRoll=function(t,e,n,r){kr.defined("transform",t),e=Lr(e,_s.WGS84),n=Lr(n,Qu.eastNorthUpToFixedFrame),Or(r)||(r=new Ns);var i=sa.getTranslation(t,Ku);if(Wr.equals(i,Wr.ZERO))return r.heading=0,r.pitch=0,r.roll=0,r;var o=sa.inverseTransformation(n(i,e,Hu),Hu),s=sa.setScale(t,qu,Yu);s=sa.setTranslation(s,Wr.ZERO,s),o=sa.multiply(o,s,o);var a=$a.fromRotationMatrix(sa.getMatrix3(o,Gu),Vu);return a=$a.normalize(a,a),Ns.fromQuaternion(a,r)};var Xu=Xr.TWO_PI/86400,Wu=new eo;Qu.computeTemeToPseudoFixedMatrix=function(t,e){if(!Or(t))throw new Nr("date is required.");var n,r=(Wu=eo.addSeconds(t,-eo.computeTaiMinusUtc(t),Wu)).dayNumber,i=Wu.secondsOfDay,o=r-2451545,s=(24110.54841+(n=i>=43200?(o+.5)/Ni.DAYS_PER_JULIAN_CENTURY:(o-.5)/Ni.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+n*(.093104+-62e-7*n)))*Xu%Xr.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((i+.5*Ni.SECONDS_PER_DAY)%Ni.SECONDS_PER_DAY),a=Math.cos(s),u=Math.sin(s);return Or(e)?(e[0]=a,e[1]=-u,e[2]=0,e[3]=u,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Ws(a,u,0,-u,a,0,0,0,1)},Qu.iau2006XysData=new Ys,Qu.earthOrientationParameters=Es.NONE;var Ju=32.184;Qu.preloadIcrfFixed=function(t){var e=t.start.dayNumber,n=t.start.secondsOfDay+Ju,r=t.stop.dayNumber,i=t.stop.secondsOfDay+Ju,o=Qu.iau2006XysData.preload(e,n,r,i),s=Qu.earthOrientationParameters.getPromiseToLoad();return Promise.all([o,s])},Qu.computeIcrfToFixedMatrix=function(t,e){if(!Or(t))throw new Nr("date is required.");Or(e)||(e=new Ws);var n=Qu.computeFixedToIcrfMatrix(t,e);if(Or(n))return Ws.transpose(n,e)};var Zu=new Hs(0,0,0),$u=new Qi(0,0,0,0,0),tc=new Ws,ec=new Ws;Qu.computeFixedToIcrfMatrix=function(t,e){if(!Or(t))throw new Nr("date is required.");Or(e)||(e=new Ws);var n=Qu.earthOrientationParameters.compute(t,$u);if(Or(n)){var r=t.dayNumber,i=t.secondsOfDay+Ju,o=Qu.iau2006XysData.computeXysRadians(r,i,Zu);if(Or(o)){var s=o.x+n.xPoleOffset,a=o.y+n.yPoleOffset,u=1/(1+Math.sqrt(1-s*s-a*a)),c=tc;c[0]=1-u*s*s,c[3]=-u*s*a,c[6]=s,c[1]=-u*s*a,c[4]=1-u*a*a,c[7]=a,c[2]=-s,c[5]=-a,c[8]=1-u*(s*s+a*a);var l=Ws.fromRotationZ(-o.s,ec),h=Ws.multiply(c,l,tc),A=t.dayNumber-2451545,f=(t.secondsOfDay-eo.computeTaiMinusUtc(t)+n.ut1MinusUtc)/Ni.SECONDS_PER_DAY,p=.779057273264+f+.00273781191135448*(A+f);p=p%1*Xr.TWO_PI;var d=Ws.fromRotationZ(p,ec),g=Ws.multiply(h,d,tc),y=Math.cos(n.xPoleWander),m=Math.cos(n.yPoleWander),I=Math.sin(n.xPoleWander),C=Math.sin(n.yPoleWander),E=r-2451545+i/Ni.SECONDS_PER_DAY,b=-47e-6*(E/=36525)*Xr.RADIANS_PER_DEGREE/3600,v=Math.cos(b),x=Math.sin(b),w=ec;return w[0]=y*v,w[1]=y*x,w[2]=I,w[3]=-m*x+C*I*v,w[4]=m*v+C*I*x,w[5]=-C*y,w[6]=-C*x-m*I*v,w[7]=C*v-m*I*x,w[8]=m*y,Ws.multiply(g,w,e)}}};var nc=new Ei;Qu.pointToWindowCoordinates=function(t,e,n,r){return(r=Qu.pointToGLWindowCoordinates(t,e,n,r)).y=2*e[5]-r.y,r},Qu.pointToGLWindowCoordinates=function(t,e,n,r){if(!Or(t))throw new Nr("modelViewProjectionMatrix is required.");if(!Or(e))throw new Nr("viewportTransformation is required.");if(!Or(n))throw new Nr("point is required.");Or(r)||(r=new di);var i=nc;return sa.multiplyByVector(t,Ei.fromElements(n.x,n.y,n.z,1,i),i),Ei.multiplyByScalar(i,1/i.w,i),sa.multiplyByVector(e,i,i),di.fromCartesian4(i,r)};var rc=new Wr,ic=new Wr,oc=new Wr;Qu.rotationMatrixFromPositionVelocity=function(t,e,n,r){if(!Or(t))throw new Nr("position is required.");if(!Or(e))throw new Nr("velocity is required.");var i=Lr(n,_s.WGS84).geodeticSurfaceNormal(t,rc),o=Wr.cross(e,i,ic);Wr.equalsEpsilon(o,Wr.ZERO,Xr.EPSILON6)&&(o=Wr.clone(Wr.UNIT_X,o));var s=Wr.cross(o,e,oc);return Wr.normalize(s,s),Wr.cross(e,s,o),Wr.negate(o,o),Wr.normalize(o,o),Or(r)||(r=new Ws),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=o.x,r[4]=o.y,r[5]=o.z,r[6]=s.x,r[7]=s.y,r[8]=s.z,r};var sc=new sa(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ac=new ui,uc=new Wr,cc=new Wr,lc=new Ws,hc=new sa,Ac=new sa;Qu.basisTo2D=function(t,e,n){if(!Or(t))throw new Nr("projection is required.");if(!Or(e))throw new Nr("matrix is required.");if(!Or(n))throw new Nr("result is required.");var r=sa.getTranslation(e,cc),i=t.ellipsoid,o=i.cartesianToCartographic(r,ac),s=t.project(o,uc);Wr.fromElements(s.z,s.x,s.y,s);var a=Qu.eastNorthUpToFixedFrame(r,i,hc),u=sa.inverseTransformation(a,Ac),c=sa.getMatrix3(e,lc),l=sa.multiplyByMatrix3(u,c,n);return sa.multiply(sc,l,n),sa.setTranslation(n,s,n),n},Qu.wgs84To2DModelMatrix=function(t,e,n){if(!Or(t))throw new Nr("projection is required.");if(!Or(e))throw new Nr("center is required.");if(!Or(n))throw new Nr("result is required.");var r=t.ellipsoid,i=Qu.eastNorthUpToFixedFrame(e,r,hc),o=sa.inverseTransformation(i,Ac),s=r.cartesianToCartographic(e,ac),a=t.project(s,uc);Wr.fromElements(a.z,a.x,a.y,a);var u=sa.fromTranslation(a,hc);return sa.multiply(sc,o,n),sa.multiply(u,n,n),n},Qu.buildUp=function(t,e){var n=e.clone(),r=t.clone();r=Wr.normalize(r,r),Math.abs(Wr.dot(r,n))>=1&&(r=Math.abs(Wr.dot(n,Wr.UNIT_Y))<1?Wr.clone(Wr.UNIT_Y,r):Wr.clone(Wr.UNIT_Z,r));var i=new Wr;return Wr.cross(r,n,i),i=Wr.normalize(i,i),Wr.cross(n,i,r),r=Wr.normalize(r,r)},Qu.getHeading=function(t,e){var n;return n=Xr.equalsEpsilon(Math.abs(t.z),1,Xr.EPSILON3)?Math.atan2(e.y,e.x)-Xr.PI_OVER_TWO:Math.atan2(t.y,t.x)-Xr.PI_OVER_TWO,Xr.TWO_PI-Xr.zeroToTwoPi(n)},Qu.convertToColumbusCartesian=function(t){var e=new Su,n=e.ellipsoid,r=new Wr,i=new ui;return n.cartesianToCartographic(t,i),e.project(i,r),Wr.fromElements(r.z,r.x,r.y)},Qu.convertTo3DCartesian=function(t){var e=new Su,n=e.ellipsoid,r=new Wr,i=new ui;return r=Wr.fromElements(t.y,t.z,t.x),e.unproject(r,i),n.cartographicToCartesian(i,r)};var fc,pc=Qu,dc={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(t){return t===dc.SCENE3D?1:t!==dc.MORPHING?0:void 0}},gc=Object.freeze(dc),yc=(fc=!0,function(t,e){var n=fc?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return fc=!1,n}),mc=yc(void 0,(function(){return mc.toString().search("(((.+)+)+)+$").toString().constructor(mc).search("(((.+)+)+)+$")}));mc();var Ic=8192;const Cc=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ec=Cc(void 0,(function(){return Ec.toString().search("(((.+)+)+)+$").toString().constructor(Ec).search("(((.+)+)+)+$")}));Ec();var bc=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function vc(t,e,n,r){this.west=Lr(t,0),this.south=Lr(e,0),this.east=Lr(n,0),this.north=Lr(r,0)}Object.defineProperties(vc.prototype,{width:{get:function(){return vc.computeWidth(this)}},height:{get:function(){return vc.computeHeight(this)}}}),vc.packedLength=4,vc.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.west,e[n++]=t.south,e[n++]=t.east,e[n]=t.north,e},vc.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new vc),n.west=t[e++],n.south=t[e++],n.east=t[e++],n.north=t[e],n},vc.computeWidth=function(t){kr.typeOf.object("rectangle",t);var e=t.east,n=t.west;return e<n&&(e+=Xr.TWO_PI),e-n},vc.computeHeight=function(t){return kr.typeOf.object("rectangle",t),t.north-t.south},vc.fromDegrees=function(t,e,n,r,i){return t=Xr.toRadians(Lr(t,0)),e=Xr.toRadians(Lr(e,0)),n=Xr.toRadians(Lr(n,0)),r=Xr.toRadians(Lr(r,0)),Or(i)?(i.west=t,i.south=e,i.east=n,i.north=r,i):new vc(t,e,n,r)},vc.fromRadians=function(t,e,n,r,i){return Or(i)?(i.west=Lr(t,0),i.south=Lr(e,0),i.east=Lr(n,0),i.north=Lr(r,0),i):new vc(t,e,n,r)},vc.fromCartographicArray=function(t,e){kr.defined("cartographics",t);for(var n=Number.MAX_VALUE,r=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=Number.MAX_VALUE,a=-Number.MAX_VALUE,u=0,c=t.length;u<c;u++){var l=t[u];n=Math.min(n,l.longitude),r=Math.max(r,l.longitude),s=Math.min(s,l.latitude),a=Math.max(a,l.latitude);var h=l.longitude>=0?l.longitude:l.longitude+Xr.TWO_PI;i=Math.min(i,h),o=Math.max(o,h)}return r-n>o-i&&(n=i,(r=o)>Xr.PI&&(r-=Xr.TWO_PI),n>Xr.PI&&(n-=Xr.TWO_PI)),Or(e)?(e.west=n,e.south=s,e.east=r,e.north=a,e):new vc(n,s,r,a)},vc.fromCartesianArray=function(t,e,n){kr.defined("cartesians",t),e=Lr(e,_s.WGS84);for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0,l=t.length;c<l;c++){var h=e.cartesianToCartographic(t[c]);r=Math.min(r,h.longitude),i=Math.max(i,h.longitude),a=Math.min(a,h.latitude),u=Math.max(u,h.latitude);var A=h.longitude>=0?h.longitude:h.longitude+Xr.TWO_PI;o=Math.min(o,A),s=Math.max(s,A)}return i-r>s-o&&(r=o,(i=s)>Xr.PI&&(i-=Xr.TWO_PI),r>Xr.PI&&(r-=Xr.TWO_PI)),Or(n)?(n.west=r,n.south=a,n.east=i,n.north=u,n):new vc(r,a,i,u)},vc.clone=function(t,e){if(Or(t))return Or(e)?(e.west=t.west,e.south=t.south,e.east=t.east,e.north=t.north,e):new vc(t.west,t.south,t.east,t.north)},vc.equalsEpsilon=function(t,e,n){return kr.typeOf.number("absoluteEpsilon",n),t===e||Or(t)&&Or(e)&&Math.abs(t.west-e.west)<=n&&Math.abs(t.south-e.south)<=n&&Math.abs(t.east-e.east)<=n&&Math.abs(t.north-e.north)<=n},vc.prototype.clone=function(t){return vc.clone(this,t)},vc.prototype.equals=function(t){return vc.equals(this,t)},vc.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.west===e.west&&t.south===e.south&&t.east===e.east&&t.north===e.north},vc.prototype.equalsEpsilon=function(t,e){return kr.typeOf.number("epsilon",e),vc.equalsEpsilon(this,t,e)},vc.validate=function(t){kr.typeOf.object("rectangle",t);var e=t.north;kr.typeOf.number.greaterThanOrEquals("north",e,-Xr.PI_OVER_TWO),kr.typeOf.number.lessThanOrEquals("north",e,Xr.PI_OVER_TWO);var n=t.south;kr.typeOf.number.greaterThanOrEquals("south",n,-Xr.PI_OVER_TWO),kr.typeOf.number.lessThanOrEquals("south",n,Xr.PI_OVER_TWO);var r=t.west;kr.typeOf.number.greaterThanOrEquals("west",r,-Math.PI),kr.typeOf.number.lessThanOrEquals("west",r,Math.PI);var i=t.east;kr.typeOf.number.greaterThanOrEquals("east",i,-Math.PI),kr.typeOf.number.lessThanOrEquals("east",i,Math.PI)},vc.southwest=function(t,e){return kr.typeOf.object("rectangle",t),Or(e)?(e.longitude=t.west,e.latitude=t.south,e.height=0,e):new ui(t.west,t.south)},vc.northwest=function(t,e){return kr.typeOf.object("rectangle",t),Or(e)?(e.longitude=t.west,e.latitude=t.north,e.height=0,e):new ui(t.west,t.north)},vc.northeast=function(t,e){return kr.typeOf.object("rectangle",t),Or(e)?(e.longitude=t.east,e.latitude=t.north,e.height=0,e):new ui(t.east,t.north)},vc.southeast=function(t,e){return kr.typeOf.object("rectangle",t),Or(e)?(e.longitude=t.east,e.latitude=t.south,e.height=0,e):new ui(t.east,t.south)},vc.center=function(t,e){kr.typeOf.object("rectangle",t);var n=t.east,r=t.west;n<r&&(n+=Xr.TWO_PI);var i=Xr.negativePiToPi(.5*(r+n)),o=.5*(t.south+t.north);return Or(e)?(e.longitude=i,e.latitude=o,e.height=0,e):new ui(i,o)},vc.intersection=function(t,e,n){kr.typeOf.object("rectangle",t),kr.typeOf.object("otherRectangle",e);var r=t.east,i=t.west,o=e.east,s=e.west;r<i&&o>0?r+=Xr.TWO_PI:o<s&&r>0&&(o+=Xr.TWO_PI),r<i&&s<0?s+=Xr.TWO_PI:o<s&&i<0&&(i+=Xr.TWO_PI);var a=Xr.negativePiToPi(Math.max(i,s)),u=Xr.negativePiToPi(Math.min(r,o));if(!((t.west<t.east||e.west<e.east)&&u<=a)){var c=Math.max(t.south,e.south),l=Math.min(t.north,e.north);if(!(c>=l))return Or(n)?(n.west=a,n.south=c,n.east=u,n.north=l,n):new vc(a,c,u,l)}},vc.simpleIntersection=function(t,e,n){kr.typeOf.object("rectangle",t),kr.typeOf.object("otherRectangle",e);var r=Math.max(t.west,e.west),i=Math.max(t.south,e.south),o=Math.min(t.east,e.east),s=Math.min(t.north,e.north);if(!(i>=s||r>=o))return Or(n)?(n.west=r,n.south=i,n.east=o,n.north=s,n):new vc(r,i,o,s)},vc.union=function(t,e,n){kr.typeOf.object("rectangle",t),kr.typeOf.object("otherRectangle",e),Or(n)||(n=new vc);var r=t.east,i=t.west,o=e.east,s=e.west;r<i&&o>0?r+=Xr.TWO_PI:o<s&&r>0&&(o+=Xr.TWO_PI),r<i&&s<0?s+=Xr.TWO_PI:o<s&&i<0&&(i+=Xr.TWO_PI);var a=Xr.convertLongitudeRange(Math.min(i,s)),u=Xr.convertLongitudeRange(Math.max(r,o));return n.west=a,n.south=Math.min(t.south,e.south),n.east=u,n.east<n.west&&(n.east+=Xr.TWO_PI),n.north=Math.max(t.north,e.north),n},vc.expand=function(t,e,n){return kr.typeOf.object("rectangle",t),kr.typeOf.object("cartographic",e),Or(n)||(n=new vc),n.west=Math.min(t.west,e.longitude),n.south=Math.min(t.south,e.latitude),n.east=Math.max(t.east,e.longitude),n.north=Math.max(t.north,e.latitude),n},vc.contains=function(t,e){kr.typeOf.object("rectangle",t),kr.typeOf.object("cartographic",e);var n=e.longitude,r=e.latitude,i=t.west,o=t.east;return o<i&&(o+=Xr.TWO_PI,n<0&&(n+=Xr.TWO_PI)),(n>i||Xr.equalsEpsilon(n,i,Xr.EPSILON14))&&(n<o||Xr.equalsEpsilon(n,o,Xr.EPSILON14))&&r>=t.south&&r<=t.north};var xc=new ui;vc.subsample=function(t,e,n,r){kr.typeOf.object("rectangle",t),e=Lr(e,_s.WGS84),n=Lr(n,0),Or(r)||(r=[]);var i=0,o=t.north,s=t.south,a=t.east,u=t.west,c=xc;c.height=n,c.longitude=u,c.latitude=o,r[i]=e.cartographicToCartesian(c,r[i]),i++,c.longitude=a,r[i]=e.cartographicToCartesian(c,r[i]),i++,c.latitude=s,r[i]=e.cartographicToCartesian(c,r[i]),i++,c.longitude=u,r[i]=e.cartographicToCartesian(c,r[i]),i++,c.latitude=o<0?o:s>0?s:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*Xr.PI_OVER_TWO,vc.contains(t,c)&&(r[i]=e.cartographicToCartesian(c,r[i]),i++);return 0===c.latitude&&(c.longitude=u,r[i]=e.cartographicToCartesian(c,r[i]),i++,c.longitude=a,r[i]=e.cartographicToCartesian(c,r[i]),i++),r.length=i,r};var wc=new ui;function Mc(t,e){e=Wr.clone(Lr(e,Wr.ZERO)),Wr.equals(e,Wr.ZERO)||Wr.normalize(e,e),this.origin=Wr.clone(Lr(t,Wr.ZERO)),this.direction=e}function Bc(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=_c(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,u,c;if(r&&(o=function(t,e,n,r){const i=[];for(let n=0,o=e.length;n<o;n++){const s=_c(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);s===s.next&&(s.steiner=!0),i.push(Lc(s))}i.sort(Nc);for(let t=0;t<i.length;t++)n=Fc(i[t],n);return n}(t,e,o,n)),t.length>80*n){a=1/0,u=1/0;let e=-1/0,r=-1/0;for(let o=n;o<i;o+=n){const n=t[o],i=t[o+1];n<a&&(a=n),i<u&&(u=i),n>e&&(e=n),i>r&&(r=i)}c=Math.max(e-a,r-u),c=0!==c?32767/c:0}return Qc(o,s,n,a,u,c,0),s}function _c(t,e,n,r,i){let o;if(i===function(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}(t,e,n,r)>0)for(let i=e;i<n;i+=r)o=Wc(i/r|0,t[i],t[i+1],o);else for(let i=n-r;i>=e;i-=r)o=Wc(i/r|0,t[i],t[i+1],o);return o&&Kc(o,o.next)&&(Jc(o),o=o.next),o}function Sc(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!Kc(r,r.next)&&0!==qc(r.prev,r,r.next))r=r.next;else{if(Jc(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Qc(t,e,n,r,i,o,s){if(!t)return;!s&&o&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=kc(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n=1;do{let r,i=t;t=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let t=0;t<n&&(a++,s=s.nextZ,s);t++);let u=n;for(;a>0||u>0&&s;)0!==a&&(0===u||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=s}o.nextZ=null,n*=2}while(e>1)}(i)}(t,r,i,o);let a=t;for(;t.prev!==t.next;){const u=t.prev,c=t.next;if(o?Dc(t,r,i,o):Rc(t))e.push(u.i,t.i,c.i),Jc(t),t=c.next,a=c.next;else if((t=c)===a){s?1===s?Qc(t=Tc(Sc(t),e),e,n,r,i,o,2):2===s&&Oc(t,e,n,r,i,o):Qc(Sc(t),e,n,r,i,o,1);break}}}function Rc(t){const e=t.prev,n=t,r=t.next;if(qc(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,c=r.y,l=Math.min(i,o,s),h=Math.min(a,u,c),A=Math.max(i,o,s),f=Math.max(a,u,c);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=A&&p.y>=h&&p.y<=f&&jc(i,a,o,u,s,c,p.x,p.y)&&qc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Dc(t,e,n,r){const i=t.prev,o=t,s=t.next;if(qc(i,o,s)>=0)return!1;const a=i.x,u=o.x,c=s.x,l=i.y,h=o.y,A=s.y,f=Math.min(a,u,c),p=Math.min(l,h,A),d=Math.max(a,u,c),g=Math.max(l,h,A),y=kc(f,p,e,n,r),m=kc(d,g,e,n,r);let I=t.prevZ,C=t.nextZ;for(;I&&I.z>=y&&C&&C.z<=m;){if(I.x>=f&&I.x<=d&&I.y>=p&&I.y<=g&&I!==i&&I!==s&&jc(a,l,u,h,c,A,I.x,I.y)&&qc(I.prev,I,I.next)>=0)return!1;if(I=I.prevZ,C.x>=f&&C.x<=d&&C.y>=p&&C.y<=g&&C!==i&&C!==s&&jc(a,l,u,h,c,A,C.x,C.y)&&qc(C.prev,C,C.next)>=0)return!1;C=C.nextZ}for(;I&&I.z>=y;){if(I.x>=f&&I.x<=d&&I.y>=p&&I.y<=g&&I!==i&&I!==s&&jc(a,l,u,h,c,A,I.x,I.y)&&qc(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;C&&C.z<=m;){if(C.x>=f&&C.x<=d&&C.y>=p&&C.y<=g&&C!==i&&C!==s&&jc(a,l,u,h,c,A,C.x,C.y)&&qc(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Tc(t,e){let n=t;do{const r=n.prev,i=n.next.next;!Kc(r,i)&&Hc(r,n,n.next,i)&&Vc(r,i)&&Vc(i,r)&&(e.push(r.i,n.i,i.i),Jc(n),Jc(n.next),n=t=i),n=n.next}while(n!==t);return Sc(n)}function Oc(t,e,n,r,i,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&Uc(s,t)){let a=Xc(s,t);return s=Sc(s,s.next),a=Sc(a,a.next),Qc(s,e,n,r,i,o,0),void Qc(a,e,n,r,i,o,0)}t=t.next}s=s.next}while(s!==t)}function Nc(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function Fc(t,e){const n=function(t,e){let n=e;const r=t.x,i=t.y;let o,s=-1/0;if(Kc(t,n))return n;do{if(Kc(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>s&&(s=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,u=o.x,c=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&Pc(i<c?r:s,i,u,c,i<c?s:r,i,n.x,n.y)){const e=Math.abs(i-n.y)/(r-n.x);Vc(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&zc(o,n)))&&(o=n,l=e)}n=n.next}while(n!==a);return o}(t,e);if(!n)return e;const r=Xc(n,t);return Sc(r,r.next),Sc(n,n.next)}function zc(t,e){return qc(t.prev,t,e.prev)<0&&qc(e.next,t,t.next)<0}function kc(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lc(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Pc(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function jc(t,e,n,r,i,o,s,a){return!(t===s&&e===a)&&Pc(t,e,n,r,i,o,s,a)}function Uc(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Hc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Vc(t,e)&&Vc(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(qc(t.prev,t,e.prev)||qc(t,e.prev,e))||Kc(t,e)&&qc(t.prev,t,t.next)>0&&qc(e.prev,e,e.next)>0)}function qc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Kc(t,e){return t.x===e.x&&t.y===e.y}function Hc(t,e,n,r){const i=Gc(qc(t,e,n)),o=Gc(qc(t,e,r)),s=Gc(qc(n,r,t)),a=Gc(qc(n,r,e));return i!==o&&s!==a||(!(0!==i||!Yc(t,n,e))||(!(0!==o||!Yc(t,r,e))||(!(0!==s||!Yc(n,t,r))||!(0!==a||!Yc(n,e,r)))))}function Yc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Gc(t){return t>0?1:t<0?-1:0}function Vc(t,e){return qc(t.prev,t,t.next)<0?qc(t,e,t.next)>=0&&qc(t,t.prev,e)>=0:qc(t,e,t.prev)<0||qc(t,t.next,e)<0}function Xc(t,e){const n=Zc(t.i,t.x,t.y),r=Zc(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Wc(t,e,n,r){const i=Zc(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Jc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Zc(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}vc.prototype.contains=function(t){return vc.contains(this,vc.southwest(t,wc))&&vc.contains(this,vc.northwest(t,wc))&&vc.contains(this,vc.southeast(t,wc))&&vc.contains(this,vc.northeast(t,wc))},vc.MAX_VALUE=Object.freeze(new vc(-Math.PI,-Xr.PI_OVER_TWO,Math.PI,Xr.PI_OVER_TWO)),Mc.clone=function(t,e){if(Or(t))return Or(e)?(e.origin=Wr.clone(t.origin),e.direction=Wr.clone(t.direction),e):new Mc(t.origin,t.direction)},Mc.getPoint=function(t,e,n){return kr.typeOf.object("ray",t),kr.typeOf.number("t",e),Or(n)||(n=new Wr),n=Wr.multiplyByScalar(t.direction,e,n),Wr.add(t.origin,n,n)},Mc.transform=function(t,e,n){return kr.typeOf.object("ray",t),kr.typeOf.object("matrix",e),kr.typeOf.object("result",n),sa.multiplyByPoint(e,t.origin,n.origin),sa.multiplyByPointAsVector(e,t.direction,n.direction),n};var $c=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),tl={BYTE:$c.BYTE,UNSIGNED_BYTE:$c.UNSIGNED_BYTE,SHORT:$c.SHORT,UNSIGNED_SHORT:$c.UNSIGNED_SHORT,INT:$c.INT,UNSIGNED_INT:$c.UNSIGNED_INT,FLOAT:$c.FLOAT,DOUBLE:$c.DOUBLE,getSizeInBytes:function(t){if(!Or(t))throw new Nr("value is required.");switch(t){case tl.BYTE:return Int8Array.BYTES_PER_ELEMENT;case tl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case tl.SHORT:return Int16Array.BYTES_PER_ELEMENT;case tl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case tl.INT:return Int32Array.BYTES_PER_ELEMENT;case tl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case tl.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case tl.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new Nr("componentDatatype is not a valid value.")}},fromTypedArray:function(t){return t instanceof Int8Array?tl.BYTE:t instanceof Uint8Array?tl.UNSIGNED_BYTE:t instanceof Int16Array?tl.SHORT:t instanceof Uint16Array?tl.UNSIGNED_SHORT:t instanceof Int32Array?tl.INT:t instanceof Uint32Array?tl.UNSIGNED_INT:t instanceof Float32Array?tl.FLOAT:t instanceof Float64Array?tl.DOUBLE:void 0},validate:function(t){return Or(t)&&(t===tl.BYTE||t===tl.UNSIGNED_BYTE||t===tl.SHORT||t===tl.UNSIGNED_SHORT||t===tl.INT||t===tl.UNSIGNED_INT||t===tl.FLOAT||t===tl.DOUBLE)},createTypedArray:function(t,e){if(!Or(t))throw new Nr("componentDatatype is required.");if(!Or(e))throw new Nr("valuesOrLength is required.");switch(t){case tl.BYTE:return new Int8Array(e);case tl.UNSIGNED_BYTE:return new Uint8Array(e);case tl.SHORT:return new Int16Array(e);case tl.UNSIGNED_SHORT:return new Uint16Array(e);case tl.INT:return new Int32Array(e);case tl.UNSIGNED_INT:return new Uint32Array(e);case tl.FLOAT:return new Float32Array(e);case tl.DOUBLE:return new Float64Array(e);default:throw new Nr("componentDatatype is not a valid value.")}},createArrayBufferView:function(t,e,n,r){if(!Or(t))throw new Nr("componentDatatype is required.");if(!Or(e))throw new Nr("buffer is required.");switch(n=Lr(n,0),r=Lr(r,(e.byteLength-n)/tl.getSizeInBytes(t)),t){case tl.BYTE:return new Int8Array(e,n,r);case tl.UNSIGNED_BYTE:return new Uint8Array(e,n,r);case tl.SHORT:return new Int16Array(e,n,r);case tl.UNSIGNED_SHORT:return new Uint16Array(e,n,r);case tl.INT:return new Int32Array(e,n,r);case tl.UNSIGNED_INT:return new Uint32Array(e,n,r);case tl.FLOAT:return new Float32Array(e,n,r);case tl.DOUBLE:return new Float64Array(e,n,r);default:throw new Nr("componentDatatype is not a valid value.")}},fromName:function(t){switch(t){case"BYTE":return tl.BYTE;case"UNSIGNED_BYTE":return tl.UNSIGNED_BYTE;case"SHORT":return tl.SHORT;case"UNSIGNED_SHORT":return tl.UNSIGNED_SHORT;case"INT":return tl.INT;case"UNSIGNED_INT":return tl.UNSIGNED_INT;case"FLOAT":return tl.FLOAT;case"DOUBLE":return tl.DOUBLE;default:throw new Nr("name is not a valid value.")}}},el=Object.freeze(tl),nl={CLOCKWISE:$c.CW,COUNTER_CLOCKWISE:$c.CCW,NONE:$c.NONE,validate:function(t){return t===nl.CLOCKWISE||t===nl.COUNTER_CLOCKWISE}},rl=Object.freeze(nl);const il=Math.PI/180,ol=180/Math.PI;function sl(t){return t*il}function al(t){return t*ol}function ul(t,e,n){return Math.min(n,Math.max(e,t))}function cl(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function ll(t){const e=[];for(const n in t)e.push(t[n]);return e}function hl(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}!function(){const t=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),e=t(this,(function(){return e.toString().search("(((.+)+)+)+$").toString().constructor(e).search("(((.+)+)+)+$")}));e()}();let Al=1;function fl(t,e){return-1!==t.indexOf(e,t.length-e.length)}function pl(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function dl(t){return Array.isArray(t)?t.map(dl):"object"==typeof t&&t?pl(t,dl):t}const gl={};function yl(t){gl[t]||("undefined"!=typeof console&&console.warn(t),gl[t]=!0)}function ml(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function Il(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Cl(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let El=new ui;function bl(t,e,n,r,i){El=function(t,e,n,r){const i=Ic-n,o=1<<r.z,s=(e/Ic+r.x)/o,a=(i/Ic+r.y)/o;let u=t.toLngLat(s,a);return El=ui.fromDegrees(u.lng,u.lat,0,El),El}(t,e,n,r),i&&(El.height=i(El));var o=ui.toCartesian(El);return(t.sceneMode==gc.COLUMBUS_VIEW||t.sceneMode==gc.SCENE2D)&&(o=pc.convertToColumbusCartesian(o)),o}function vl(t,e,n){if(t.sceneMode===gc.COLUMBUS_VIEW||t.sceneMode===gc.SCENE2D){let t=pc.convertTo3DCartesian(e);return ui.fromCartesian(t,void 0,n)}return ui.fromCartesian(e,void 0,n)}const xl=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),wl=xl(void 0,(function(){return wl.toString().search("(((.+)+)+)+$").toString().constructor(wl).search("(((.+)+)+)+$")}));wl();const Ml="mapbox-tiles";let Bl;function _l(t,e,n){if(!window.caches)return;const r={status:e.status,statusText:e.statusText,headers:new window.Headers};e.headers.forEach(((t,e)=>r.headers.set(e,t)));const i=Cl(e.headers.get("Cache-Control")||"");if(i["no-store"])return;i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Bl)try{new Response(new ReadableStream),Bl=!0}catch(t){Bl=!1}Bl?e(t.body):t.blob().then(e)}(e,(e=>{const n=new window.Response(e,r);window.caches.open(Ml).then((e=>e.put(Sl(t.url),n)))}))}function Sl(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}const Ql=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Rl=Ql(void 0,(function(){return Rl.toString().search("(((.+)+)+)+$").toString().constructor(Rl).search("(((.+)+)+)+$")}));Rl();"function"==typeof Object.freeze&&Object.freeze({Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"});class Dl extends Error{constructor(t,e,n){super(t),this.status=e,this.url=n,this.name=this.constructor.name,this.message=t}toString(){return this.name+": "+this.message+" ("+this.status+"): "+this.url}}const Tl=Il()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;const Ol=function(t,e){const n=Il()?self:window;if(r=t.url,!(/^file:/.test(r)||/^file:/.test(Tl())&&!/^\w+:/.test(r))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(t,e){const n=Il()?self:window,r=new n.AbortController,i=new n.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Tl(),signal:r.signal});let o=!1,s=!1;"json"===t.type&&i.headers.set("Accept","application/json");const a=(r,o,a)=>{if(s)return;if(r&&"SecurityError"!==r.message&&yl(r),o&&a)return u(o);const c=Date.now();n.fetch(i).then((n=>n.ok?u(n,null,c):e(new Dl(n.statusText,n.status,t.url)))).catch((t=>{20!==t.code&&e(new Error(t.message))}))},u=(n,r,a)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{s||(r&&a&&_l(i,r,a),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>e(new Error(t.message))))};return a(null,null),{cancel:()=>{s=!0,o||r.abort()}}}(t,e);if(Il()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}var r;return function(t,e){const n=new((Il()?self:window).XMLHttpRequest);n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Dl(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},Nl={};function Fl(t,e,n={}){const r=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),i=r(this,(function(){return i.toString().search("(((.+)+)+)+$").toString().constructor(i).search("(((.+)+)+)+$")}));i(),Nl[e],Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Nl[e]={klass:t,omit:n.omit||[]}}Fl(Object,"Object"),i.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},i.deserialize=function(t){return new i(t.buffer)},Object.defineProperty(i,"name",{value:"Grid"}),Fl(i,"Grid"),Fl(C,"Color"),Fl(Error,"Error"),Fl(Dl,"AJAXError"),Fl(nt,"ResolvedImage"),Fl(_r,"StylePropertyFunction"),Fl(br,"StyleExpression",{omit:["_evaluator"]}),Fl(Mr,"ZoomDependentExpression"),Fl(wr,"ZoomConstantExpression"),Fl(zt,"CompoundExpression",{omit:["_evaluate"]});for(const t in Hn)Nl[Hn[t]._classRegistryKey]||Fl(Hn[t],"Expression"+t);function zl(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function kl(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(zl(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const r of t)n.push(kl(r,e));return n}if("object"==typeof t){const n=t.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class "+r);Nl[r];const i=n.serialize?n.serialize(t,e):{};if(n.serialize)e&&e[e.length-1];else{for(const n in t){if(!t.hasOwnProperty(n))continue;if(Nl[r].omit.indexOf(n)>=0)continue;const o=t[n];i[n]=kl(o,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Ll(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||zl(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Ll);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=Nl[e];if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const e of Object.keys(t)){if("$name"===e)continue;const n=t[e];r[e]=Ll(n)}return r}throw new Error("can't deserialize object of type "+typeof t)}var Pl,jl=(Pl=!0,function(t,e){var n=Pl?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Pl=!1,n}),Ul=jl(void 0,(function(){return Ul.toString().search("(((.+)+)+)+$").toString().constructor(Ul).search("(((.+)+)+)+$")}));function ql(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}Ul(),ql.prototype.trigger=function(){!this._triggered&&(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))};const Kl=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Hl=Kl(void 0,(function(){return Hl.toString().search("(((.+)+)+)+$").toString().constructor(Hl).search("(((.+)+)+)+$")}));function Yl(t,e,n){var r;this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},r=this,["receive","process"].forEach((function(t){r[t]&&(r[t]=r[t].bind(r))})),this.invoker=new ql(this.process),this.target.addEventListener("message",this.receive,!1)}function Gl(t,e,n){!(n[t]&&-1!==n[t].indexOf(e))&&(n[t]=n[t]||[],n[t].push(e))}function Vl(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}Hl(),Yl.prototype.send=function(t,e,n,r){const i=++Yl.taskId;n&&(this.callbacks[i]=n);const o=[];return this.target.postMessage({id:i,type:t,hasCallback:!!n,targetMapId:r,sourceMapId:this.mapId,data:kl(e,o)},o),{cancel:()=>{n&&delete this.callbacks[i],this.target.postMessage({id:i,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}},Yl.prototype.receive=function(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t()}else this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()},Yl.prototype.process=function(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e)if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Ll(e.error)):n(null,Ll(e.data)))}else{let n=!1;const r=e.hasCallback?(e,r)=>{n=!0,delete this.cancelCallbacks[t];const i=[];this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?kl(e):null,data:kl(r,i)},i)}:t=>{n=!0};let i=null;const o=Ll(e.data);if(this.parent[e.type])i=this.parent[e.type](e.sourceMapId,o,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");i=this.parent.getWorkerSource(e.sourceMapId,t[0],o.source)[t[1]](o,r)}else r(new Error("Could not find function "+e.type));!n&&i&&i.cancel&&(this.cancelCallbacks[t]=i.cancel)}},Yl.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},Yl.taskId=0;var Xl=function(t,e){void 0===e&&(e={}),hl(this,e),this.type=t},Wl=function(t){var e,n=(e=!0,function(t,n){var r=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}),r=n(this,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));function i(e,n){void 0===n&&(n={}),t.call(this,"error",hl({error:e},n))}return r(),t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Xl),Jl=function(){};Jl.prototype.on=function(t,e){return this._listeners=this._listeners||{},Gl(t,e,this._listeners),this},Jl.prototype.off=function(t,e){return Vl(t,e,this._listeners),Vl(t,e,this._oneTimeListeners),this},Jl.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Gl(t,e,this._oneTimeListeners),this},Jl.prototype.fire=function(t,e){"string"==typeof t&&(t=new Xl(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1){i[r].call(this,t)}for(var o=0,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<s.length;o+=1){var a=s[o];Vl(n,a,this._oneTimeListeners),a.call(this,t)}var u=this._eventedParent;u&&(hl(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Wl&&console.error(t.error);return this},Jl.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Jl.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Zl,$l=(Zl=!0,function(t,e){var n=Zl?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Zl=!1,n}),th=$l(void 0,(function(){return th.toString().search("(((.+)+)+)+$").toString().constructor(th).search("(((.+)+)+)+$")}));th();var eh=function(){this.first=!0};eh.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var nh,rh=(nh=!0,function(t,e){var n=nh?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return nh=!1,n}),ih=rh(void 0,(function(){return ih.toString().search("(((.+)+)+)+$").toString().constructor(ih).search("(((.+)+)+)+$")}));ih();var oh=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new eh,this.transition={})};oh.prototype.isSupportedScript=function(t){return!1},oh.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},oh.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};const sh=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ah=sh(void 0,(function(){return ah.toString().search("(((.+)+)+)+$").toString().constructor(ah).search("(((.+)+)+)+$")}));ah();class uh{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Ar(t))return new _r(t,e);if(vr(t)){const n=Br(t,e);if("error"===n.result)throw new Error(n.value.map((t=>t.key+": "+t.message)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=C.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class ch{constructor(t){this.property=t,this.value=new uh(t,void 0)}transitioned(t,e){return new hh(this.property,this.value,e,hl({},t.transition,this.transition),t.now)}untransitioned(){return new hh(this.property,this.value,null,{},0)}}class lh{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return dl(this._values[t].value.value)}setValue(t,e){!this._values.hasOwnProperty(t)&&(this._values[t]=new ch(this._values[t].property)),this._values[t].value=new uh(this._values[t].property,null===e?void 0:dl(e))}getTransition(t){return dl(this._values[t].transition)}setTransition(t,e){!this._values.hasOwnProperty(t)&&(this._values[t]=new ch(this._values[t].property)),this._values[t].transition=dl(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[e+"-transition"]=r)}return t}transitioned(t,e){const n=new Ah(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new Ah(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class hh{constructor(t,e,n,r,i){const o=r.delay||0,s=r.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+s,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(s))}}return i}}class Ah{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new dh(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class fh{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return dl(this._values[t].value)}setValue(t,e){this._values[t]=new uh(this._values[t].property,null===e?void 0:dl(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new dh(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class ph{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class dh{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class gh{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=Te[this.specification.type];return r?r(t,e,n):t}}class yh{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return"constant"===t.expression.kind||"camera"===t.expression.kind?new ph(this,{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)},e):new ph(this,t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ph(this,{kind:"constant",value:void 0},t.parameters);const r=Te[this.specification.type];return r?new ph(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class mh{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class Ih{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new oh(0,{});for(const n in t){const r=t[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new uh(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new ch(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(e)}}}Fl(yh,"DataDrivenProperty"),Fl(gh,"DataConstantProperty"),Fl(mh,"ColorRampProperty");var Ch,Eh=(Ch=!0,function(t,e){var n=Ch?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Ch=!1,n}),bh=Eh(void 0,(function(){return bh.toString().search("(((.+)+)+)+$").toString().constructor(bh).search("(((.+)+)+)+$")}));function vh(t,e){return 256*(t=ul(Math.floor(t),0,255))+(e=ul(Math.floor(e),0,255))}bh();const xh=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),wh=xh(void 0,(function(){return wh.toString().search("(((.+)+)+)+$").toString().constructor(wh).search("(((.+)+)+)+$")}));wh();const Mh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bh{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _h{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return this.isTransferred,t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.isTransferred,this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Sh(t,e=1){let n=0,r=0;return{members:t.map((t=>{!t.name||t.name.length;const i=(a=t.type,Mh[a].BYTES_PER_ELEMENT),o=n=Qh(n,Math.max(e,i)),s=t.components||1;var a;return r=Math.max(r,i),n+=i*s,{name:t.name,type:t.type,components:s,offset:o}})),size:Qh(n,Math.max(r,e)),alignment:e}}function Qh(t,e){return Math.ceil(t/e)*e}const Rh=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Dh=Rh(void 0,(function(){return Dh.toString().search("(((.+)+)+)+$").toString().constructor(Dh).search("(((.+)+)+)+$")}));Dh();class Th extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}Th.prototype.bytesPerElement=4,Fl(Th,"StructArrayLayout2i4");class Oh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Oh.prototype.bytesPerElement=6,Fl(Oh,"StructArrayLayout3i6");class Nh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}Nh.prototype.bytesPerElement=8,Fl(Nh,"StructArrayLayout4i8");class Fh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o,s)}emplace(t,e,n,r,i,o,s,a){const u=6*t,c=12*t,l=3*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=s,this.float32[l+2]=a,t}}Fh.prototype.bytesPerElement=12,Fl(Fh,"StructArrayLayout2i4ub1f12");class zh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}zh.prototype.bytesPerElement=16,Fl(zh,"StructArrayLayout4f16");class kh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=6*t,a=3*t;return this.uint16[s+0]=e,this.uint16[s+1]=n,this.uint16[s+2]=r,this.uint16[s+3]=i,this.float32[a+2]=o,t}}kh.prototype.bytesPerElement=12,Fl(kh,"StructArrayLayout4ui1f12");class Lh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,t}}Lh.prototype.bytesPerElement=8,Fl(Lh,"StructArrayLayout4ui8");class Ph extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,s,a)}emplace(t,e,n,r,i,o,s,a,u){const c=14*t,l=7*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.float32[l+1]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=s,this.float32[l+5]=a,this.float32[l+6]=u,t}}Ph.prototype.bytesPerElement=28,Fl(Ph,"StructArrayLayout2i6f28");class jh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,t}}jh.prototype.bytesPerElement=12,Fl(jh,"StructArrayLayout6i12");class Uh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h){const A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,s,a,u,c,l,h)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=s,this.uint16[f+6]=a,this.uint16[f+7]=u,this.int16[f+8]=c,this.int16[f+9]=l,this.int16[f+10]=h,this.int16[f+11]=A,t}}Uh.prototype.bytesPerElement=24,Fl(Uh,"StructArrayLayout4i4ui4i24");class qh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y){const m=this.length;return this.resize(m+1),this.emplace(m,t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m){const I=24*t,C=12*t;return this.int16[I+0]=e,this.int16[I+1]=n,this.int16[I+2]=r,this.int16[I+3]=i,this.uint16[I+4]=o,this.uint16[I+5]=s,this.uint16[I+6]=a,this.uint16[I+7]=u,this.int16[I+8]=c,this.int16[I+9]=l,this.int16[I+10]=h,this.int16[I+11]=A,this.float32[C+6]=f,this.float32[C+7]=p,this.float32[C+8]=d,this.float32[C+9]=g,this.float32[C+10]=y,this.float32[C+11]=m,t}}qh.prototype.bytesPerElement=48,Fl(qh,"StructArrayLayout4i4ui4i6f48");class Kh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,s){const a=10*t,u=5*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.float32[u+2]=i,this.float32[u+3]=o,this.float32[u+4]=s,t}}Kh.prototype.bytesPerElement=20,Fl(Kh,"StructArrayLayout3i3f20");class Hh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint32[n+0]=e,t}}Hh.prototype.bytesPerElement=4,Fl(Hh,"StructArrayLayout1ul4");class Yh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g){const y=26*t,m=13*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.int16[y+2]=r,this.int16[y+3]=i,this.int16[y+4]=o,this.float32[m+3]=s,this.float32[m+4]=a,this.float32[m+5]=u,this.float32[m+6]=c,this.int16[y+14]=l,this.uint32[m+8]=h,this.uint16[y+18]=A,this.uint16[y+19]=f,this.float32[m+10]=p,this.float32[m+11]=d,this.float32[m+12]=g,t}}Yh.prototype.bytesPerElement=52,Fl(Yh,"StructArrayLayout5i4f1i1ul2ui3f52");class Gh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o,s)}emplace(t,e,n,r,i,o,s,a){const u=8*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+4]=i,this.int16[u+5]=o,this.int16[u+6]=s,this.int16[u+7]=a,t}}Gh.prototype.bytesPerElement=16,Fl(Gh,"StructArrayLayout3i2i2i16");class Vh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=r,this.int16[a+6]=i,this.int16[a+7]=o,t}}Vh.prototype.bytesPerElement=16,Fl(Vh,"StructArrayLayout2f1f2i16");class Xh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,s=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[s+1]=r,this.float32[s+2]=i,t}}Xh.prototype.bytesPerElement=12,Fl(Xh,"StructArrayLayout2ub2f12");class Wh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}Wh.prototype.bytesPerElement=12,Fl(Wh,"StructArrayLayout3f12");class Jh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}get(t){const e=3*t;return[this.uint16[e+0],this.uint16[e+1],this.uint16[e+2]]}}Jh.prototype.bytesPerElement=6,Fl(Jh,"StructArrayLayout3ui6");class Zh extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint32[i+0]=e,this.uint32[i+1]=n,this.uint32[i+2]=r,t}copyFrom3ui6(t){if(!(t instanceof Jh))throw new Error("expect array to be type of StructArrayLayout3ui6");this.clear();for(let e=0;e<t.length;e++){let n=t.get(e);this.emplaceBack(n[0],n[1],n[2])}}}Zh.prototype.bytesPerElement=12,Fl(Zh,"StructArrayLayout3ul12");class $h extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C){const E=this.length;return this.resize(E+1),this.emplace(E,t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E){const b=30*t,v=15*t,x=60*t;return this.int16[b+0]=e,this.int16[b+1]=n,this.int16[b+2]=r,this.float32[v+2]=i,this.float32[v+3]=o,this.uint16[b+8]=s,this.uint16[b+9]=a,this.uint32[v+5]=u,this.uint32[v+6]=c,this.uint32[v+7]=l,this.uint16[b+16]=h,this.uint16[b+17]=A,this.uint16[b+18]=f,this.float32[v+10]=p,this.float32[v+11]=d,this.uint8[x+48]=g,this.uint8[x+49]=y,this.uint8[x+50]=m,this.uint32[v+13]=I,this.int16[b+28]=C,this.uint8[x+58]=E,t}}$h.prototype.bytesPerElement=60,Fl($h,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class tA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v,x,w,M,B,_,S){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v,x,w,M,B,_,S)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v,x,w,M,B,_,S,Q){const R=38*t,D=19*t;return this.int16[R+0]=e,this.int16[R+1]=n,this.int16[R+2]=r,this.float32[D+2]=i,this.float32[D+3]=o,this.int16[R+8]=s,this.int16[R+9]=a,this.int16[R+10]=u,this.int16[R+11]=c,this.int16[R+12]=l,this.int16[R+13]=h,this.uint16[R+14]=A,this.uint16[R+15]=f,this.uint16[R+16]=p,this.uint16[R+17]=d,this.uint16[R+18]=g,this.uint16[R+19]=y,this.uint16[R+20]=m,this.uint16[R+21]=I,this.uint16[R+22]=C,this.uint16[R+23]=E,this.uint16[R+24]=b,this.uint16[R+25]=v,this.uint16[R+26]=x,this.uint16[R+27]=w,this.uint16[R+28]=M,this.uint32[D+15]=B,this.float32[D+16]=_,this.float32[D+17]=S,this.float32[D+18]=Q,t}}tA.prototype.bytesPerElement=76,Fl(tA,"StructArrayLayout3i2f6i15ui1ul3f76");class eA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.float32[n+0]=e,t}}eA.prototype.bytesPerElement=4,Fl(eA,"StructArrayLayout1f4");class nA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=5*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=r,this.float32[s+3]=i,this.float32[s+4]=o,t}}nA.prototype.bytesPerElement=20,Fl(nA,"StructArrayLayout5f20");class rA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,s){const a=6*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,this.float32[a+5]=s,t}}rA.prototype.bytesPerElement=24,Fl(rA,"StructArrayLayout6f24");class iA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,s,a,u)}emplace(t,e,n,r,i,o,s,a,u,c){const l=9*t;return this.float32[l+0]=e,this.float32[l+1]=n,this.float32[l+2]=r,this.float32[l+3]=i,this.float32[l+4]=o,this.float32[l+5]=s,this.float32[l+6]=a,this.float32[l+7]=u,this.float32[l+8]=c,t}}iA.prototype.bytesPerElement=36,Fl(iA,"StructArrayLayout9f36");class oA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,o,s,a,u,c)}emplace(t,e,n,r,i,o,s,a,u,c,l){const h=10*t;return this.float32[h+0]=e,this.float32[h+1]=n,this.float32[h+2]=r,this.float32[h+3]=i,this.float32[h+4]=o,this.float32[h+5]=s,this.float32[h+6]=a,this.float32[h+7]=u,this.float32[h+8]=c,this.float32[h+9]=l,t}}oA.prototype.bytesPerElement=40,Fl(oA,"StructArrayLayout10f40");class sA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,u,c,l,h){const A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,s,a,u,c,l,h)}emplace(t,e,n,r,i,o,s,a,u,c,l,h,A){const f=12*t;return this.float32[f+0]=e,this.float32[f+1]=n,this.float32[f+2]=r,this.float32[f+3]=i,this.float32[f+4]=o,this.float32[f+5]=s,this.float32[f+6]=a,this.float32[f+7]=u,this.float32[f+8]=c,this.float32[f+9]=l,this.float32[f+10]=h,this.float32[f+11]=A,t}}sA.prototype.bytesPerElement=48,Fl(sA,"StructArrayLayout12f48");class aA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=3*t,s=6*t;return this.uint32[o+0]=e,this.uint16[s+2]=n,this.uint16[s+3]=r,this.uint16[s+4]=i,t}}aA.prototype.bytesPerElement=12,Fl(aA,"StructArrayLayout1ul3ui12");class uA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}get(t){const e=2*t;return[this.uint16[e+0],this.uint16[e+1]]}}uA.prototype.bytesPerElement=4,Fl(uA,"StructArrayLayout2ui4");class cA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint32[r+0]=e,this.uint32[r+1]=n,t}copyFrom2ui4(t){if(!(t instanceof uA))throw new Error("expect array to be type of StructArrayLayout2ui4");this.clear();for(let e=0;e<t.length;e++){let n=t.get(e);this.emplaceBack(n[0],n[1])}}}cA.prototype.bytesPerElement=8,Fl(cA,"StructArrayLayout2ul8");class lA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint16[n+0]=e,t}}lA.prototype.bytesPerElement=2,Fl(lA,"StructArrayLayout1ui2");class hA extends _h{constructor(){super()}_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}hA.prototype.bytesPerElement=8,Fl(hA,"StructArrayLayout2f8");class AA extends Bh{constructor(t,e){super(t,e)}get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}get ecefX(){return this._structArray.float32[this._pos4+10]}get ecefY(){return this._structArray.float32[this._pos4+11]}get ecefZ(){return this._structArray.float32[this._pos4+12]}}AA.prototype.size=52;class fA extends Yh{constructor(){super()}get(t){return new AA(this,t)}}Fl(fA,"CollisionBoxArray");class pA extends Bh{constructor(t,e){super(t,e)}get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}pA.prototype.size=60;class dA extends $h{constructor(){super()}get(t){return new pA(this,t)}}Fl(dA,"PlacedSymbolArray");class gA extends Bh{constructor(t,e){super(t,e)}get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}gA.prototype.size=76;class yA extends tA{constructor(){super()}get(t){return new gA(this,t)}}Fl(yA,"SymbolInstanceArray");class mA extends eA{constructor(){super()}getoffsetX(t){return this.float32[1*t+0]}}Fl(mA,"GlyphOffsetArray");class IA extends Th{constructor(){super()}getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Fl(IA,"SymbolLineVertexArray");class CA extends Bh{constructor(t,e){super(t,e)}get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}CA.prototype.size=12;class EA extends aA{constructor(){super()}get(t){return new CA(this,t)}}Fl(EA,"FeatureIndexArray");class bA extends uA{constructor(){super()}geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Fl(bA,"FillExtrusionCentroidArray");class vA extends Bh{constructor(t,e){super(t,e)}get lng(){return this._structArray.float32[this._pos4]}get lat(){return this._structArray.float32[this._pos4+1]}get height(){return this._structArray.float32[this._pos4+2]}get quads(){return this._structArray.float32[this._pos4+3]}set height(t){this._structArray.float32[this._pos4+2]=t}}vA.prototype.size=16;class xA extends zh{constructor(){super()}get(t){return new vA(this,t)}}Fl(xA,"LngLatHeightQuadArray");class wA extends Bh{constructor(t,e){super(t,e)}get lng(){return this._structArray.float32[this._pos4]}get lat(){return this._structArray.float32[this._pos4+1]}get height(){return this._structArray.float32[this._pos4+2]}set height(t){this._structArray.float32[this._pos4+2]=t}}wA.prototype.size=12;class MA extends Wh{constructor(){super()}get(t){return new wA(this,t)}}Fl(MA,"LngLatHeightArray");const BA=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),_A=BA(void 0,(function(){return _A.toString().search("(((.+)+)+)+$").toString().constructor(_A).search("(((.+)+)+)+$")}));_A();const SA=Sh([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),QA=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),RA=QA(void 0,(function(){return RA.toString().search("(((.+)+)+)+$").toString().constructor(RA).search("(((.+)+)+)+$")}));RA();const DA=Sh([{name:"a_dash",components:4,type:"Uint16"}]);var TA,OA=(TA=!0,function(t,e){var n=TA?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return TA=!1,n}),NA=OA(void 0,(function(){return NA.toString().search("(((.+)+)+)+$").toString().constructor(NA).search("(((.+)+)+)+$")}));NA();var FA=function(){this.ids=[],this.positions=[],this.indexed=!1};function zA(t,e,n,r){if(!(n>=r)){for(var i=t[n+r>>1],o=n-1,s=r+1;;){do{o++}while(t[o]<i);do{s--}while(t[s]>i);if(o>=s)break;kA(t,o,s),kA(e,3*o,3*s),kA(e,3*o+1,3*s+1),kA(e,3*o+2,3*s+2)}zA(t,e,n,s),zA(t,e,s+1,r)}}function kA(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}FA.prototype.add=function(t,e,n,r){this.ids.push(t),this.positions.push(e,n,r)},FA.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var r=e+n>>1;this.ids[r]>=t?n=r:e=r+1}for(var i=[];this.ids[e]===t;){var o=this.positions[3*e],s=this.positions[3*e+1],a=this.positions[3*e+2];i.push({index:o,start:s,end:a}),e++}return i},FA.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return zA(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},FA.deserialize=function(t){var e=new FA;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},Fl(FA,"FeaturePositionMap");var LA={UNSIGNED_BYTE:$c.UNSIGNED_BYTE,UNSIGNED_SHORT:$c.UNSIGNED_SHORT,UNSIGNED_INT:$c.UNSIGNED_INT,getSizeInBytes:function(t){switch(t){case LA.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case LA.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case LA.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}throw new Nr("indexDatatype is required and must be a valid IndexDatatype constant.")},fromSizeInBytes:function(t){switch(t){case 2:return LA.UNSIGNED_SHORT;case 4:return LA.UNSIGNED_INT;case 1:return LA.UNSIGNED_BYTE;default:throw new Nr("Size in bytes cannot be mapped to an IndexDatatype")}},validate:function(t){return Or(t)&&(t===LA.UNSIGNED_BYTE||t===LA.UNSIGNED_SHORT||t===LA.UNSIGNED_INT)},createTypedArray:function(t,e){if(!Or(t))throw new Nr("numberOfVertices is required.");return t>=Xr.SIXTY_FOUR_KILOBYTES?new Uint32Array(e):new Uint16Array(e)},createTypedArrayFromArrayBuffer:function(t,e,n,r){if(!Or(t))throw new Nr("numberOfVertices is required.");if(!Or(e))throw new Nr("sourceArray is required.");if(!Or(n))throw new Nr("byteOffset is required.");return t>=Xr.SIXTY_FOUR_KILOBYTES?new Uint32Array(e,n,r):new Uint16Array(e,n,r)},fromTypedArray:function(t){if(t instanceof Uint8Array)return LA.UNSIGNED_BYTE;if(t instanceof Uint16Array)return LA.UNSIGNED_SHORT;if(t instanceof Uint32Array)return LA.UNSIGNED_INT;throw new Nr("array must be a Uint8Array, Uint16Array, or Uint32Array.")}},PA=Object.freeze(LA),jA={STREAM_DRAW:$c.STREAM_DRAW,STATIC_DRAW:$c.STATIC_DRAW,DYNAMIC_DRAW:$c.DYNAMIC_DRAW,validate:function(t){return t===jA.STREAM_DRAW||t===jA.STATIC_DRAW||t===jA.DYNAMIC_DRAW}},UA=jA;function qA(){return!0}function KA(t,e){function n(){throw new Nr(e)}for(var r in e=Lr(e,"This object was destroyed, i.e., destroy() was called."),t)"function"==typeof t[r]&&(t[r]=n);t.isDestroyed=qA}const HA=1;function YA(t){if(t=Lr(t,Lr.EMPTY_OBJECT),kr.defined("options.context",t.context),!Or(t.typedArray)&&!Or(t.sizeInBytes))throw new Nr("Either options.sizeInBytes or options.typedArray is required.");if(Or(t.typedArray)&&Or(t.sizeInBytes))throw new Nr("Cannot pass in both options.sizeInBytes and options.typedArray.");if(Or(t.typedArray)&&(kr.typeOf.object("options.typedArray",t.typedArray),kr.typeOf.number("options.typedArray.byteLength",t.typedArray.byteLength)),!UA.validate(t.usage))throw new Nr("usage is invalid.");var e=t.context._gl,n=t.bufferTarget,r=t.typedArray,i=t.sizeInBytes,o=t.usage,s=Or(r);s&&(i=r.byteLength),kr.typeOf.number.greaterThan("sizeInBytes",i,0);var a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,s?r:i,o),e.bindBuffer(n,null),this._gl=e,this._webgl2=t.context._webgl2,this._bufferTarget=n,this._sizeInBytes=i,this._usage=o,this._buffer=a,this.context=t.context,t.context.memorySize+=i,this._ownerName=t.owner,this.context.memoryAnalyzer.allocateGPUMemory(HA,t.owner,i)}function GA(t){if(t=Lr(t,Lr.EMPTY_OBJECT),kr.defined("options.context",t.context),!Or(t.typedArray)&&!Or(t.sizeInBytes))throw new Nr("Either options.sizeInBytes or options.typedArray is required.");if(Or(t.typedArray)&&Or(t.sizeInBytes))throw new Nr("Cannot pass in both options.sizeInBytes and options.typedArray.");Or(t.typedArray)&&(kr.typeOf.object("options.typedArray",t.typedArray),kr.typeOf.number("options.typedArray.byteLength",t.typedArray.byteLength)),this._id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),t.context.webgpu?this._inner=new t.context.webgpuMembers.BufferGPU(t):this._inner=new YA(t),this.vertexArrayDestroyable=!0}function VA(t,e,n,r){this.x=Lr(t,0),this.y=Lr(e,0),this.width=Lr(n,0),this.height=Lr(r,0)}Object.defineProperties(YA.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),YA.prototype._getBuffer=function(){return this._buffer},YA.prototype.copyFromArrayView=function(t,e){e=Lr(e,0),kr.defined("arrayView",t),kr.typeOf.number.lessThanOrEquals("offsetInBytes + arrayView.byteLength",e+t.byteLength,this._sizeInBytes);var n=this._gl,r=this._bufferTarget;n.bindBuffer(r,this._buffer),n.bufferSubData(r,e,t),n.bindBuffer(r,null)},YA.prototype.copyFromBuffer=function(t,e,n,r){if(!this._webgl2)throw new Nr("A WebGL 2 context is required.");if(!Or(t))throw new Nr("readBuffer must be defined.");if(!Or(r)||r<=0)throw new Nr("sizeInBytes must be defined and be greater than zero.");if(!Or(e)||e<0||e+r>t.sizeInBytes)throw new Nr("readOffset must be greater than or equal to zero and readOffset + sizeInBytes must be less than of equal to readBuffer.sizeInBytes.");if(!Or(n)||n<0||n+r>this._sizeInBytes)throw new Nr("writeOffset must be greater than or equal to zero and writeOffset + sizeInBytes must be less than of equal to this.sizeInBytes.");if(this._buffer===t.buffer&&(n>=e&&n<e+r||e>n&&e<n+r))throw new Nr("When readBuffer is equal to this, the ranges [readOffset + sizeInBytes) and [writeOffset, writeOffset + sizeInBytes) must not overlap.");if(this._bufferTarget===$c.ELEMENT_ARRAY_BUFFER&&t.bufferTarget!==$c.ELEMENT_ARRAY_BUFFER||this._bufferTarget!==$c.ELEMENT_ARRAY_BUFFER&&t.bufferTarget===$c.ELEMENT_ARRAY_BUFFER)throw new Nr("Can not copy an index buffer into another buffer type.");var i=$c.COPY_READ_BUFFER,o=$c.COPY_WRITE_BUFFER,s=this._gl;s.bindBuffer(o,this._buffer),s.bindBuffer(i,t.buffer),s.copyBufferSubData(i,o,e,n,r),s.bindBuffer(o,null),s.bindBuffer(i,null)},YA.prototype.getBufferData=function(t,e,n,r){if(e=Lr(e,0),n=Lr(n,0),!this._webgl2)throw new Nr("A WebGL 2 context is required.");if(!Or(t))throw new Nr("arrayView is required.");var i,o,s=t.byteLength;if(Or(r)?(i=r,Or(s)?o=1:(s=t.length,o=t.BYTES_PER_ELEMENT)):Or(s)?(i=s-n,o=1):(i=(s=t.length)-n,o=t.BYTES_PER_ELEMENT),n<0||n>s)throw new Nr("destinationOffset must be greater than zero and less than the arrayView length.");if(n+i>s)throw new Nr("destinationOffset + length must be less than or equal to the arrayViewLength.");if(e<0||e>this._sizeInBytes)throw new Nr("sourceOffset must be greater than zero and less than the buffers size.");if(e+i*o>this._sizeInBytes)throw new Nr("sourceOffset + length must be less than the buffers size.");var a=this._gl,u=$c.COPY_READ_BUFFER;a.bindBuffer(u,this._buffer),a.getBufferSubData(u,e,t,n,r),a.bindBuffer(u,null)},YA.prototype.isDestroyed=function(){return!1},YA.prototype.destroy=function(){return!this.context._contextWasLost&&this._gl.deleteBuffer(this._buffer),this.context.memorySize-=this.sizeInBytes,this.context.memoryAnalyzer.releaseGPUMemory(HA,this._ownerName,this.sizeInBytes),KA(this)},GA.createVertexBuffer=function(t){return kr.defined("options.context",t.context),new GA({context:t.context,bufferTarget:$c.ARRAY_BUFFER,typedArray:t.typedArray,sizeInBytes:t.sizeInBytes,usage:t.usage,owner:t.owner})},GA.createIndexBuffer=function(t){if(kr.defined("options.context",t.context),!PA.validate(t.indexDatatype))throw new Nr("Invalid indexDatatype.");if(t.indexDatatype===PA.UNSIGNED_INT&&!t.context.elementIndexUint)throw new Nr("IndexDatatype.UNSIGNED_INT requires OES_element_index_uint, which is not supported on this system.  Check context.elementIndexUint.");var e=t.context,n=t.indexDatatype,r=PA.getSizeInBytes(n),i=new GA({context:e,bufferTarget:$c.ELEMENT_ARRAY_BUFFER,typedArray:t.typedArray,sizeInBytes:t.sizeInBytes,usage:t.usage,indexDatatype:n,owner:t.owner}),o=i.sizeInBytes/r;return Object.defineProperties(i,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return r}},numberOfIndices:{get:function(){return o}}}),i},Object.defineProperties(GA.prototype,{sizeInBytes:{get:function(){return this._inner.sizeInBytes}},usage:{get:function(){return this._inner.usage}},bufferTarget:{get:function(){return this._inner._bufferTarget}},buffer:{get:function(){return this._inner._buffer}}}),GA.prototype._getBuffer=function(){return this._inner._getBuffer()},GA.prototype.copyFromArrayView=function(t,e){this._inner.copyFromArrayView(t,e)},GA.prototype.copyFromBuffer=function(t,e,n,r){this._inner.copyFromBuffer(t,e,n,r)},GA.prototype.getBufferData=function(t,e,n,r){this._inner.getBufferData(t,e,n,r)},GA.prototype.isDestroyed=function(){return!1},GA.prototype.destroy=function(){return this._inner.destroy(),KA(this)},VA.packedLength=4,VA.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.x,e[n++]=t.y,e[n++]=t.width,e[n]=t.height,e},VA.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new VA),n.x=t[e++],n.y=t[e++],n.width=t[e++],n.height=t[e],n},VA.fromPoints=function(t,e){if(Or(e)||(e=new VA),!Or(t)||0===t.length)return e.x=0,e.y=0,e.width=0,e.height=0,e;for(var n=t.length,r=t[0].x,i=t[0].y,o=t[0].x,s=t[0].y,a=1;a<n;a++){var u=t[a],c=u.x,l=u.y;r=Math.min(c,r),o=Math.max(c,o),i=Math.min(l,i),s=Math.max(l,s)}return e.x=r,e.y=i,e.width=o-r,e.height=s-i,e};var XA,WA,JA,ZA=new Su,$A=new ui,tf=new ui;function ef(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function nf(t,e,n,r){this.red=Lr(t,1),this.green=Lr(e,1),this.blue=Lr(n,1),this.alpha=Lr(r,1)}VA.fromRectangle=function(t,e,n){if(Or(n)||(n=new VA),!Or(t))return n.x=0,n.y=0,n.width=0,n.height=0,n;var r=(e=Lr(e,ZA)).project(vc.southwest(t,$A)),i=e.project(vc.northeast(t,tf));return di.subtract(i,r,i),n.x=r.x,n.y=r.y,n.width=i.x,n.height=i.y,n},VA.clone=function(t,e){if(Or(t))return Or(e)?(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e):new VA(t.x,t.y,t.width,t.height)},VA.union=function(t,e,n){kr.typeOf.object("left",t),kr.typeOf.object("right",e),Or(n)||(n=new VA);var r=Math.min(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.x+t.width,e.x+e.width),s=Math.max(t.y+t.height,e.y+e.height);return n.x=r,n.y=i,n.width=o-r,n.height=s-i,n},VA.expand=function(t,e,n){kr.typeOf.object("rectangle",t),kr.typeOf.object("point",e),n=VA.clone(t,n);var r=e.x-n.x,i=e.y-n.y;return r>n.width?n.width=r:r<0&&(n.width-=r,n.x=e.x),i>n.height?n.height=i:i<0&&(n.height-=i,n.y=e.y),n},VA.intersect=function(t,e){kr.typeOf.object("left",t),kr.typeOf.object("right",e);var n=t.x,r=t.y,i=e.x,o=e.y;return n>i+e.width||n+t.width<i||r+t.height<o||r>o+e.height?bc.OUTSIDE:bc.INTERSECTING},VA.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},VA.prototype.clone=function(t){return VA.clone(this,t)},VA.prototype.intersect=function(t){return VA.intersect(this,t)},VA.prototype.equals=function(t){return VA.equals(this,t)},nf.fromCartesian4=function(t,e){return kr.typeOf.object("cartesian",t),Or(e)?(e.red=t.x,e.green=t.y,e.blue=t.z,e.alpha=t.w,e):new nf(t.x,t.y,t.z,t.w)},nf.fromBytes=function(t,e,n,r,i){return t=nf.byteToFloat(Lr(t,255)),e=nf.byteToFloat(Lr(e,255)),n=nf.byteToFloat(Lr(n,255)),r=nf.byteToFloat(Lr(r,255)),Or(i)?(i.red=t,i.green=e,i.blue=n,i.alpha=r,i):new nf(t,e,n,r)},nf.fromAlpha=function(t,e,n){return kr.typeOf.object("color",t),kr.typeOf.number("alpha",e),Or(n)?(n.red=t.red,n.green=t.green,n.blue=t.blue,n.alpha=e,n):new nf(t.red,t.green,t.blue,e)},Za.supportsTypedArrays()&&(XA=new ArrayBuffer(4),WA=new Uint32Array(XA),JA=new Uint8Array(XA)),nf.fromRgba=function(t,e){return WA[0]=t,nf.fromBytes(JA[0],JA[1],JA[2],JA[3],e)},nf.byteToRgba=function(t,e,n,r){return JA[0]=t,JA[1]=e,JA[2]=n,JA[3]=r,WA[0]},nf.fromHsl=function(t,e,n,r,i){t=Lr(t,0)%1,e=Lr(e,0),n=Lr(n,0),r=Lr(r,1);var o=n,s=n,a=n;if(0!==e){var u,c=2*n-(u=n<.5?n*(1+e):n+e-n*e);o=ef(c,u,t+1/3),s=ef(c,u,t),a=ef(c,u,t-1/3)}return Or(i)?(i.red=o,i.green=s,i.blue=a,i.alpha=r,i):new nf(o,s,a,r)},nf.fromRandom=function(t,e){var n=(t=Lr(t,Lr.EMPTY_OBJECT)).red;if(!Or(n)){var r=Lr(t.minimumRed,0),i=Lr(t.maximumRed,1);kr.typeOf.number.lessThanOrEquals("minimumRed",r,i),n=r+Xr.nextRandomNumber()*(i-r)}var o=t.green;if(!Or(o)){var s=Lr(t.minimumGreen,0),a=Lr(t.maximumGreen,1);kr.typeOf.number.lessThanOrEquals("minimumGreen",s,a),o=s+Xr.nextRandomNumber()*(a-s)}var u=t.blue;if(!Or(u)){var c=Lr(t.minimumBlue,0),l=Lr(t.maximumBlue,1);kr.typeOf.number.lessThanOrEquals("minimumBlue",c,l),u=c+Xr.nextRandomNumber()*(l-c)}var h=t.alpha;if(!Or(h)){var A=Lr(t.minimumAlpha,0),f=Lr(t.maximumAlpha,1);kr.typeOf.number.lessThanOrEquals("minumumAlpha",A,f),h=A+Xr.nextRandomNumber()*(f-A)}return Or(e)?(e.red=n,e.green=o,e.blue=u,e.alpha=h,e):new nf(n,o,u,h)};var rf=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,of=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,sf=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,af=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;nf.fromCssColorString=function(t,e){kr.typeOf.string("color",t),Or(e)||(e=new nf);var n=nf[t.toUpperCase()];if(Or(n))return nf.clone(n,e),e;var r=rf.exec(t);return null!==r?(e.red=parseInt(r[1],16)/15,e.green=parseInt(r[2],16)/15,e.blue=parseInt(r[3],16)/15,e.alpha=1,e):null!==(r=of.exec(t))?(e.red=parseInt(r[1],16)/255,e.green=parseInt(r[2],16)/255,e.blue=parseInt(r[3],16)/255,e.alpha=1,e):null!==(r=sf.exec(t))?(e.red=parseFloat(r[1])/("%"===r[1].substr(-1)?100:255),e.green=parseFloat(r[2])/("%"===r[2].substr(-1)?100:255),e.blue=parseFloat(r[3])/("%"===r[3].substr(-1)?100:255),e.alpha=parseFloat(Lr(r[4],"1.0")),e):null!==(r=af.exec(t))?nf.fromHsl(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(Lr(r[4],"1.0")),e):e=void 0},nf.packedLength=4,nf.pack=function(t,e,n){return kr.typeOf.object("value",t),kr.defined("array",e),n=Lr(n,0),e[n++]=t.red,e[n++]=t.green,e[n++]=t.blue,e[n]=t.alpha,e},nf.unpack=function(t,e,n){return kr.defined("array",t),e=Lr(e,0),Or(n)||(n=new nf),n.red=t[e++],n.green=t[e++],n.blue=t[e++],n.alpha=t[e],n},nf.byteToFloat=function(t){return t/255},nf.floatToByte=function(t){return 1===t?255:256*t|0},nf.clone=function(t,e){if(Or(t))return Or(e)?(e.red=t.red,e.green=t.green,e.blue=t.blue,e.alpha=t.alpha,e):new nf(t.red,t.green,t.blue,t.alpha)},nf.equals=function(t,e){return t===e||Or(t)&&Or(e)&&t.red===e.red&&t.green===e.green&&t.blue===e.blue&&t.alpha===e.alpha},nf.equalsArray=function(t,e,n){return t.red===e[n]&&t.green===e[n+1]&&t.blue===e[n+2]&&t.alpha===e[n+3]},nf.prototype.clone=function(t){return nf.clone(this,t)},nf.prototype.equals=function(t){return nf.equals(this,t)},nf.prototype.equalsEpsilon=function(t,e){return this===t||Or(t)&&Math.abs(this.red-t.red)<=e&&Math.abs(this.green-t.green)<=e&&Math.abs(this.blue-t.blue)<=e&&Math.abs(this.alpha-t.alpha)<=e},nf.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},nf.prototype.toCssColorString=function(){var t=nf.floatToByte(this.red),e=nf.floatToByte(this.green),n=nf.floatToByte(this.blue);return 1===this.alpha?"rgb("+t+","+e+","+n+")":"rgba("+t+","+e+","+n+","+this.alpha+")"},nf.prototype.toBytes=function(t){var e=nf.floatToByte(this.red),n=nf.floatToByte(this.green),r=nf.floatToByte(this.blue),i=nf.floatToByte(this.alpha);return Or(t)?(t[0]=e,t[1]=n,t[2]=r,t[3]=i,t):[e,n,r,i]},nf.prototype.toRgba=function(){return JA[0]=nf.floatToByte(this.red),JA[1]=nf.floatToByte(this.green),JA[2]=nf.floatToByte(this.blue),JA[3]=nf.floatToByte(this.alpha),WA[0]},nf.prototype.brighten=function(t,e){return kr.typeOf.number("magnitude",t),kr.typeOf.number.greaterThanOrEquals("magnitude",t,0),kr.typeOf.object("result",e),t=1-t,e.red=1-(1-this.red)*t,e.green=1-(1-this.green)*t,e.blue=1-(1-this.blue)*t,e.alpha=this.alpha,e},nf.prototype.darken=function(t,e){return kr.typeOf.number("magnitude",t),kr.typeOf.number.greaterThanOrEquals("magnitude",t,0),kr.typeOf.object("result",e),t=1-t,e.red=this.red*t,e.green=this.green*t,e.blue=this.blue*t,e.alpha=this.alpha,e},nf.prototype.withAlpha=function(t,e){return nf.fromAlpha(this,t,e)},nf.add=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.red=t.red+e.red,n.green=t.green+e.green,n.blue=t.blue+e.blue,n.alpha=t.alpha+e.alpha,n},nf.subtract=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.red=t.red-e.red,n.green=t.green-e.green,n.blue=t.blue-e.blue,n.alpha=t.alpha-e.alpha,n},nf.multiply=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.red=t.red*e.red,n.green=t.green*e.green,n.blue=t.blue*e.blue,n.alpha=t.alpha*e.alpha,n},nf.divide=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.red=t.red/e.red,n.green=t.green/e.green,n.blue=t.blue/e.blue,n.alpha=t.alpha/e.alpha,n},nf.mod=function(t,e,n){return kr.typeOf.object("left",t),kr.typeOf.object("right",e),kr.typeOf.object("result",n),n.red=t.red%e.red,n.green=t.green%e.green,n.blue=t.blue%e.blue,n.alpha=t.alpha%e.alpha,n},nf.lerp=function(t,e,n,r){return kr.typeOf.object("start",t),kr.typeOf.object("end",e),kr.typeOf.number("t",n),kr.typeOf.object("result",r),r.red=Xr.lerp(t.red,e.red,n),r.green=Xr.lerp(t.green,e.green,n),r.blue=Xr.lerp(t.blue,e.blue,n),r.alpha=Xr.lerp(t.alpha,e.alpha,n),r},nf.multiplyByScalar=function(t,e,n){return kr.typeOf.object("color",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.red=t.red*e,n.green=t.green*e,n.blue=t.blue*e,n.alpha=t.alpha*e,n},nf.divideByScalar=function(t,e,n){return kr.typeOf.object("color",t),kr.typeOf.number("scalar",e),kr.typeOf.object("result",n),n.red=t.red/e,n.green=t.green/e,n.blue=t.blue/e,n.alpha=t.alpha/e,n},nf.ALICEBLUE=Object.freeze(nf.fromCssColorString("#F0F8FF")),nf.ANTIQUEWHITE=Object.freeze(nf.fromCssColorString("#FAEBD7")),nf.AQUA=Object.freeze(nf.fromCssColorString("#00FFFF")),nf.AQUAMARINE=Object.freeze(nf.fromCssColorString("#7FFFD4")),nf.AZURE=Object.freeze(nf.fromCssColorString("#F0FFFF")),nf.BEIGE=Object.freeze(nf.fromCssColorString("#F5F5DC")),nf.BISQUE=Object.freeze(nf.fromCssColorString("#FFE4C4")),nf.BLACK=Object.freeze(nf.fromCssColorString("#000000")),nf.BLANCHEDALMOND=Object.freeze(nf.fromCssColorString("#FFEBCD")),nf.BLUE=Object.freeze(nf.fromCssColorString("#0000FF")),nf.BLUEVIOLET=Object.freeze(nf.fromCssColorString("#8A2BE2")),nf.BROWN=Object.freeze(nf.fromCssColorString("#A52A2A")),nf.BURLYWOOD=Object.freeze(nf.fromCssColorString("#DEB887")),nf.CADETBLUE=Object.freeze(nf.fromCssColorString("#5F9EA0")),nf.CHARTREUSE=Object.freeze(nf.fromCssColorString("#7FFF00")),nf.CHOCOLATE=Object.freeze(nf.fromCssColorString("#D2691E")),nf.CORAL=Object.freeze(nf.fromCssColorString("#FF7F50")),nf.CORNFLOWERBLUE=Object.freeze(nf.fromCssColorString("#6495ED")),nf.CORNSILK=Object.freeze(nf.fromCssColorString("#FFF8DC")),nf.CRIMSON=Object.freeze(nf.fromCssColorString("#DC143C")),nf.CYAN=Object.freeze(nf.fromCssColorString("#00FFFF")),nf.DARKBLUE=Object.freeze(nf.fromCssColorString("#00008B")),nf.DARKCYAN=Object.freeze(nf.fromCssColorString("#008B8B")),nf.DARKGOLDENROD=Object.freeze(nf.fromCssColorString("#B8860B")),nf.DARKGRAY=Object.freeze(nf.fromCssColorString("#A9A9A9")),nf.DARKGREEN=Object.freeze(nf.fromCssColorString("#006400")),nf.DARKGREY=nf.DARKGRAY,nf.DARKKHAKI=Object.freeze(nf.fromCssColorString("#BDB76B")),nf.DARKMAGENTA=Object.freeze(nf.fromCssColorString("#8B008B")),nf.DARKOLIVEGREEN=Object.freeze(nf.fromCssColorString("#556B2F")),nf.DARKORANGE=Object.freeze(nf.fromCssColorString("#FF8C00")),nf.DARKORCHID=Object.freeze(nf.fromCssColorString("#9932CC")),nf.DARKRED=Object.freeze(nf.fromCssColorString("#8B0000")),nf.DARKSALMON=Object.freeze(nf.fromCssColorString("#E9967A")),nf.DARKSEAGREEN=Object.freeze(nf.fromCssColorString("#8FBC8F")),nf.DARKSLATEBLUE=Object.freeze(nf.fromCssColorString("#483D8B")),nf.DARKSLATEGRAY=Object.freeze(nf.fromCssColorString("#2F4F4F")),nf.DARKSLATEGREY=nf.DARKSLATEGRAY,nf.DARKTURQUOISE=Object.freeze(nf.fromCssColorString("#00CED1")),nf.DARKVIOLET=Object.freeze(nf.fromCssColorString("#9400D3")),nf.DEEPPINK=Object.freeze(nf.fromCssColorString("#FF1493")),nf.DEEPSKYBLUE=Object.freeze(nf.fromCssColorString("#00BFFF")),nf.DIMGRAY=Object.freeze(nf.fromCssColorString("#696969")),nf.DIMGREY=nf.DIMGRAY,nf.DODGERBLUE=Object.freeze(nf.fromCssColorString("#1E90FF")),nf.FIREBRICK=Object.freeze(nf.fromCssColorString("#B22222")),nf.FLORALWHITE=Object.freeze(nf.fromCssColorString("#FFFAF0")),nf.FORESTGREEN=Object.freeze(nf.fromCssColorString("#228B22")),nf.FUCHSIA=Object.freeze(nf.fromCssColorString("#FF00FF")),nf.GAINSBORO=Object.freeze(nf.fromCssColorString("#DCDCDC")),nf.GHOSTWHITE=Object.freeze(nf.fromCssColorString("#F8F8FF")),nf.GOLD=Object.freeze(nf.fromCssColorString("#FFD700")),nf.GOLDENROD=Object.freeze(nf.fromCssColorString("#DAA520")),nf.GRAY=Object.freeze(nf.fromCssColorString("#808080")),nf.GREEN=Object.freeze(nf.fromCssColorString("#008000")),nf.GREENYELLOW=Object.freeze(nf.fromCssColorString("#ADFF2F")),nf.GREY=nf.GRAY,nf.HONEYDEW=Object.freeze(nf.fromCssColorString("#F0FFF0")),nf.HOTPINK=Object.freeze(nf.fromCssColorString("#FF69B4")),nf.INDIANRED=Object.freeze(nf.fromCssColorString("#CD5C5C")),nf.INDIGO=Object.freeze(nf.fromCssColorString("#4B0082")),nf.IVORY=Object.freeze(nf.fromCssColorString("#FFFFF0")),nf.KHAKI=Object.freeze(nf.fromCssColorString("#F0E68C")),nf.LAVENDER=Object.freeze(nf.fromCssColorString("#E6E6FA")),nf.LAVENDAR_BLUSH=Object.freeze(nf.fromCssColorString("#FFF0F5")),nf.LAWNGREEN=Object.freeze(nf.fromCssColorString("#7CFC00")),nf.LEMONCHIFFON=Object.freeze(nf.fromCssColorString("#FFFACD")),nf.LIGHTBLUE=Object.freeze(nf.fromCssColorString("#ADD8E6")),nf.LIGHTCORAL=Object.freeze(nf.fromCssColorString("#F08080")),nf.LIGHTCYAN=Object.freeze(nf.fromCssColorString("#E0FFFF")),nf.LIGHTGOLDENRODYELLOW=Object.freeze(nf.fromCssColorString("#FAFAD2")),nf.LIGHTGRAY=Object.freeze(nf.fromCssColorString("#D3D3D3")),nf.LIGHTGREEN=Object.freeze(nf.fromCssColorString("#90EE90")),nf.LIGHTGREY=nf.LIGHTGRAY,nf.LIGHTPINK=Object.freeze(nf.fromCssColorString("#FFB6C1")),nf.LIGHTSEAGREEN=Object.freeze(nf.fromCssColorString("#20B2AA")),nf.LIGHTSKYBLUE=Object.freeze(nf.fromCssColorString("#87CEFA")),nf.LIGHTSLATEGRAY=Object.freeze(nf.fromCssColorString("#778899")),nf.LIGHTSLATEGREY=nf.LIGHTSLATEGRAY,nf.LIGHTSTEELBLUE=Object.freeze(nf.fromCssColorString("#B0C4DE")),nf.LIGHTYELLOW=Object.freeze(nf.fromCssColorString("#FFFFE0")),nf.LIME=Object.freeze(nf.fromCssColorString("#00FF00")),nf.LIMEGREEN=Object.freeze(nf.fromCssColorString("#32CD32")),nf.LINEN=Object.freeze(nf.fromCssColorString("#FAF0E6")),nf.MAGENTA=Object.freeze(nf.fromCssColorString("#FF00FF")),nf.MAROON=Object.freeze(nf.fromCssColorString("#800000")),nf.MEDIUMAQUAMARINE=Object.freeze(nf.fromCssColorString("#66CDAA")),nf.MEDIUMBLUE=Object.freeze(nf.fromCssColorString("#0000CD")),nf.MEDIUMORCHID=Object.freeze(nf.fromCssColorString("#BA55D3")),nf.MEDIUMPURPLE=Object.freeze(nf.fromCssColorString("#9370DB")),nf.MEDIUMSEAGREEN=Object.freeze(nf.fromCssColorString("#3CB371")),nf.MEDIUMSLATEBLUE=Object.freeze(nf.fromCssColorString("#7B68EE")),nf.MEDIUMSPRINGGREEN=Object.freeze(nf.fromCssColorString("#00FA9A")),nf.MEDIUMTURQUOISE=Object.freeze(nf.fromCssColorString("#48D1CC")),nf.MEDIUMVIOLETRED=Object.freeze(nf.fromCssColorString("#C71585")),nf.MIDNIGHTBLUE=Object.freeze(nf.fromCssColorString("#191970")),nf.MINTCREAM=Object.freeze(nf.fromCssColorString("#F5FFFA")),nf.MISTYROSE=Object.freeze(nf.fromCssColorString("#FFE4E1")),nf.MOCCASIN=Object.freeze(nf.fromCssColorString("#FFE4B5")),nf.NAVAJOWHITE=Object.freeze(nf.fromCssColorString("#FFDEAD")),nf.NAVY=Object.freeze(nf.fromCssColorString("#000080")),nf.OLDLACE=Object.freeze(nf.fromCssColorString("#FDF5E6")),nf.OLIVE=Object.freeze(nf.fromCssColorString("#808000")),nf.OLIVEDRAB=Object.freeze(nf.fromCssColorString("#6B8E23")),nf.ORANGE=Object.freeze(nf.fromCssColorString("#FFA500")),nf.ORANGERED=Object.freeze(nf.fromCssColorString("#FF4500")),nf.ORCHID=Object.freeze(nf.fromCssColorString("#DA70D6")),nf.PALEGOLDENROD=Object.freeze(nf.fromCssColorString("#EEE8AA")),nf.PALEGREEN=Object.freeze(nf.fromCssColorString("#98FB98")),nf.PALETURQUOISE=Object.freeze(nf.fromCssColorString("#AFEEEE")),nf.PALEVIOLETRED=Object.freeze(nf.fromCssColorString("#DB7093")),nf.PAPAYAWHIP=Object.freeze(nf.fromCssColorString("#FFEFD5")),nf.PEACHPUFF=Object.freeze(nf.fromCssColorString("#FFDAB9")),nf.PERU=Object.freeze(nf.fromCssColorString("#CD853F")),nf.PINK=Object.freeze(nf.fromCssColorString("#FFC0CB")),nf.PLUM=Object.freeze(nf.fromCssColorString("#DDA0DD")),nf.POWDERBLUE=Object.freeze(nf.fromCssColorString("#B0E0E6")),nf.PURPLE=Object.freeze(nf.fromCssColorString("#800080")),nf.RED=Object.freeze(nf.fromCssColorString("#FF0000")),nf.ROSYBROWN=Object.freeze(nf.fromCssColorString("#BC8F8F")),nf.ROYALBLUE=Object.freeze(nf.fromCssColorString("#4169E1")),nf.SADDLEBROWN=Object.freeze(nf.fromCssColorString("#8B4513")),nf.SALMON=Object.freeze(nf.fromCssColorString("#FA8072")),nf.SANDYBROWN=Object.freeze(nf.fromCssColorString("#F4A460")),nf.SEAGREEN=Object.freeze(nf.fromCssColorString("#2E8B57")),nf.SEASHELL=Object.freeze(nf.fromCssColorString("#FFF5EE")),nf.SIENNA=Object.freeze(nf.fromCssColorString("#A0522D")),nf.SILVER=Object.freeze(nf.fromCssColorString("#C0C0C0")),nf.SKYBLUE=Object.freeze(nf.fromCssColorString("#87CEEB")),nf.SLATEBLUE=Object.freeze(nf.fromCssColorString("#6A5ACD")),nf.SLATEGRAY=Object.freeze(nf.fromCssColorString("#708090")),nf.SLATEGREY=nf.SLATEGRAY,nf.SNOW=Object.freeze(nf.fromCssColorString("#FFFAFA")),nf.SPRINGGREEN=Object.freeze(nf.fromCssColorString("#00FF7F")),nf.STEELBLUE=Object.freeze(nf.fromCssColorString("#4682B4")),nf.TAN=Object.freeze(nf.fromCssColorString("#D2B48C")),nf.TEAL=Object.freeze(nf.fromCssColorString("#008080")),nf.THISTLE=Object.freeze(nf.fromCssColorString("#D8BFD8")),nf.TOMATO=Object.freeze(nf.fromCssColorString("#FF6347")),nf.TURQUOISE=Object.freeze(nf.fromCssColorString("#40E0D0")),nf.VIOLET=Object.freeze(nf.fromCssColorString("#EE82EE")),nf.WHEAT=Object.freeze(nf.fromCssColorString("#F5DEB3")),nf.WHITE=Object.freeze(nf.fromCssColorString("#FFFFFF")),nf.WHITESMOKE=Object.freeze(nf.fromCssColorString("#F5F5F5")),nf.YELLOW=Object.freeze(nf.fromCssColorString("#FFFF00")),nf.YELLOWGREEN=Object.freeze(nf.fromCssColorString("#9ACD32")),nf.TRANSPARENT=Object.freeze(new nf(0,0,0,0));var uf={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:10,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_highpFloatSupported:!1,_highpIntSupported:!1,_uniformBufferOffsetAlignment:256,_maxUniformBufferBinding:36,_maxArrayTextureLayers:256,_disjointTimerQuery:!1};Object.defineProperties(uf,{maximumCombinedTextureImageUnits:{get:function(){return uf._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return uf._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return uf._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return uf._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return uf._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return uf._maximumTextureSize}},maximumVaryingVectors:{get:function(){return uf._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return uf._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return uf._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return uf._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return uf._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return uf._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return uf._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return uf._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return uf._maximumViewportWidth}},maximumViewportHeight:{get:function(){return uf._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return uf._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return uf._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return uf._maximumColorAttachments}},highpFloatSupported:{get:function(){return uf._highpFloatSupported}},highpIntSupported:{get:function(){return uf._highpIntSupported}},uniformBufferOffsetAlignment:{get:function(){return uf._uniformBufferOffsetAlignment}},maxUniformBufferBinding:{get:function(){return uf._maxUniformBufferBinding}},maxArrayTextureLayers:{get:function(){return uf._maxArrayTextureLayers}},disjointTimerQuery:{get:function(){return uf._disjointTimerQuery}}});var cf=uf;function lf(t){if("object"!=typeof t||null===t)return t;for(var e,n=Object.keys(t),r=0;r<n.length;r++)e=n[r],t.hasOwnProperty(e)&&"_applyFunctions"!==e&&(t[e]=lf(t[e]));return Object.freeze(t)}function hf(){}function Af(t,e,n){n?t.enable(e):t.disable(e)}hf.applyFrontFace=function(t,e,n){t.frontFace(e.frontFace)},hf.applyCull=function(t,e){var n=e.cull,r=n.enabled;Af(t,t.CULL_FACE,r),r&&t.cullFace(n.face)},hf.applyLineWidth=function(t,e){t.lineWidth(e.lineWidth)},hf.applyPolygonOffset=function(t,e){var n=e.polygonOffset,r=n.enabled;Af(t,t.POLYGON_OFFSET_FILL,r),r&&t.polygonOffset(n.factor,n.units)},hf.applyScissorTest=function(t,e,n){var r=e.scissorTest,i=Or(n.scissorTest)?n.scissorTest.enabled:r.enabled;if(Af(t,t.SCISSOR_TEST,i),i){var o=Or(n.scissorTest)?n.scissorTest.rectangle:r.rectangle;t.scissor(o.x,o.y,o.width,o.height)}},hf.applyDepthRange=function(t,e){var n=e.depthRange;t.depthRange(n.near,n.far)},hf.applyDepthTest=function(t,e){var n=e.depthTest,r=n.enabled;Af(t,t.DEPTH_TEST,r),r&&t.depthFunc(n.func)},hf.applyColorMask=function(t,e){var n=e.colorMask;t.colorMask(n.red,n.green,n.blue,n.alpha)},hf.applyDepthMask=function(t,e){t.depthMask(e.depthMask)},hf.applyStencilMask=function(t,e){t.stencilMask(e.stencilMask)},hf.applyBlendingColor=function(t,e){t.blendColor(e.red,e.green,e.blue,e.alpha)},hf.applyBlending=function(t,e,n){var r=e.blending,i=Or(n.blendingEnabled)?n.blendingEnabled:r.enabled;Af(t,t.BLEND,i),i&&(hf.applyBlendingColor(t,r.color),t.blendEquationSeparate(r.equationRgb,r.equationAlpha),t.blendFuncSeparate(r.functionSourceRgb,r.functionDestinationRgb,r.functionSourceAlpha,r.functionDestinationAlpha))},hf.applyStencilTest=function(t,e){var n=e.stencilTest,r=n.enabled;if(Af(t,t.STENCIL_TEST,r),r){var i=n.frontFunction,o=n.backFunction,s=n.reference,a=n.mask;t.stencilFunc(i,s,a),t.stencilFuncSeparate(t.BACK,o,s,a),t.stencilFuncSeparate(t.FRONT,i,s,a);var u=n.frontOperation,c=u.fail,l=u.zFail,h=u.zPass;t.stencilOpSeparate(t.FRONT,c,l,h);var A=n.backOperation,f=A.fail,p=A.zFail,d=A.zPass;t.stencilOpSeparate(t.BACK,f,p,d)}},hf.applySampleCoverage=function(t,e){var n=e.sampleCoverage,r=n.enabled;Af(t,t.SAMPLE_COVERAGE,r),r&&t.sampleCoverage(n.value,n.invert)};var ff=new VA;function pf(t){return t===$c.FUNC_ADD||t===$c.FUNC_SUBTRACT||t===$c.FUNC_REVERSE_SUBTRACT||t===$c.MIN||t===$c.MAX}function df(t){return t===$c.ZERO||t===$c.ONE||t===$c.SRC_COLOR||t===$c.ONE_MINUS_SRC_COLOR||t===$c.DST_COLOR||t===$c.ONE_MINUS_DST_COLOR||t===$c.SRC_ALPHA||t===$c.ONE_MINUS_SRC_ALPHA||t===$c.DST_ALPHA||t===$c.ONE_MINUS_DST_ALPHA||t===$c.CONSTANT_COLOR||t===$c.ONE_MINUS_CONSTANT_COLOR||t===$c.CONSTANT_ALPHA||t===$c.ONE_MINUS_CONSTANT_ALPHA||t===$c.SRC_ALPHA_SATURATE}function gf(t){return t===$c.NEVER||t===$c.LESS||t===$c.EQUAL||t===$c.LEQUAL||t===$c.GREATER||t===$c.NOTEQUAL||t===$c.GEQUAL||t===$c.ALWAYS}function yf(t){return t===$c.ZERO||t===$c.KEEP||t===$c.REPLACE||t===$c.INCR||t===$c.DECR||t===$c.INVERT||t===$c.INCR_WRAP||t===$c.DECR_WRAP}function mf(t){var e,n,r=Lr(t,{}),i=Lr(r.cull,{}),o=Lr(r.polygonOffset,{}),s=Lr(r.scissorTest,{}),a=Lr(s.rectangle,{}),u=Lr(r.depthRange,{}),c=Lr(r.depthTest,{}),l=Lr(r.colorMask,{}),h=Lr(r.blending,{}),A=Lr(h.color,{}),f=Lr(r.stencilTest,{}),p=Lr(f.frontOperation,{}),d=Lr(f.backOperation,{}),g=Lr(r.sampleCoverage,{}),y=r.viewport;if(this.frontFace=Lr(r.frontFace,rl.COUNTER_CLOCKWISE),this.cull={enabled:Lr(i.enabled,!1),face:Lr(i.face,$c.BACK)},this.lineWidth=Lr(r.lineWidth,1),this.polygonOffset={enabled:Lr(o.enabled,!1),factor:Lr(o.factor,0),units:Lr(o.units,0)},this.scissorTest={enabled:Lr(s.enabled,!1),rectangle:VA.clone(a)},this.depthRange={near:Lr(u.near,0),far:Lr(u.far,1)},this.depthTest={enabled:Lr(c.enabled,!1),func:Lr(c.func,$c.LESS)},this.colorMask={red:Lr(l.red,!0),green:Lr(l.green,!0),blue:Lr(l.blue,!0),alpha:Lr(l.alpha,!0)},this.depthMask=Lr(r.depthMask,!0),this.stencilMask=Lr(r.stencilMask,65535),this.blending={enabled:Lr(h.enabled,!1),color:new nf(Lr(A.red,0),Lr(A.green,0),Lr(A.blue,0),Lr(A.alpha,0)),equationRgb:Lr(h.equationRgb,$c.FUNC_ADD),equationAlpha:Lr(h.equationAlpha,$c.FUNC_ADD),functionSourceRgb:Lr(h.functionSourceRgb,$c.ONE),functionSourceAlpha:Lr(h.functionSourceAlpha,$c.ONE),functionDestinationRgb:Lr(h.functionDestinationRgb,$c.ZERO),functionDestinationAlpha:Lr(h.functionDestinationAlpha,$c.ZERO)},this.stencilTest={enabled:Lr(f.enabled,!1),frontFunction:Lr(f.frontFunction,$c.ALWAYS),backFunction:Lr(f.backFunction,$c.ALWAYS),reference:Lr(f.reference,0),mask:Lr(f.mask,65535),frontOperation:{fail:Lr(p.fail,$c.KEEP),zFail:Lr(p.zFail,$c.KEEP),zPass:Lr(p.zPass,$c.KEEP)},backOperation:{fail:Lr(d.fail,$c.KEEP),zFail:Lr(d.zFail,$c.KEEP),zPass:Lr(d.zPass,$c.KEEP)}},this.sampleCoverage={enabled:Lr(g.enabled,!1),value:Lr(g.value,1),invert:Lr(g.invert,!1)},this.viewport=Or(y)?new VA(y.x,y.y,y.width,y.height):void 0,this.lineWidth<cf.minimumAliasedLineWidth||this.lineWidth>cf.maximumAliasedLineWidth)throw new Nr("renderState.lineWidth is out of range.  Check minimumAliasedLineWidth and maximumAliasedLineWidth.");if(!rl.validate(this.frontFace))throw new Nr("Invalid renderState.frontFace.");if((e=this.cull.face)!==$c.FRONT&&e!==$c.BACK&&e!==$c.FRONT_AND_BACK)throw new Nr("Invalid renderState.cull.face.");if(this.scissorTest.rectangle.width<0||this.scissorTest.rectangle.height<0)throw new Nr("renderState.scissorTest.rectangle.width and renderState.scissorTest.rectangle.height must be greater than or equal to zero.");if(this.depthRange.near>this.depthRange.far)throw new Nr("renderState.depthRange.near can not be greater than renderState.depthRange.far.");if(this.depthRange.near<0)throw new Nr("renderState.depthRange.near must be greater than or equal to zero.");if(this.depthRange.far>1)throw new Nr("renderState.depthRange.far must be less than or equal to one.");if((n=this.depthTest.func)!==$c.NEVER&&n!==$c.LESS&&n!==$c.EQUAL&&n!==$c.LEQUAL&&n!==$c.GREATER&&n!==$c.NOTEQUAL&&n!==$c.GEQUAL&&n!==$c.ALWAYS)throw new Nr("Invalid renderState.depthTest.func.");if(this.blending.color.red<0||this.blending.color.red>1||this.blending.color.green<0||this.blending.color.green>1||this.blending.color.blue<0||this.blending.color.blue>1||this.blending.color.alpha<0||this.blending.color.alpha>1)throw new Nr("renderState.blending.color components must be greater than or equal to zero and less than or equal to one.");if(!pf(this.blending.equationRgb))throw new Nr("Invalid renderState.blending.equationRgb.");if(!pf(this.blending.equationAlpha))throw new Nr("Invalid renderState.blending.equationAlpha.");if(!df(this.blending.functionSourceRgb))throw new Nr("Invalid renderState.blending.functionSourceRgb.");if(!df(this.blending.functionSourceAlpha))throw new Nr("Invalid renderState.blending.functionSourceAlpha.");if(!df(this.blending.functionDestinationRgb))throw new Nr("Invalid renderState.blending.functionDestinationRgb.");if(!df(this.blending.functionDestinationAlpha))throw new Nr("Invalid renderState.blending.functionDestinationAlpha.");if(!gf(this.stencilTest.frontFunction))throw new Nr("Invalid renderState.stencilTest.frontFunction.");if(!gf(this.stencilTest.backFunction))throw new Nr("Invalid renderState.stencilTest.backFunction.");if(!yf(this.stencilTest.frontOperation.fail))throw new Nr("Invalid renderState.stencilTest.frontOperation.fail.");if(!yf(this.stencilTest.frontOperation.zFail))throw new Nr("Invalid renderState.stencilTest.frontOperation.zFail.");if(!yf(this.stencilTest.frontOperation.zPass))throw new Nr("Invalid renderState.stencilTest.frontOperation.zPass.");if(!yf(this.stencilTest.backOperation.fail))throw new Nr("Invalid renderState.stencilTest.backOperation.fail.");if(!yf(this.stencilTest.backOperation.zFail))throw new Nr("Invalid renderState.stencilTest.backOperation.zFail.");if(!yf(this.stencilTest.backOperation.zPass))throw new Nr("Invalid renderState.stencilTest.backOperation.zPass.");if(Or(this.viewport)){if(this.viewport.width<0)throw new Nr("renderState.viewport.width must be greater than or equal to zero.");if(this.viewport.height<0)throw new Nr("renderState.viewport.height must be greater than or equal to zero.");if(this.viewport.width>cf.maximumViewportWidth)throw new Nr("renderState.viewport.width must be less than or equal to the maximum viewport width ("+cf.maximumViewportWidth.toString()+").  Check maximumViewportWidth.");if(this.viewport.height>cf.maximumViewportHeight)throw new Nr("renderState.viewport.height must be less than or equal to the maximum viewport height ("+cf.maximumViewportHeight.toString()+").  Check maximumViewportHeight.")}this.id=0,this._applyFunctions=[]}hf.applyViewport=function(t,e,n,r,i){var o=Lr(e.viewport,n.viewport);Or(o)||((o=ff).width=n.context.drawingBufferWidth,o.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=o,t.viewport(o.x,o.y,o.width,o.height)};var If=0,Cf={};function Ef(t,e,n){(t?Df:hf).applyFrontFace(e,n)}function bf(t,e,n){(t?Df:hf).applyCull(e,n)}function vf(t,e,n){(t?Df:hf).applyLineWidth(e,n)}function xf(t,e,n){(t?Df:hf).applyPolygonOffset(e,n)}function wf(t,e,n){(t?Df:hf).applyDepthRange(e,n)}function Mf(t,e,n){(t?Df:hf).applyDepthTest(e,n)}function Bf(t,e,n){(t?Df:hf).applyColorMask(e,n)}function _f(t,e,n){(t?Df:hf).applyDepthMask(e,n)}function Sf(t,e,n){(t?Df:hf).applyStencilMask(e,n)}function Qf(t,e,n){(t?Df:hf).applyStencilTest(e,n)}function Rf(t,e,n){(t?Df:hf).applySampleCoverage(e,n)}let Df;mf.fromCache=function(t){var e=JSON.stringify(t),n=Cf[e];if(Or(n))return++n.referenceCount,n.state;var r=new mf(t),i=JSON.stringify(r);return Or(n=Cf[i])||(r.id=If++,n={referenceCount:0,state:r=lf(r)},Cf[i]=n),++n.referenceCount,Cf[e]={referenceCount:1,state:n.state},n.state},mf.removeFromCache=function(t){var e=new mf(t),n=JSON.stringify(e),r=Cf[n],i=JSON.stringify(t),o=Cf[i];Or(o)&&(--o.referenceCount,0===o.referenceCount&&(delete Cf[i],Or(r)&&--r.referenceCount)),Or(r)&&0===r.referenceCount&&delete Cf[n]},mf.getCache=function(){return Cf},mf.clearCache=function(){Cf={}},mf.apply=function(t,e,n){Or(t.name);const r=hf;r.applyFrontFace(t,e),r.applyCull(t,e),r.applyLineWidth(t,e),r.applyPolygonOffset(t,e),r.applyDepthRange(t,e),r.applyDepthTest(t,e),r.applyColorMask(t,e),r.applyDepthMask(t,e),r.applyStencilMask(t,e),r.applyStencilTest(t,e),r.applySampleCoverage(t,e),r.applyScissorTest(t,e,n),r.applyBlending(t,e,n),r.applyViewport(t,e,n)},mf.partialApply=function(t,e,n,r,i,o,s,a,u,c,l,h){const A=Or(e.name),f=A?t.webgpuMembers.RenderStateGPU:hf;if(A&&(Df=f),n!==r){var p=r._applyFunctions[n.id];Or(p)||(p=function(t,e){var n=[];return t.frontFace!==e.frontFace&&n.push(Ef),t.cull.enabled===e.cull.enabled&&t.cull.face===e.cull.face||n.push(bf),t.lineWidth!==e.lineWidth&&n.push(vf),t.polygonOffset.enabled===e.polygonOffset.enabled&&t.polygonOffset.factor===e.polygonOffset.factor&&t.polygonOffset.units===e.polygonOffset.units||n.push(xf),t.depthRange.near===e.depthRange.near&&t.depthRange.far===e.depthRange.far||n.push(wf),t.depthTest.enabled===e.depthTest.enabled&&t.depthTest.func===e.depthTest.func||n.push(Mf),t.colorMask.red===e.colorMask.red&&t.colorMask.green===e.colorMask.green&&t.colorMask.blue===e.colorMask.blue&&t.colorMask.alpha===e.colorMask.alpha||n.push(Bf),t.depthMask!==e.depthMask&&n.push(_f),t.stencilMask!==e.stencilMask&&n.push(Sf),t.stencilTest.enabled===e.stencilTest.enabled&&t.stencilTest.frontFunction===e.stencilTest.frontFunction&&t.stencilTest.backFunction===e.stencilTest.backFunction&&t.stencilTest.reference===e.stencilTest.reference&&t.stencilTest.mask===e.stencilTest.mask&&t.stencilTest.frontOperation.fail===e.stencilTest.frontOperation.fail&&t.stencilTest.frontOperation.zFail===e.stencilTest.frontOperation.zFail&&t.stencilTest.backOperation.fail===e.stencilTest.backOperation.fail&&t.stencilTest.backOperation.zFail===e.stencilTest.backOperation.zFail&&t.stencilTest.backOperation.zPass===e.stencilTest.backOperation.zPass||n.push(Qf),t.sampleCoverage.enabled===e.sampleCoverage.enabled&&t.sampleCoverage.value===e.sampleCoverage.value&&t.sampleCoverage.invert===e.sampleCoverage.invert||n.push(Rf),n}(n,r),r._applyFunctions[n.id]=p);for(var d=p.length,g=0;g<d;++g)p[g](A,e,r)}((Or(i.scissorTest)?i.scissorTest:n.scissorTest)!==(Or(o.scissorTest)?o.scissorTest:r.scissorTest)||u)&&f.applyScissorTest(e,r,o);var y=Or(i.blendingEnabled)?i.blendingEnabled:n.blending.enabled,m=Or(o.blendingEnabled)?o.blendingEnabled:r.blending.enabled;(y!==m||m&&n.blending!==r.blending)&&f.applyBlending(e,r,o),n===r&&i===o&&i.context===o.context&&s===a||f.applyViewport(e,r,o,c,l)},mf.getState=function(t){if(!Or(t))throw new Nr("renderState is required.");return{frontFace:t.frontFace,cull:{enabled:t.cull.enabled,face:t.cull.face},lineWidth:t.lineWidth,polygonOffset:{enabled:t.polygonOffset.enabled,factor:t.polygonOffset.factor,units:t.polygonOffset.units},scissorTest:{enabled:t.scissorTest.enabled,rectangle:VA.clone(t.scissorTest.rectangle)},depthRange:{near:t.depthRange.near,far:t.depthRange.far},depthTest:{enabled:t.depthTest.enabled,func:t.depthTest.func},colorMask:{red:t.colorMask.red,green:t.colorMask.green,blue:t.colorMask.blue,alpha:t.colorMask.alpha},depthMask:t.depthMask,stencilMask:t.stencilMask,blending:{enabled:t.blending.enabled,color:nf.clone(t.blending.color),equationRgb:t.blending.equationRgb,equationAlpha:t.blending.equationAlpha,functionSourceRgb:t.blending.functionSourceRgb,functionSourceAlpha:t.blending.functionSourceAlpha,functionDestinationRgb:t.blending.functionDestinationRgb,functionDestinationAlpha:t.blending.functionDestinationAlpha},stencilTest:{enabled:t.stencilTest.enabled,frontFunction:t.stencilTest.frontFunction,backFunction:t.stencilTest.backFunction,reference:t.stencilTest.reference,mask:t.stencilTest.mask,frontOperation:{fail:t.stencilTest.frontOperation.fail,zFail:t.stencilTest.frontOperation.zFail,zPass:t.stencilTest.frontOperation.zPass},backOperation:{fail:t.stencilTest.backOperation.fail,zFail:t.stencilTest.backOperation.zFail,zPass:t.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:t.sampleCoverage.enabled,value:t.sampleCoverage.value,invert:t.sampleCoverage.invert},viewport:Or(t.viewport)?VA.clone(t.viewport):void 0}};var Tf,Of={ADD:$c.FUNC_ADD,SUBTRACT:$c.FUNC_SUBTRACT,REVERSE_SUBTRACT:$c.FUNC_REVERSE_SUBTRACT,MIN:$c.MIN,MAX:$c.MAX},Nf=Object.freeze(Of),Ff={ZERO:$c.ZERO,ONE:$c.ONE,SOURCE_COLOR:$c.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:$c.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:$c.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:$c.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:$c.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:$c.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:$c.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:$c.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:$c.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:$c.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:$c.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:$c.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:$c.SRC_ALPHA_SATURATE},zf=Object.freeze(Ff),kf={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:Nf.ADD,equationAlpha:Nf.ADD,functionSourceRgb:zf.SOURCE_ALPHA,functionSourceAlpha:zf.ONE,functionDestinationRgb:zf.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:zf.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:Nf.ADD,equationAlpha:Nf.ADD,functionSourceRgb:zf.ONE,functionSourceAlpha:zf.ONE,functionDestinationRgb:zf.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:zf.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:Nf.ADD,equationAlpha:Nf.ADD,functionSourceRgb:zf.SOURCE_ALPHA,functionSourceAlpha:zf.ONE,functionDestinationRgb:zf.ONE,functionDestinationAlpha:zf.ONE})},Lf=Object.freeze(kf),Pf=(Tf=!0,function(t,e){var n=Tf?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Tf=!1,n}),jf=Pf(void 0,(function(){return jf.toString().search("(((.+)+)+)+$").toString().constructor(jf).search("(((.+)+)+)+$")}));function Uf(){}jf(),Uf.toVertexBuffer=function(t,e,n,r){var i=GA.createVertexBuffer({context:t,typedArray:e.arrayBuffer,usage:r?UA.DYNAMIC_DRAW:UA.STATIC_DRAW,owner:"MVT"});return i.vertexArrayDestroyable=!1,i.bytesPerElement=e.bytesPerElement,i.length=e.length,i.attributes=n,i.itemSize=e.bytesPerElement,i.dynamicDraw=r,!r&&e.destroy(),i},Uf.toIndexBuffer=function(t,e,n){var r=GA.createIndexBuffer({context:t,typedArray:e.arrayBuffer,usage:UA.STATIC_DRAW,indexDatatype:void 0!==e.uint16?PA.UNSIGNED_SHORT:PA.UNSIGNED_INT,owner:"MVT"});return r.vertexArrayDestroyable=!1,r.dynamicDraw=n,!r.dynamicDraw&&e.destroy(),r},Uf.toRenderState=function(t,e,n,r){var i=Lf.DISABLED;t.blendFunction[0]==$c.ONE&&t.blendFunction[1]==$c.ONE_MINUS_SRC_ALPHA&&(i={enabled:!0,equationRgb:Nf.ADD,equationAlpha:Nf.ADD,functionSourceRgb:zf.ONE,functionSourceAlpha:zf.ONE,functionDestinationRgb:zf.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:zf.ONE_MINUS_SOURCE_ALPHA});var o=!1;o=!(n.test.func===$c.ALWAYS&&!n.mask);var s={frontFace:r.frontFace,cull:{enabled:r.enable,face:r.mode},depthRange:{near:e.range[0],far:e.range[1]},depthTest:{enabled:e.func!==$c.ALWAYS,func:e.func},depthMask:e.mask,colorMask:{red:t.mask[0],green:t.mask[1],blue:t.mask[2],alpha:t.mask[3]},stencilMask:n.mask,stencilTest:{enabled:o,frontFunction:n.test.func,backFunction:n.test.func,reference:n.ref,mask:n.test.mask,frontOperation:{fail:n.fail,zFail:n.depthFail,zPass:n.pass},backOperation:{fail:n.fail,zFail:n.depthFail,zPass:n.pass}},blending:i};return mf.fromCache(s)},Uf.toComponentDatatype=function(t){switch(t){case"Int8":return el.BYTE;case"Uint8":return el.UNSIGNED_BYTE;case"Int16":return el.SHORT;case"Uint16":return el.UNSIGNED_SHORT;case"Int32":return el.INT;case"Uint32":return el.UNSIGNED_INT;default:return el.FLOAT}},Uf.mbxAttributeToCesiumVertexArrtribute=function(t,e,n,r){var i=this.toComponentDatatype(t.type);el.getSizeInBytes(i);var o=t.strideInBytes||e.bytesPerElement,s=t.offset+o*(r||0);return{name:t.name,index:n,vertexBuffer:e,componentsPerAttribute:t.components,componentDatatype:i,offsetInBytes:s,strideInBytes:o,normalize:!1}},Uf.copyFromArrayView=function(t,e,n){t.copyFromArrayView(e,n)};const qf=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Kf=qf(void 0,(function(){return Kf.toString().search("(((.+)+)+)+$").toString().constructor(Kf).search("(((.+)+)+)+$")}));Kf();class Hf{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return!this.location&&!this.initialized&&(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}set(t,e,n){}}class Yf extends Hf{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Gf extends Hf{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]!==this.current[0]||n[1]!==this.current[1]||n[2]!==this.current[2]||n[3]!==this.current[3])&&(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Vf extends Hf{constructor(t){super(t),this.current=C.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r!==this.current.r||n.g!==this.current.g||n.b!==this.current.b||n.a!==this.current.a)&&(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Xf=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Wf=Xf(void 0,(function(){return Wf.toString().search("(((.+)+)+)+$").toString().constructor(Wf).search("(((.+)+)+)+$")}));Wf();var Jf=new Ei;function Zf(t){return[vh(255*t.r,255*t.g),vh(255*t.b,255*t.a)]}class $f{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>"u_"+t)),this.type=n}setUniform(t,e,n,r,i){e.set(t,i,r.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new Vf(t):new Yf(t)}setUniformMap(t,e,n,r,i){var o=this;t[e]=function(){var t=r.get(n).constantOr(o.value);return"color"===o.type&&(t.red=t.r,t.green=t.g,t.blue=t.b,t.alpha=t.a),t}}}class tp{constructor(t,e){this.uniformNames=e.map((t=>"u_"+t)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&e.set(t,i,o)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new Gf(t):new Yf(t)}setUniformMap(t,e,n,r,i){if("u_pattern"===e||"u_dash"===e){const n=this.pattern;t[e]=function(){return Jf.x=n[0],Jf.y=n[1],Jf.z=n[2],Jf.w=n[3],Jf}}else if("u_pixel_ratio"===e){const n=this.pixelRatio;t[e]=function(){return n}}}}class ep{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i,o){const s=this.paintVertexArray.length,a=this.expression.evaluate(new oh(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(s,t,a)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,n){if("color"===this.type){const r=Zf(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.copy(this.paintVertexArray):this.paintVertexBuffer=Uf.toVertexBuffer(t,this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class np{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>"u_"+t+"_t")),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i,o){const s=this.expression.evaluate(new oh(this.zoom),e,{},i,r,o),a=this.expression.evaluate(new oh(this.zoom+1),e,{},i,r,o),u=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(u,t,s,a)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),s=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,s)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=Zf(n),o=Zf(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.copyFromArrayView(this.paintVertexArray.arrayBuffer):this.paintVertexBuffer=Uf.toVertexBuffer(t,this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,s=ul(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,s)}setUniformMap(t,e,n,r,i){const o=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,s=ul(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t[e]=function(){return s}}getBinding(t,e){return new Yf(t)}}class rp{constructor(t,e,n,r,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=("array"===n?DA:SA).members;for(let t=0;t<e.length;++t);this.paintVertexArray=new r}populatePaintArray(t,e,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,e,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:s,pixelRatio:a}=i;for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,o[0],o[1],s[0],s[1],a)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=Uf.toVertexBuffer(t,this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ip{constructor(t,e,n){this.binders={},this._buffers=[];const r=[];if(t)for(const s in t.paint._values){if(n&&!n(s))continue;const a=t.paint.get(s);if(!(a instanceof ph&&ir(a.property.specification)))continue;const u=(i=s,o=t.type,sp[i]||[i.replace(o+"-","").replace(/-/g,"_")]),c=a.value,l=a.property.specification.type,h=!!a.property.useIntegerZoom,A="line-dasharray"===s||s.endsWith("pattern"),f="line-dasharray"===s&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==c.kind||f)if("source"===c.kind||f||A){const e=cp(s,l,"source");this.binders[s]=A?new rp(c,u,l,e,t.id):new ep(c,u,l,e),r.push("/a_"+s)}else{const t=cp(s,l,"composite");this.binders[s]=new np(c,u,l,h,e,t),r.push("/z_"+s)}else this.binders[s]=A?new tp(c.value,u):new $f(c.value,u,l),r.push("/u_"+s)}var i,o;this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ep||e instanceof np?e.maxValue:0}populatePaintArrays(t,e,n,r,i,o){for(const s in this.binders){const a=this.binders[s];(a instanceof ep||a instanceof np||a instanceof rp)&&a.populatePaintArray(t,e,n,r,i,o)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof tp&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,r,i,o){let s=!1;for(const a in t){const u=e.getPositions(a);for(const e of u){const u=n.feature(e.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof ep||c instanceof np||c instanceof rp)&&!0===c.expression.isStateDependent){const l=r.paint.get(n);c.expression=l.value,c.updatePaintArray(e.start,e.end,u,t[a],i,o),s=!0}}}}return s}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof $f||n instanceof tp)&&t.push(...n.uniformNames.map((t=>"HAS_UNIFORM_"+t)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ep||n instanceof np||n instanceof rp)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof $f||n instanceof tp||n instanceof np)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof $f||r instanceof tp||r instanceof np)for(const i of r.uniformNames)e.push({name:i,property:n,binding:r.getBinding(t,i)})}return e}setUniforms(t,e,n,r,i){for(const{name:e,property:o,binding:s}of n)this.binders[o].setUniform(t,s,i,r.get(o),e)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof ep||e instanceof np||e instanceof rp)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof ep||n instanceof np||n instanceof rp)&&n.upload(t)}this.updatePaintBuffers()}getAttributeLocation(){for(var t=0,e={},n=0;n<this.layoutAttributes.length;n++){e[this.layoutAttributes[n].name]=n,t++}for(var r=this.getPaintVertexBuffers(),i=0;r&&i<r.length;i++)for(var o=r[i],s=0;s<o.attributes.length;s++){e[o.attributes[s].name]=t++}return e}getUniformMaps(t,e,n,r){for(var i in this.binders){var o=this.binders[i];if(o.uniformNames)for(var s=0,a=o.uniformNames;s<a.length;s+=1){var u=a[s];t[u]&&o.setUniformMap(n,u,i,e,{zoom:r})}}for(var c in t)!n[c]&&c.endsWith("_t")&&(n[c]=function(){return 0});return n}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ep||e instanceof np||e instanceof rp)&&e.destroy()}}}class op{constructor(t,e,n,r){this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new ip(i,n,r),this.programConfigurations[i.id].layoutAttributes=t;this.needsUpload=!1,this._featureMap=new FA,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o,s){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,r,i,o,s);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const sp={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};const ap={"line-pattern":{source:kh,composite:kh},"fill-pattern":{source:kh,composite:kh},"fill-extrusion-pattern":{source:kh,composite:kh},"line-dasharray":{source:Lh,composite:Lh}},up={color:{source:hA,composite:zh},number:{source:eA,composite:hA}};function cp(t,e,n){const r=ap[t];return r&&r[n]||up[e][n]}Fl($f,"ConstantBinder"),Fl(tp,"PatternConstantBinder"),Fl(ep,"SourceExpressionBinder"),Fl(rp,"PatternCompositeBinder"),Fl(np,"CompositeExpressionBinder"),Fl(ip,"ProgramConfiguration",{omit:["_buffers"]}),Fl(op,"ProgramConfigurationSet");const lp=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),hp=lp(void 0,(function(){return hp.toString().search("(((.+)+)+)+$").toString().constructor(hp).search("(((.+)+)+)+$")}));function Ap(t){if(Array.isArray(t))return t.map(Ap);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Ap(t[n]);return e}return(e=t)instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e;var e}hp();var fp,pp=(fp=!0,function(t,e){var n=fp?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return fp=!1,n}),dp=pp(void 0,(function(){return dp.toString().search("(((.+)+)+)+$").toString().constructor(dp).search("(((.+)+)+)+$")}));dp();var gp={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:""},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications."},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components]."},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components]."},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array."}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:""},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:""},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:""},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:""},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:""},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:""},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:""},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0",android:"10.7.0",ios:"10.7.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright-alignment":{type:"boolean",values:{line:{doc:"this style does not interfere mapbox alongline text's rotation."},viewport:{doc:"this style interfere mapbox alongline text's rotation, and make text parallel to viewport."}},default:"line",doc:"In combination with `symbol-placement`, determines the rotation behavior of all glyphs forming the text.",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0",android:"10.0.0",ios:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."},line:{doc:"alongline symbol would be laid out following vector data order."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0",android:"10.0.0",ios:"10.0.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carre projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.",requires:["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-rounded-roof":{type:"boolean",default:!0,doc:"Indicates whether top edges should be rounded when fill-extrusion-edge-radius has a value greater than 0. If false, rounded edges are only applied to the sides. Default is true.",requires:["fill-extrusion-edge-radius"],transition:!1,"sdk-support":{"basic functionality":{js:"2.15.0",android:"10.10.0",ios:"10.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#ffffff",transition:!0,doc:"",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0 is directly above, at zenith, and 90 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0 is directly above, at zenith, and 90 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};const yp=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mp=yp(void 0,(function(){return mp.toString().search("(((.+)+)+)+$").toString().constructor(mp).search("(((.+)+)+)+$")}));function Ip(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Ip(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Cp(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};!Ip(t)&&(t=Bp(t));const n=t;let r=!0;try{r=function(t){if(!vp(t))return t;let e=Ap(t);return bp(e),e=Ep(e),e}(n)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nFilter Expression:\n"+JSON.stringify(n,null,2)+"\n        ")}const i=gp["filter_"+e],o=xr(r,i);let s=null;if("error"===o.result)throw new Error(o.value.map((t=>t.key+": "+t.message)).join(", "));s=(t,e,n)=>o.value.evaluate(t,e,{},n);let a=null,u=null;if(r!==n){const t=xr(n,i);if("error"===t.result)throw new Error(t.value.map((t=>t.key+": "+t.message)).join(", "));a=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),u=!ce(t.value.expression)}return{filter:s,dynamicFilter:a||void 0,needGeometry:Mp(r),needFeature:!!u}}function Ep(t){if(!Array.isArray(t))return t;const e=function(t){if(xp.has(t[0]))for(let e=1;e<t.length;e++){if(vp(t[e]))return!0}return t}(t);return!0===e?e:e.map((t=>Ep(t)))}function bp(t){let e=!1;const n=[];if("case"===t[0]){for(let r=1;r<t.length-1;r+=2)e=e||vp(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||vp(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||vp(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let e=1;e<t.length;e++)bp(t[e])}function vp(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let e=1;e<t.length;e++){if(vp(t[e]))return!0}return!1}mp();const xp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function wp(t,e){return t<e?-1:t>e?1:0}function Mp(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Mp(t[e]))return!0;return!1}function Bp(t){if(!t)return!0;const e=t[0];if(t.length<=1)return"any"!==e;var n;return"=="===e?_p(t[1],t[2],"=="):"!="===e?Rp(_p(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?_p(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Bp))):"all"===e?["all"].concat(t.slice(1).map(Bp)):"none"===e?["all"].concat(t.slice(1).map(Bp).map(Rp)):"in"===e?Sp(t[1],t.slice(2)):"!in"===e?Rp(Sp(t[1],t.slice(2))):"has"===e?Qp(t[1]):"!has"===e?Rp(Qp(t[1])):"within"!==e||t}function _p(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Sp(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(wp)]]:["filter-in-small",t,["literal",e]]}}function Qp(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Rp(t){return["!",t]}const Dp=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Tp=Dp(void 0,(function(){return Tp.toString().search("(((.+)+)+)+$").toString().constructor(Tp).search("(((.+)+)+)+$")}));Tp();const Op="-transition";class Np extends Jl{constructor(t,e,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new fh(e.layout)),e.paint)){this._transitionablePaint=new lh(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dh(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n){"visibility"!==t?("text-writing-mode"===t&&e&&(e=e instanceof Array?e:[e]),this._unevaluatedLayout.setValue(t,e)):this.visibility=e}getPaintProperty(t){return fl(t,Op)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(fl(t,Op))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value,s=o.isDataDriven(),a=fl(t,"pattern")||"line-dasharray"===t;return s||r||a||this._handleOverridablePaintPropertyUpdate(t,i,o)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility)}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),function(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r,i={}){return!0}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof ph&&ir(e.property.specification)&&(("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent))return!0}return!1}compileFilter(){!this._filterCompiled&&(this._featureFilter=Cp(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Fp=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),zp=Fp(void 0,(function(){return zp.toString().search("(((.+)+)+)+$").toString().constructor(zp).search("(((.+)+)+)+$")}));zp();const kp=Sh([{name:"a_pos",components:2,type:"Int16"},{name:"a_ecef_pos_high",components:3,type:"Float32"},{name:"a_ecef_pos_low",components:3,type:"Float32"}],4);var Lp,Pp=(Lp=!0,function(t,e){var n=Lp?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Lp=!1,n}),jp=Pp(void 0,(function(){return jp.toString().search("(((.+)+)+)+$").toString().constructor(jp).search("(((.+)+)+)+$")}));jp();var Up=function(t){void 0===t&&(t=[]),this.segments=t};Up.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return(!i||i.vertexLength+t>Up.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Up.prototype.get=function(){return this.segments},Up.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.cesiumVaos)n.cesiumVaos[r].destroy()}},Up.simpleSegment=function(t,e,n,r){return new Up([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},cesiumVaos:{},drawCommands:{},sortKey:0}])},Up.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fl(Up,"SegmentVector");var qp,Kp=(qp=!0,function(t,e){var n=qp?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return qp=!1,n}),Hp=Kp(void 0,(function(){return Hp.toString().search("(((.+)+)+)+$").toString().constructor(Hp).search("(((.+)+)+)+$")}));Hp();const Yp=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Gp=Yp(void 0,(function(){return Gp.toString().search("(((.+)+)+)+$").toString().constructor(Gp).search("(((.+)+)+)+$")}));Gp();function Vp(t,e,n){return Math.min(n,Math.max(e,t))}var Xp=function(t){var e,n=(e=!0,function(t,n){var r=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}),r=n(this,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));return r(),{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}(15);function Wp(t,e=true){for(var n=Ic/t.extent,r=t.loadGeometry(),i=0;i<r.length;i++)for(var o=r[i],s=0;s<o.length;s++){var a=o[s];a.x=Math.round(a.x*n),a.y=e?Ic-Math.round(a.y*n):Math.round(a.y*n),(a.x<Xp.min||a.x>Xp.max||a.y<Xp.min||a.y>Xp.max)&&(a.x=Vp(a.x,Xp.min,Xp.max),a.y=Vp(a.y,Xp.min,Xp.max))}return r}var Jp,Zp=(Jp=!0,function(t,e){var n=Jp?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Jp=!1,n}),$p=Zp(void 0,(function(){return $p.toString().search("(((.+)+)+)+$").toString().constructor($p).search("(((.+)+)+)+$")}));function td(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Wp(t):[]}}function ed(){this.high=Wr.clone(Wr.ZERO),this.low=Wr.clone(Wr.ZERO)}$p(),ed.encode=function(t,e){var n;return kr.typeOf.number("value",t),Or(e)||(e={high:0,low:0}),t>=0?(n=65536*Math.floor(t/65536),e.high=n,e.low=t-n):(n=65536*Math.floor(-t/65536),e.high=-n,e.low=t+n),e};var nd={high:0,low:0};ed.fromCartesian=function(t,e){kr.typeOf.object("cartesian",t),Or(e)||(e=new ed);var n=e.high,r=e.low;return ed.encode(t.x,nd),n.x=nd.high,r.x=nd.low,ed.encode(t.y,nd),n.y=nd.high,r.y=nd.low,ed.encode(t.z,nd),n.z=nd.high,r.z=nd.low,e};var rd=new ed;ed.writeElements=function(t,e,n){kr.defined("cartesianArray",e),kr.typeOf.number("index",n),kr.typeOf.number.greaterThanOrEquals("index",n,0),ed.fromCartesian(t,rd);var r=rd.high,i=rd.low;e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,e[n+3]=i.x,e[n+4]=i.y,e[n+5]=i.z};const id=(t,e,n,r)=>{let i=e;const o=n>>>1,s=t[i-1];for(;e<=o;){(e=i<<1)<n&&0>r(t[e-1],t[e])&&++e;const o=t[e-1];if(0>=r(o,s))break;t[i-1]=o,i=e}t[i-1]=s},od=(t,e)=>t<e?-1:t>e?1:0;function sd(){}function ad(t=1){this._seed=t}function ud(){}function cd(t){return t}function ld(t){return t?(dd.seed=t,()=>dd.getFloat()):Math.random}sd.sort=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===r&&(r=od);for(var i=n>>>1;i>e;i--)id(t,i,n,r);for(i=e+1,--n;n>e;n--){const o=t[e];t[e]=t[n],t[n]=o,id(t,i,n,r)}},sd.iterableSort=function*(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===r&&(r=od);for(var i=n>>>1;i>e;i--)id(t,i,n,r),yield;for(i=e+1,--n;n>e;n--){const o=t[e];t[e]=t[n],t[n]=o,id(t,i,n,r),yield}},Object.defineProperties(ad.prototype,{seed:{set:function(t){this._seed=null==t?Math.random()*c._m:t}}}),ad.prototype.getInt=function(){return this._seed=(c._a*this._seed+c._c)%c._m},ad.prototype.getFloat=function(){return this.getInt()/(c._m-1)},ad.prototype.getIntRange=function(t,e){return Math.round(this.getFloatRange(t,e))},ad.prototype.getFloatRange=function(t,e){e-=t;return t+this.getInt()/c._m*e},ad._m=2147483647,ad._a=48271,ad._c=0;const hd=!!Array.prototype.fill;function Ad(){this.last=0}const fd=new Ad,pd=new Set,dd=new ad;function gd(t){t.data.length>1.5*t.length&&(t.data.length=Math.floor(1.1*t.length))}function yd(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Ad,t&&(t.initialSize&&(this.data=Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>gd(this)))}function md(t,e=30){this.name=t,this._counter=0,this._samples=Array(e)}function Id(){}function Cd(){}function Ed(){this._groups=new Map}function bd(){}function vd(t){return{remove:()=>{t&&(t(),t=void 0)}}}function xd(t,e,n,r=1,i=0){if(this._ctor=t,this._acquireFunction=e,this._releaseFunction=n,this.allocationSize=r,this._pool=Array(i),this._initialSize=i,this._ctor)for(t=0;t<i;t++)this._pool[t]=new this._ctor;this.allocationSize=Math.max(r,1)}function wd(t){t.length=0}function Md(t=50,e=50){this._pool=new xd(Array,void 0,wd,e,t)}ud.EmptyArray=[],ud.ReallocGrowthFactor=1.5,ud.ReallocShrinkFactor=1/1.5,ud.ReallocShrinkTreshold=.5,ud.binaryFindClosest=function(t,e,n){if(t&&0!==t.length){var r=t.length-1,i=t[0];if(e<=n(i))return i;if(e>=n(i=t[r]))return i;var o=0;i=0;for(var s=r;o<s;){const u=t[i=o+Math.floor((s-o)/2)],c=n(u);if(c===e)return u;if(e<c){if(0<i){var a=n(s=t[i-1]);if(e>a)return e-a>=c-e?u:s}s=i}else{if(i<r&&e<(a=n(o=t[i+1])))return e-c>=a-e?o:u;o=i+1}}return t[i]}},ud.binaryIndexOf=function(t,e,n){const r=t.length;let i=0;for(var o=r-1;i<o;){const n=i+Math.floor((o-i)/2);e>t[n]?i=n+1:o=n}return o=t[i],n?e>=t[r-1]?-1:o===e?i:i-1:o===e?i:-1},ud.constant=function(t,e){if(hd)return Array(t).fill(e);const n=Array(t);for(let r=0;r<t;r++)n[r]=e;return n},ud.difference=function(t,e,n){let r,i;return n?(r=e.filter((e=>!t.some((t=>n(t,e))))),i=t.filter((t=>!e.some((e=>n(e,t)))))):(r=e.filter((e=>!t.includes(e))),i=t.filter((t=>!e.includes(t)))),{added:r,removed:i}},ud.equals=function(t,e,n){if(null==t&&null==e)return!0;if(null==t||null==e||t.length!==e.length)return!1;if(n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},ud.filterInPlace=function(t,e){let n=0;for(let r=0;r<t.length;++r){const i=t[r];e(i,r)&&(t[n]=i,n++)}t.length=n},ud.first=function(t){if(t)return 0<t.length?t[0]:void 0},ud.groupToMap=function(t,e){const n=new Map,r=t.length;for(let i=0;i<r;i++){const r=t[i],o=e(r,i,t),s=n.get(o);s?s.push(r):n.set(o,[r])}return n},ud.intersect=function(t,e,n){return t&&e?n?t.filter((t=>-1<e.findIndex((e=>n(t,e))))):t.filter((t=>e.includes(t))):[]},ud.isArrayLike=function(t){return t&&"number"==typeof t.length},ud.isSome=function(t,e){return null!=t},ud.last=function(t){if(t){var e=t.length;return 0<e?t[e-1]:void 0}},ud.max=function(t,e=cd){if(t&&0!==t.length){var n=t[0],r=e(n);for(let i=1;i<t.length;++i){const o=t[i],s=Number(e(o));s>r&&(r=s,n=o)}return n}},ud.min=function(t,e=cd){return ud.max(t,(t=>-e(t)))},ud.pickRandom=function(t,e,n){const r=t.length;if(e>=r)return t.slice(0);let i=ld(n);const o=new Set,s=[];for(;s.length<e;){const e=Math.floor(i()*r);o.has(e)||(o.add(e),s.push(t[e]))}return s},ud.range=function(t,e){void 0===e&&(e=t,t=0);const n=Array(e-t);for(let r=t;r<e;r++)n[r-t]=r;return n},ud.indexOf=function(t,e,n,r){r=r||fd;var i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(t[o]===e)return r.last=o;for(n=Math.min(i,n),i=0;i<n;++i)if(t[i]===e)return r.last=i;return-1},ud.remove=function(t,e){const n=t.indexOf(e);return-1!==n?(t.splice(n,1),e):null},ud.removeUnordered=function(t,e,n,r){const i=null==n?t.length:n;let o=ud.indexOf(t,e,i,r);if(-1!==o)return t[o]=t[i-1],null==n&&t.pop(),e},ud.removeUnorderedMany=function(t,e,n=t.length,r=e.length,i,o){if(0===r||0===n)return n;pd.clear();for(let t=0;t<r;++t)pd.add(e[t]);i=i||fd;let s=Math.max(0,i.last-10);for(var a=s;a<n;++a)if(pd.has(t[a])&&(o&&o.push(t[a]),pd.delete(t[a]),t[a]=t[n-1],--n,--a,0===pd.size||0===n))return pd.clear(),n;for(a=0;a<s;++a)if(pd.has(t[a])&&(o&&o.push(t[a]),pd.delete(t[a]),t[a]=t[n-1],--n,--a,0===pd.size||0===n))return pd.clear(),n;return pd.clear(),n},ud.shuffle=function(t,e){let n=ld(e);for(let e=t.length-1;0<e;e--){const r=Math.floor(n()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t},ud.splitIntoChunks=function(t,e){const n=t.length;if(0===n)return[];const r=[];for(let i=0;i<n;i+=e)r.push(t.slice(i,i+e));return r},ud.unique=function(t,e){return e?t.filter(((t,n,r)=>r.findIndex(e.bind(null,t))===n)):t.filter(((t,e,n)=>n.indexOf(t)===e))},ud.update=function(t,e){let n=t.length!==e.length;n&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],n=!0);return n},yd.prototype.toArray=function(){return this.data.slice(0,this.length)},yd.prototype.filter=function(t){const e=[];for(let n=0;n<this._length;n++){const r=this.data[n];t(r)&&e.push(r)}return e},yd.prototype.at=function(t){if(0>(t=Math.trunc(t)||0)&&(t+=this._length),!(0>t||t>=this._length))return this.data[t]},yd.prototype.includes=function(t,e){return-1!==(t=this.data.indexOf(t,e))&&t<this.length},yd.prototype.clear=function(){this.length=0},yd.prototype.prune=function(){this.clear(),this.data=[]},yd.prototype.push=function(t){this.data[this._length++]=t},yd.prototype.pushArray=function(t,e=t.length){for(let n=0;n<e;n++)this.data[this._length++]=t[n]},yd.prototype.fill=function(t,e){for(let n=0;n<e;n++)this.data[this._length++]=t},yd.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t},yd.prototype.unshift=function(t){this.data.unshift(t),this._length++,gd(this)},yd.prototype.pop=function(){if(0!==this.length){var t=this.data[this.length-1];return--this.length,this._shrink(),t}},yd.prototype.remove=function(t){const e=ud.indexOf(this.data,t,this.length,this._hint);if(-1!==e)return this.data.splice(e,1),--this.length,t},yd.prototype.removeUnordered=function(t){return this.removeUnorderedIndex(ud.indexOf(this.data,t,this.length,this._hint))},yd.prototype.removeUnorderedIndex=function(t){if(!(t>=this.length||0>t))return this.swapElements(t,this.length-1),this.pop()},yd.prototype.removeUnorderedMany=function(t,e=t.length,n){this.length=ud.removeUnorderedMany(this.data,t,this.length,e,this._hint,n),this._shrink()},yd.prototype.front=function(){if(0!==this.length)return this.data[0]},yd.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]},yd.prototype.swapElements=function(t,e){if(!(t>=this.length||e>=this.length||t===e)){var n=this.data[t];this.data[t]=this.data[e],this.data[e]=n}},yd.prototype.sort=function(t){sd.sort(this.data,0,this.length,t)},yd.prototype.iterableSort=function(t){return sd.iterableSort(this.data,0,this.length,t)},yd.prototype.some=function(t,e){for(let n=0;n<this.length;++n)if(t.call(e,this.data[n],n,this.data))return!0;return!1},yd.prototype.find=function(t,e){for(let n=0;n<this.length;++n){const r=this.data[n];if(t.call(e,r,n))return r}},yd.prototype.filterInPlace=function(t,e){let n=0;for(let r=0;r<this._length;++r){const i=this.data[r];t.call(e,i,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=i,n++)}if(this._deallocator)for(t=n;t<this._length;t++)this.data[t]=this._deallocator(this.data[t]);return this._length=n,this._shrink(),this},yd.prototype.forAll=function(t,e){const n=this.length,r=this.data;for(let i=0;i<n;++i)t.call(e,r[i],i,r)},yd.prototype.forEach=function(t,e){for(let n=0;n<this.length;++n)t.call(e,this.data[n],n,this.data)},yd.prototype.map=function(t,e){const n=Array(this.length);for(let r=0;r<this.length;++r)n[r]=t.call(e,this.data[r],r,this.data);return n},yd.prototype.reduce=function(t,e){for(let n=0;n<this.length;++n)e=t(e,this.data[n],n,this.data);return e},yd.prototype.has=function(t){const e=this.length,n=this.data;for(let r=0;r<e;++r)if(n[r]===t)return!0;return!1},Object.defineProperties(yd.prototype,{length:{get:function(){return this._length},set:function(t){if(t>this._length)if(this._allocator)for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=t;else{if(this._deallocator)for(let e=t;e<this._length;++e)this.data[e]=this._deallocator(this.data[e]);this._length=t,this._shrink()}}}}),Object.defineProperties(md.prototype,{median:{get:function(){return this._samples.slice().sort(((t,e)=>t-e))[Math.floor(this._samples.length/2)]}},average:{get:function(){return this._samples.reduce(((t,e)=>t+e),0)/this._samples.length}},last:{get:function(){return this._samples[this._counter%this._samples.length]}}}),md.prototype.record=function(t){null!=t&&(this._samples[++this._counter%this._samples.length]=t)},Id.cache=function(t){const e=[];return function*(){yield*e;for(const n of t)e.push(n),yield n}},Id.find=function(t,e){for(const n of t)if(null!=n&&e(n))return n},Id.isIterable=function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},Cd.abortMaybe=function(t){return t&&t.abort(),null},Cd.applySome=function(t,e){return null!=t?e(t):null},Cd.assertIsSome=function(t,e){if(null==t)throw Error(e||"value is None")},Cd.assumeNonNull=function(t){return t},Cd.destroyMaybe=function(t){return t&&t.destroy(),null},Cd.disposeMaybe=function(t){return t&&t.dispose(),null},Cd.equalsMaybe=function(t,e,n){return null!=t&&null!=e?null!=n?n(t,e):t.equals(e):t===e},Cd.forEachSome=function(t,e){for(const n of t)Cd.applySome(n,e)},Cd.mapMany=function(t,e){const n=[];for(const r of t)n.push(null!=r?e(r):null);return n},Cd.nullifyNonNullableForDispose=function(t){return null},Cd.releaseMaybe=function(t){return t&&t.release(),null},Cd.removeMaybe=function(t){return t&&t.remove(),null},Cd.unwrapOrThrow=function(t,e){return Cd.assertIsSome(t,e),t},Object.defineProperties(Ed.prototype,{size:{get:function(){let t=0;return this._groups.forEach((e=>{t+=e.length})),t}}}),Ed.prototype.destroy=function(){this.removeAll()},Ed.prototype.add=function(t,e){if(Id.isIterable(t)){e=this._getOrCreateGroup(e);for(const n of t)this._isHandle(n)&&e.push(n)}else this._isHandle(t)&&this._getOrCreateGroup(e).push(t);return this},Ed.prototype.forEach=function(t,e){if("function"==typeof t)this._groups.forEach((e=>e.forEach(t)));else{const n=this._getGroup(t);n&&e&&n.forEach(e)}},Ed.prototype.has=function(t){return this._groups.has(this._ensureGroupKey(t))},Ed.prototype.remove=function(t){if("string"!=typeof t&&Id.isIterable(t)){for(const e of t)this.remove(e);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this},Ed.prototype.removeAll=function(){return this._groups.forEach((t=>this._removeAllFromGroup(t))),this._groups.clear(),this},Ed.prototype._isHandle=function(t){return t&&(!!t.remove||t instanceof f)},Ed.prototype._getOrCreateGroup=function(t){if(this.has(t))return this._getGroup(t);const e=[];return this._groups.set(this._ensureGroupKey(t),e),e},Ed.prototype._getGroup=function(t){return Cd.assumeNonNull(this._groups.get(this._ensureGroupKey(t)))},Ed.prototype._ensureGroupKey=function(t){return t||"_default_"},Ed.prototype._removeAllFromGroup=function(t){for(const e of t)e instanceof Ed?e.removeAll():e.remove()},bd.abortHandle=function(t){return vd((()=>t&&t.abort()))},bd.asyncHandle=function(t,e){let n=!1,r=null;return t.then((t=>{n?t.remove():r=t})),vd((()=>{n=!0,null!=r?r.remove():null!=e&&(e.abort(),e=null)}))},bd.destroyHandle=function(t){return vd(null!=t?()=>t.destroy():void 0)},bd.handlesGroup=function(t){return vd((()=>t.forEach((t=>null!=t&&t.remove()))))},bd.makeHandle=vd,bd.refHandle=function(t){return vd((()=>{const e=t();null!=e&&e.remove()}))},bd.timeoutHandle=function(t,e){const n=setTimeout(t,e);return vd((()=>clearTimeout(n)))},xd.prototype.destroy=function(){this.prune(0)},xd.prototype.acquire=function(...t){if(xd.test.disabled)var e=new this._ctor;else{if(0===this._pool.length){e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this._ctor}e=this._pool.pop()}return this._acquireFunction?this._acquireFunction(e,...t):e&&e.acquire&&"function"==typeof e.acquire&&e.acquire(...t),e},xd.prototype.release=function(t){t&&!xd.test.disabled&&(this._releaseFunction?this._releaseFunction(t):t&&t.release&&"function"==typeof t.release&&t.release(),this._pool.push(t))},xd.prototype.prune=function(t=this._initialSize){if(!(t>=this._pool.length)){for(let e=t;e<this._pool.length;++e)this._dispose(this._pool[e]);this._pool.length=t}},xd.prototype._dispose=function(t){t.dispose&&"function"==typeof t.dispose&&t.dispose()},xd.test={disabled:!1},Md.prototype.acquire=function(){return this._pool.acquire()},Md.prototype.release=function(t){this._pool.release(t)},Md.prototype.prune=function(){this._pool.prune(0)},Md.acquire=function(){return Bd.acquire()},Md.release=function(t){return Bd.release(t)},Md.prune=function(){Bd.prune()};const Bd=new Md(100);function _d(){}function Sd(t){return"Int8Array"===t&&t.constructor&&t.constructor.name}function Qd(t){return"Uint8Array"===t&&t.constructor&&t.constructor.name}function Rd(t){return"Uint8ClampedArray"===t&&t.constructor&&t.constructor.name}function Dd(t){return"Int16Array"===t&&t.constructor&&t.constructor.name}function Td(t){return"Uint16Array"===t&&t.constructor&&t.constructor.name}function Od(t){return"Int32Array"===t&&t.constructor&&t.constructor.name}function Nd(t){return"Uint32Array"===t&&t.constructor&&t.constructor.name}function Fd(t){return"Float32Array"===t&&t.constructor&&t.constructor.name}function zd(t){return"Float64Array"===t&&t.constructor&&t.constructor.name}function kd(t){return!("buffer"in t)}function Ld(){}function Pd(t){return"function"==typeof t.map&&"function"==typeof t.forEach}function jd(t){if(_d.isInt8Array(t)||_d.isUint8Array(t)||_d.isUint8ClampedArray(t)||_d.isInt16Array(t)||_d.isUint16Array(t)||_d.isInt32Array(t)||_d.isUint32Array(t)||_d.isFloat32Array(t)||_d.isFloat64Array(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){var e=new Map;for(const[n,r]of t)e.set(n,Ld.clone(r));return e}if(t instanceof Set){e=new Set;for(const n of t)e.add(Ld.clone(n));return e}return null}function Ud(){xd.call(this,...arguments),this._set=new Set}function qd(){}_d.NATIVE_ARRAY_MAX_SIZE=1024,_d.estimateSize=function(t){return null!=t?kd(t)?8*t.length+12:t.byteLength+145:0},_d.isArray=kd,_d.isArrayBuffer=function(t){return t instanceof ArrayBuffer},_d.isFloat=function(t){return zd(t)||Fd(t)},_d.isFloat32Array=Fd,_d.isFloat64Array=zd,_d.isInt16Array=Dd,_d.isInt32Array=Od,_d.isInt8Array=Sd,_d.isSigned=function(t){return zd(t)||Fd(t)||Od(t)||Dd(t)||Sd(t)},_d.isUint16Array=Td,_d.isUint32Array=Nd,_d.isUint8Array=Qd,_d.isUint8ClampedArray=Rd,_d.maximumValue=function(t){return zd(t)?179769e303:Fd(t)?3402823e32:Nd(t)?4294967295:Td(t)?65535:Qd(t)||Rd(t)?255:Od(t)?2147483647:Dd(t)?32767:Sd(t)?127:256},_d.typedArrayStaticSize=145,Ld.clone=function(t){if(!t||"object"!=typeof t||"function"==typeof t)return t;var e=jd(t);if(null!=e)return e;if(Ld.isClonable(t))return t.clone();if(Pd(t))return t.map(g);if(Ld.isAccessorLike(t))return t.clone();e={};for(const n of Object.getOwnPropertyNames(t))e[n]=Ld.clone(t[n]);return e},Ld.equals=function(t,e){return t===e||"number"==typeof t&&isNaN(t)&&"number"==typeof e&&isNaN(e)||"function"==typeof(t||{}).getTime&&"function"==typeof(e||{}).getTime&&t.getTime()===e.getTime()||!1},Ld.equalsShallow=function(t,e){if(t===e)return!0;if(null==t||"string"==typeof t)return t===e;if("number"==typeof t)return t===e||"number"==typeof e&&isNaN(t)&&isNaN(e);if(t instanceof Date)return e instanceof Date&&t.getTime()===e.getTime();if(Array.isArray(t))return Array.isArray(e)&&ud.equals(t,e);if(t instanceof Set){var n;if(n=e instanceof Set)t:if(t.size!==e.size)n=!1;else{for(const r of t)if(!e.has(r)){n=!1;break t}n=!0}return n}if(t instanceof Map){if(n=e instanceof Map)t:if(t.size!==e.size)n=!1;else{for(const[r,i]of t)if((t=e.get(r))!==i||void 0===t&&!e.has(r)){n=!1;break t}n=!0}return n}return!!Ld.isPlainObject(t)&&(Ld.isPlainObject(e)&&function(t,e){if(null===t||null===e)return!1;const n=Object.keys(t);if(null===e||Object.keys(e).length!==n.length)return!1;for(const r of n)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}(t,e))},Ld.fixJson=function(t,e){let n;if(e)for(n in t)t.hasOwnProperty(n)&&(void 0===t[n]?delete t[n]:t[n]instanceof Object&&Ld.fixJson(t[n],!0));else for(n in t)t.hasOwnProperty(n)&&void 0===t[n]&&delete t[n];return t},Ld.isAccessorLike=function(t){return"function"==typeof t.notifyChange&&"function"==typeof t.watch},Ld.isClonable=function(t){return"function"==typeof t.clone},Ld.isPlainObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&(null===(t=Object.getPrototypeOf(t))||t===Object.prototype)},Ld.tryClone=function(t){if(!t||"object"!=typeof t||"function"==typeof t||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;var e=jd(t);if(null!=e)return e;if(Pd(t)){let e=!0;return t=t.map((t=>{const n=Ld.tryClone(t);return null!=t&&null==n&&(e=!1),n})),e?t:null}if(u(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!Ld.isAccessorLike(t)){e=new(Object.getPrototypeOf(t).constructor);for(const n of Object.getOwnPropertyNames(t)){const r=t[n],i=Ld.tryClone(r);if(null!=r&&null==i)return null;e[n]=i}return e}return null},Ud.prototype=Object.create(xd.prototype),Ud.prototype.constructor=Ud,Ud.prototype.destroy=function(){xd.prototype.destroy.apply(this),this._set=null},Ud.prototype.acquire=function(...t){return t=xd.prototype.acquire.apply(this,Array.prototype.slice.apply(arguments)),this._set.delete(t),t},Ud.prototype.release=function(t){t&&!this._set.has(t)&&(xd.prototype.release.apply(this,t),this._set.add(t))},Ud.prototype._dispose=function(t){this._set.delete(t),xd.prototype._dispose.apply(this,t)};const Kd=[];function Hd(){}function Yd(){for(;Vd.length;){const t=Vd.shift();t.isActive&&t.callback()}Xd.willDispatch=!1}qd.nextTick=function(t){Kd.push(t),1===Kd.length&&queueMicrotask((()=>{const t=Kd.slice();Kd.length=0;for(const e of t)e()}))};class Gd{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}var Vd=[];const Xd={willDispatch:!1,dispatch:Yd};Hd.schedule=function(t){return t=new Gd(t),Vd.push(t),Xd.willDispatch||(Xd.willDispatch=!0,qd.nextTick(Yd)),t};let Wd=0;function Jd(){}function Zd(){}function $d(t){return t.__accessor__?t.__accessor__:null}function tg(t,e,n){return e?Object.keys(e).reduce(((t,r)=>{let i=null;var o="merge";if(n&&(i=n.path?`${n.path}.${r}`:r,o=n.policy(i)),"replace"===o||"replace-arrays"===o&&Array.isArray(t[r]))return t[r]=e[r],t;if(void 0===t[r])return t[r]=Ld.clone(e[r]),t;let s=t[r];if(o=e[r],s===o)return t;if(Array.isArray(o)||Array.isArray(t))s=s?Array.isArray(s)?t[r]=s.concat():t[r]=[s]:t[r]=[],o&&(Array.isArray(o)||(o=[o]),o.forEach((t=>{s.includes(t)||s.push(t)})));else if(o&&"object"==typeof o)if(n){const e=n.path;n.path=Cd.assumeNonNull(i),t[r]=tg(s,o,n),n.path=e}else t[r]=tg(s,o,null);else t.hasOwnProperty(r)&&!e.hasOwnProperty(r)||(t[r]=o);return t}),t||{}):t}function eg(t){return Array.isArray(t)?t:t.split(".")}function ng(t){return t.includes(",")?t.split(",").map((t=>t.trim())):[t.trim()]}function rg(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...ng(n));return e}return ng(t)}function ig(){}function og(t,e){if(t="?"===t[t.length-1]?t.slice(0,-1):t,null!=e.getItemAt||Array.isArray(e)){var n=parseInt(t,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}return n=Zd.getProperties(e),Zd.isPropertyDeclared(n,t)?n.get(t):e[t]}function sg(t,e,n){return null==t?t:!(t=og(e[n],t))&&n<e.length-1?void 0:n===e.length-1?t:sg(t,e,n+1)}function ag(t,e,n=0){return"string"!=typeof e||e.includes(".")?sg(t,Zd.pathToArray(e),n):og(e,t)}function ug(){}function cg(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}function lg(t){this._accessed=[],this._handles=[],this._observerObject=new cg(t)}Jd.NullUID=0,Jd.generateUID=function(){return++Wd},Zd.getDependsInfo=function(t,e){const n=$d(t);return n?n.getDependsInfo(t,e,""):""},Zd.getProperties=$d,Zd.isPropertyDeclared=function(t,e){return null!=t&&t.metadatas&&null!=t.metadatas[e]},Zd.merge=function(t,e,n){return tg(t,e,n?{policy:n,path:""}:null)},Zd.once=function(t){let e=!1;return()=>{e||(e=!0,t())}},Zd.parse=function(t,e,n,r){return 1!==(e=rg(e)).length?(e=e.map((e=>r(t,e,n))),bd.handlesGroup(e)):r(t,e[0],n)},Zd.parseConditionalPath=function(t){if(!t.includes("?"))return null;t=eg(t);const e=Array(t.length);for(let n=0;n<t.length;n++){const r=t[n];e[n]="?"===r[r.length-1],e[n]&&(t[n]=r.slice(0,-1))}return{fullPath:t.join("."),conditional:e}},Zd.pathToArray=eg,Zd.pathToStringOrArray=function(t){return!t||"string"==typeof t&&!t.includes(".")?t:eg(t)},Zd.splitPath=rg,ig.exists=function(t,e){return void 0!==ag(e,t)},ig.get=function(t,e){return ag(t,e)},ig.valueOf=ag,cg.prototype.onInvalidated=function(){this._invalidCount++},cg.prototype.onCommitted=function(){if(!this.destroyed){var t=this._invalidCount;1===t?(this._invalidCount=0,this._notify()):this._invalidCount=0<t?t-1:0}},cg.prototype.destroy=function(){this.destroyed=!0,this._notify=ug},lg.prototype.destroy=function(){this._accessed.length=0,this._observerObject&&this._observerObject.destroy(),this.clear()},lg.prototype.onObservableAccessed=function(t){const e=this._accessed;e.includes(t)||e.push(t)},lg.prototype.onTrackingEnd=function(){const t=this._handles,e=this._accessed,n=this._observerObject;for(let r=0;r<e.length;++r)t.push(e[r].observe(n));e.length=0},lg.prototype.clear=function(){const t=this._handles;for(let e=0;e<t.length;++e)t[e].remove();t.length=0};let hg={};hg[hg.Dirty=1]="Dirty",hg[hg.Overriden=2]="Overriden",hg[hg.Computing=4]="Computing",hg[hg.NonNullable=8]="NonNullable",hg[hg.HasDefaultValue=16]="HasDefaultValue",hg[hg.DepTrackingInitialized=32]="DepTrackingInitialized",hg[hg.AutoTracked=64]="AutoTracked",hg[hg.ExplicitlyTracking=128]="ExplicitlyTracking";var Ag=hg;function fg(){}function pg(){var t=yg.length;if(1<t){const e=yg.pop();mg=yg[t-2],e.onTrackingEnd()}else if(1===t){const t=yg.pop();mg=gg,t.onTrackingEnd()}else mg=gg}function dg(t,e,n){if(e="?"===e[e.length-1]?e.slice(0,-1):e,null!=t.getItemAt||Array.isArray(t)){var r=parseInt(e,10);if(!isNaN(r))return Array.isArray(t)?t[r]:t.at(r)}return(r=Zd.getProperties(t))&&(r=r.propertiesByName.get(e))&&(fg.trackAccess(r.observerObject),fg.initializeDependencyTracking(t,r)),n?t[e]:void 0}const gg={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},yg=[];let mg=gg,Ig=!1,Cg=!1;const Eg=[];function bg(){}fg.initializeDependencyTracking=function(t,e){if(!(e.flags&Ag.DepTrackingInitialized)){var n=Cg;Cg=!1,e.flags&Ag.AutoTracked?fg.runTrackedNoThrow(e,e.metadata.get,t):fg.trackExplicitDependencies(t,e),Cg=n}},fg.runTracked=function(t,e,n){if(Ig)return fg.runTrackedNoThrow(t,e,n);mg=t,yg.push(t);var r=e.call(n);return pg(),r},fg.runTrackedNoThrow=function(t,e,n){const r=Ig;Ig=!0,mg=t,yg.push(t),t=null;try{t=e.call(n)}catch(t){Cg&&console.log("core.accessorSupport.tracking",t)}return pg(),Ig=r,t},fg.runUntracked=function(t,e){return fg.runTracked(gg,t,e)},fg.trackAccess=function(t){mg.onObservableAccessed(t)},fg.trackExplicitDependencies=function(t,e){const n=e.observerObject;n.flags&Ag.ExplicitlyTracking||(n.flags|=Ag.ExplicitlyTracking,fg.runTrackedNoThrow(e,(()=>{var n=e.metadata.dependsOn||Eg;for(const e of n)if("string"!=typeof e||e.includes(".")){n=Zd.pathToArray(e);for(let e=0,r=t;e<n.length&&null!=r&&"object"==typeof r;++e)r=dg(r,n[e],e!==n.length-1)}else dg(t,e,!1)})),n.flags&=~Ag.ExplicitlyTracking)};let vg=!1;const xg=[];function wg(){this.uid=Jd.generateUID(),this.removed=!1,this.equals=null,this.path=null,this.target=null,this.getValue=null,this.callback=null,this.oldValue=null,this.type=null}function Mg(){}function Bg(t){Tg.delete(t),Tg.add(t),Og||(Og=Hd.schedule(Sg))}function _g(t){if(!t.removed){var e=t.oldValue,n=t.getValue();t.equals(e,n)||(t.oldValue=n,t.notify(n,e))}}function Sg(){let t=10;for(;Og&&t--;){Og=null;const t=Qg(),e=Dg.acquire();for(const n of t){const t=n.uid;_g(n),t===n.uid&&n.removed&&e.push(n)}for(const t of Tg)t.removed&&(e.push(t),Tg.delete(t));for(const t of e)wg.pool.release(t);Dg.release(e),Dg.release(t),Ng.forEach((t=>t()))}}function Qg(){const t=Dg.acquire();t.length=Tg.size;let e=0;for(const n of Tg)t[e]=n,++e;return Tg.clear(),t}var Rg;bg.autorun=function(t){let e=new lg((function r(){if(e&&!n)if(vg)xg.includes(r)||xg.unshift(r);else for(e.clear(),n=vg=!0,fg.runTracked(e,t),vg=n=!1;xg.length;)xg.pop()()})),n=!1;return n=!0,fg.runTracked(e,t),n=!1,{remove:function(){e&&(e.destroy(),e=null)}}},bg.reaction=function(t,e){let n=new lg((function o(){if(n&&!i)if(vg)xg.includes(o)||xg.unshift(o);else{var s=r;for(n.clear(),i=vg=!0,r=fg.runTracked(n,t),vg=i=!1,e(r,s);xg.length;)xg.pop()()}})),r=null,i=!1;return i=!0,r=fg.runTracked(n,t),i=!1,{remove:function(){n&&(n.destroy(),r=n=null)}}},bg.reactionDeferred=function(t,e){function n(){return r?(r.clear(),i=fg.runTracked(r,t)):null}let r=new lg((function(){e(i,n)}));var i=null;return n(),{remove:function(){r&&(r.destroy(),r=null),i=null}}},wg.acquireUntracked=function(t,e,n,r,i){return this.pool.acquire(Rg.Untracked,t,e,n,r,i,Ld.equals)},wg.acquireTracked=function(t,e,n,r){return this.pool.acquire(Rg.Tracked,t,e,n,null,null,r)},wg.prototype.notify=function(t,e){this.type===Rg.Untracked?this.callback.call(this.target,t,e,this.path,this.target):this.callback.call(null,t,e,void 0,void 0)},wg.prototype.acquire=function(t,e,n,r,i,o,s){this.uid=Jd.generateUID(),this.removed=!1,this.type=t,this.oldValue=e,this.callback=n,this.getValue=r,this.target=i,this.path=o,this.equals=s},wg.prototype.release=function(){this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.uid=Jd.generateUID(),this.removed=!1},wg.pool=new Ud(wg),function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"}(Rg||(Rg={}));const Dg=new Md,Tg=new Set;let Og;const Ng=new Set;function Fg(){}function zg(t="Aborted"){return{type:"AbortError",status:t}}function kg(t,e="Aborted"){if(Pg(t))throw zg(e)}function Lg(t){return null!=t?"aborted"in t?t:t.signal:t}function Pg(t){return null!=(t=Lg(t))&&t.aborted}function jg(t,e){null!=(t=Lg(t))&&t.aborted&&e()}function Ug(t){return"AbortError"===t&&t.name}async function qg(t){if(t){if("function"!=typeof t.forEach){const e=Object.keys(t),n=e.map((e=>t[e])),r=await qg(n),i={};return e.map(((t,e)=>i[t]=r[e])),i}return Promise.allSettled(t).then((e=>Array.from(t,((t,n)=>"fulfilled"===(n=e[n]).status?{promise:t,value:n.value}:{promise:t,error:n.reason}))))}}function Kg(t,e,n){const r=new AbortController;return jg(n,(()=>r.abort())),new Promise(((n,i)=>{let o=setTimeout((()=>{o=0,n(e)}),t);jg(r,(()=>{o&&(clearTimeout(o),i(zg()))}))}))}function Hg(t){return t&&"function"==typeof t.then}function Yg(t){return Hg(t)?t:Promise.resolve(t)}function Gg(){let t,e;const n=new Promise(((n,r)=>{t=n,e=r})),r=e=>{t(e)};return r.resolve=e=>t(e),r.reject=t=>e(t),r.promise=n,r}function Vg(){}function Xg(t){return t&&("function"==typeof t.on||"function"==typeof t.addEventListener)}function Wg(t,e,n){if(!Xg(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,n);if(Array.isArray(e)){const r=e.slice();for(const e of r)t.addEventListener(e,n);return bd.makeHandle((()=>{for(const e of r)t.removeEventListener(e,n)}))}return t.addEventListener(e,n),bd.makeHandle((()=>t.removeEventListener(e,n)))}function Jg(){}function Zg(t,e,n={},r){let i=null;const o=n.once?(t,n)=>{r(t)&&(Cd.removeMaybe(i),e(t,n))}:(t,n)=>{r(t)&&e(t,n)};if(i=Mg.watchTracked(t,o,n.sync,n.equals),n.initial){let e=t();o(e,e)}return i}function $g(t,e,n){if(Fg.isAborted(n))return Promise.reject(Fg.createAbortError());const r=t();if(e&&e(r))return Promise.resolve(r);let i=null;return new Promise(((r,o)=>{i=bd.handlesGroup([Fg.onAbort(n,(()=>{i=Cd.removeMaybe(i),o(Fg.createAbortError())})),Zg(t,(t=>{i=Cd.removeMaybe(i),r(t)}),{sync:!1,once:!0},e||ty)])}))}function ty(t){return!0}function ey(t){return!!t}function ny(t,e){this._observers=t,this._observer=e}function ry(){this._observers=null,this.destroyed=!1}Mg.afterDispatch=function(t){return Ng.add(t),bd.makeHandle((()=>Ng.delete(t)))},Mg.dispatch=Sg,Mg.removeTarget=function(t){for(const e of Tg.values())e.target===t&&(e.removed=!0)},Mg.watch=function(t,e,n,r=!1){return!t.__accessor__||t.__accessor__.destroyed?bd.makeHandle():r?function(t,e,n){const r=Zd.parse(t,e,n,((t,e,n)=>{let i=!1;return bg.reaction((()=>ig.valueOf(t,e)),((o,s)=>{t.__accessor__.destroyed?r.remove():i||(i=!0,Ld.equals(s,o)||n.call(t,o,s,e,t),i=!1)}))}));return r}(t,e,n):function(t,e,n){let r=Zd.parse(t,e,n,((t,e,n)=>{let i,o,s=bg.reactionDeferred((()=>ig.valueOf(t,e)),((s,a)=>{t.__accessor__.destroyed||i&&i.uid!==o?r.remove():(i||(i=wg.acquireUntracked(s,n,a,t,e),o=i.uid),Bg(i))}));return bd.makeHandle((()=>{s.remove(),i&&(i.uid!==o||i.removed||(i.removed=!0,Bg(i)),i=null),r=s=null}))}));return r}(t,e,n)},Mg.watchTracked=function(t,e,n=!1,r=Ld.equalsShallow){return n?function(t,e,n){let r=!1;return bg.reaction(t,((t,i)=>{r||(r=!0,n(i,t)||e(t,i),r=!1)}))}(t,e,r):function(t,e,n){var r,i,o=bg.reactionDeferred(t,((t,s)=>{r&&r.uid!==i?o.remove():(r||(r=wg.acquireTracked(t,e,s,n),i=r.uid),Bg(r))}));return bd.makeHandle((()=>{o.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,Bg(r)),r=null),o=null}))}(t,e,r)},Fg.after=Kg,Fg.allSettledErrors=async function(t){return(await Promise.allSettled(t)).filter((t=>"rejected"===t.status)).map((t=>t.reason))},Fg.allSettledValues=async function(t){return(await Promise.allSettled(t)).filter((t=>"fulfilled"===t.status)).map((t=>t.value))},Fg.always=function(t,e){return t.then(e,e)},Fg.createAbortError=zg,Fg.debounce=function(t,e=-1){let n,r,i,o,s=null;const a=(...u)=>{if(n){if(r=u,o&&o.reject(zg()),o=Gg(),u=o.promise,s){var c=s;s=null,c.abort()}return u}if(i=o||Gg(),o=null,0<e){const r=new AbortController,i=n=Yg(t(...u,r.signal));Kg(e).then((()=>{n===i&&(o?r.abort():s=r)}))}else n=1,n=Yg(t(...u));u=()=>{const t=r;r=i=n=s=null,null!=t&&a(...t)};const l=i;return(c=n).then(u,u),c.then(l.resolve,l.reject),l.promise};return a},Fg.eachAlways=qg,Fg.eachAlwaysValues=async function(t){return(await qg(t)).filter((t=>!!t.value)).map((t=>t.value))},Fg.filter=async function(t,e){const n=t.slice(),r=await Promise.all(t.map(((t,n)=>e(t,n))));return n.filter(((t,e)=>r[e]))},Fg.ignoreAbortErrors=async function(t){try{return await t}catch(t){if(!Ug(t))throw t}},Fg.isAbortError=Ug,Fg.isAborted=Pg,Fg.isPromiseLike=Hg,Fg.onAbort=jg,Fg.settleWithPromise=function(t,e){e.then(t.resolve,t.reject)},Fg.throwIfAbortError=function(t){if(Ug(t))throw t},Fg.throwIfAborted=kg,Fg.throwIfNotAbortError=function(t){if(!Ug(t))throw t},Fg.waitTick=async function(t){await Promise.resolve(),kg(t)},Fg.when=Yg,Fg.whenOrAbort=function(t,e){return null==Lg(e)?t:new Promise(((n,r)=>{let i=jg(e,(()=>r(zg())));const o=()=>{i=Cd.removeMaybe(i)};t.then(o,o),t.then(n,r)}))},Vg.ieKeyNormalizationMap={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"},Vg.eventKey=function(t){var e=t.key;return this.ieKeyNormalizationMap[e]||e},Vg.isEventTarget=Xg,Vg.on=Wg,Vg.once=function(t,e,n){if(!Xg(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,n);const r=Wg(t,e,(e=>{r.remove(),n.call(t,e)}));return r},Vg.pausable=function(t,e,n){let r=!1;const i=Wg(t,e,(e=>{r||n.call(t,e)}));return{resume(){r=!1},pause(){r=!0},remove(){i.remove()}}},Object.defineProperty(Vg,Symbol.toStringTag,{value:"Module"}),Jg.autorun=bg.autorun,Jg.initial={initial:!0},Jg.on=function(t,e,n,r={}){function i(){s&&a&&(a.remove(),r.onListenerRemove&&r.onListenerRemove(s),a=s=null)}function o(t){r.once&&r.once&&Cd.removeMaybe(u),n(t)}let s=null,a=null,u=null;const c=Jg.watch(t,((t,n)=>{i(),Vg.isEventTarget(t)&&(s=t,a=Vg.on(t,e,o),r.onListenerAdd&&r.onListenerAdd(t))}),{sync:r.sync,initial:!0});return u=bd.makeHandle((()=>{c.remove(),i()}))},Jg.pausable=function(t,e,n={}){let r=!1;const i=Jg.watch(t,((t,n)=>{r||e(t,n)}),n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}},Jg.sync={sync:!0},Jg.syncAndInitial={sync:!0,initial:!0},Jg.watch=function(t,e,n={}){return Zg(t,e,n,ty)},Jg.when=function(t,e,n={}){return Zg(t,e,n,ey)},Jg.once=function(t,e){return $g(t,null,e)},Jg.whenOnce=function(t,e){return $g(t,ey,e)},ny.prototype.remove=function(){ud.remove(this._observers,this._observer)},ry.prototype.observe=function(t){if(this.destroyed||t.destroyed)return iy;null==this._observers&&(this._observers=[]);const e=this._observers;let n=!1,r=!1;const i=e.length;for(let o=0;o<i;++o){const i=e[o];if(i.destroyed)r=!0;else if(i===t){n=!0;break}}return n||(e.push(t),r&&this._removeDestroyedObservers()),new ny(e,t)},ry.prototype._removeDestroyedObservers=function(){const t=this._observers;if(t&&0!==t.length){var e=t.length,n=0;for(let r=0;r<e;++r){for(;r+n<e&&t[r+n].destroyed;)++n;if(0<n){if(!(r+n<e))break;t[r]=t[r+n]}}t.length=e-n}},ry.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0;var t=this._observers;if(null!=t){for(const e of t)e.onCommitted();this._observers=null}}};const iy=bd.makeHandle();function oy(){ry.call(this)}function sy(t,e){this._observable=new oy,this._value=t,this._equalityFunction=e}function ay(t,e,n,r,i){this.resolve=t,this.reject=e,this.callback=n,this.signal=r,this.abortCallback=i}function uy(){this._tasks=[],this._running=sy.signal(!1)}oy.prototype=Object.create(ry.prototype),oy.prototype.constructor=ry,oy.prototype.notify=function(){var t=this._observers;if(t&&0<t.length){t=t.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}},Object.defineProperties(sy.prototype,{value:{get:function(){return fg.trackAccess(this._observable),this._value},set:function(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}}}),sy.prototype.mutate=function(t){t(this._value),this._observable.notify()},sy.signal=function(t,e=Ld.equalsShallow){return new sy(t,e)},Object.defineProperties(uy.prototype,{length:{get:function(){return this._tasks.length}},running:{get:function(){return this._running.value}}}),uy.prototype.destroy=function(){this.cancelAll()},uy.prototype.runTask=function(t){for(;!t.done&&this._process(t);)t.madeProgress()},uy.prototype.push=function(t,e,n){return this._running.value=!0,new Promise(((r,i)=>this._tasks.push(new ay(r,i,t,e,n))))},uy.prototype.unshift=function(t,e,n){return this._running.value=!0,new Promise(((r,i)=>this._tasks.unshift(new ay(r,i,t,e,n))))},uy.prototype._process=function(t){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{const n=Fg.isAborted(e.signal);if(n&&!e.abortCallback)e.reject(Fg.createAbortError());else{const r=n?e.abortCallback&&e.abortCallback(Fg.createAbortError()):e.callback(t);Fg.isPromiseLike(r)?r.then(e.resolve,e.reject):e.resolve(r)}}catch(t){e.reject(t)}return this._running.value=0<this._tasks.length,!0},uy.prototype.cancelAll=function(){const t=Fg.createAbortError();for(const e of this._tasks)if(e.abortCallback){const n=e.abortCallback(t);e.resolve(n)}else e.reject(t);this._tasks.length=0,this._running.value=!1};const cy="YIELD",ly="INTERACTING",hy="IDLE";function Ay(t){return my.has(t)?my.get(t):"number"==typeof t?t:1}const fy={TESTA:"immediate",TESTB:"schedule",TESTC:"slide",SHADOW_ACCUMULATOR:"shadow accumulator",GRAPHICS_DECONFLICTOR:"graphics deconflictor",LABELER:"LABELER",GET_ELEVATION:"GET_ELEVATION",SNAPPING:"snapping",S3MRESOURCELOADER:"S3mResourceLoader"},py="s",dy="r",gy="w",yy="i",my=new Map([[fy.RESOURCE_CONTROLLER_IMMEDIATE,0],[fy.RESOURCE_CONTROLLER,4],[fy.GRAPHICS_DECONFLICTOR,4],[fy.LABELER,8],[fy.GET_ELEVATION,9],[fy.SLIDE,0],[fy.SHADOW_ACCUMULATOR,30],[fy.SNAPPING,0],[fy.S3MRESOURCELOADER,0]]);function Iy(t){this._updating=sy.signal(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new md("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Cy,this._state=ly,this._tasks=new yd,this._runQueue=new yd,this._load=0,this._idleStateCallbacks=new yd,this._debug=!1,this._forceTask=!1,this._idleUpdatesStartFired=!1,this._cameraChangeTime=0;for(const t of Object.keys(fy))this.performanceInfo.tasks.set(fy[t],new md(fy[t]));const e=this;t.camera.changed.addEventListener((()=>{e._cameraChangeTime=performance.now()}))}Object.defineProperties(Iy.prototype,{updating:{get:function(){return this._updating.value}},load:{get:function(){return this._load}},state:{get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,this.state!==hy&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((t=>t.idleEnd()))))}},test:{get:function(){return this._test}}}),Iy.prototype._updatingChanged=function(){this._updating.value=this._tasks.some((t=>t.needsUpdate))},Iy.prototype.destroy=function(){this._tasks.toArray().forEach((t=>t.remove())),this._tasks.clear(),this._microTaskQueued=!1,this._updatingChanged()},Iy.prototype.taskRunningChanged=function(t){this._updatingChanged(),t&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())})))},Iy.prototype.registerTask=function(t,e){return e=new by(this,t,e,Ay(t)),this._tasks.push(e),this._updatingChanged(),this.performanceInfo.tasks.has(t)||this.performanceInfo.tasks.set(H,new md(t)),e},Iy.prototype.registerIdleStateCallbacks=function(t,e){const n={idleBegin:t,idleEnd:e};this._idleStateCallbacks.push(n),this.state===hy&&this._idleUpdatesStartFired&&n.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(t){r._idleUpdatesStartFired&&(n.idleEnd(),r._state===hy&&t()),n.idleBegin=t},set idleEnd(t){n.idleEnd=t}}};function Cy(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=hy,this._progressed=this._done=!1,this._enabled=!0}Iy.prototype.updateBudget=function(t){300>=performance.now()-this._cameraChangeTime?this._state=ly:this._state=hy,t.schedulerState=this._state,++this._frameNumber;let e=6.5,n=t.frameDuration,r=1;switch(this.state){case hy:e=0,n=Math.max(60,t.frameDuration),r=25;break;case ly:n=Math.max(20,t.frameDuration)}return n=n-t.elapsedFrameTime-e,this.state!==hy&&n<1&&!this._forceTask?(this._forceTask=!0,!1):(n=Math.max(n,r),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())},Iy.prototype.frame=function(){switch(this._microTaskQueued=this._forceTask=!1,this.state){case hy:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((t=>t.idleBegin()))),this._runIdle();break;case ly:this._runInteracting();break;default:this._runAnimating()}},Iy.prototype.stopFrame=function(){this._budget.reset(0,this._state),this._budget.madeProgress()},Iy.prototype._removeIdleStateCallbacks=function(t){this._idleUpdatesStartFired&&t.idleEnd(),this._idleStateCallbacks.removeUnordered(t)},Iy.prototype.removeTask=function(t){this._tasks.removeUnordered(t),this._runQueue.removeUnordered(t),this._updatingChanged()},Iy.prototype._updateTask=function(t){this._tasks.forAll((e=>{e.name===t&&e.setPriority(t)}))},Iy.prototype._getState=function(t){if(this._runQueue.some((e=>e.name===t)))return py;let e=yy;return this._tasks.forAll((n=>{n.name===t&&n.needsUpdate&&(1>=n.schedulePriority?e=dy:e!==dy&&(e=gy))})),e},Iy.prototype._getRuntime=function(t){let e=0;return this._tasks.forAll((n=>{n.name===t&&(e+=n.runtime)})),e},Iy.prototype._resetRuntimes=function(){this._tasks.forAll((t=>t.runtime=0))},Iy.prototype._getRunning=function(){const t=new Map;if(this._tasks.forAll((e=>{e.needsUpdate&&t.set(e.name,(t.get(e.name)||0)+1)})),0===t.size)return null;let e="";return t.forEach(((t,n)=>{e=1<t?e+` ${t}x ${n}`:e+` ${n}`})),e},Iy.prototype._runIdle=function(){this._run()},Iy.prototype._runInteracting=function(){this._run()},Iy.prototype._runAnimating=function(){this._run()},Iy.prototype._updateLoad=function(){const t=this._tasks.reduce(((t,e)=>e.needsUpdate?++t:t),0);this._load=.9*this._load+t*(1-.9)},Iy.prototype._schedule=function(){for(this._runQueue.filterInPlace((t=>!!t.needsUpdate||(t.schedulePriority=t.basePriority,!1))),this._tasks.forAll((t=>{0===t.basePriority&&t.needsUpdate&&!this._runQueue.includes(t)&&t.blockFrame!==this._frameNumber&&this._runQueue.unshift(t)}));0===this._runQueue.length;){let t=!1;if(this._tasks.forAll((e=>{if(e.needsUpdate&&0!==e.schedulePriority&&0!==e.basePriority&&e.blockFrame!==this._frameNumber)if(t=!0,1===e.schedulePriority)e.schedulePriority=0,this._runQueue.push(e);else--e.schedulePriority})),!t)return this._updatingChanged(),!1}return this._updatingChanged(),!0},Iy.prototype._run=function(){const t=this._budget.now();this._startFrameTaskTimes();do{for(;0<this._runQueue.length;){var e=this._budget.now();const r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)===cy&&(r.blockFrame=this._frameNumber)}catch(t){console.log(`Exception in task "${r.name}"`+t)}!this._budget.hasProgressed&&r.blockFrame!==this._frameNumber&&r.needsUpdate&&(r.blockFrame=this._frameNumber),r.schedulePriority=r.basePriority;var n=this._budget.now()-e;if(r.runtime+=n,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+n),this._debug&&n>2*this._budget.budget&&console.log("Task",r.name,"used",n,"of max",this._budget.budget,"ms"),0>=this._budget.remaining)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-t)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-t)},Iy.prototype._startFrameTaskTimes=function(){for(const t of Object.keys(fy))this._frameTaskTimes.set(fy[t],0)},Iy.prototype._recordFrameTaskTimes=function(t){this._frameTaskTimes.forEach(((t,e)=>this.performanceInfo.tasks.get(e).record(t))),this.performanceInfo.total.record(t)},Object.defineProperties(Cy.prototype,{done:{get:function(){return this._done}},budget:{get:function(){return this._budget}},state:{get:function(){return this._state}},enabled:{get:function(){return this._enabled},set:function(t){this._enabled=t}},remaining:{get:function(){return Math.max(this._budget-this.elapsed,0)}},elapsed:{get:function(){return performance.now()-this._begin}},hasProgressed:{get:function(){return this._progressed}}}),Cy.prototype.run=function(t){return!this.done&&(!0===t()&&this.madeProgress(),!0)},Cy.prototype.madeProgress=function(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled},Cy.prototype.reset=function(t,e){this._begin=this.now(),this._budget=t,this._state=e,this.resetProgress()},Cy.prototype.now=function(){return performance.now()},Cy.prototype.resetProgress=function(){this._done=this._progressed=!1};const Ey=(()=>{const t=new Cy;return t.enabled=!1,t})();function by(t,e,n,r){this._scheduler=t,this.name=e,this._basePriority=r,this.runtime=this.blockFrame=0,this._queue=new uy,this._handles=new Ed,this.schedulePriority=this._basePriority,this._task=sy.signal(null!=n?n:this._queue),this._handles.add(Jg.when((()=>{this.task.running}),(e=>t.taskRunningChanged(e))))}function vy(){}Object.defineProperties(by.prototype,{task:{get:function(){return this._task.value}},updating:{get:function(){return this._queue.running}},basePriority:{get:function(){return this._basePriority}},priority:{get:function(){return this.name},set:function(t){this.setPriority(t)}},needsUpdate:{get:function(){return this.updating||this.task.running}}}),by.prototype.remove=function(){this.processQueue(Ey),this._scheduler.removeTask(this),this.schedule=xy.schedule,this.reschedule=xy.reschedule,this._handles.destroy()},by.prototype.setPriority=function(t){this.name=t;let e=Ay(t);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=e),this._basePriority=e},by.prototype.schedule=function(t,e,n){return this._queue.push(t,e,n)},by.prototype.reschedule=function(t,e,n){return this._queue.unshift(t,e,n)},by.prototype.processQueue=function(t){this._queue.runTask(t)},vy.prototype.remove=function(){},vy.prototype.processQueue=function(){},vy.prototype.schedule=function(e,n,r){try{if(t.isAborted(n)){const e=t.createAbortError();return r?Promise.resolve(r(e)):Promise.reject(e)}return t.when(e(Ey))}catch(t){return Promise.reject(t)}},vy.prototype.reschedule=function(t,e,n){return this.schedule(t,e,n)};const xy=new vy;function wy(t){kr.defined("scene",t.scene),kr.defined("globe",t.globe),this._scene=t.scene,this._globe=t.globe,this._running=!0,this._frameTask=this._scene._frameScheduler.registerTask(fy.GET_ELEVATION,this),this._requestManager=new Qy}Object.defineProperties(wy.prototype,{clampEnabled:{get:function(){return!!this._scene._hasLayerCoveredMap||this._globe.terrainProvider!==this._globe._defaultTerrainProvider}},clampTerrainEnabled:{get:function(){return!this._scene._hasLayerCoveredMap&&this._globe.terrainProvider!==this._globe._defaultTerrainProvider}},clampModelEnabled:{get:function(){return this._scene._hasLayerCoveredMap}},running:{get:function(){return this._running}}});var My=new Mc,By=new ui;function _y(t,e,n){if(!e.visible||null==e.coveredMap)return 0;var r=t._scene,i=t._globe._ellipsoid;n.height=9e3,ui.toCartesian(n,_s.WGS84,My.origin),i.geodeticSurfaceNormal(My.origin,My.direction),Wr.negate(My.direction,My.direction);let o=e.intersect(My,r);if(!Or(o))return;const s=o.point;return ui.fromCartesian(s,_s.WGS84,By),By.height}function Sy(t){this._set=new Set,this.carto=ui.clone(t)}function Qy(){this._map=new Map}function Ry(t){this.owner=t.owner,this.callbackParameter=t.callbackParameter,this.requesCarto=t.requesCarto,this.key=this._getRequesKey()}wy.prototype.getElevation=function(t){let e=this._globe.getHeight(t);if(void 0===e&&(e=0),this.clampModelEnabled){var n=e;let r=this._scene.layers.layerQueue;for(let i of r)e=_y(this,i,t),Or(e)&&n<e&&(n=e);return n}return e},wy.prototype.cancelRequestor=function(t){this._requestManager.remove(t)},wy.prototype.requestElevation=function(t){this._requestManager.add(t)},wy.prototype._resetIterator=function(){this._iterators=null},wy.prototype.runTask=function(t){for(this._iterators||(this._iterators=function*(t){var e=t.iterableIterator();for(let t=e.next();!t.done;t=e.next())yield t.value[1]}(this._requestManager));!t.done;){t.madeProgress();let e=this._iterators.next();if(!0===e.done)return this._resetIterator(),this._requestManager.clear(),cy;let n=e.value;if(n.size>0){let t=this.getElevation(n.carto);n.updateElevation(t),n.clear()}}return cy},Object.defineProperties(Sy.prototype,{size:{get:function(){return this._set.size}}}),Sy.prototype.add=function(t){this._set.add(t)},Sy.prototype.remove=function(t){this._set.delete(t)},Sy.prototype.updateElevation=function(t){for(let e of this._set)e.updateElevation(t)},Sy.prototype.clear=function(){this._set.clear()},Qy.prototype.iterableIterator=function(){return this._map.entries()},Qy.prototype.add=function(t){let e=t.key,n=null;this._map.has(e)?n=this._map.get(e):(n=new Sy(t.requesCarto),this._map.set(e,n)),n.add(t)},Qy.prototype.remove=function(t){let e=t.key,n=this._map.get(e);n&&n.remove(t)},Qy.prototype.clear=function(){this._map.clear()},Ry.prototype._getRequesKey=function(){return this.requesCarto.longitude+"_"+this.requesCarto.latitude},Ry.prototype.updateElevation=function(t){this.owner&&this.owner.updateElevationRequestor(t,this.callbackParameter)};const Dy=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ty=Dy(void 0,(function(){return Ty.toString().search("(((.+)+)+)+$").toString().constructor(Ty).search("(((.+)+)+)+$")}));Ty();const Oy=new ui,Ny=new ui;let Fy=new Wr,zy=new ed;function ky(t,e,n,r,i,o,s){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2,o.x,o.y,o.z,s.x,s.y,s.z)}class Ly{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Ph,this.indexArray=new Jh,this.segments=new Up,this.programConfigurations=new op(kp.members,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){const i=this.layers[0],o=[];let s=null;"circle"===i.type&&(s=i.layout.get("circle-sort-key")),this.createLngLatHeightArray();for(const{feature:e,id:r,index:i,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=td(e,t);var a=new oh(this.zoom);if(!this.layers[0]._featureFilter.filter(a,c,n))continue;const l=s?s.evaluate(c,{},n):void 0,h={id:r,properties:e.properties,type:e.type,sourceLayerIndex:u,index:i,geometry:t?c.geometry:Wp(e,n),patterns:{},sortKey:l};o.push(h)}s&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:s}=r,a=t[o].feature;this.addFeature(r,i,o,e.availableImages,n,null,e.crs),e.featureIndex.insert(a,i,o,s,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.heightDirty}upload(t){(!this.uploaded||this.heightDirty)&&(void 0===this.layoutVertexBuffer?(this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,kp.members,!0),this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray)):Uf.copyFromArrayView(this.layoutVertexBuffer,this.layoutVertexArray.arrayBuffer,0),this.heightDirty=!1,this.globeExtVertexArray&&this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=Uf.toVertexBuffer(t,this.globeExtVertexArray,circleGlobeAttributesExt.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,r,i,o,s){for(const n of e)for(const e of n){const n=e.x,r=e.y;if(n<0||n>=Ic||r<0||r>=Ic)continue;const o=bl(s,n,r,i);let a=vl(s,o,Ny);this.lngLatHeightArray.emplaceBack(a.longitude,a.latitude,0);const u=ed.fromCartesian(o),c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),l=c.vertexLength;ky(this.layoutVertexArray,n,r,-1,-1,u.high,u.low),ky(this.layoutVertexArray,n,r,1,-1,u.high,u.low),ky(this.layoutVertexArray,n,r,1,1,u.high,u.low),ky(this.layoutVertexArray,n,r,-1,1,u.high,u.low),this.indexArray.emplaceBack(l,l+1,l+2),this.indexArray.emplaceBack(l,l+2,l+3),c.vertexLength+=4,c.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}createLngLatHeightArray(){this.lngLatHeightArray=new MA,this.heightDirty=!0}correctHeight(t,e,n){this._elevationProvider=t,this._crs=e,this.createElevationRequestors(n);for(let e=0;e<this.elevationRequestorArray.length;e++){let n=this.elevationRequestorArray[e];t.requestElevation(n)}}createElevationRequestors(t){if(!this.elevationRequestorArray){this.elevationRequestorArray=[];for(let e=0;e<this.lngLatHeightArray.length;e++){let n=this.lngLatHeightArray.get(e),r=n.lng,i=n.lat,o=ui.fromRadians(r,i,0);this.elevationRequestorArray.push(new Ry({owner:this,callbackParameter:{lngLatHeightIndex:e,heightCorrectedCallback:t},requesCarto:o}))}}}updateElevationRequestor(t,e){let n=this.lngLatHeightArray.get(e.lngLatHeightIndex),r=n.lng,i=n.lat;ui.fromRadians(r,i,0,Oy),Oy.height=t+1,ui.toCartesian(Oy,void 0,Fy);let o=this._crs;(o.sceneMode==gc.COLUMBUS_VIEW||o.sceneMode==gc.SCENE2D)&&(Fy=pc.convertToColumbusCartesian(Fy)),ed.fromCartesian(Fy,zy),n.height=Oy.height;let s=this.layoutVertexArray.bytesPerElement/4,a=4*s,u=e.lngLatHeightIndex,c=this.layoutVertexArray.float32;for(let t=0;t<4;t++){let e=u*a+t*s;c[e+1]=zy.high.x,c[e+2]=zy.high.y,c[e+3]=zy.high.z,c[e+4]=zy.low.x,c[e+5]=zy.low.y,c[e+6]=zy.low.z}this.heightDirty=!0,e.heightCorrectedCallback()}}Fl(Ly,"CircleBucket",{omit:["layers"]});const Py=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),jy=Py(void 0,(function(){return jy.toString().search("(((.+)+)+)+$").toString().constructor(jy).search("(((.+)+)+)+$")}));function Uy(t,e){for(let n=0;n<t.length;n++)if(Xy(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Xy(t,e[n]))return!0;return!!Hy(t,e)}function qy(t,e){if(1===t.length)return Vy(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(Xy(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(Vy(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Hy(t,e[n]))return!0;return!1}function Ky(t,e,n){if(t.length>1){if(Hy(t,e))return!0;for(let r=0;r<e.length;r++)if(Yy(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(Yy(t[r],e,n))return!0;return!1}function Hy(t,e){if(0===t.length||0===e.length)return!1;for(let s=0;s<t.length-1;s++){const a=t[s],u=t[s+1];for(let t=0;t<e.length-1;t++){const s=e[t],c=e[t+1];if(r=u,ml(n=a,i=s,o=c)!==ml(r,i,o)&&ml(n,r,i)!==ml(n,r,o))return!0}}var n,r,i,o;return!1}function Yy(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let n=1;n<e.length;n++){if(Gy(t,e[n-1],e[n])<r)return!0}return!1}function Gy(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function Vy(t,e){let n,r,i,o=!1;for(let s=0;s<t.length;s++){n=t[s];for(let t=0,s=n.length-1;t<n.length;s=t++)r=n[t],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function Xy(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],s=t[i];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function Wy(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=ml(t,e,n[0]);return o!==ml(t,e,n[1])||o!==ml(t,e,n[2])||o!==ml(t,e,n[3])}jy();const Jy=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Zy=Jy(void 0,(function(){return Zy.toString().search("(((.+)+)+)+$").toString().constructor(Zy).search("(((.+)+)+)+$")}));function $y(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function tm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function em(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=Tr.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const s=[];for(let e=0;e<t.length;e++){const n=t[e];s.push(n.sub(o))}return s}function nm(t,e,n,r){const i=Tr.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}Zy();const rm=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),im=rm(void 0,(function(){return im.toString().search("(((.+)+)+)+$").toString().constructor(im).search("(((.+)+)+)+$")}));im();const om=new Ih({"circle-sort-key":new yh(gp.layout_circle["circle-sort-key"])});var sm,am={paint:new Ih({"circle-radius":new yh(gp.paint_circle["circle-radius"]),"circle-color":new yh(gp.paint_circle["circle-color"]),"circle-blur":new yh(gp.paint_circle["circle-blur"]),"circle-opacity":new yh(gp.paint_circle["circle-opacity"]),"circle-translate":new gh(gp.paint_circle["circle-translate"]),"circle-translate-anchor":new gh(gp.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gh(gp.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gh(gp.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yh(gp.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yh(gp.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yh(gp.paint_circle["circle-stroke-opacity"])}),layout:om},um=(sm=!0,function(t,e){var n=sm?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return sm=!1,n}),cm=um(void 0,(function(){return cm.toString().search("(((.+)+)+)+$").toString().constructor(cm).search("(((.+)+)+)+$")}));function lm(){}cm();var hm=1e-6,Am="undefined"!=typeof Float32Array?Float32Array:Array,fm=Math.random;var pm=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var dm=Object.freeze({EPSILON:hm,get ARRAY_TYPE(){return Am},RANDOM:fm,setMatrixArrayType:function(t){Am=t},toRadian:function(t){return t*pm},equals:function(t,e){return Math.abs(t-e)<=hm*Math.max(1,Math.abs(t),Math.abs(e))}});function gm(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*a+o*u,t[1]=i*a+s*u,t[2]=r*c+o*l,t[3]=i*c+s*l,t}function ym(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var mm=gm,Im=ym,Cm=Object.freeze({create:function(){var t=new Am(4);return Am!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new Am(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,e,n,r){var i=new Am(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},set:function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-i*r;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:gm,rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=i*u+s*a,t[2]=r*-a+o*u,t[3]=i*-a+s*u,t},scale:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1];return t[0]=r*a,t[1]=i*a,t[2]=o*u,t[3]=s*u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:ym,exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=hm*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=hm*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=hm*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=hm*Math.max(1,Math.abs(o),Math.abs(c))},multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},mul:mm,sub:Im});function Em(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1],h=n[2],A=n[3],f=n[4],p=n[5];return t[0]=r*c+o*l,t[1]=i*c+s*l,t[2]=r*h+o*A,t[3]=i*h+s*A,t[4]=r*f+o*p+a,t[5]=i*f+s*p+u,t}function bm(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var vm=Em,xm=bm,wm=Object.freeze({create:function(){var t=new Am(6);return Am!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new Am(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,e,n,r,i,o){var s=new Am(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s},set:function(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*a-o*s)*u,t[5]=(r*s-n*a)*u,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:Em,rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+s*c,t[2]=r*-c+o*l,t[3]=i*-c+s*l,t[4]=a,t[5]=u,t},scale:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=s*l,t[4]=a,t[5]=u,t},translate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=r*c+o*l+a,t[5]=i*c+s*l+u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},subtract:bm,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],c=e[1],l=e[2],h=e[3],A=e[4],f=e[5];return Math.abs(n-u)<=hm*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=hm*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=hm*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=hm*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-A)<=hm*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(a-f)<=hm*Math.max(1,Math.abs(a),Math.abs(f))},mul:vm,sub:xm});function Mm(){var t=new Am(9);return Am!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Bm(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],A=n[0],f=n[1],p=n[2],d=n[3],g=n[4],y=n[5],m=n[6],I=n[7],C=n[8];return t[0]=A*r+f*s+p*c,t[1]=A*i+f*a+p*l,t[2]=A*o+f*u+p*h,t[3]=d*r+g*s+y*c,t[4]=d*i+g*a+y*l,t[5]=d*o+g*u+y*h,t[6]=m*r+I*s+C*c,t[7]=m*i+I*a+C*l,t[8]=m*o+I*u+C*h,t}function _m(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var Sm=Bm,Qm=_m,Rm=Object.freeze({create:Mm,fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new Am(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,n,r,i,o,s,a,u){var c=new Am(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=s,c[7]=a,c[8]=u,c},set:function(t,e,n,r,i,o,s,a,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=l*s-a*c,A=-l*o+a*u,f=c*o-s*u,p=n*h+r*A+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-l*r+i*c)*p,t[2]=(a*r-i*s)*p,t[3]=A*p,t[4]=(l*n-i*u)*p,t[5]=(-a*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*u)*p,t[8]=(s*n-r*o)*p,t):null},adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8];return t[0]=s*l-a*c,t[1]=i*c-r*l,t[2]=r*a-i*s,t[3]=a*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*a,t[6]=o*c-s*u,t[7]=r*u-n*c,t[8]=n*s-r*o,t},determinant:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*i+s*a)+r*(u*i-o*a)},multiply:Bm,translate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],A=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=A*r+f*s+c,t[7]=A*i+f*a+l,t[8]=A*o+f*u+h,t},rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],A=Math.sin(n),f=Math.cos(n);return t[0]=f*r+A*s,t[1]=f*i+A*a,t[2]=f*o+A*u,t[3]=f*s-A*r,t[4]=f*a-A*i,t[5]=f*u-A*o,t[6]=c,t[7]=l,t[8]=h,t},scale:function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,c=n*s,l=r*s,h=r*a,A=i*s,f=i*a,p=i*u,d=o*s,g=o*a,y=o*u;return t[0]=1-h-p,t[3]=l-y,t[6]=A+g,t[1]=l+y,t[4]=1-c-p,t[7]=f-d,t[2]=A-g,t[5]=f+d,t[8]=1-c-h,t},normalFromMat4:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],A=e[10],f=e[11],p=e[12],d=e[13],g=e[14],y=e[15],m=n*a-r*s,I=n*u-i*s,C=n*c-o*s,E=r*u-i*a,b=r*c-o*a,v=i*c-o*u,x=l*d-h*p,w=l*g-A*p,M=l*y-f*p,B=h*g-A*d,_=h*y-f*d,S=A*y-f*g,Q=m*S-I*_+C*B+E*M-b*w+v*x;return Q?(Q=1/Q,t[0]=(a*S-u*_+c*B)*Q,t[1]=(u*M-s*S-c*w)*Q,t[2]=(s*_-a*M+c*x)*Q,t[3]=(i*_-r*S-o*B)*Q,t[4]=(n*S-i*M+o*w)*Q,t[5]=(r*M-n*_-o*x)*Q,t[6]=(d*v-g*b+y*E)*Q,t[7]=(g*C-p*v-y*I)*Q,t[8]=(p*b-d*C+y*m)*Q,t):null},projection:function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},subtract:_m,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=e[0],A=e[1],f=e[2],p=e[3],d=e[4],g=e[5],y=e[6],m=e[7],I=e[8];return Math.abs(n-h)<=hm*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-A)<=hm*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(i-f)<=hm*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=hm*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-d)<=hm*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-g)<=hm*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=hm*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-m)<=hm*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-I)<=hm*Math.max(1,Math.abs(l),Math.abs(I))},mul:Sm,sub:Qm});function Dm(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tm(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],A=e[9],f=e[10],p=e[11],d=e[12],g=e[13],y=e[14],m=e[15],I=n[0],C=n[1],E=n[2],b=n[3];return t[0]=I*r+C*a+E*h+b*d,t[1]=I*i+C*u+E*A+b*g,t[2]=I*o+C*c+E*f+b*y,t[3]=I*s+C*l+E*p+b*m,I=n[4],C=n[5],E=n[6],b=n[7],t[4]=I*r+C*a+E*h+b*d,t[5]=I*i+C*u+E*A+b*g,t[6]=I*o+C*c+E*f+b*y,t[7]=I*s+C*l+E*p+b*m,I=n[8],C=n[9],E=n[10],b=n[11],t[8]=I*r+C*a+E*h+b*d,t[9]=I*i+C*u+E*A+b*g,t[10]=I*o+C*c+E*f+b*y,t[11]=I*s+C*l+E*p+b*m,I=n[12],C=n[13],E=n[14],b=n[15],t[12]=I*r+C*a+E*h+b*d,t[13]=I*i+C*u+E*A+b*g,t[14]=I*o+C*c+E*f+b*y,t[15]=I*s+C*l+E*p+b*m,t}function Om(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=r+r,u=i+i,c=o+o,l=r*a,h=r*u,A=r*c,f=i*u,p=i*c,d=o*c,g=s*a,y=s*u,m=s*c;return t[0]=1-(f+d),t[1]=h+m,t[2]=A-y,t[3]=0,t[4]=h-m,t[5]=1-(l+d),t[6]=p+g,t[7]=0,t[8]=A+y,t[9]=p-g,t[10]=1-(l+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Nm(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Fm(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(u,c,l),t}function zm(t,e){var n=new Am(3);Fm(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],s=e[0]*r,a=e[1]*i,u=e[2]*o,c=e[4]*r,l=e[5]*i,h=e[6]*o,A=e[8]*r,f=e[9]*i,p=e[10]*o,d=s+l+p,g=0;return d>0?(g=2*Math.sqrt(d+1),t[3]=.25*g,t[0]=(h-f)/g,t[1]=(A-u)/g,t[2]=(a-c)/g):s>l&&s>p?(g=2*Math.sqrt(1+s-l-p),t[3]=(h-f)/g,t[0]=.25*g,t[1]=(a+c)/g,t[2]=(A+u)/g):l>p?(g=2*Math.sqrt(1+l-s-p),t[3]=(A-u)/g,t[0]=(a+c)/g,t[1]=.25*g,t[2]=(h+f)/g):(g=2*Math.sqrt(1+p-s-l),t[3]=(a-c)/g,t[0]=(A+u)/g,t[1]=(h+f)/g,t[2]=.25*g),t}function km(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var Lm=Tm,Pm=km,jm=Object.freeze({create:function(){var t=new Am(16);return Am!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var e=new Am(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d){var g=new Am(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=s,g[7]=a,g[8]=u,g[9]=c,g[10]=l,g[11]=h,g[12]=A,g[13]=f,g[14]=p,g[15]=d,g},set:function(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=A,t[12]=f,t[13]=p,t[14]=d,t[15]=g,t},identity:Dm,transpose:function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],A=e[10],f=e[11],p=e[12],d=e[13],g=e[14],y=e[15],m=n*a-r*s,I=n*u-i*s,C=n*c-o*s,E=r*u-i*a,b=r*c-o*a,v=i*c-o*u,x=l*d-h*p,w=l*g-A*p,M=l*y-f*p,B=h*g-A*d,_=h*y-f*d,S=A*y-f*g,Q=m*S-I*_+C*B+E*M-b*w+v*x;return Q?(Q=1/Q,t[0]=(a*S-u*_+c*B)*Q,t[1]=(i*_-r*S-o*B)*Q,t[2]=(d*v-g*b+y*E)*Q,t[3]=(A*b-h*v-f*E)*Q,t[4]=(u*M-s*S-c*w)*Q,t[5]=(n*S-i*M+o*w)*Q,t[6]=(g*C-p*v-y*I)*Q,t[7]=(l*v-A*C+f*I)*Q,t[8]=(s*_-a*M+c*x)*Q,t[9]=(r*M-n*_-o*x)*Q,t[10]=(p*b-d*C+y*m)*Q,t[11]=(h*C-l*b-f*m)*Q,t[12]=(a*w-s*B-u*x)*Q,t[13]=(n*B-r*w+i*x)*Q,t[14]=(d*I-p*E-g*m)*Q,t[15]=(l*E-h*I+A*m)*Q,t):null},adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],A=e[10],f=e[11],p=e[12],d=e[13],g=e[14],y=e[15];return t[0]=a*(A*y-f*g)-h*(u*y-c*g)+d*(u*f-c*A),t[1]=-(r*(A*y-f*g)-h*(i*y-o*g)+d*(i*f-o*A)),t[2]=r*(u*y-c*g)-a*(i*y-o*g)+d*(i*c-o*u),t[3]=-(r*(u*f-c*A)-a*(i*f-o*A)+h*(i*c-o*u)),t[4]=-(s*(A*y-f*g)-l*(u*y-c*g)+p*(u*f-c*A)),t[5]=n*(A*y-f*g)-l*(i*y-o*g)+p*(i*f-o*A),t[6]=-(n*(u*y-c*g)-s*(i*y-o*g)+p*(i*c-o*u)),t[7]=n*(u*f-c*A)-s*(i*f-o*A)+l*(i*c-o*u),t[8]=s*(h*y-f*d)-l*(a*y-c*d)+p*(a*f-c*h),t[9]=-(n*(h*y-f*d)-l*(r*y-o*d)+p*(r*f-o*h)),t[10]=n*(a*y-c*d)-s*(r*y-o*d)+p*(r*c-o*a),t[11]=-(n*(a*f-c*h)-s*(r*f-o*h)+l*(r*c-o*a)),t[12]=-(s*(h*g-A*d)-l*(a*g-u*d)+p*(a*A-u*h)),t[13]=n*(h*g-A*d)-l*(r*g-i*d)+p*(r*A-i*h),t[14]=-(n*(a*g-u*d)-s*(r*g-i*d)+p*(r*u-i*a)),t[15]=n*(a*A-u*h)-s*(r*A-i*h)+l*(r*u-i*a),t},determinant:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],A=t[11],f=t[12],p=t[13],d=t[14],g=t[15];return(e*s-n*o)*(h*g-A*d)-(e*a-r*o)*(l*g-A*p)+(e*u-i*o)*(l*d-h*p)+(n*a-r*s)*(c*g-A*f)-(n*u-i*s)*(c*d-h*f)+(r*u-i*a)*(c*p-l*f)},multiply:Tm,translate:function(t,e,n){var r,i,o,s,a,u,c,l,h,A,f,p,d=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*d+e[4]*g+e[8]*y+e[12],t[13]=e[1]*d+e[5]*g+e[9]*y+e[13],t[14]=e[2]*d+e[6]*g+e[10]*y+e[14],t[15]=e[3]*d+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],A=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=A,t[10]=f,t[11]=p,t[12]=r*d+a*g+h*y+e[12],t[13]=i*d+u*g+A*y+e[13],t[14]=o*d+c*g+f*y+e[14],t[15]=s*d+l*g+p*y+e[15]),t},scale:function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate:function(t,e,n,r){var i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v,x,w,M,B,_=r[0],S=r[1],Q=r[2],R=Math.hypot(_,S,Q);return R<hm?null:(_*=R=1/R,S*=R,Q*=R,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],u=e[1],c=e[2],l=e[3],h=e[4],A=e[5],f=e[6],p=e[7],d=e[8],g=e[9],y=e[10],m=e[11],I=_*_*s+o,C=S*_*s+Q*i,E=Q*_*s-S*i,b=_*S*s-Q*i,v=S*S*s+o,x=Q*S*s+_*i,w=_*Q*s+S*i,M=S*Q*s-_*i,B=Q*Q*s+o,t[0]=a*I+h*C+d*E,t[1]=u*I+A*C+g*E,t[2]=c*I+f*C+y*E,t[3]=l*I+p*C+m*E,t[4]=a*b+h*v+d*x,t[5]=u*b+A*v+g*x,t[6]=c*b+f*v+y*x,t[7]=l*b+p*v+m*x,t[8]=a*w+h*M+d*B,t[9]=u*w+A*M+g*B,t[10]=c*w+f*M+y*B,t[11]=l*w+p*M+m*B,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],A=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=s*i+l*r,t[6]=a*i+h*r,t[7]=u*i+A*r,t[8]=c*i-o*r,t[9]=l*i-s*r,t[10]=h*i-a*r,t[11]=A*i-u*r,t},rotateY:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],A=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=s*i-l*r,t[2]=a*i-h*r,t[3]=u*i-A*r,t[8]=o*r+c*i,t[9]=s*r+l*i,t[10]=a*r+h*i,t[11]=u*r+A*i,t},rotateZ:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],A=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=s*i+l*r,t[2]=a*i+h*r,t[3]=u*i+A*r,t[4]=c*i-o*r,t[5]=l*i-s*r,t[6]=h*i-a*r,t[7]=A*i-u*r,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,n){var r,i,o,s=n[0],a=n[1],u=n[2],c=Math.hypot(s,a,u);return c<hm?null:(s*=c=1/c,a*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=s*s*o+i,t[1]=a*s*o+u*r,t[2]=u*s*o-a*r,t[3]=0,t[4]=s*a*o-u*r,t[5]=a*a*o+i,t[6]=u*a*o+s*r,t[7]=0,t[8]=s*u*o+a*r,t[9]=a*u*o-s*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:Om,fromQuat2:function(t,e){var n=new Am(3),r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=r*r+i*i+o*o+s*s;return h>0?(n[0]=2*(a*s+l*r+u*o-c*i)/h,n[1]=2*(u*s+l*i+c*r-a*o)/h,n[2]=2*(c*s+l*o+a*i-u*r)/h):(n[0]=2*(a*s+l*r+u*o-c*i),n[1]=2*(u*s+l*i+c*r-a*o),n[2]=2*(c*s+l*o+a*i-u*r)),Om(t,e,n),t},getTranslation:Nm,getScaling:Fm,getRotation:zm,fromRotationTranslationScale:function(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],u=i+i,c=o+o,l=s+s,h=i*u,A=i*c,f=i*l,p=o*c,d=o*l,g=s*l,y=a*u,m=a*c,I=a*l,C=r[0],E=r[1],b=r[2];return t[0]=(1-(p+g))*C,t[1]=(A+I)*C,t[2]=(f-m)*C,t[3]=0,t[4]=(A-I)*E,t[5]=(1-(h+g))*E,t[6]=(d+y)*E,t[7]=0,t[8]=(f+m)*b,t[9]=(d-y)*b,t[10]=(1-(h+p))*b,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,i){var o=e[0],s=e[1],a=e[2],u=e[3],c=o+o,l=s+s,h=a+a,A=o*c,f=o*l,p=o*h,d=s*l,g=s*h,y=a*h,m=u*c,I=u*l,C=u*h,E=r[0],b=r[1],v=r[2],x=i[0],w=i[1],M=i[2],B=(1-(d+y))*E,_=(f+C)*E,S=(p-I)*E,Q=(f-C)*b,R=(1-(A+y))*b,D=(g+m)*b,T=(p+I)*v,O=(g-m)*v,N=(1-(A+d))*v;return t[0]=B,t[1]=_,t[2]=S,t[3]=0,t[4]=Q,t[5]=R,t[6]=D,t[7]=0,t[8]=T,t[9]=O,t[10]=N,t[11]=0,t[12]=n[0]+x-(B*x+Q*w+T*M),t[13]=n[1]+w-(_*x+R*w+O*M),t[14]=n[2]+M-(S*x+D*w+N*M),t[15]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,c=n*s,l=r*s,h=r*a,A=i*s,f=i*a,p=i*u,d=o*s,g=o*a,y=o*u;return t[0]=1-h-p,t[1]=l+y,t[2]=A-g,t[3]=0,t[4]=l-y,t[5]=1-c-p,t[6]=f+d,t[7]=0,t[8]=A+g,t[9]=f-d,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,i,o,s){var a=1/(n-e),u=1/(i-r),c=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0,t},perspective:function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(s-a)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:function(t,e,n,r,i,o,s){var a=1/(e-n),u=1/(r-i),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(s+o)*c,t[15]=1,t},lookAt:function(t,e,n,r){var i,o,s,a,u,c,l,h,A,f,p=e[0],d=e[1],g=e[2],y=r[0],m=r[1],I=r[2],C=n[0],E=n[1],b=n[2];return Math.abs(p-C)<hm&&Math.abs(d-E)<hm&&Math.abs(g-b)<hm?Dm(t):(l=p-C,h=d-E,A=g-b,i=m*(A*=f=1/Math.hypot(l,h,A))-I*(h*=f),o=I*(l*=f)-y*A,s=y*h-m*l,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=h*s-A*o,u=A*i-l*s,c=l*o-h*i,(f=Math.hypot(a,u,c))?(a*=f=1/f,u*=f,c*=f):(a=0,u=0,c=0),t[0]=i,t[1]=a,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=A,t[11]=0,t[12]=-(i*p+o*d+s*g),t[13]=-(a*p+u*d+c*g),t[14]=-(l*p+h*d+A*g),t[15]=1,t)},targetTo:function(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=r[0],u=r[1],c=r[2],l=i-n[0],h=o-n[1],A=s-n[2],f=l*l+h*h+A*A;f>0&&(l*=f=1/Math.sqrt(f),h*=f,A*=f);var p=u*A-c*h,d=c*l-a*A,g=a*h-u*l;return(f=p*p+d*d+g*g)>0&&(p*=f=1/Math.sqrt(f),d*=f,g*=f),t[0]=p,t[1]=d,t[2]=g,t[3]=0,t[4]=h*g-A*d,t[5]=A*p-l*g,t[6]=l*d-h*p,t[7]=0,t[8]=l,t[9]=h,t[10]=A,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:km,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],A=t[10],f=t[11],p=t[12],d=t[13],g=t[14],y=t[15],m=e[0],I=e[1],C=e[2],E=e[3],b=e[4],v=e[5],x=e[6],w=e[7],M=e[8],B=e[9],_=e[10],S=e[11],Q=e[12],R=e[13],D=e[14],T=e[15];return Math.abs(n-m)<=hm*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-I)<=hm*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(i-C)<=hm*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(o-E)<=hm*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-b)<=hm*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-v)<=hm*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-x)<=hm*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-w)<=hm*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-M)<=hm*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-B)<=hm*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(A-_)<=hm*Math.max(1,Math.abs(A),Math.abs(_))&&Math.abs(f-S)<=hm*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(p-Q)<=hm*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(d-R)<=hm*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(g-D)<=hm*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(y-T)<=hm*Math.max(1,Math.abs(y),Math.abs(T))},mul:Lm,sub:Pm});function Um(){var t=new Am(3);return Am!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qm(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Km(t,e,n){var r=new Am(3);return r[0]=t,r[1]=e,r[2]=n,r}function Hm(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ym(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Gm(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Vm(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function Xm(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Wm(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Jm(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Zm(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $m(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=i*u-o*a,t[1]=o*s-r*u,t[2]=r*a-i*s,t}var tI,eI=Hm,nI=Ym,rI=Gm,iI=Vm,oI=Xm,sI=qm,aI=Wm,uI=(tI=Um(),function(t,e,n,r,i,o){var s,a;for(!e&&(e=3),!n&&(n=0),a=r?Math.min(r*e+n,t.length):t.length,s=n;s<a;s+=e)tI[0]=t[s],tI[1]=t[s+1],tI[2]=t[s+2],i(tI,tI,o),t[s]=tI[0],t[s+1]=tI[1],t[s+2]=tI[2];return t}),cI=Object.freeze({create:Um,clone:function(t){var e=new Am(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length:qm,fromValues:Km,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:Hm,multiply:Ym,divide:Gm,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:Vm,squaredDistance:Xm,squaredLength:Wm,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:Jm,dot:Zm,cross:$m,lerp:function(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t},hermite:function(t,e,n,r,i,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,c=s*(o-1),l=s*(3-2*o);return t[0]=e[0]*a+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*a+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*a+n[2]*u+r[2]*c+i[2]*l,t},bezier:function(t,e,n,r,i,o){var s=1-o,a=s*s,u=o*o,c=a*s,l=3*o*a,h=3*u*s,A=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*A,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*A,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*A,t},random:function(t,e){e=e||1;var n=2*fm()*Math.PI,r=2*fm()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},transformMat4:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t},transformMat3:function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},transformQuat:function(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],u=e[1],c=e[2],l=i*c-o*u,h=o*a-r*c,A=r*u-i*a,f=i*A-o*h,p=o*l-r*A,d=r*h-i*l,g=2*s;return l*=g,h*=g,A*=g,f*=2,p*=2,d*=2,t[0]=a+l+f,t[1]=u+h+p,t[2]=c+A+d,t},rotateX:function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateY:function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateZ:function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},angle:function(t,e){var n=Km(t[0],t[1],t[2]),r=Km(e[0],e[1],e[2]);Jm(n,n),Jm(r,r);var i=Zm(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=hm*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=hm*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=hm*Math.max(1,Math.abs(i),Math.abs(a))},sub:eI,mul:nI,div:rI,dist:iI,sqrDist:oI,len:sI,sqrLen:aI,forEach:uI});function lI(){var t=new Am(4);return Am!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function hI(t){var e=new Am(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function AI(t,e,n,r){var i=new Am(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function fI(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function pI(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function dI(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function gI(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function yI(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function mI(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function II(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function CI(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function EI(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function bI(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function vI(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function xI(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t}function wI(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function MI(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t}function BI(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function _I(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=hm*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=hm*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=hm*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=hm*Math.max(1,Math.abs(o),Math.abs(c))}var SI,QI=gI,RI=yI,DI=mI,TI=CI,OI=EI,NI=bI,FI=vI,zI=(SI=lI(),function(t,e,n,r,i,o){var s,a;for(!e&&(e=4),!n&&(n=0),a=r?Math.min(r*e+n,t.length):t.length,s=n;s<a;s+=e)SI[0]=t[s],SI[1]=t[s+1],SI[2]=t[s+2],SI[3]=t[s+3],i(SI,SI,o),t[s]=SI[0],t[s+1]=SI[1],t[s+2]=SI[2],t[s+3]=SI[3];return t}),kI=Object.freeze({create:lI,clone:hI,fromValues:AI,copy:fI,set:pI,add:dI,subtract:gI,multiply:yI,divide:mI,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:II,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},distance:CI,squaredDistance:EI,length:bI,squaredLength:vI,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:xI,dot:wI,cross:function(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],s=n[0]*r[3]-n[3]*r[0],a=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],h=e[1],A=e[2],f=e[3];return t[0]=h*c-A*u+f*a,t[1]=-l*c+A*s-f*o,t[2]=l*u-h*s+f*i,t[3]=-l*a+h*o-A*i,t},lerp:MI,random:function(t,e){var n,r,i,o,s,a;e=e||1;do{s=(n=2*fm()-1)*n+(r=2*fm()-1)*r}while(s>=1);do{a=(i=2*fm()-1)*i+(o=2*fm()-1)*o}while(a>=1);var u=Math.sqrt((1-s)/a);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t},transformMat4:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t},transformQuat:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*r+a*o-u*i,h=c*i+u*r-s*o,A=c*o+s*i-a*r,f=-s*r-a*i-u*o;return t[0]=l*c+f*-s+h*-u-A*-a,t[1]=h*c+f*-a+A*-s-l*-u,t[2]=A*c+f*-u+l*-a-h*-s,t[3]=e[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:BI,equals:_I,sub:QI,mul:RI,div:DI,dist:TI,sqrDist:OI,len:NI,sqrLen:FI,forEach:zI});function LI(){var t=new Am(4);return Am!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function PI(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function jI(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+s*a+i*c-o*u,t[1]=i*l+s*u+o*a-r*c,t[2]=o*l+s*c+r*u-i*a,t[3]=s*l-r*a-i*u-o*c,t}function UI(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*a,t[1]=i*u+o*a,t[2]=o*u-i*a,t[3]=s*u-r*a,t}function qI(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*a,t[1]=i*u+s*a,t[2]=o*u+r*a,t[3]=s*u-i*a,t}function KI(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*a,t[1]=i*u-r*a,t[2]=o*u+s*a,t[3]=s*u-o*a,t}function HI(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=Math.sqrt(n*n+r*r+i*i),a=Math.exp(o),u=s>0?a*Math.sin(s)/s:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=a*Math.cos(s),t}function YI(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=Math.sqrt(n*n+r*r+i*i),a=s>0?Math.atan2(s,o)/s:0;return t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function GI(t,e,n,r){var i,o,s,a,u,c=e[0],l=e[1],h=e[2],A=e[3],f=n[0],p=n[1],d=n[2],g=n[3];return(o=c*f+l*p+h*d+A*g)<0&&(o=-o,f=-f,p=-p,d=-d,g=-g),1-o>hm?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,u=Math.sin(r*i)/s):(a=1-r,u=r),t[0]=a*c+u*f,t[1]=a*l+u*p,t[2]=a*h+u*d,t[3]=a*A+u*g,t}function VI(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}var XI,WI,JI,ZI,$I,tC,eC=hI,nC=AI,rC=fI,iC=pI,oC=dI,sC=jI,aC=II,uC=wI,cC=MI,lC=bI,hC=lC,AC=vI,fC=AC,pC=xI,dC=BI,gC=_I,yC=(ZI=Um(),$I=Km(1,0,0),tC=Km(0,1,0),function(t,e,n){var r=Zm(e,n);return r<-.999999?($m(ZI,$I,e),sI(ZI)<1e-6&&$m(ZI,tC,e),Jm(ZI,ZI),PI(t,ZI,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):($m(ZI,e,n),t[0]=ZI[0],t[1]=ZI[1],t[2]=ZI[2],t[3]=1+r,pC(t,t))}),mC=(WI=LI(),JI=LI(),function(t,e,n,r,i,o){return GI(WI,e,i,o),GI(JI,n,r,o),GI(t,WI,JI,2*o*(1-o)),t}),IC=(XI=Mm(),function(t,e,n,r){return XI[0]=n[0],XI[3]=n[1],XI[6]=n[2],XI[1]=r[0],XI[4]=r[1],XI[7]=r[2],XI[2]=-e[0],XI[5]=-e[1],XI[8]=-e[2],pC(t,VI(t,XI))}),CC=Object.freeze({create:LI,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:PI,getAxisAngle:function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>hm?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},getAngle:function(t,e){var n=uC(t,e);return Math.acos(2*n*n-1)},multiply:jI,rotateX:UI,rotateY:qI,rotateZ:KI,calculateW:function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},exp:HI,ln:YI,pow:function(t,e,n){return YI(t,e),aC(t,t,n),HI(t,t),t},slerp:GI,random:function(t){var e=fm(),n=fm(),r=fm(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat3:VI,fromEuler:function(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-s*a*c,t[1]=s*a*l+o*u*c,t[2]=s*u*c-o*a*l,t[3]=s*u*l+o*a*c,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:eC,fromValues:nC,copy:rC,set:iC,add:oC,mul:sC,scale:aC,dot:uC,lerp:cC,length:lC,len:hC,squaredLength:AC,sqrLen:fC,normalize:pC,exactEquals:dC,equals:gC,rotationTo:yC,sqlerp:mC,setAxes:IC});function EC(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],s=e[0],a=e[1],u=e[2],c=e[3];return t[0]=s,t[1]=a,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*a,t[5]=i*c+o*s-r*u,t[6]=o*c+r*a-i*s,t[7]=-r*s-i*a-o*u,t}function bC(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var vC=rC;var xC=rC;function wC(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[4],u=n[5],c=n[6],l=n[7],h=e[4],A=e[5],f=e[6],p=e[7],d=n[0],g=n[1],y=n[2],m=n[3];return t[0]=r*m+s*d+i*y-o*g,t[1]=i*m+s*g+o*d-r*y,t[2]=o*m+s*y+r*g-i*d,t[3]=s*m-r*d-i*g-o*y,t[4]=r*l+s*a+i*c-o*u+h*m+p*d+A*y-f*g,t[5]=i*l+s*u+o*a-r*c+A*m+p*g+f*d-h*y,t[6]=o*l+s*c+r*u-i*a+f*m+p*y+h*g-A*d,t[7]=s*l-r*a-i*u-o*c+p*m-h*d-A*g-f*y,t}var MC=wC;var BC=uC;var _C=lC,SC=_C,QC=AC,RC=QC;var DC=Object.freeze({create:function(){var t=new Am(8);return Am!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var e=new Am(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues:function(t,e,n,r,i,o,s,a){var u=new Am(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=s,u[7]=a,u},fromRotationTranslationValues:function(t,e,n,r,i,o,s){var a=new Am(8);a[0]=t,a[1]=e,a[2]=n,a[3]=r;var u=.5*i,c=.5*o,l=.5*s;return a[4]=u*r+c*n-l*e,a[5]=c*r+l*t-u*n,a[6]=l*r+u*e-c*t,a[7]=-u*t-c*e-l*n,a},fromRotationTranslation:EC,fromTranslation:function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,e){var n=LI();zm(n,e);var r=new Am(3);return Nm(r,e),EC(t,n,r),t},copy:bC,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,e,n,r,i,o,s,a,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t},getReal:vC,getDual:function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setReal:xC,setDual:function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation:function(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],s=-e[0],a=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*s+r*u-i*a),t[1]=2*(r*c+o*a+i*s-n*u),t[2]=2*(i*c+o*u+n*a-r*s),t},translate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],h=e[5],A=e[6],f=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=s*a+i*c-o*u+l,t[5]=s*u+o*a-r*c+h,t[6]=s*c+r*u-i*a+A,t[7]=-r*a-i*u-o*c+f,t},rotateX:function(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=a*s+l*r+u*o-c*i,A=u*s+l*i+c*r-a*o,f=c*s+l*o+a*i-u*r,p=l*s-a*r-u*i-c*o;return UI(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=h*s+p*r+A*o-f*i,t[5]=A*s+p*i+f*r-h*o,t[6]=f*s+p*o+h*i-A*r,t[7]=p*s-h*r-A*i-f*o,t},rotateY:function(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=a*s+l*r+u*o-c*i,A=u*s+l*i+c*r-a*o,f=c*s+l*o+a*i-u*r,p=l*s-a*r-u*i-c*o;return qI(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=h*s+p*r+A*o-f*i,t[5]=A*s+p*i+f*r-h*o,t[6]=f*s+p*o+h*i-A*r,t[7]=p*s-h*r-A*i-f*o,t},rotateZ:function(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=a*s+l*r+u*o-c*i,A=u*s+l*i+c*r-a*o,f=c*s+l*o+a*i-u*r,p=l*s-a*r-u*i-c*o;return KI(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=h*s+p*r+A*o-f*i,t[5]=A*s+p*i+f*r-h*o,t[6]=f*s+p*o+h*i-A*r,t[7]=p*s-h*r-A*i-f*o,t},rotateByQuatAppend:function(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],u=e[1],c=e[2],l=e[3];return t[0]=a*s+l*r+u*o-c*i,t[1]=u*s+l*i+c*r-a*o,t[2]=c*s+l*o+a*i-u*r,t[3]=l*s-a*r-u*i-c*o,a=e[4],u=e[5],c=e[6],l=e[7],t[4]=a*s+l*r+u*o-c*i,t[5]=u*s+l*i+c*r-a*o,t[6]=c*s+l*o+a*i-u*r,t[7]=l*s-a*r-u*i-c*o,t},rotateByQuatPrepend:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+s*a+i*c-o*u,t[1]=i*l+s*u+o*a-r*c,t[2]=o*l+s*c+r*u-i*a,t[3]=s*l-r*a-i*u-o*c,a=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+s*a+i*c-o*u,t[5]=i*l+s*u+o*a-r*c,t[6]=o*l+s*c+r*u-i*a,t[7]=s*l-r*a-i*u-o*c,t},rotateAroundAxis:function(t,e,n,r){if(Math.abs(r)<hm)return bC(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),s=o*n[0]/i,a=o*n[1]/i,u=o*n[2]/i,c=Math.cos(r),l=e[0],h=e[1],A=e[2],f=e[3];t[0]=l*c+f*s+h*u-A*a,t[1]=h*c+f*a+A*s-l*u,t[2]=A*c+f*u+l*a-h*s,t[3]=f*c-l*s-h*a-A*u;var p=e[4],d=e[5],g=e[6],y=e[7];return t[4]=p*c+y*s+d*u-g*a,t[5]=d*c+y*a+g*s-p*u,t[6]=g*c+y*u+p*a-d*s,t[7]=y*c-p*s-d*a-g*u,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},multiply:wC,mul:MC,scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},dot:BC,lerp:function(t,e,n,r){var i=1-r;return BC(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t},invert:function(t,e){var n=QC(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},length:_C,len:SC,squaredLength:QC,sqrLen:RC,normalize:function(t,e){var n=QC(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,s=e[3]/n,a=e[4],u=e[5],c=e[6],l=e[7],h=r*a+i*u+o*c+s*l;t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=(a-r*h)/n,t[5]=(u-i*h)/n,t[6]=(c-o*h)/n,t[7]=(l-s*h)/n}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=e[0],h=e[1],A=e[2],f=e[3],p=e[4],d=e[5],g=e[6],y=e[7];return Math.abs(n-l)<=hm*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=hm*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-A)<=hm*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(o-f)<=hm*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=hm*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-d)<=hm*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-g)<=hm*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-y)<=hm*Math.max(1,Math.abs(c),Math.abs(y))}});function TC(){var t=new Am(2);return Am!=Float32Array&&(t[0]=0,t[1]=0),t}function OC(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function NC(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function FC(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function zC(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function kC(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function LC(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function PC(t){var e=t[0],n=t[1];return e*e+n*n}var jC,UC=LC,qC=OC,KC=NC,HC=FC,YC=zC,GC=kC,VC=PC,XC=(jC=TC(),function(t,e,n,r,i,o){var s,a;for(!e&&(e=2),!n&&(n=0),a=r?Math.min(r*e+n,t.length):t.length,s=n;s<a;s+=e)jC[0]=t[s],jC[1]=t[s+1],i(jC,jC,o),t[s]=jC[0],t[s+1]=jC[1];return t}),WC=Object.freeze({create:TC,clone:function(t){var e=new Am(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var n=new Am(2);return n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:OC,multiply:NC,divide:FC,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},distance:zC,squaredDistance:kC,length:LC,squaredLength:PC,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},lerp:function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},random:function(t,e){e=e||1;var n=2*fm()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},transformMat2:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},transformMat2d:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},transformMat3:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},transformMat4:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},rotate:function(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],s=Math.sin(r),a=Math.cos(r);return t[0]=i*a-o*s+n[0],t[1]=i*s+o*a+n[1],t},angle:function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n*n+r*r;s>0&&(s=1/Math.sqrt(s));var a=i*i+o*o;a>0&&(a=1/Math.sqrt(a));var u=(n*i+r*o)*s*a;return u>1?0:u<-1?Math.PI:Math.acos(u)},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals:function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=hm*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=hm*Math.max(1,Math.abs(r),Math.abs(o))},len:UC,sub:qC,mul:KC,div:HC,dist:YC,sqrDist:GC,sqrLen:VC,forEach:XC});lm.glMatrix=dm,lm.mat2=Cm,lm.mat2d=wm,lm.mat3=Rm,lm.mat4=jm,lm.quat=CC,lm.quat2=DC,lm.vec2=WC,lm.vec3=cI,lm.vec4=kI;const JC=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ZC=JC(void 0,(function(){return ZC.toString().search("(((.+)+)+)+$").toString().constructor(ZC).search("(((.+)+)+)+$")}));ZC();const $C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),tE=$C(void 0,(function(){return tE.toString().search("(((.+)+)+)+$").toString().constructor(tE).search("(((.+)+)+)+$")}));tE();class eE{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof sE?new sE(t.lng,t.lat):sE.convert(t),this}setSouthWest(t){return this._sw=t instanceof sE?new sE(t.lng,t.lat):sE.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof sE)r=t,i=t;else{if(!(t instanceof eE))return Array.isArray(t)?t.every(Array.isArray)?this.extend(eE.convert(t)):this.extend(sE.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new sE(r.lng,r.lat),this._ne=new sE(i.lng,i.lat)),this}getCenter(){return new sE((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new sE(this.getWest(),this.getNorth())}getSouthEast(){return new sE(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=sE.convert(t),r=this._sw.lat<=n&&n<=this._ne.lat;let i=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=e&&e>=this._ne.lng),r&&i}static convert(t){return!t||t instanceof eE?t:new eE(t)}}const nE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),rE=nE(void 0,(function(){return rE.toString().search("(((.+)+)+)+$").toString().constructor(rE).search("(((.+)+)+)+$")}));rE();const iE=6371008.8,oE=2*Math.PI*iE;class sE{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");this.lng=+t,this.lat=+e,this.lat>90||this.lat}wrap(){return new sE(cl(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat("+this.lng+", "+this.lat+")"}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return iE*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new eE(new sE(this.lng-n,this.lat-e),new sE(this.lng+n,this.lat+e))}static convert(t){if(t instanceof sE)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new sE(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new sE(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const aE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),uE=aE(void 0,(function(){return uE.toString().search("(((.+)+)+)+$").toString().constructor(uE).search("(((.+)+)+)+$")}));function cE(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function lE(t,e){return t/(n=e,oE*Math.cos(n*Math.PI/180));var n}function hE(t){return 360*t-180}function AE(t){const e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}uE();const fE=85.051129,pE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),dE=pE(void 0,(function(){return dE.toString().search("(((.+)+)+)+$").toString().constructor(dE).search("(((.+)+)+)+$")}));dE();var gE=new sa,yE=new Wr;function mE(t,e,n,r){const i=bl(t.crs,e,n,r),o=[0,0,0,1];lm.vec4.transformMat4(o,[i.x,i.y,i.z,1],t.sceneViewProjMatrix);const s=o[3];o[0]/=s,o[1]/=s,o[2]/=s;var a=new Wr(o[0],o[1],o[2]),u={x:0,y:0,width:t.width,height:t.height},c=sa.computeViewportTransformation(u,0,1,gE),l=sa.multiplyByPoint(c,a,yE);return new Tr(l.x,l.y)}function IE(t,e,n,r,i,o,s,a,u){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(u*=t.pixelToTileUnitsFactor);const c=t.tileID.canonical;n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const i of e)for(const e of i){const i=e.add(a),f=0,p=o?i:mE(n,i.x,i.y,c),d=o?t.tilespaceRays.map((t=>bE(t,f))):t.tilespaceGeometry.map((t=>mE(n,t.x,t.y,c))),g=lm.vec4.transformMat4([],[p.x,p.y,0,1],r);if(!s&&o&&(u*=g[3]/n.cameraToCenterDistance),o){const t=AE((e.y/Ic+c.y)/(1<<c.z));u/=n.projection.pixelsPerMeter(t,1)/lE(1,t)}if(A=u,Xy(l=d,h=p)||Yy(h,l,A))return!0}var l,h,A;return!1}const CE=lm.vec3.fromValues(0,0,0),EE=lm.vec3.fromValues(0,0,1);function bE(t,e){const n=lm.vec3.create();return CE[2]=e,t.intersectsPlane(CE,EE,n),new Tr(n[0],n[1])}const vE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),xE=vE(void 0,(function(){return xE.toString().search("(((.+)+)+)+$").toString().constructor(xE).search("(((.+)+)+)+$")}));xE();var wE={paint:new Ih({"heatmap-radius":new yh(gp.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yh(gp.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gh(gp.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mh(gp.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gh(gp.paint_heatmap["heatmap-opacity"])})};const ME=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),BE=ME(void 0,(function(){return BE.toString().search("(((.+)+)+)+$").toString().constructor(BE).search("(((.+)+)+)+$")}));function _E(t,{width:e,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*n*r);return t.width=e,t.height=n,t.data=i,t}function SE(t,e,n){const{width:r,height:i}=e;r===t.width&&i===t.height||(QE(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=e.data)}function QE(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,a=e.data;for(let u=0;u<i.height;u++){const c=((n.y+u)*t.width+n.x)*o,l=((r.y+u)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)a[l+t]=s[c+t]}return e}BE();class RE{constructor(t,e){_E(this,t,1,e)}resize(t){SE(this,new RE(t),1)}clone(){return new RE({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){QE(t,e,n,r,i,1)}}class DE{constructor(t,e){_E(this,t,4,e)}resize(t){SE(this,new DE(t),4)}replace(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t}clone(){return new DE({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){QE(t,e,n,r,i,4)}}Fl(RE,"AlphaImage"),Fl(DE,"RGBAImage");const TE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),OE=TE(void 0,(function(){return OE.toString().search("(((.+)+)+)+$").toString().constructor(OE).search("(((.+)+)+)+$")}));function NE(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new DE({width:n,height:r});var o;o=n,Math.log(o)/Math.LN2%1!=0&&console.log("renderColorRamp width must be isPowerOfTwo.");const s=(n,r,o)=>{e[t.evaluationKey]=o;const s=t.expression.evaluate(evaluationGlobal);i.data[n+r+0]=Math.floor(255*s.r/s.a),i.data[n+r+1]=Math.floor(255*s.g/s.a),i.data[n+r+2]=Math.floor(255*s.b/s.a),i.data[n+r+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,i=0;e<r;++e,i+=4*n)for(let r=0,o=0;r<n;r++,o+=4){const a=r/(n-1),{start:u,end:c}=t.clips[e];s(i,o,u*(1-a)+c*a)}else for(let t=0,e=0;t<n;t++,e+=4){s(0,e,t/(n-1))}return i}OE();const FE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),zE=FE(void 0,(function(){return zE.toString().search("(((.+)+)+)+$").toString().constructor(zE).search("(((.+)+)+)+$")}));zE();const kE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),LE=kE(void 0,(function(){return LE.toString().search("(((.+)+)+)+$").toString().constructor(LE).search("(((.+)+)+)+$")}));LE();const PE=Sh([{name:"a_pos",components:2,type:"Int16"}],4).members;function jE(t,e,n,r,i){UE(t,e,n||0,r||t.length-1,i||KE)}function UE(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);UE(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i)}var l=t[e],h=n,A=r;for(qE(t,n,e),i(t[r],l)>0&&qE(t,n,r);h<A;){for(qE(t,h,A),h++,A--;i(t[h],l)<0;)h++;for(;i(t[A],l)>0;)A--}0===i(t[n],l)?qE(t,n,A):qE(t,++A,r),A<=e&&(n=A+1),e<=A&&(r=A-1)}}function qE(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function KE(t,e){return t<e?-1:t>e?1:0}var HE,YE=(HE=!0,function(t,e){var n=HE?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return HE=!1,n}),GE=YE(void 0,(function(){return GE.toString().search("(((.+)+)+)+$").toString().constructor(GE).search("(((.+)+)+)+$")}));function VE(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,s=void 0;n<r;i=n++)o=t[n],e+=((s=t[i]).x-o.x)*(o.y+s.y);return e}function XE(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],s=0;s<n;s++){var a=VE(t[s]);0!==a&&(t[s].area=Math.abs(a),void 0===i&&(i=a<0),i===a<0?(r&&o.push(r),r=[t[s]]):r.push(t[s]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(jE(o[u],e,1,o[u].length-1,WE),o[u]=o[u].slice(0,e));return o}function WE(t,e){return e.area-t.area}GE();const JE=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ZE=JE(void 0,(function(){return ZE.toString().search("(((.+)+)+)+$").toString().constructor(ZE).search("(((.+)+)+)+$")}));function $E(t,e,n){const r=n.patternDependencies;let i=!1;for(const n of e){const e=n.paint.get(t+"-pattern");!e.isConstant()&&(i=!0);const o=e.constantOr(null);o&&(i=!0,r[o]=!0)}return i}function tb(t,e,n,r,i){const o=i.patternDependencies;for(const s of e){const e=s.paint.get(t+"-pattern").value;if("constant"!==e.kind){let t=e.evaluate({zoom:r},n,{},i.availableImages);t=t&&t.name?t.name:t,o[t]=!0,n.patterns[s.id]=t}}return n}ZE();const eb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),nb=eb(void 0,(function(){return nb.toString().search("(((.+)+)+)+$").toString().constructor(nb).search("(((.+)+)+)+$")}));nb();class rb{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Th,this.indexArray=new Jh,this.indexArray2=new uA,this.programConfigurations=new op(PE,t.layers,t.zoom),this.segments=new Up,this.segments2=new Up,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,r){this.hasPattern=$E("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:r,id:s,index:a,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=td(r,t);if(!this.layers[0]._featureFilter.filter(new oh(this.zoom),c,n))continue;const l=i?i.evaluate(c,{},n,e.availableImages):void 0,h={id:s,properties:r.properties,type:r.type,sourceLayerIndex:u,index:a,geometry:t?c.geometry:Wp(r,n),patterns:{},sortKey:l};o.push(h)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:s}=r;if(this.hasPattern){const t=tb("fill",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,{},e.availableImages);const a=t[o].feature;e.featureIndex.insert(a,i,o,s,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){if(!this.uploaded){if(null==this.layoutVertexArray)return;this.layoutVertexArray.length>0&&(this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,PE),this.indexArray.length>0&&(this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray)),this.indexArray2.length>0&&(this.indexBuffer2=Uf.toIndexBuffer(t,this.indexArray2)))}this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&!this.layoutVertexBuffer.isDestroyed()&&(this.layoutVertexBuffer.destroy(),this.indexBuffer&&!this.indexBuffer.isDestroyed()&&this.indexBuffer.destroy(),this.indexBuffer2&&!this.indexBuffer2.isDestroyed()&&this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i,o){for(const t of XE(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const e of t){if(0===e.length)continue;if(e!==t[0]&&o.push(i.length/2),e.length>Up.MAX_VERTEX_ARRAY_LENGTH&&this.indexArray instanceof Jh){let t=this.indexArray,e=this.indexArray2;this.indexArray=new Zh,this.indexArray2=new cA,this.indexArray.copyFrom3ui6(t),this.indexArray2.copyFrom2ui4(e)}const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(r+e.length-1,r),i.push(e[0].x),i.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(r+t-1,r+t),i.push(e[t].x),i.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const s=Bc(i,o);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(r+s[t],r+s[t+1],r+s[t+2]);n.vertexLength+=e,n.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}}Fl(rb,"FillBucket",{omit:["layers","patternFeatures"]});const ib=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ob=ib(void 0,(function(){return ob.toString().search("(((.+)+)+)+$").toString().constructor(ob).search("(((.+)+)+)+$")}));ob();const sb=new Ih({"fill-sort-key":new yh(gp.layout_fill["fill-sort-key"])});var ab={paint:new Ih({"fill-antialias":new gh(gp.paint_fill["fill-antialias"]),"fill-opacity":new yh(gp.paint_fill["fill-opacity"]),"fill-color":new yh(gp.paint_fill["fill-color"]),"fill-outline-color":new yh(gp.paint_fill["fill-outline-color"]),"fill-translate":new gh(gp.paint_fill["fill-translate"]),"fill-translate-anchor":new gh(gp.paint_fill["fill-translate-anchor"]),"fill-pattern":new yh(gp.paint_fill["fill-pattern"])}),layout:sb};const ub=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),cb=ub(void 0,(function(){return cb.toString().search("(((.+)+)+)+$").toString().constructor(cb).search("(((.+)+)+)+$")}));cb();const lb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),hb=lb(void 0,(function(){return hb.toString().search("(((.+)+)+)+$").toString().constructor(hb).search("(((.+)+)+)+$")}));hb();const Ab=Sh([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),fb=Sh([{name:"a_centroid_pos",components:2,type:"Uint16"}]),pb=Sh([{name:"a_ecef_pos_high",components:3,type:"Float32"},{name:"a_ecef_pos_low",components:3,type:"Float32"},{name:"a_pos_normal_3",components:3,type:"Float32"}]),db=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),gb=db(void 0,(function(){return gb.toString().search("(((.+)+)+)+$").toString().constructor(gb).search("(((.+)+)+)+$")}));gb();const yb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mb=yb(void 0,(function(){return mb.toString().search("(((.+)+)+)+$").toString().constructor(mb).search("(((.+)+)+)+$")}));mb();let Ib=new Wr;const Cb=["Unknown","Point","LineString","Polygon"],Eb=Math.pow(2,13);function bb(t,e,n,r,i,o,s,a){t.emplaceBack((e<<1)+s,(n<<1)+o,(Math.floor(r*Eb)<<1)+i,Math.round(a))}function vb(t,e,n,r){t.emplaceBack(e.x,e.y,e.z,n.x,n.y,n.z,r.x,r.y,r.z)}class xb{constructor(){this.acc=new Tr(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Tr(t.x,t.y),this.max=new Tr(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,r=this.max;t.x<n.x?n.x=t.x:t.x>r.x&&(r.x=t.x),t.y<n.y?n.y=t.y:t.y>r.y&&(r.y=t.y),((0===t.x||t.x===Ic)&&t.x===e.x)!=((0===t.y||t.y===Ic)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,De(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>Ic!=t.x>Ic&&this.addBorderIntersection(1,De(e.y,t.y,(Ic-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,De(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>Ic!=t.y>Ic&&this.addBorderIntersection(3,De(e.x,t.x,(Ic-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){!this.borders&&(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new Tr(0,0)}span(){return new Tr(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class wb{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Nh,this.centroidVertexArray=new bA,this.indexArray=new Jh,this.programConfigurations=new op(Ab.members,t.layers,t.zoom),this.segments=new Up,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,r){this.features=[],this.hasPattern=$E("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=40075017,n=t.y/(1<<t.z),r=Math.exp(Math.PI*(1-2*n));return 2*e*r/(r*r+1)/Ic/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:s,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,u=td(i,t);if(!this.layers[0]._featureFilter.filter(new oh(this.zoom),u,n))continue;const c={id:o,sourceLayerIndex:a,index:s,geometry:t?u.geometry:Wp(i,n),properties:i.properties,type:i.type,patterns:{}},l=this.layoutVertexArray.length;this.hasPattern?this.features.push(tb("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,c.geometry,s,n,{},e.availableImages,r,e.crs),e.featureIndex.insert(i,c.geometry,s,a,this.index,l)}this.sortBorders()}addFeatures(t,e,n,r,i){for(const o of this.features){const{geometry:s}=o;this.addFeature(o,s,o.index,e,n,r,i,t.crs)}this.sortBorders()}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){if(!this.uploaded){if(null==this.layoutVertexArray)return;this.layoutVertexArray.length>0&&(this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,Ab.members),this.indexArray.length>0&&(this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray)),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=Uf.toVertexBuffer(t,this.layoutVertexExtArray,pb.members,!0)))}this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=Uf.toVertexBuffer(this.centroidVertexArray,fb.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&!this.layoutVertexBuffer.isDestroyed()&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i,o,s,a){const u=[new Tr(0,0),new Tr(Ic,Ic)];s.projection;const c=this.enableTerrain?new xb:null,l="Polygon"===Cb[t.type];!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new iA);const h=XE(e,500);for(let t=h.length-1;t>=0;t--){const e=h[t];(0===e.length||((A=e[0]).every((t=>t.x<=0))||A.every((t=>t.x>=Ic))||A.every((t=>t.y<=0))||A.every((t=>t.y>=Ic))))&&h.splice(t,1)}var A;let f;f=[];for(const t of h)f.push({polygon:t,bounds:u});const p=l?this.edgeRadius:0;for(const{polygon:t,bounds:e}of f){let n=0,i=0;for(const e of t)l&&!e[0].equals(e[e.length-1])&&e.push(e[0]),i+=l?e.length-1:e.length;const o=this.segments.prepareSegment((l?5:4)*i,this.layoutVertexArray,this.indexArray);if(l){const e=[],i=[];n=o.vertexLength;for(const n of t){let s,u;n.length&&n!==t[0]&&i.push(e.length/2);{const t=n[0];s=n[1].sub(t)._perp()._unit()}for(let t=1;t<n.length;t++){const i=n[t],c=n[t===n.length-1?1:t+1];let{x:l,y:h}=i;if(p){u=c.sub(i)._perp()._unit();const t=s.add(u)._unit(),e=s.x*t.x+s.y*t.y,n=p*Math.min(4,1/e);l+=n*t.x,h+=n*t.y,s=u}bb(this.layoutVertexArray,l,h,0,0,1,1,0),o.vertexLength++,e.push(i.x,i.y);const A=this.layoutVertexExtArray,f=bl(a,l,h,r),d=ed.fromCartesian(f);_s.WGS84.geodeticSurfaceNormal(f,Ib),vb(A,d.high,d.low,Ib)}}const s=Bc(e,i);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(n+s[t],n+s[t+2],n+s[t+1]),o.primitiveLength++}for(const i of t){c&&i.length&&c.startRing(i[0]);let t,s,u,h=i.length>4&&Qb(i[i.length-2],i[0],i[1]),A=p?Bb(i[i.length-2],i[0],i[1],p):0;{const t=i[0];s=i[1].sub(t)._perp()._unit()}let f=!0;for(let d=1,g=0;d<i.length;d++){let y=i[d-1],m=i[d];const I=i[d===i.length-1?1:d+1];if(c&&l&&c.currentPolyCount.top++,Sb(m,y,e)){p&&(s=I.sub(m)._perp()._unit(),f=!f);continue}c&&c.append(m,y);const C=m.sub(y)._perp(),E=C.x/(Math.abs(C.x)+Math.abs(C.y)),b=C.y>0?1:0,v=y.dist(m);if(g+v>32768&&(g=0),p){u=I.sub(m)._perp()._unit();let t=_b(y,m,I,Mb(s,u),p);isNaN(t)&&(t=0);const e=m.sub(y)._unit();y=y.add(e.mult(A))._round(),m=m.add(e.mult(-t))._round(),A=t,s=u}const x=o.vertexLength,w=i.length>4&&Qb(y,m,I);let M=Rb(g,h,f);if(bb(this.layoutVertexArray,y.x,y.y,E,b,0,0,M),bb(this.layoutVertexArray,y.x,y.y,E,b,0,1,M),g+=v,M=Rb(g,w,!f),h=w,bb(this.layoutVertexArray,m.x,m.y,E,b,0,0,M),bb(this.layoutVertexArray,m.x,m.y,E,b,0,1,M),o.vertexLength+=4,this.indexArray.emplaceBack(x+0,x+1,x+2),this.indexArray.emplaceBack(x+1,x+3,x+2),o.primitiveLength+=2,p){const r=n+(1===d?i.length-2:d-2),s=1===d?n:r+1;if(this.indexArray.emplaceBack(x+1,r,x+3),this.indexArray.emplaceBack(r,s,x+3),o.primitiveLength+=2,void 0===t&&(t=x),!Sb(I,i[d],e)){const e=d===i.length-1?t:o.vertexLength;this.indexArray.emplaceBack(x+2,x+3,e),this.indexArray.emplaceBack(x+3,e+1,e),this.indexArray.emplaceBack(x+3,s,e+1),o.primitiveLength+=3}f=!f}const B=this.layoutVertexExtArray,_=bl(a,y.x,y.y,r),S=bl(a,m.x,m.y,r),Q=ed.fromCartesian(_);_s.WGS84.geodeticSurfaceNormal(_,Ib),vb(B,Q.high,Q.low,Ib),vb(B,Q.high,Q.low,Ib);const R=ed.fromCartesian(S);_s.WGS84.geodeticSurfaceNormal(S,Ib),vb(B,R.high,R.low,Ib),vb(B,R.high,R.low,Ib)}l&&(n+=i.length-1)}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const t=c.borders,e=this.featuresOnBorder.push(c)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e,n=!0){let r,i;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);r=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(t.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i)}}}function Mb(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function Bb(t,e,n,r){const i=e.sub(t)._perp()._unit(),o=n.sub(e)._perp()._unit();return _b(t,e,n,Mb(i,o),r)}function _b(t,e,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(t.dist(e)/3,e.dist(n)/3,i*o/r)}function Sb(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function Qb(t,e,n){if(t.x<0||t.x>=Ic||e.x<0||e.x>=Ic||n.x<0||n.x>=Ic)return!1;const r=n.sub(e),i=r.perp(),o=t.sub(e),s=(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y)),a=i.x*o.x+i.y*o.y;return s>-.866&&a<0}function Rb(t,e,n){const r=e?2|t:-3&t;return n?1|r:-2&r}Fl(wb,"FillExtrusionBucket",{omit:["layers","features"]}),Fl(xb,"PartMetadata");const Db=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Tb=Db(void 0,(function(){return Tb.toString().search("(((.+)+)+)+$").toString().constructor(Tb).search("(((.+)+)+)+$")}));Tb();const Ob=new Ih({"fill-extrusion-edge-radius":new gh(gp["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Nb={paint:new Ih({"fill-extrusion-opacity":new gh(gp["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yh(gp["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gh(gp["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gh(gp["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yh(gp["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yh(gp["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yh(gp["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gh(gp["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new gh(gp["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new gh(gp["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new gh(gp["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Ob};const Fb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),zb=Fb(void 0,(function(){return zb.toString().search("(((.+)+)+)+$").toString().constructor(zb).search("(((.+)+)+)+$")}));zb();class kb extends Tr{constructor(t,e,n){super(t,e),this.z=n}}function Lb(t,e){return t.x*e.x+t.y*e.y}function Pb(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],s=t[0],a=i.sub(r),u=o.sub(r),c=s.sub(r),l=Lb(a,a),h=Lb(a,u),A=Lb(u,u),f=Lb(c,a),p=Lb(c,u),d=l*A-h*h,g=(A*f-h*p)/d,y=(l*p-h*f)/d,m=1-g-y,I=r.z*m+i.z*g+o.z*y;if(isFinite(I))return I}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}const jb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ub=jb(void 0,(function(){return Ub.toString().search("(((.+)+)+)+$").toString().constructor(Ub).search("(((.+)+)+)+$")}));Ub();const qb=Sh([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,Kb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Hb=Kb(void 0,(function(){return Hb.toString().search("(((.+)+)+)+$").toString().constructor(Hb).search("(((.+)+)+)+$")}));Hb();const Yb=Sh([{name:"a_packed",components:4,type:"Float32"}]).members,Gb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Vb=Gb(void 0,(function(){return Vb.toString().search("(((.+)+)+)+$").toString().constructor(Vb).search("(((.+)+)+)+$")}));Vb();const Xb=["Unknown","Point","LineString","Polygon"],Wb=Math.cos(Math.PI/180*37.5);class Jb{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Fh,this.layoutVertexArray2=new zh,this.indexArray=new Jh,this.programConfigurations=new op(qb,t.layers,t.zoom),this.segments=new Up,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){this.hasPattern=$E("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:e,id:r,index:s,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,u=td(e,t);if(!this.layers[0]._featureFilter.filter(new oh(this.zoom),u,n))continue;const c=i?i.evaluate(u,{},n):void 0,l={id:r,properties:e.properties,type:e.type,sourceLayerIndex:a,index:s,geometry:t?u.geometry:Wp(e),patterns:{},sortKey:c};o.push(l)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:s,featureIndex:a}=e,u=this.addConstantDashes(s);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:c}=r;if(u&&this.addFeatureDashes(r,s),this.hasPattern){const t=tb("line",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,s.positions,e.availableImages);const l=t[o].feature;a.insert(l,i,o,c,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)e=!0;else{const e=i.value,n=r.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let s,a;if("constant"===i.kind){if(s=i.value,!s)continue}else s=i.evaluate({zoom:n},t);a="constant"===o.kind?o.value:o.evaluate({zoom:n},t),e.addDash(s,a),t.patterns[r.id]=e.getKey(s,a)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){if(!this.uploaded){if(null==this.layoutVertexArray)return;0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=Uf.toVertexBuffer(this.layoutVertexArray2,Yb)),0!=this.layoutVertexArray.length&&(this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,qb),this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray))}this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&!this.layoutVertexBuffer.isDestroyed()&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")){return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}}addFeature(t,e,n,r,i,o){const s=this.layers[0].layout,a=s.get("line-join").evaluate(t,{}),u=s.get("line-cap").evaluate(t,{}),c=s.get("line-miter-limit"),l=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,a,u,c,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Xb[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let u=0;for(;u<a-1&&t[u].equals(t[u+1]);)u++;if(a<(s?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0;if(10*a>Up.MAX_VERTEX_ARRAY_LENGTH&&this.indexArray instanceof Jh){let t=this.indexArray;this.indexArray=new Zh,this.indexArray.copyFrom3ui6(t)}const l=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let h,A,f,p,d;this.e1=this.e2=-1,s&&(h=t[a-2],d=t[u].sub(h)._unit()._perp());for(let e=u;e<a;e++){if(f=e===a-1?s?t[u+1]:void 0:t[e+1],f&&t[e].equals(f))continue;d&&(p=d),h&&(A=h),h=t[e],d=f?f.sub(h)._unit()._perp():p,p=p||d;let g=p.add(d);(0!==g.x||0!==g.y)&&g._unit();const y=p.x*d.x+p.y*d.y,m=g.x*d.x+g.y*d.y,I=0!==m?1/m:1/0,C=2*Math.sqrt(2-2*m),E=m<Wb&&A&&f,b=p.x*d.y-p.y*d.x>0;if(E&&e>u){const t=h.dist(A);if(t>2*c){const e=h.sub(h.sub(A)._mult(c/t)._round());this.updateDistance(A,e),this.addCurrentVertex(e,p,0,0,l),A=e}}const v=A&&f;let x=v?n:s?"butt":r;if(v&&"round"===x&&(I<o?x="miter":I<=2&&(x="fakeround")),"miter"===x&&I>i&&(x="bevel"),"bevel"===x&&(I>2&&(x="flipbevel"),I<i&&(x="miter")),A&&this.updateDistance(A,h),"miter"===x)g._mult(I),this.addCurrentVertex(h,g,0,0,l);else if("flipbevel"===x){if(I>100)g=d.mult(-1);else{const t=I*p.add(d).mag()/p.sub(d).mag();g._perp()._mult(t*(b?-1:1))}this.addCurrentVertex(h,g,0,0,l),this.addCurrentVertex(h,g.mult(-1),0,0,l)}else if("bevel"===x||"fakeround"===x){const t=-Math.sqrt(I*I-1),e=b?t:0,n=b?0:t;if(A&&this.addCurrentVertex(h,p,e,n,l),"fakeround"===x){const t=Math.round(180*C/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=d.sub(p)._mult(n)._add(p)._unit()._mult(b?-1:1);this.addHalfVertex(h,r.x,r.y,!1,b,0,l)}}f&&this.addCurrentVertex(h,d,-e,-n,l)}else if("butt"===x)this.addCurrentVertex(h,g,0,0,l);else if("square"===x){const t=A?1:-1;!A&&this.addCurrentVertex(h,g,t,t,l),this.addCurrentVertex(h,g,0,0,l),A&&this.addCurrentVertex(h,g,t,t,l)}else"round"===x&&(A&&(this.addCurrentVertex(h,p,0,0,l),this.addCurrentVertex(h,p,1,1,l,!0)),f&&(this.addCurrentVertex(h,d,-1,-1,l,!0),this.addCurrentVertex(h,d,0,0,l)));if(E&&e<a-1){const t=h.dist(f);if(t>2*c){const e=h.add(f.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,d,0,0,l),h=e}}}}addCurrentVertex(t,e,n,r,i,o=!1){const s=e.x+e.y*n,a=e.y-e.x*n,u=-e.x+e.y*r,c=-e.y-e.x*r;this.addHalfVertex(t,s,a,o,!1,n,i),this.addHalfVertex(t,u,c,o,!0,-r,i)}addHalfVertex({x:t,y:e},n,r,i,o,s,a){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),o?this.e2=u:this.e1=u}updateScaledDistance(){if(this.lineClips){const t=this.lineClips.end-this.lineClips.start,e=this.totalDistance/t;this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Fl(Jb,"LineBucket",{omit:["layers","patternFeatures"]});const Zb=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),$b=Zb(void 0,(function(){return $b.toString().search("(((.+)+)+)+$").toString().constructor($b).search("(((.+)+)+)+$")}));$b();const tv=new Ih({"line-cap":new yh(gp.layout_line["line-cap"]),"line-join":new yh(gp.layout_line["line-join"]),"line-miter-limit":new gh(gp.layout_line["line-miter-limit"]),"line-round-limit":new gh(gp.layout_line["line-round-limit"]),"line-sort-key":new yh(gp.layout_line["line-sort-key"])});var ev={paint:new Ih({"line-opacity":new yh(gp.paint_line["line-opacity"]),"line-color":new yh(gp.paint_line["line-color"]),"line-translate":new gh(gp.paint_line["line-translate"]),"line-translate-anchor":new gh(gp.paint_line["line-translate-anchor"]),"line-width":new yh(gp.paint_line["line-width"]),"line-gap-width":new yh(gp.paint_line["line-gap-width"]),"line-offset":new yh(gp.paint_line["line-offset"]),"line-blur":new yh(gp.paint_line["line-blur"]),"line-dasharray":new yh(gp.paint_line["line-dasharray"]),"line-pattern":new yh(gp.paint_line["line-pattern"]),"line-gradient":new mh(gp.paint_line["line-gradient"]),"line-trim-offset":new gh(gp.paint_line["line-trim-offset"])}),layout:tv};const nv=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),rv=nv(void 0,(function(){return rv.toString().search("(((.+)+)+)+$").toString().constructor(rv).search("(((.+)+)+)+$")}));rv();const iv=new class extends yh{possiblyEvaluate(t,e){return e=new oh(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=hl({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(ev.paint.properties["line-width"].specification);iv.useIntegerZoom=!0;function ov(t,e){return e>0?e+2*t:t}const sv=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),av=sv(void 0,(function(){return av.toString().search("(((.+)+)+)+$").toString().constructor(av).search("(((.+)+)+)+$")}));av();const uv=Sh([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cv=Sh([{name:"a_projected_pos",components:4,type:"Float32"},{name:"a_ecef_pos_high",components:3,type:"Float32"},{name:"a_ecef_pos_low",components:3,type:"Float32"},{name:"a_shift",components:2,type:"Float32"}],4);Sh([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lv=Sh([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),hv=Sh([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Sh([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Av=Sh([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Sh([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Sh([{name:"triangle",components:3,type:"Uint16"}]),Sh([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Sh([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Sh([{type:"Float32",name:"offsetX"}]),Sh([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var fv,pv=(fv=!0,function(t,e){var n=fv?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return fv=!1,n}),dv=pv(void 0,(function(){return dv.toString().search("(((.+)+)+)+$").toString().constructor(dv).search("(((.+)+)+)+$")}));dv();var gv=24;const yv=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mv=yv(void 0,(function(){return mv.toString().search("(((.+)+)+)+$").toString().constructor(mv).search("(((.+)+)+)+$")}));mv();const Iv=128;function Cv(t,e){const{expression:n}=e;if("constant"===n.kind){return{kind:"constant",layoutSize:n.evaluate(new oh(t+1))}}if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const s=e[i],a=e[o];if("composite"===n.kind)return{kind:"composite",minZoom:s,maxZoom:a,interpolationType:r};return{kind:"camera",minZoom:s,maxZoom:a,minSize:n.evaluate(new oh(s)),maxSize:n.evaluate(new oh(a)),interpolationType:r}}}function Ev(t,{uSize:e,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===t.kind?r/Iv:"composite"===t.kind?De(r/Iv,i/Iv,n):e}function bv(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:s}=t,a=i?ul(en.interpolationFactor(i,e,o,s),0,1):0;"camera"===t.kind?r=De(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:r}}var vv,xv=(vv=!0,function(t,e){var n=vv?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return vv=!1,n}),wv=xv(void 0,(function(){return wv.toString().search("(((.+)+)+)+$").toString().constructor(wv).search("(((.+)+)+)+$")}));function Mv(t,e,n){return t.sections.forEach((function(t){var r,i,o;t.text=(r=t.text,i=n,"uppercase"===(o=e.layout.get("text-transform").evaluate(i,{}))?r=r.toLocaleUpperCase():"lowercase"===o&&(r=r.toLocaleLowerCase()),r)})),t}wv();var Bv,_v=(Bv=!0,function(t,e){var n=Bv?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Bv=!1,n}),Sv=_v(void 0,(function(){return Sv.toString().search("(((.+)+)+)+$").toString().constructor(Sv).search("(((.+)+)+)+$")}));Sv();var Qv,Rv=(Qv=!0,function(t,e){var n=Qv?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Qv=!1,n}),Dv=Rv(void 0,(function(){return Dv.toString().search("(((.+)+)+)+$").toString().constructor(Dv).search("(((.+)+)+)+$")}));Dv();var Tv=function(t){return t>=128&&t<=255},Ov=function(t){return t>=1536&&t<=1791},Nv=function(t){return t>=1872&&t<=1919},Fv=function(t){return t>=2208&&t<=2303},zv=function(t){return t>=4352&&t<=4607},kv=function(t){return t>=5120&&t<=5759},Lv=function(t){return t>=6320&&t<=6399},Pv=function(t){return t>=8192&&t<=8303},jv=function(t){return t>=8448&&t<=8527},Uv=function(t){return t>=8528&&t<=8591},qv=function(t){return t>=8960&&t<=9215},Kv=function(t){return t>=9216&&t<=9279},Hv=function(t){return t>=9280&&t<=9311},Yv=function(t){return t>=9312&&t<=9471},Gv=function(t){return t>=9632&&t<=9727},Vv=function(t){return t>=9728&&t<=9983},Xv=function(t){return t>=11008&&t<=11263},Wv=function(t){return t>=11904&&t<=12031},Jv=function(t){return t>=12032&&t<=12255},Zv=function(t){return t>=12272&&t<=12287},$v=function(t){return t>=12288&&t<=12351},tx=function(t){return t>=12352&&t<=12447},ex=function(t){return t>=12448&&t<=12543},nx=function(t){return t>=12544&&t<=12591},rx=function(t){return t>=12592&&t<=12687},ix=function(t){return t>=12688&&t<=12703},ox=function(t){return t>=12704&&t<=12735},sx=function(t){return t>=12736&&t<=12783},ax=function(t){return t>=12784&&t<=12799},ux=function(t){return t>=12800&&t<=13055},cx=function(t){return t>=13056&&t<=13311},lx=function(t){return t>=13312&&t<=19903},hx=function(t){return t>=19904&&t<=19967},Ax=function(t){return t>=19968&&t<=40959},fx=function(t){return t>=40960&&t<=42127},px=function(t){return t>=42128&&t<=42191},dx=function(t){return t>=43360&&t<=43391},gx=function(t){return t>=44032&&t<=55215},yx=function(t){return t>=55216&&t<=55295},mx=function(t){return t>=57344&&t<=63743},Ix=function(t){return t>=63744&&t<=64255},Cx=function(t){return t>=64336&&t<=65023},Ex=function(t){return t>=65040&&t<=65055},bx=function(t){return t>=65072&&t<=65103},vx=function(t){return t>=65104&&t<=65135},xx=function(t){return t>=65136&&t<=65279},wx=function(t){return t>=65280&&t<=65519};const Mx=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Bx=Mx(void 0,(function(){return Bx.toString().search("(((.+)+)+)+$").toString().constructor(Bx).search("(((.+)+)+)+$")}));function _x(t){for(const e of t)if(Dx(e.charCodeAt(0)))return!0;return!1}function Sx(t){for(const e of t)if(!Qx(e.charCodeAt(0)))return!1;return!0}function Qx(t){return!Ov(t)&&(!Nv(t)&&(!Fv(t)&&(!Cx(t)&&!xx(t))))}function Rx(t){return!(t<11904)&&(!!ox(t)||(!!nx(t)||(!!bx(t)||(!!Ix(t)||(!!cx(t)||(!!Wv(t)||(!!sx(t)||(!!$v(t)||(!!lx(t)||(!!Ax(t)||(!!ux(t)||(!!wx(t)||(!!tx(t)||(!!Zv(t)||(!!Jv(t)||(!!ax(t)||(!!ex(t)||(!!Ex(t)||(!!px(t)||!!fx(t))))))))))))))))))))}function Dx(t){return 746===t||747===t||!(t<4352)&&(!!ox(t)||(!!nx(t)||(!(!bx(t)||t>=65097&&t<=65103)||(!!Ix(t)||(!!cx(t)||(!!Wv(t)||(!!sx(t)||(!(!$v(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||(!!lx(t)||(!!Ax(t)||(!!ux(t)||(!!rx(t)||(!!dx(t)||(!!yx(t)||(!!zv(t)||(!!gx(t)||(!!tx(t)||(!!Zv(t)||(!!ix(t)||(!!Jv(t)||(!!ax(t)||(!(!ex(t)||12540===t)||(!(!wx(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||(!(!vx(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(!!kv(t)||(!!Lv(t)||(!!Ex(t)||(!!hx(t)||(!!fx(t)||!!px(t))))))))))))))))))))))))))))))}function Tx(t){return!(Dx(t)||(e=t,Tv(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Pv(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||jv(e)||Uv(e)||qv(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Kv(e)&&9251!==e||Hv(e)||Yv(e)||Gv(e)||Vv(e)&&!(e>=9754&&e<=9759)||Xv(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||$v(e)||ex(e)||mx(e)||bx(e)||vx(e)||wx(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Ox(t){return Ov(t)||Nv(t)||Fv(t)||Cx(t)||xx(t)}function Nx(t){for(const n of t)if((e=n.charCodeAt(0))>=1424&&e<=2303||Cx(e)||xx(e))return!0;var e;return!1}Bx();const Fx=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),zx=Fx(void 0,(function(){return zx.toString().search("(((.+)+)+)+$").toString().constructor(zx).search("(((.+)+)+)+$")}));zx();const kx={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};const Lx=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Px=Lx(void 0,(function(){return Px.toString().search("(((.+)+)+)+$").toString().constructor(Px).search("(((.+)+)+)+$")}));Px();const jx=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Ux=jx(void 0,(function(){return Ux.toString().search("(((.+)+)+)+$").toString().constructor(Ux).search("(((.+)+)+)+$")}));Ux();const qx="loading",Kx="loaded";let Hx="unavailable",Yx=null;const Gx={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hx===Kx||null!=Gx.applyArabicShaping,isLoading:()=>Hx===qx,setState(t){Hx=t.pluginStatus,Yx=t.pluginURL},isParsed:()=>null!=Gx.applyArabicShaping,getPluginURL:()=>Yx};var Vx=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,A=n?-1:1,f=t[e+h];for(h+=A,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=A,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=A,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},Xx=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,A=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?A/u:A*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*d};function Wx(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Wx.Varint=0,Wx.Fixed64=1,Wx.Bytes=2,Wx.Fixed32=5;var Jx=4294967296,Zx=1/Jx;function $x(t){return t.type===Wx.Bytes?t.readVarint()+t.pos:t.pos+1}function tw(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function ew(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function nw(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function rw(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function iw(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ow(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function sw(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function aw(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function uw(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function cw(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function lw(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function hw(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Aw(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function fw(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Wx.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=hw(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=fw(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=hw(this.buf,this.pos)+hw(this.buf,this.pos+4)*Jx;return this.pos+=8,t},readSFixed64:function(){var t=hw(this.buf,this.pos)+fw(this.buf,this.pos+4)*Jx;return this.pos+=8,t},readFloat:function(){var t=Vx(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Vx(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return tw(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return tw(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return tw(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return tw(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return tw(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return tw(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){var r="",i=e;for(;i<n;){var o,s,a,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&((c=(15&u)<<12|(63&o)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=$x(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=$x(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Wx.Varint)for(;this.buf[this.pos++]>127;);else if(e===Wx.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Wx.Fixed32)this.pos+=4;else{if(e!==Wx.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Aw(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Aw(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Aw(this.buf,-1&t,this.pos),Aw(this.buf,Math.floor(t*Zx),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Aw(this.buf,-1&t,this.pos),Aw(this.buf,Math.floor(t*Zx),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&ew(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Xx(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Xx(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&ew(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Wx.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,nw,e)},writePackedSVarint:function(t,e){this.writeMessage(t,rw,e)},writePackedBoolean:function(t,e){this.writeMessage(t,sw,e)},writePackedFloat:function(t,e){this.writeMessage(t,iw,e)},writePackedDouble:function(t,e){this.writeMessage(t,ow,e)},writePackedFixed32:function(t,e){this.writeMessage(t,aw,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,uw,e)},writePackedFixed64:function(t,e){this.writeMessage(t,cw,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,lw,e)},writeBytesField:function(t,e){this.writeTag(t,Wx.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Wx.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Wx.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Wx.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Wx.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Wx.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Wx.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Wx.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Wx.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Wx.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};const pw=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),dw=pw(void 0,(function(){return dw.toString().search("(((.+)+)+)+$").toString().constructor(dw).search("(((.+)+)+)+$")}));dw();function gw(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],a=0,u=0,c=0,l=t;c<l.length;c+=1)for(var h=l[c],A=s.length-1;A>=0;A--){var f=s[A];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,u=Math.max(u,h.y+h.h),a=Math.max(a,h.x+h.w),h.w===f.w&&h.h===f.h){var p=s.pop();A<s.length&&(s[A]=p)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(s.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}return{w:a,h:u,fill:e/(a*u)||0}}const yw=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mw=yw(void 0,(function(){return mw.toString().search("(((.+)+)+)+$").toString().constructor(mw).search("(((.+)+)+)+$")}));mw();class Iw{constructor(t,{pixelRatio:e,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Cw{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:s}=gw(i),a=new DE({width:o||1,height:s||1});for(const e in t){const r=t[e],i=n[e].paddedRect;DE.copy(r.data,a,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const t in e){const n=e[t],i=r[t].paddedRect,o=i.x+1,s=i.y+1,u=n.data.width,c=n.data.height;DE.copy(n.data,a,{x:0,y:0},{x:o,y:s},n.data),DE.copy(n.data,a,{x:0,y:c-1},{x:o,y:s-1},{width:u,height:1}),DE.copy(n.data,a,{x:0,y:0},{x:o,y:s+c},{width:u,height:1}),DE.copy(n.data,a,{x:u-1,y:0},{x:o-1,y:s},{width:1,height:c}),DE.copy(n.data,a,{x:0,y:0},{x:o+u,y:s},{width:1,height:c})}this.image=a,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new Iw(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Fl(Iw,"ImagePosition"),Fl(Cw,"ImageAtlas");const Ew=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),bw=Ew(void 0,(function(){return bw.toString().search("(((.+)+)+)+$").toString().constructor(bw).search("(((.+)+)+)+$")}));bw();const vw={horizontal:1,vertical:2,horizontalOnly:3},xw=-17;class ww{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new ww;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new ww;return e.imageName=t,e}}class Mw{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Mw;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&Tx(r)&&!kx[t[n+1]]||i&&Tx(i)&&!kx[t[n-1]]||!kx[t[n]]?e+=t[n]:e+=kx[t[n]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&_w[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&_w[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Mw;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(ww.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void yl("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ww.forImage(e)),this.sectionIndex.push(this.sections.length-1)):yl("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Bw(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p){const d=Mw.fromFeature(t,i);h===vw.vertical&&d.verticalizePunctuation(A);let g=[];const y=function(t,e,n,r,i,o){if(!t)return[];const s=[],a=function(t,e,n,r,i,o){let s=0;for(let n=0;n<t.length();n++){const a=t.getSection(n);s+=Qw(t.getCharCode(n),a,r,i,e,o)}const a=Math.max(1,Math.ceil(s/n));return s/a}(t,e,n,r,i,o),u=t.text.indexOf("")>=0;let c=0;for(let n=0;n<t.length();n++){const l=t.getSection(n),h=t.getCharCode(n);if(_w[h]||(c+=Qw(h,l,r,i,e,o)),n<t.length()-1){const e=Rx(h);(Sw[h]||e||l.imageName)&&s.push(Tw(n+1,c,a,s,Dw(h,t.getCharCode(n+1),e&&u),!1))}}return Ow(Tw(t.length(),c,a,s,0,!0))}(d,c,o,e,r,f),{processBidirectionalText:m,processStyledBidirectionalText:I}=Gx;if(m&&1===d.sections.length){const t=m(d.toString(),y);for(const e of t){const t=new Mw;t.text=e,t.sections=d.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);g.push(t)}}else if(I){const t=I(d.text,d.sectionIndex,y);for(const e of t){const t=new Mw;t.text=e[0],t.sectionIndex=e[1],t.sections=d.sections,g.push(t)}}else g=function(t,e){const n=[],r=t.text;let i=0;for(const r of e)n.push(t.substring(i,r)),i=r;return i<r.length&&n.push(t.substring(i,r.length)),n}(d,y);const C=[],E={positionedLines:C,text:d.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,s,a,u,c,l,h){let A=0,f=0,p=0;const d="right"===a?1:"left"===a?0:.5;let g=!1;for(const t of i){const n=t.getSections();for(const t of n){if(t.imageName)continue;const n=e[t.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const s of i){s.trim();const i=s.getMaxScale(),a=(i-1)*gv,m={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=m;const I=m.positionedGlyphs;let C=0;if(!s.length()){f+=o,++y;continue}let E=0,b=0;for(let o=0;o<s.length();o++){const a=s.getSection(o),p=s.getSectionIndex(o),d=s.getCharCode(o);let y=a.scale,m=null,v=null,x=null,w=gv,M=0;const B=!(u===vw.horizontal||!l&&!Dx(d)||l&&(_w[d]||Ox(d)));if(a.imageName){const e=r[a.imageName];if(!e)continue;x=a.imageName,t.iconsInText=t.iconsInText||!0,v=e.paddedRect;const n=e.displaySize;if(y=y*gv/h,m={width:n[0],height:n[1],left:1,top:-3,advance:B?n[1]:n[0],localGlyph:!1},g){M=-m.height*y}else M=xw+i*gv-n[1]*y;w=m.advance;const o=(B?n[0]:n[1])*y-gv*i;o>0&&o>C&&(C=o)}else{const t=n[a.fontStack];if(!t)continue;t[d]&&(v=t[d]);const r=e[a.fontStack];if(!r)continue;const o=r.glyphs[d];if(!o)continue;if(m=o.metrics,w=8203!==d?gv:0,g){const t=void 0!==r.ascender?Math.abs(r.ascender):0,e=void 0!==r.descender?Math.abs(r.descender):0,n=(t+e)*y;E<n&&(E=n,b=(t-e)/2*y),M=-t*y}else M=xw+(i-y)*gv}B?(t.verticalizable=!0,I.push({glyph:d,imageName:x,x:A,y:f+M,vertical:B,scale:y,localGlyph:m.localGlyph,fontStack:a.fontStack,sectionIndex:p,metrics:m,rect:v}),A+=w*y+c):(I.push({glyph:d,imageName:x,x:A,y:f+M,vertical:B,scale:y,localGlyph:m.localGlyph,fontStack:a.fontStack,sectionIndex:p,metrics:m,rect:v}),A+=m.advance*y+c)}if(0!==I.length){const t=A-c;p=Math.max(t,p),g?Fw(I,d,C,b,o*i/2):Fw(I,d,C,0,o/2)}A=0;const v=o*i+C;m.lineOffset=Math.max(C,a),f+=v,++y}const m=f,{horizontalAlign:I,verticalAlign:C}=Nw(s);(function(t,e,n,r,i,o){const s=(e-n)*i,a=-o*r;for(const e of t)for(const t of e.positionedGlyphs)t.x+=s,t.y+=a})(t.positionedLines,d,I,C,p,m),t.top+=-C*m,t.bottom=t.top+m,t.left+=-I*p,t.right=t.left+p,t.hasBaseline=g}(E,e,n,r,g,s,a,u,h,c,A,p),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(C)&&E}const _w={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Sw={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Qw(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*gv/o+i:0}{const r=n[e.fontStack],o=r&&r.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function Rw(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Dw(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),(40===t||65288===t)&&(r+=50),(41===e||65289===e)&&(r+=50),r}function Tw(t,e,n,r,i,o){let s=null,a=Rw(e,n,i,o);for(const t of r){const r=Rw(e-t.x,n,i,o)+t.badness;r<=a&&(s=t,a=r)}return{index:t,x:e,priorBreak:s,badness:a}}function Ow(t){return t?Ow(t.priorBreak).concat(t.index):[]}function Nw(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Fw(t,e,n,r,i){if(!(e||n||r||i))return;const o=t.length-1,s=t[o],a=s.metrics.advance*s.scale,u=(s.x+a)*e;for(let e=0;e<=o;e++)t[e].x-=u,t[e].y+=n+r+i}function zw(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Nw(n),o=e[0],s=e[1],a=o-t.displaySize[0]*r,u=a+t.displaySize[0],c=s-t.displaySize[1]*i;return{image:t,top:c,bottom:c+t.displaySize[1],left:a,right:u}}function kw(t,e,n,r,i,o){"none"===n&&console.log("textFit === 'none'"),(!Array.isArray(r)||4!==r.length)&&console.log("!Array.isArray(padding) || padding.length !== 4"),(!Array.isArray(i)||2!==i.length)&&console.log("!Array.isArray(iconOffset) || iconOffset.length !== 2");const s=t.image;let a;if(s.content){const t=s.content,e=s.pixelRatio||1;a=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const u=e.left*o,c=e.right*o;let l,h,A,f;"width"===n||"both"===n?(f=i[0]+u-r[3],h=i[0]+c+r[1]):(f=i[0]+(u+c-s.displaySize[0])/2,h=f+s.displaySize[0]);const p=e.top*o,d=e.bottom*o;return"height"===n||"both"===n?(l=i[1]+p-r[0],A=i[1]+d+r[2]):(l=i[1]+(p+d-s.displaySize[1])/2,A=l+s.displaySize[1]),{image:s,top:l,right:h,bottom:A,left:f,collisionPadding:a}}var Lw=function(t){var e,n=(e=!0,function(t,n){var r=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}),r=n(this,(function(){return r.toString().search("(((.+)+)+)+$").toString().constructor(r).search("(((.+)+)+)+$")}));function i(e,n,r,i,o){t.call(this,e,n),this.angle=i,this.z=r,void 0!==o&&(this.segment=o)}return r(),t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.z,this.angle,this.segment)},i}(Tr);Fl(Lw,"Anchor");var Pw,jw=(Pw=!0,function(t,e){var n=Pw?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Pw=!1,n}),Uw=jw(void 0,(function(){return Uw.toString().search("(((.+)+)+)+$").toString().constructor(Uw).search("(((.+)+)+)+$")}));function qw(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,s=e.segment+1,a=0;a>-n/2;){if(--s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;for(var u=[],c=0;a<n/2;){var l=t[s-1],h=t[s],A=t[s+1];if(!A)return!1;var f=l.angleTo(h)-h.angleTo(A);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:a,angleDelta:f}),c+=f;a-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;s++,a+=h.dist(A)}return!0}Uw();const Kw=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),Hw=Kw(void 0,(function(){return Hw.toString().search("(((.+)+)+)+$").toString().constructor(Hw).search("(((.+)+)+)+$")}));function Yw(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Gw(t,e,n){return t?.6*e*n:0}function Vw(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Xw(t,e,n,r,i,o){const s=Gw(n,i,o),a=Vw(n,r)*o;let u=0;const c=Yw(t)/2;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1],o=r.dist(i);if(u+o>c){const l=(c-u)/o,h=De(r.x,i.x,l),A=De(r.y,i.y,l),f=new Lw(h,A,0,i.angleTo(r),n);return!s||qw(t,f,a,s,e)?f:void 0}u+=o}}function Ww(t,e,n,r,i,o,s,a,u,c){const l=Gw(r,o,s),h=Vw(r,i),A=h*s,f=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;e-A<e/4&&(e=A+e/4);return Jw(t,f?e/2*a%e:(h/2+2*o)*s*a%e,e,l,n,A,f,!1,u,c)}function Jw(t,e,n,r,i,o,s,a,u,c){const l=o/2,h=Yw(t);let A=0,f=e-n,p=[];for(let e=0;e<t.length-1;e++){const s=t[e],a=t[e+1],d=s.dist(a),g=a.angleTo(s);for(;f+n<A+d;){f+=n;const y=(f-A)/d,m=De(s.x,a.x,y),I=De(s.y,a.y,y);if(m>=0&&m<u&&I>=0&&I<u&&f-l>=0&&f+l<=h){const n=new Lw(m,I,0,g,e);n._round(),(c||!r||qw(t,n,o,r,i))&&p.push(n)}}A+=d}return!a&&!p.length&&!s&&(p=Jw(t,A/2,n,r,i,o,s,!0,u)),p}Hw();var Zw,$w=(Zw=!0,function(t,e){var n=Zw?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return Zw=!1,n}),tM=$w(void 0,(function(){return tM.toString().search("(((.+)+)+)+$").toString().constructor(tM).search("(((.+)+)+)+$")}));tM();const eM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),nM=eM(void 0,(function(){return nM.toString().search("(((.+)+)+)+$").toString().constructor(nM).search("(((.+)+)+)+$")}));nM();const rM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),iM=rM(void 0,(function(){return iM.toString().search("(((.+)+)+)+$").toString().constructor(iM).search("(((.+)+)+)+$")}));iM();const oM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),sM=oM(void 0,(function(){return sM.toString().search("(((.+)+)+)+$").toString().constructor(sM).search("(((.+)+)+)+$")}));sM();const aM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),uM=aM(void 0,(function(){return uM.toString().search("(((.+)+)+)+$").toString().constructor(uM).search("(((.+)+)+)+$")}));uM();function cM(t,e,n,r){const i=[],o=t.image,s=o.pixelRatio,a=o.paddedRect.w-2,u=o.paddedRect.h-2,c=t.right-t.left,l=t.bottom-t.top,h=o.stretchX||[[0,a]],A=o.stretchY||[[0,u]],f=(t,e)=>t+e[1]-e[0],p=h.reduce(f,0),d=A.reduce(f,0),g=a-p,y=u-d;let m=0,I=p,C=0,E=d,b=0,v=g,x=0,w=y;if(o.content&&r){const t=o.content;m=lM(h,0,t[0]),C=lM(A,0,t[1]),I=lM(h,t[0],t[2]),E=lM(A,t[1],t[3]),b=t[0]-m,x=t[1]-C,v=t[2]-t[0]-I,w=t[3]-t[1]-E}const M=(r,i,a,u)=>{const h=AM(r.stretch-m,I,c,t.left),A=fM(r.fixed-b,v,r.stretch,p),f=AM(i.stretch-C,E,l,t.top),g=fM(i.fixed-x,w,i.stretch,d),y=AM(a.stretch-m,I,c,t.left),M=fM(a.fixed-b,v,a.stretch,p),B=AM(u.stretch-C,E,l,t.top),_=fM(u.fixed-x,w,u.stretch,d),S=new Tr(h,f),Q=new Tr(y,f),R=new Tr(y,B),D=new Tr(h,B),T=new Tr(A/s,g/s),O=new Tr(M/s,_/s),N=e*Math.PI/180;if(N){const t=Math.sin(N),e=Math.cos(N),n=[e,-t,t,e];S._matMult(n),Q._matMult(n),D._matMult(n),R._matMult(n)}const F=r.stretch+r.fixed,z=a.stretch+a.fixed,k=i.stretch+i.fixed,L=u.stretch+u.fixed;return{tl:S,tr:Q,bl:D,br:R,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+k,w:z-F,h:L-k},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:T,pixelOffsetBR:O,minFontScaleX:v/s/c,minFontScaleY:w/s/l,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=hM(h,g,p),e=hM(A,y,d);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++){const n=e[t],s=e[t+1];i.push(M(r,n,o,s))}}}else i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:u+1}));return i}function lM(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function hM(t,e,n){const r=[{fixed:-1,stretch:0}];for(const[e,n]of t){const t=r[r.length-1];r.push({fixed:e-t.stretch,stretch:t.stretch}),r.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return r.push({fixed:e+1,stretch:n}),r}function AM(t,e,n,r){return t/e*n+r}function fM(t,e,n,r){return t-e*n/r}function pM(t,e,n,r){const i=e+t.positionedLines[r].lineOffset;if(0===r)return n+i/2;return n+(i+(e+t.positionedLines[r-1].lineOffset))/2}var dM,gM=(dM=!0,function(t,e){var n=dM?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return dM=!1,n}),yM=gM(void 0,(function(){return yM.toString().search("(((.+)+)+)+$").toString().constructor(yM).search("(((.+)+)+)+$")}));function mM(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,o=-1/0,s=-1/0,a=t[0],u=0;u<a.length;u++){var c=a[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<i)&&(i=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var l=o-r,h=s-i,A=Math.min(l,h),f=A/2,p=new TinyQueue([],IM);if(0===A)return new Tr(r,i);for(var d=r;d<o;d+=A)for(var g=i;g<s;g+=A)p.push(new CM(d+f,g+f,f,t));for(var y=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,s=i.length,a=s-1;o<s;a=o++){var u=i[o],c=i[a],l=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*l,r+=(u.y+c.y)*l,e+=3*l}return new CM(n/e,r/e,0,t)}(t),m=p.length;p.length;){var I=p.pop();(I.d>y.d||!y.d)&&(y=I,n&&console.log("found best %d after %d probes",Math.round(1e4*I.d)/1e4,m)),I.max-y.d<=e||(f=I.h/2,p.push(new CM(I.p.x-f,I.p.y-f,f,t)),p.push(new CM(I.p.x+f,I.p.y-f,f,t)),p.push(new CM(I.p.x-f,I.p.y+f,f,t)),p.push(new CM(I.p.x+f,I.p.y+f,f,t)),m+=4)}return n&&(console.log("num probes: "+m),console.log("best distance: "+y.d)),y.p}function IM(t,e){return e.max-t.max}function CM(t,e,n,r){this.p=new Tr(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],s=0,a=o.length,u=a-1;s<a;u=s++){var c=o[s],l=o[u];c.y>t.y!=l.y>t.y&&t.x<(l.x-c.x)*(t.y-c.y)/(l.y-c.y)+c.x&&(n=!n),r=Math.min(r,Gy(t,c,l))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}function EM(t,e){var n,r,i,o,s,a,u,c;for(n=3&t.length,r=t.length-n,i=e,s=3432918353,a=461845907,c=0;c<r;)u=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(c+2))<<16;case 2:u^=(255&t.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(c)))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}yM();const bM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),vM=bM(void 0,(function(){return vM.toString().search("(((.+)+)+)+$").toString().constructor(vM).search("(((.+)+)+)+$")}));vM();const xM=Number.POSITIVE_INFINITY,wM=Math.sqrt(2);function MM(t,[e,n]){let r=0,i=0;if(n===xM){e<0&&(e=0);const n=e/wM;switch(t){case"top-right":case"top-left":i=n-7;break;case"bottom-right":case"bottom-left":i=7-n;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=e;break;case"right":r=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}}return[r,i]}function BM(t,e,n,r,i,o,s,a,u,c,l){t.createArrays();const h=512*t.overscaling;t.tilePixelRatio=Ic/h,t.compareText={},t.iconsNeedLinear=!1;const A=t.layers[0].layout,f=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;p.compositeTextSizes=[f["text-size"].possiblyEvaluate(new oh(e),a),f["text-size"].possiblyEvaluate(new oh(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;p.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new oh(e),a),f["icon-size"].possiblyEvaluate(new oh(n),a)]}p.layoutTextSize=f["text-size"].possiblyEvaluate(new oh(u+1),a),p.layoutIconSize=f["icon-size"].possiblyEvaluate(new oh(u+1),a),p.textMaxSize=f["text-size"].possiblyEvaluate(new oh(18),a);const d="map"===A.get("text-rotation-alignment")&&"point"!==A.get("symbol-placement"),g=A.get("text-size");!d&&(t.text.createLngLatQuadsArray(),t.icon.createLngLatQuadsArray());for(const o of t.features){const u=A.get("text-font").evaluate(o,{},a).join(","),h=g.evaluate(o,{},a),f=p.layoutTextSize.evaluate(o,{},a),y=p.layoutIconSize.evaluate(o,{},a),m={horizontal:{},vertical:void 0},I=o.text;let C=[0,0];if(I){const r=I.toString(),s=A.get("text-letter-spacing").evaluate(o,{},a)*gv,c=A.get("text-line-height").evaluate(o,{},a)*gv,l=Sx(r)?s:0,p=A.get("text-anchor").evaluate(o,{},a),g=A.get("text-variable-anchor");if(!g){const t=A.get("text-radial-offset").evaluate(o,{},a);C=t?MM(p,[t*gv,xM]):A.get("text-offset").evaluate(o,{},a).map((t=>t*gv))}let y=d?"center":A.get("text-justify").evaluate(o,{},a);const E="point"===A.get("symbol-placement"),b=E?A.get("text-max-width").evaluate(o,{},a)*gv:1/0,v=o=>{t.allowVerticalPlacement&&_x(r)&&(m.vertical=Bw(I,e,n,i,u,b,c,p,o,l,C,vw.vertical,!0,f,h))};if(!d&&g){const t="auto"===y?g.map((t=>_M(t))):[y];let r=!1;for(let o=0;o<t.length;o++){const s=t[o];if(!m.horizontal[s])if(r)m.horizontal[s]=m.horizontal[0];else{const t=Bw(I,e,n,i,u,b,c,"center",s,l,C,vw.horizontal,!1,f,h);t&&(m.horizontal[s]=t,r=1===t.positionedLines.length)}}v("left")}else{if("auto"===y&&(y=_M(p)),E||A.get("text-writing-mode").indexOf("horizontal")>=0||!_x(r)){const t=Bw(I,e,n,i,u,b,c,p,y,l,C,vw.horizontal,!1,f,h);t&&(m.horizontal[y]=t)}v(E?"left":y)}}let E,b=!1;if(o.icon&&o.icon.name){const e=r[o.icon.name];e&&(E=zw(i[o.icon.name],A.get("icon-offset").evaluate(o,{},a),A.get("icon-anchor").evaluate(o,{},a)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&yl("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==A.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const v=TM(m.horizontal)||m.vertical;!t.iconsInText&&(t.iconsInText=!!v&&v.iconsInText),(v||E)&&SM(t,o,m,E,r,p,f,y,C,b,s,a,c,l)}o&&t.generateCollisionDebugBuffers(u,t.collisionBoxArray)}function _M(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SM(t,e,n,r,i,o,s,a,u,c,l,h,A,f){let p=o.textMaxSize.evaluate(e,{},h);void 0===p&&(p=s);const d=t.layers[0].layout,g=d.get("icon-offset").evaluate(e,{},h),y=TM(n.horizontal)||n.vertical,m=s/24,I=t.tilePixelRatio*p/24,C=(t.tilePixelRatio,function(t,e){e>18&&t>2&&(t>>=1);const n=Ic/(512*t);return Math.max(n,1)}(t.overscaling,t.zoom)*d.get("symbol-spacing")),E=d.get("text-padding")*t.tilePixelRatio,b=d.get("icon-padding")*t.tilePixelRatio,v=sl(d.get("text-max-angle")),x="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),w="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),M=d.get("symbol-placement"),B=C/2,_=d.get("text-keep-upright-alignment"),S=d.get("icon-text-fit");let Q;r&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(Q=kw(r,n.vertical,S,d.get("icon-text-fit-padding"),g,m)),y&&(r=kw(r,y,S,d.get("icon-text-fit-padding"),g,m)));const R=(s,a,A)=>{if(a.x<0||a.x>=Ic||a.y<0||a.y>=Ic)return;const p=bl(f,a.x,a.y,A);!function(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v,x,w,M){const B=t.addToLineVertexArray(e,i);let _,S,Q,R,D,T,O,N=0,F=0,z=0,k=0,L=-1,P=-1;const j={};let U=EM("");const q=r?r.anchor:e;let K=0,H=0;if(void 0===c._unevaluatedLayout.getValue("text-radial-offset")?[K,H]=c.layout.get("text-offset").evaluate(E,{},w).map((t=>t*gv)):(K=c.layout.get("text-radial-offset").evaluate(E,{},w)*gv,H=xM),t.allowVerticalPlacement&&o.vertical){const t=o.vertical;if(d)T=NM(t),u&&(O=NM(u));else{const r=c.layout.get("text-rotate").evaluate(E,{},w)+90;Q=OM(l,q,e,n,h,A,f,t,p,r,g),u&&(R=OM(l,q,e,n,h,A,f,u,m,r))}}if(s){const i=c.layout.get("icon-rotate").evaluate(E,{},w),o="none"!==c.layout.get("icon-text-fit"),a=cM(s,i,v,o),p=u?cM(u,i,v,o):void 0;S=OM(l,q,e,n,h,A,f,s,m,i),N=4*a.length;const d=t.iconSizeData;let g=null;"source"===d.kind?(g=[Iv*c.layout.get("icon-size").evaluate(E,{},w)],g[0]>RM&&yl(t.layerIds[0]+': Value for "icon-size" is >= '+QM+'. Reduce your "icon-size".')):"composite"===d.kind&&(g=[Iv*b.compositeIconSizes[0].evaluate(E,{},w),Iv*b.compositeIconSizes[1].evaluate(E,{},w)],(g[0]>RM||g[1]>RM)&&yl(t.layerIds[0]+': Value for "icon-size" is >= '+QM+'. Reduce your "icon-size".')),t.addSymbols(t.icon,a,g,C,I,E,!1,r,e,n,B.lineStartIndex,B.lineLength,-1,x,w,M),L=t.icon.placedSymbolArray.length-1,p&&(F=4*p.length,t.addSymbols(t.icon,p,g,C,I,E,vw.vertical,r,e,n,B.lineStartIndex,B.lineLength,-1,x,w,M),P=t.icon.placedSymbolArray.length-1)}for(const i in o.horizontal){const s=o.horizontal[i];if(!_)if(U=EM(s.text),d)D=NM(s);else{_=OM(l,q,e,n,h,A,f,s,p,c.layout.get("text-rotate").evaluate(E,{},w),g)}const u=1===s.positionedLines.length;if(z+=DM(t,r,e,n,s,a,c,d,E,g,B,o.vertical?vw.horizontal:vw.horizontalOnly,u?Object.keys(o.horizontal):[i],j,L,b,x,w,M),u)break}o.vertical&&(k+=DM(t,r,e,n,o.vertical,a,c,d,E,g,B,vw.vertical,["vertical"],j,P,b,x,w,M));let Y=-1;const G=(t,e)=>t?Math.max(t,e):e;Y=G(D,Y),Y=G(T,Y),Y=G(O,Y);const V=Y>-1?1:0;t.glyphOffsetArray.length>=65535&&yl("Too many glyphs being rendered in a tile.");void 0!==E.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,E.sortKey);const X=q;t.symbolInstances.emplaceBack(X.x,X.y,X.z,e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical>=0?j.vertical:-1,L,P,U,void 0!==_?_:t.collisionBoxArray.length,void 0!==_?_+1:t.collisionBoxArray.length,void 0!==Q?Q:t.collisionBoxArray.length,void 0!==Q?Q+1:t.collisionBoxArray.length,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,R||t.collisionBoxArray.length,R?R+1:t.collisionBoxArray.length,h,z,k,N,F,V,0,K,H,Y)}(t,a,p,null,s,n,r,i,Q,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,E,x,u,0,b,w,g,e,o,c,l,h,f)};if("line"===M)for(const i of function(t,e,n,r,i){for(var o=[],s=0;s<t.length;s++)for(var a=t[s],u=void 0,c=0;c<a.length-1;c++){var l=a[c],h=a[c+1];l.x<e&&h.x<e||(l.x<e?l=new Tr(e,l.y+(h.y-l.y)*((e-l.x)/(h.x-l.x)))._round():h.x<e&&(h=new Tr(e,l.y+(h.y-l.y)*((e-l.x)/(h.x-l.x)))._round()),l.y<n&&h.y<n||(l.y<n?l=new Tr(l.x+(h.x-l.x)*((n-l.y)/(h.y-l.y)),n)._round():h.y<n&&(h=new Tr(l.x+(h.x-l.x)*((n-l.y)/(h.y-l.y)),n)._round()),l.x>=r&&h.x>=r||(l.x>=r?l=new Tr(r,l.y+(h.y-l.y)*((r-l.x)/(h.x-l.x)))._round():h.x>=r&&(h=new Tr(r,l.y+(h.y-l.y)*((r-l.x)/(h.x-l.x)))._round()),l.y>=i&&h.y>=i||(l.y>=i?l=new Tr(l.x+(h.x-l.x)*((i-l.y)/(h.y-l.y)),i)._round():h.y>=i&&(h=new Tr(l.x+(h.x-l.x)*((i-l.y)/(h.y-l.y)),i)._round()),(!u||!l.equals(u[u.length-1]))&&(u=[l],o.push(u)),u.push(h)))))}return o}(e.geometry,0,0,Ic,Ic)){const e=Ww(i,C,v,n.vertical||y,r,24,I,t.overscaling,Ic,_);for(const n of e){(!y||!FM(t,y.text,B,n))&&R(i,n,h)}}else if("line-center"===M){for(const t of e.geometry)if(t.length>1){const e=Xw(t,v,n.vertical||y,r,24,I);e&&R(t,e,h)}}else if("Polygon"===e.type)for(const t of XE(e.geometry,0)){const e=mM(t,16);R(t[0],new Lw(e.x,e.y,0,0,void 0),h)}else if("LineString"===e.type)for(const t of e.geometry)R(t,new Lw(t[0].x,t[0].y,0,0,void 0),h);else if("Point"===e.type)for(const t of e.geometry)for(const e of t)R([e],new Lw(e.x,e.y,0,0,void 0),h)}const QM=255,RM=QM*Iv;function DM(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m){const I=function(t,e,n,r,i,o,s,a){const u=[];if(0===e.positionedLines.length)return u;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=function(t){const e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let h=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)h-=t.lineOffset;const A=e.positionedLines.length,f=h/A;let p=e.top-n[1];for(let t=0;t<A;++t){const r=e.positionedLines[t];p=pM(e,f,p,t);for(const t of r.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let o=4,h=!0,A=1,f=0;if(t.imageName){const e=s[t.imageName];if(!e)continue;if(e.sdf){yl("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,A=e.pixelRatio,o=1/A}const y=(i||a)&&t.vertical,m=t.metrics.advance*t.scale/2,I=t.metrics,C=t.rect;if(null===C)continue;a&&e.verticalizable&&(f=t.imageName?m-t.metrics.width*t.scale/2:0);const E=i?[t.x+m,t.y]:[0,0];let b=[0,0],v=[0,0],x=!1;!i&&(y?(v=[t.x+m+l[0],t.y+l[1]-f],x=!0):b=[t.x+m+n[0],t.y+n[1]-f]);const w=C.w*t.scale/(A*(t.localGlyph?2:1)),M=C.h*t.scale/(A*(t.localGlyph?2:1));let B,_,S,Q;if(y){const e=t.y-p,n=new Tr(-m,m-e),r=-Math.PI/2,i=new Tr(...v);B=new Tr(-m+b[0],b[1]),B._rotateAround(r,n)._add(i),B.x+=-e+m,B.y-=(I.left-o)*t.scale;const s=t.imageName?I.advance*t.scale:gv*t.scale,a=String.fromCharCode(t.glyph);if(""===(g=a)||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g||""===g)B.x+=(1-o)*t.scale;else if(""===(d=a)||""===d||""===d||""===d||""===d||""===d||""===d||""===d||""===d||""===d){const e=s-I.height*t.scale;B.x+=e+(-o-1)*t.scale}else if(t.imageName||I.width+2*o===C.w&&I.height+2*o===C.h){const t=s-M;B.x+=t/2}else{const e=s-(I.height+2*o)*t.scale;B.x+=e/2}_=new Tr(B.x,B.y-w),S=new Tr(B.x+M,B.y),Q=new Tr(B.x+M,B.y-w)}else{const e=(I.left-o)*t.scale-m+b[0],n=(-I.top-o)*t.scale+b[1],r=e+w,i=n+M;B=new Tr(e,n),_=new Tr(r,n),S=new Tr(e,i),Q=new Tr(r,i)}if(c){let t;t=i?new Tr(0,0):x?new Tr(l[0],l[1]):new Tr(n[0],n[1]),B._rotateAround(c,t),_._rotateAround(c,t),S._rotateAround(c,t),Q._rotateAround(c,t)}const R=new Tr(0,0),D=new Tr(0,0),T=0,O=0;u.push({tl:B,tr:_,bl:S,br:Q,tex:r,writingMode:e.writingMode,glyphOffset:E,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:R,pixelOffsetBR:D,minFontScaleX:T,minFontScaleY:O})}}var d,g;return u}(0,i,c,s,a,u,o,t.allowVerticalPlacement),C=t.textSizeData;let E=null;"source"===C.kind?(E=[Iv*s.layout.get("text-size").evaluate(u,{},y)],E[0]>RM&&yl(t.layerIds[0]+': Value for "text-size" is >= '+QM+'. Reduce your "text-size".')):"composite"===C.kind&&(E=[Iv*d.compositeTextSizes[0].evaluate(u,{},y),Iv*d.compositeTextSizes[1].evaluate(u,{},y)],(E[0]>RM||E[1]>RM)&&yl(t.layerIds[0]+': Value for "text-size" is >= '+QM+'. Reduce your "text-size".')),t.addSymbols(t.text,I,E,c,a,u,h,e,n,r,l.lineStartIndex,l.lineLength,p,g,y,m);for(const e of A)f[e]=t.text.placedSymbolArray.length-1;return 4*I.length}function TM(t){for(const e in t)return t[e];return null}function OM(t,e,n,r,i,o,s,a,u,c,l){let h=a.top,A=a.bottom,f=a.left,p=a.right;const d=a.collisionPadding;if(d&&(f-=d[0],h-=d[1],p+=d[2],A+=d[3]),c){const t=new Tr(f,h),e=new Tr(p,h),n=new Tr(f,A),r=new Tr(p,A),i=sl(c);let o=new Tr(0,0);l&&(o=new Tr(l[0],l[1])),t._rotateAround(i,o),e._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),f=Math.min(t.x,e.x,n.x,r.x),p=Math.max(t.x,e.x,n.x,r.x),h=Math.min(t.y,e.y,n.y,r.y),A=Math.max(t.y,e.y,n.y,r.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,f,h,p,A,u,i,o,s,r.x,r.y,r.z),t.length-1}function NM(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function FM(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}const zM=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),kM=zM(void 0,(function(){return kM.toString().search("(((.+)+)+)+$").toString().constructor(kM).search("(((.+)+)+)+$")}));kM();var LM=484813681109536e-20,PM=Math.PI/2,jM=1e-10,UM=.017453292519943295,qM=57.29577951308232,KM=Math.PI/4,HM=2*Math.PI,YM=3.14159265359,GM={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},VM={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},XM=/[\s_\-\/\(\)]/g;function WM(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(XM,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(XM,"")===i)return t[n]}var JM=function(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*UM},lat_1:function(t){i.lat1=t*UM},lat_2:function(t){i.lat2=t*UM},lat_ts:function(t){i.lat_ts=t*UM},lon_0:function(t){i.long0=t*UM},lon_1:function(t){i.long1=t*UM},lon_2:function(t){i.long2=t*UM},alpha:function(t){i.alpha=parseFloat(t)*UM},lonc:function(t){i.longc=t*UM},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=WM(VM,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*UM},pm:function(t){var e=WM(GM,t);i.from_greenwich=(e||parseFloat(t))*UM},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in s?"function"==typeof(r=s[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},ZM=/\s/,$M=/[A-Za-z]/,tB=/[A-Za-z84]/,eB=/[,\]]/,nB=/[\d\.E\-\+]/;function rB(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function iB(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return oB(e,t),t}),r);e&&(t[e]=i)}function oB(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void oB(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&oB(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&oB(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void iB(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return oB(t,e[n]);return iB(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}rB.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ZM.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},rB.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(eB.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},rB.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},rB.prototype.number=function(t){if(!nB.test(t)){if(eB.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},rB.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},rB.prototype.keyword=function(t){if(tB.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!eB.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},rB.prototype.neutral=function(t){if($M.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(nB.test(t))return this.word=t,void(this.state=3);if(!eB.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},rB.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function sB(t){return.017453292519943295*t}var aB=function(t){var e=new rB(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return oB(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=t.AXIS[n][0].toLowerCase();-1!==i.indexOf("north")?e+="n":-1!==i.indexOf("south")?e+="s":-1!==i.indexOf("east")?e+="e":-1!==i.indexOf("west")&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",sB],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",sB],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",sB],["lat0","latitude_of_origin",sB],["lat0","standard_parallel_1",sB],["lat1","standard_parallel_1",sB],["lat2","standard_parallel_2",sB],["azimuth","Azimuth"],["alpha","azimuth",sB],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=sB(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function uB(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?uB[t]=JM(arguments[1]):uB[t]=aB(arguments[1]):uB[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?uB.apply(e,t):uB(t)}));if("string"==typeof t){if(t in uB)return uB[t]}else"EPSG"in t?uB["EPSG:"+t.EPSG]=t:"ESRI"in t?uB["ESRI:"+t.ESRI]=t:"IAU2000"in t?uB["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(uB);var cB=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var lB=["3857","900913","3785","102113"];function hB(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in uB}(t))return uB[t];if(function(t){return cB.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=aB(t);if(function(t){var e=WM(t,"authority");if(e){var n=WM(e,"epsg");return n&&lB.indexOf(n)>-1}}(e))return uB["EPSG:3857"];var n=function(t){var e=WM(t,"extension");if(e)return WM(e,"proj4")}(e);return n?JM(n):e}return function(t){return"+"===t[0]}(t)?JM(t):void 0}var AB=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},fB=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},pB=function(t){return t<0?-1:1},dB=function(t){return Math.abs(t)<=YM?t:t-pB(t)*HM},gB=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(PM-e))/r},yB=function(t,e){for(var n,r,i=.5*t,o=PM-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=r=PM-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};var mB={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=fB(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*qM>90&&i*qM<-90&&r*qM>180&&r*qM<-180)return null;if(Math.abs(Math.abs(i)-PM)<=jM)return null;if(this.sphere)e=this.x0+this.a*this.k0*dB(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(KM+.5*i));else{var o=Math.sin(i),s=gB(this.e,i,o);e=this.x0+this.a*this.k0*dB(r-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=PM-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=yB(this.e,o)))return null}return e=dB(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function IB(t){return t}var CB=[mB,{init:function(){},forward:IB,inverse:IB,names:["longlat","identity"]}],EB={},bB=[];function vB(t,e){var n=bB.length;return t.names?(bB[n]=t,t.names.forEach((function(t){EB[t.toLowerCase()]=n})),this):(console.log(e),!0)}var xB={start:function(){CB.forEach(vB)},add:vB,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==EB[e]&&bB[EB[e]]?bB[EB[e]]:void 0}},wB={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},MB=wB.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};wB.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var BB={};function _B(t,e){if(!(this instanceof _B))return new _B(t);e=e||function(t){if(t)throw t};var n=hB(t);if("object"==typeof n){var r=_B.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=WM(BB,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=function(t,e,n,r,i){if(!t){var o=WM(wB,r);o||(o=MB),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<jM)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),s=function(t,e,n,r){var i=t*t,o=e*e,s=(i-o)/i,a=0;return r?(i=(t*=1-s*(.16666666666666666+s*(.04722222222222222+.022156084656084655*s)))*t,s=0):a=Math.sqrt(s),{es:s,e:a,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),a=n.datum||function(t,e,n,r,i,o){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=LM,s.datum_params[4]*=LM,s.datum_params[5]*=LM,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=r,s.es=i,s.ep2=o,s}(n.datumCode,n.datum_params,o.a,o.b,s.es,s.ep2);AB(this,n),AB(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=a,this.init(),e(null,this)}else e(t)}else e(t)}function SB(t,e,n){var r,i,o,s,a=t.x,u=t.y,c=t.z?t.z:0;if(u<-PM&&u>-1.001*PM)u=-PM;else if(u>PM&&u<1.001*PM)u=PM;else{if(u<-PM)return{x:-1/0,y:-1/0,z:t.z};if(u>PM)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),i=Math.sin(u),s=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+c)*s*Math.cos(a),y:(r+c)*s*Math.sin(a),z:(r*(1-e)+c)*i}}function QB(t,e,n,r){var i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I=1e-12,C=t.x,E=t.y,b=t.z?t.z:0;if(i=Math.sqrt(C*C+E*E),o=Math.sqrt(C*C+E*E+b*b),i/n<I){if(y=0,o/n<I)return m=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(E,C);s=b/o,h=(a=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*a*a)),A=s*u,g=0;do{g++,c=e*(l=n/Math.sqrt(1-e*A*A))/(l+(m=i*h+b*A-l*(1-e*A*A))),d=(p=s*(u=1/Math.sqrt(1-c*(2-c)*a*a)))*h-(f=a*(1-c)*u)*A,h=f,A=p}while(d*d>1e-24&&g<30);return{x:y,y:Math.atan(p/Math.abs(f)),z:m}}function RB(t){return 1===t||2===t}BB.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},BB.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},BB.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},BB.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},BB.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},BB.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},BB.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},BB.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},BB.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},BB.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},BB.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},BB.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},BB.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},BB.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},BB.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},BB.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},BB.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},_B.projections=xB,_B.projections.start();var DB=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||5===t.datum_type||5===e.datum_type?n:t.es!==e.es||t.a!==e.a||RB(t.datum_type)||RB(e.datum_type)?(n=SB(n,t.es,t.a),RB(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],c=n[6];return{x:c*(t.x-u*t.y+a*t.z)+r,y:c*(u*t.x+t.y-s*t.z)+i,z:c*(-a*t.x+s*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),RB(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],c=n[6],l=(t.x-r)/c,h=(t.y-i)/c,A=(t.z-o)/c;return{x:l+u*h-a*A,y:-u*l+h+s*A,z:a*l-s*h+A}}}(n,e.datum_type,e.datum_params)),QB(n,e.es,e.a,e.b)):n},TB=function(t,e,n){var r,i,o,s=n.x,a=n.y,u=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=s,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=a,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"w":case"n":case"s":c[i]=r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c},OB=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function NB(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function FB(t,e,n){var r;return Array.isArray(n)&&(n=OB(n)),function(t){NB(t.x),NB(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=FB(t,r=new _B("WGS84"),n),t=r),"enu"!==t.axis&&(n=TB(t,!1,n)),"longlat"===t.projName?n={x:n.x*UM,y:n.y*UM,z:n.z||0}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=DB(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*qM,y:n.y*qM,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?TB(e,!0,n):n}var zB=_B("WGS84");function kB(t,e,n){var r,i,o;return Array.isArray(n)?(r=FB(t,e,n)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=FB(t,e,n),2===(o=Object.keys(n)).length||o.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function LB(t){return t instanceof _B?t:t.oProj?t.oProj:_B(t)}function PB(t,e,n){t=LB(t);var r,i=!1;return void 0===e?(e=t,t=zB,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=zB,i=!0),e=LB(e),n?kB(t,e,n):(r={forward:function(n){return kB(t,e,n)},inverse:function(n){return kB(e,t,n)}},i&&(r.oProj=e),r)}var jB="AJSAJS",UB="AFAFAF",qB=65,KB=73,HB=79,YB=86,GB=90,VB={forward:XB,inverse:function(t){var e=$B(n_(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:WB};function XB(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(f=t.easting,p=t.northing,d=t.zoneNumber,g=e_(d),y=Math.floor(f/1e5),m=Math.floor(p/1e5)%20,i=y,o=m,s=g,a=s-1,u=jB.charCodeAt(a),c=UB.charCodeAt(a),l=u+i-1,h=c+o,A=!1,l>GB&&(l=l-GB+qB-1,A=!0),(l===KB||u<KB&&l>KB||(l>KB||u<KB)&&A)&&l++,(l===HB||u<HB&&l>HB||(l>HB||u<HB)&&A)&&++l===KB&&l++,l>GB&&(l=l-GB+qB-1),h>YB?(h=h-YB+qB-1,A=!0):A=!1,(h===KB||c<KB&&h>KB||(h>KB||c<KB)&&A)&&h++,(h===HB||c<HB&&h>HB||(h>HB||c<HB)&&A)&&++h===KB&&h++,h>YB&&(h=h-YB+qB-1),String.fromCharCode(l)+String.fromCharCode(h))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,s,a,u,c,l,h,A;var f,p,d,g,y,m}(function(t){var e,n,r,i,o,s,a,u,c=t.lat,l=t.lon,h=6378137,A=.00669438,f=.9996,p=JB(c),d=JB(l);u=Math.floor((l+180)/6)+1,180===l&&(u=60);c>=56&&c<64&&l>=3&&l<12&&(u=32);c>=72&&c<84&&(l>=0&&l<9?u=31:l>=9&&l<21?u=33:l>=21&&l<33?u=35:l>=33&&l<42&&(u=37));a=JB(6*(u-1)-180+3),e=A/(1-A),n=h/Math.sqrt(1-A*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=e*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(d-a),s=h*((1-A/4-3*A*A/64-5*A*A*A/256)*p-(3*A/8+3*A*A/32+45*A*A*A/1024)*Math.sin(2*p)+(15*A*A/256+45*A*A*A/1024)*Math.sin(4*p)-35*A*A*A/3072*Math.sin(6*p));var g=f*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=f*(s+n*Math.tan(p)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));c<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:u,zoneLetter:t_(c)}}({lat:t[1],lon:t[0]}),e)}function WB(t){var e=$B(n_(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function JB(t){return t*(Math.PI/180)}function ZB(t){return t/Math.PI*180}function $B(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,u,c,l,h,A,f,p=.9996,d=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,I=e;r<"N"&&(I-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,f=(A=I/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*A)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*A)+151*y*y*y/96*Math.sin(6*A),s=d/Math.sqrt(1-g*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),u=o*Math.cos(f)*Math.cos(f),c=.99330562*d/Math.pow(1-g*Math.sin(f)*Math.sin(f),1.5),l=m/(s*p);var C=f-s*Math.tan(f)/c*(l*l/2-(5+3*a+10*u-4*u*u-9*o)*l*l*l*l/24+(61+90*a+298*u+45*a*a-1.6983531815716497-3*u*u)*l*l*l*l*l*l/720);C=ZB(C);var E,b=(l-(1+2*a+u)*l*l*l/6+(5-2*u+28*a-3*u*u+8*o+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(b=h+ZB(b),t.accuracy){var v=$B({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:v.lat,right:v.lon,bottom:C,left:b}}else E={lat:C,lon:b};return E}function t_(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function e_(t){var e=t%6;return 0===e&&(e=6),e}function n_(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var s=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;r=t.substring(o,o+=2);for(var u=e_(s),c=function(t,e){var n=jB.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===KB&&n++,n===HB&&n++,n>GB){if(i)throw"Bad character: "+t;n=qB,i=!0}r+=1e5}return r}(r.charAt(0),u),l=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=UB.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===KB&&n++,n===HB&&n++,n>YB){if(i)throw"Bad character: "+t;n=qB,i=!0}r+=1e5}return r}(r.charAt(1),u);l<r_(a);)l+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var A,f,p,d=h/2,g=0,y=0;return d>0&&(A=1e5/Math.pow(10,d),f=t.substring(o,o+d),g=parseFloat(f)*A,p=t.substring(o+d),y=parseFloat(p)*A),{easting:g+c,northing:y+l,zoneLetter:a,zoneNumber:s,accuracy:A}}function r_(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function i_(t,e,n){if(!(this instanceof i_))return new i_(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i_.fromMGRS=function(t){return new i_(WB(t))},i_.prototype.toMGRS=function(t){return XB([this.x,this.y],t)};var o_=.046875,s_=.01953125,a_=.01068115234375,u_=function(t){var e=[];e[0]=1-t*(.25+t*(o_+t*(s_+t*a_))),e[1]=t*(.75-t*(o_+t*(s_+t*a_)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},c_=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},l_=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var s=Math.sin(i),a=1-e*s*s;if(i-=a=(c_(i,s,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,Math.abs(a)<jM)return i}return i};var h_={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=u_(this.es),this.ml0=c_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,s=dB(i-this.long0),a=Math.sin(o),u=Math.cos(o);if(this.es){var c=u*s,l=Math.pow(c,2),h=this.ep2*Math.pow(u,2),A=Math.pow(h,2),f=Math.abs(u)>jM?Math.tan(o):0,p=Math.pow(f,2),d=Math.pow(p,2);e=1-this.es*Math.pow(a,2),c/=Math.sqrt(e);var g=c_(o,a,u,this.en);n=this.a*(this.k0*c*(1+l/6*(1-p+h+l/20*(5-18*p+d+14*h-58*p*h+l/42*(61+179*d-d*p-479*p)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+a*s*c/2*(1+l/12*(5-p+9*h+4*A+l/30*(61+d-58*p+270*h-330*p*h+l/56*(1385+543*d-d*p-3111*p))))))+this.y0}else{var y=u*Math.sin(s);if(Math.abs(Math.abs(y)-1)<jM)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=u*Math.cos(s)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>jM)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,n=l_(e,this.es,this.en),Math.abs(n)<PM){var a=Math.sin(n),u=Math.cos(n),c=Math.abs(u)>jM?Math.tan(n):0,l=this.ep2*Math.pow(u,2),h=Math.pow(l,2),A=Math.pow(c,2),f=Math.pow(A,2);e=1-this.es*Math.pow(a,2);var p=o*Math.sqrt(e)/this.k0,d=Math.pow(p,2);r=n-(e*=c)*d/(1-this.es)*.5*(1-d/12*(5+3*A-9*l*A+l-4*h-d/30*(61+90*A-252*l*A+45*f+46*l-d/56*(1385+3633*A+4095*f+1574*f*A)))),i=dB(this.long0+p*(1-d/6*(1+2*A+l-d/20*(5+28*A+24*f+8*l*A+6*l-d/42*(61+662*A+1320*f+720*f*A))))/u)}else r=PM*pB(s),i=0;else{var g=Math.exp(o/this.k0),y=.5*(g-1/g),m=this.lat0+s/this.k0,I=Math.cos(m);e=Math.sqrt((1-Math.pow(I,2))/(1+Math.pow(y,2))),r=Math.asin(e),s<0&&(r=-r),i=0===y&&0===I?0:dB(Math.atan2(y,I)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},A_=function(t){var e=Math.exp(t);return e=(e-1/e)/2},f_=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},p_=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(f_(1,e)+1))),t<0?-e:e},d_=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return e+n*Math.sin(2*e)},g_=function(t,e,n){for(var r,i,o=Math.sin(e),s=Math.cos(e),a=A_(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),c=2*s*u,l=-2*o*a,h=t.length-1,A=t[h],f=0,p=0,d=0;--h>=0;)r=p,i=f,A=c*(p=A)-r-l*(f=d)+t[h],d=l*p-i+c*f;return[(c=o*u)*A-(l=s*a)*d,c*d+l*A]};var y_={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=d_(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=dB(t.x-this.long0),n=t.y;n=d_(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(r,s*i),e=Math.atan2(o*i,f_(r,i*s)),e=p_(Math.tan(e));var a,u,c=g_(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,u=1/0),t.x=a,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=g_(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(A_(r));var s=Math.sin(i),a=Math.cos(i),u=Math.sin(r),c=Math.cos(r);i=Math.atan2(s*c,f_(u,c*a)),r=Math.atan2(u,c*a),e=dB(r+this.long0),n=d_(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var m_={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(dB(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*UM,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,y_.init.apply(this),this.forward=y_.forward,this.inverse=y_.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},I_=function(t,e){return Math.pow((1-t)/(1+t),e)};var C_={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+KM)/(Math.pow(Math.tan(.5*this.lat0+KM),this.C)*I_(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+KM),this.C)*I_(this.e*Math.sin(n),this.ratexp))-PM,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+KM)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*I_(this.e*Math.sin(t.y),-.5*this.e))-PM,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var E_={init:function(){C_.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=dB(t.x-this.long0),C_.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,C_.inverse.apply(this,[t]),t.x=dB(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var b_={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jM&&(this.k0=.5*(1+pB(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=jM&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jM&&(this.k0=.5*this.cons*fB(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/gB(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=fB(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-PM,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,s,a=t.x,u=t.y,c=Math.sin(u),l=Math.cos(u),h=dB(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=jM&&Math.abs(u+this.lat0)<=jM?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*l*Math.cos(h)),t.x=this.a*e*l*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*l*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,c,this.e))-PM,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=jM?(o=gB(this.e,u*this.con,this.con*c),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<jM?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=jM?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<jM?this.lat0>0?dB(this.long0+Math.atan2(t.x,-1*t.y)):dB(this.long0+Math.atan2(t.x,t.y)):dB(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=jM){if(s<=jM)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=s*this.cons/(2*this.a*this.k0),n=this.con*yB(this.e,r),e=this.con*dB(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=jM?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/s),e=dB(this.long0+Math.atan2(t.x*Math.sin(i),s*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*yB(this.e,Math.tan(.5*(PM+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(PM+t))*Math.pow((1-e)/(1+e),.5*n)}};var v_={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,u=0,c=o,l=-1e3,h=0;Math.abs(c-l)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),l=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=c,t},names:["somerc"]};var x_={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=gB(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var a=gB(this.e,this.lat1,Math.sin(this.lat1)),u=gB(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(o,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(o,this.bl);var c=Math.pow(a,this.bl),l=Math.pow(u,this.bl);i=.5*((r=this.el/c)-1/r);var h=(this.el*this.el-l*c)/(this.el*this.el+l*c),A=(l-c)/(l+c),f=dB(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*f)/A)/this.bl,this.long0=dB(this.long0);var p=dB(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/i),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else r=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,s=dB(i-this.long0);if(Math.abs(Math.abs(o)-PM)<=jM)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(KM+r*this.gamma0*.5)),e=-1*r*PM*this.al/this.bl;else{var a=gB(this.e,o,Math.sin(o)),u=this.el/Math.pow(a,this.bl),c=.5*(u-1/u),l=.5*(u+1/u),h=Math.sin(this.bl*s),A=(c*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/l;n=Math.abs(Math.abs(A)-1)<=jM?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-A)/(1+A))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=jM?this.al*this.bl*s:this.al*Math.atan2(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<jM?(t.x=this.long0,t.y=PM):Math.abs(a+1)<jM?(t.x=this.long0,t.y=-1*PM):(t.y=yB(this.e,u),t.x=dB(this.long0-Math.atan2(i*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var w_={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<jM)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=fB(this.e,e,n),i=gB(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=fB(this.e,o,s),u=gB(this.e,this.lat2,o),c=gB(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>jM?this.ns=Math.log(r/a)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=jM&&(n=pB(n)*(PM-2e-10));var r,i,o=Math.abs(Math.abs(n)-PM);if(o>jM)r=gB(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var s=this.ns*dB(e-this.long0);return t.x=this.k0*(i*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,r,i,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),n=1):(e=-Math.sqrt(s*s+a*a),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*s,n*a)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=yB(this.e,r)))return null}else i=-PM;return o=dB(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var M_={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,s,a,u=t.x,c=t.y,l=dB(u-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-l*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,c+=1}while(0===a&&c<15);return c>=15?null:t},names:["Krovak","krovak"]},B_=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},__=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},S_=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Q_=function(t){return.05859375*t*t*(1+.75*t)},R_=function(t){return t*t*t*(35/3072)},D_=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},T_=function(t){return Math.abs(t)<PM?t:t-pB(t)*Math.PI},O_=function(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN};var N_={init:function(){this.sphere||(this.e0=__(this.es),this.e1=S_(this.es),this.e2=Q_(this.es),this.e3=R_(this.es),this.ml0=this.a*B_(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=dB(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=D_(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),l=c*c,h=this.es*s*s/(1-this.es);e=a*c*(1-l*u*(1/6-(8-u+8*h)*l/120)),n=this.a*B_(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*o/s*l*(.5+(5-u+6*h)*l/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=this.ml0/this.a+i,a=O_(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-PM)<=jM)return t.x=this.long0,t.y=PM,i<0&&(t.y*=-1),t;var u=D_(this.a,this.e,Math.sin(a)),c=u*u*u/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),h=r*this.a/u,A=h*h;e=a-u*Math.tan(a)/c*h*h*(.5-(1+3*l)*h*h/24),n=h*(1-A*(l/3+(1+3*l)*l*A/15))/Math.cos(a)}return t.x=dB(n+this.long0),t.y=T_(e),t},names:["Cassini","Cassini_Soldner","cass"]},F_=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var z_=.3333333333333333,k_=.17222222222222222,L_=.10257936507936508,P_=.06388888888888888,j_=.0664021164021164,U_=.016415012942191543;var q_={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-PM)<jM?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<jM?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=F_(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*z_,e=t*t,n[0]+=e*k_,n[1]=e*P_,e*=t,n[0]+=e*L_,n[1]+=e*j_,n[2]=e*U_,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=F_(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,s,a,u,c,l,h=t.x,A=t.y;if(h=dB(h-this.long0),this.sphere){if(o=Math.sin(A),l=Math.cos(A),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+l*r:1+this.sinph0*o+this.cosph0*l*r)<=jM)return null;e=(n=Math.sqrt(2/n))*l*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*l*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(A+this.phi0)<jM)return null;n=KM-.5*A,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(a=0,u=0,c=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(A),s=F_(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,u=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*u*r;break;case this.EQUIT:c=1+u*r;break;case this.N_POLE:c=PM+A,s=this.qp-s;break;case this.S_POLE:c=A-PM,s=this.qp+s}if(Math.abs(c)<jM)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*a-this.sinb1*u*r):(c=Math.sqrt(2/(1+u*r)))*a*this.ymf,e=this.xmf*c*u*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(c=Math.sqrt(s))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,s,a,u=t.x/this.a,c=t.y/this.a;if(this.sphere){var l,h=0,A=0;if((n=.5*(l=Math.sqrt(u*u+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(A=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(l)<=jM?0:Math.asin(c*A/l),u*=A,c=h*l;break;case this.OBLIQ:n=Math.abs(l)<=jM?this.phi0:Math.asin(h*this.sinph0+c*A*this.cosph0/l),u*=A*this.cosph0,c=(h-Math.sin(n)*this.sinph0)*l;break;case this.N_POLE:c=-c,n=PM-n;break;case this.S_POLE:n-=PM}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,c):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,c*=this.dd,(s=Math.sqrt(u*u+c*c))<jM)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*s/this.rq),r=Math.cos(i),u*=i=Math.sin(i),this.mode===this.OBLIQ?(a=r*this.sinb1+c*i*this.cosb1/s,o=this.qp*a,c=s*this.cosb1*r-c*this.sinb1*i):(a=c*i/s,o=this.qp*a,c=s*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(o=u*u+c*c))return t.x=0,t.y=this.phi0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(u,c),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(a),this.apa)}return t.x=dB(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},K_=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var H_={init:function(){Math.abs(this.lat1+this.lat2)<jM||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=fB(this.e3,this.sin_po,this.cos_po),this.qs1=F_(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=fB(this.e3,this.sin_po,this.cos_po),this.qs2=F_(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=F_(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>jM?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=F_(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*dB(e-this.long0),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),o=dB(i/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,s=K_(.5*e);if(t<jM)return s;for(var a=t*t,u=1;u<=25;u++)if(s+=o=.5*(i=1-(r=t*(n=Math.sin(s)))*r)*i/Math.cos(s)*(e/(1-a)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return s;return null}};var Y_={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,s,a,u=t.x,c=t.y;return r=dB(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=jM?(s=this.x0+1*this.a*n*Math.sin(r)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(s=this.x0+this.infinity_dist*n*Math.sin(r),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),s=K_(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=dB(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]};var G_={init:function(){this.sphere||(this.k0=fB(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=dB(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=F_(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=dB(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*PM:PM;for(var r,i,o,s,a=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(a),o=Math.cos(a),s=t*i,a+=r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=dB(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var V_={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=dB(e-this.long0),i=T_(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=dB(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=T_(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var X_={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=__(this.es),this.e1=S_(this.es),this.e2=Q_(this.es),this.e3=R_(this.es),this.ml0=this.a*B_(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,s=dB(i-this.long0);if(r=s*Math.sin(o),this.sphere)Math.abs(o)<=jM?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(T_(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=jM)e=this.a*s,n=-1*this.ml0;else{var a=D_(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(r),n=this.a*B_(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,s,a,u,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=jM)e=dB(r/this.a+this.long0),n=0;else{var l;for(s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,u=s,o=20;o;--o)if(u+=c=-1*(s*(u*(l=Math.tan(u))+1)-u-.5*(u*u+a)*l)/((u-s)/l-1),Math.abs(c)<=jM){n=u;break}e=dB(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=jM)n=0,e=dB(this.long0+r/this.a);else{var h,A,f,p,d;for(s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,u=s,o=20;o;--o)if(d=this.e*Math.sin(u),h=Math.sqrt(1-d*d)*Math.tan(u),A=this.a*B_(this.e0,this.e1,this.e2,this.e3,u),f=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=c=(s*(h*(p=A/this.a)+1)-p-.5*h*(p*p+a))/(this.es*Math.sin(2*u)*(p*p+a-2*s*p)/(4*h)+(s-p)*(h*f-2/Math.sin(2*u))-f),Math.abs(c)<=jM){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=dB(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var W_={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/LM*1e-5,s=i,a=1,u=0;for(e=1;e<=10;e++)a*=o,u+=this.A[e]*a;var c,l=u,h=s,A=1,f=0,p=0,d=0;for(e=1;e<=6;e++)c=f*l+A*h,A=A*l-f*h,f=c,p=p+this.B_re[e]*A-this.B_im[e]*f,d=d+this.B_im[e]*A+this.B_re[e]*f;return t.x=d*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,s=(i-this.y0)/this.a,a=o/this.a,u=1,c=0,l=0,h=0;for(e=1;e<=6;e++)n=c*s+u*a,u=u*s-c*a,c=n,l=l+this.C_re[e]*u-this.C_im[e]*c,h=h+this.C_im[e]*u+this.C_re[e]*c;for(var A=0;A<this.iterations;A++){var f,p=l,d=h,g=s,y=a;for(e=2;e<=6;e++)f=d*l+p*h,p=p*l-d*h,d=f,g+=(e-1)*(this.B_re[e]*p-this.B_im[e]*d),y+=(e-1)*(this.B_im[e]*p+this.B_re[e]*d);p=1,d=0;var m=this.B_re[1],I=this.B_im[1];for(e=2;e<=6;e++)f=d*l+p*h,p=p*l-d*h,d=f,m+=e*(this.B_re[e]*p-this.B_im[e]*d),I+=e*(this.B_im[e]*p+this.B_re[e]*d);var C=m*m+I*I;l=(g*m+y*I)/C,h=(y*m-g*I)/C}var E=l,b=h,v=1,x=0;for(e=1;e<=9;e++)v*=E,x+=this.D[e]*v;var w=this.lat0+x*LM*1e5,M=this.long0+b;return t.x=M,t.y=w,t},names:["New_Zealand_Map_Grid","nzmg"]};var J_={init:function(){},forward:function(t){var e=t.x,n=t.y,r=dB(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=dB(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var Z_={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=u_(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=dB(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),s=20;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<jM)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),c=Math.cos(i);n=this.a*c_(i,u,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=K_((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=K_(Math.sin(e)/this.n)),r=dB(r+this.long0),e=T_(e)):(e=l_(t.y/this.a,this.es,this.en),(i=Math.abs(e))<PM?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=dB(n)):i-jM<PM&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var $_={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=dB(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<jM)break}i/=2,Math.PI/2-Math.abs(n)<jM&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=dB(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var tS={init:function(){Math.abs(this.lat1+this.lat2)<jM||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=__(this.es),this.e1=S_(this.es),this.e2=Q_(this.es),this.e3=R_(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=fB(this.e,this.sinphi,this.cosphi),this.ml1=B_(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<jM?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=fB(this.e,this.sinphi,this.cosphi),this.ml2=B_(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=B_(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=B_(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*dB(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=dB(this.long0+o/this.ns),r=T_(this.g-n/this.a),t.x=i,t.y=r,t;var s=this.g-n/this.a;return r=O_(s,this.e0,this.e1,this.e2,this.e3),i=dB(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var eS={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=dB(r-this.long0);Math.abs(i)<=jM&&(e=this.x0+this.R*o,n=this.y0);var s=K_(2*Math.abs(i/Math.PI));(Math.abs(o)<=jM||Math.abs(Math.abs(i)-PM)<=jM)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),u=a*a,c=Math.sin(s),l=Math.cos(s),h=l/(c+l-1),A=h*h,f=h*(2/c-1),p=f*f,d=Math.PI*this.R*(a*(h-p)+Math.sqrt(u*(h-p)*(h-p)-(p+u)*(A-p)))/(p+u);o<0&&(d=-d),e=this.x0+d;var g=u+h;return d=Math.PI*this.R*(f*g-a*Math.sqrt((p+u)*(u+1)-g*g))/(p+u),n=i>=0?this.y0+d:this.y0-d,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,s,a,u,c,l,h,A;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(s=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(a=s-2*i*i+r*r)*a*a/u/u/u-9*s*a/u/u)/27)/(c=(s-a*a/3/u)/u)/(l=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),A=Math.acos(h)/3,n=t.y>=0?(-l*Math.cos(A+Math.PI/3)-a/3/u)*Math.PI:-(-l*Math.cos(A+Math.PI/3)-a/3/u)*Math.PI,e=Math.abs(r)<jM?this.long0:dB(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var nS={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b,v=t.x,x=t.y,w=Math.sin(t.y),M=Math.cos(t.y),B=dB(v-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=jM?(t.x=this.x0+this.a*(PM-x)*Math.sin(B),t.y=this.y0-this.a*(PM-x)*Math.cos(B),t):Math.abs(this.sin_p12+1)<=jM?(t.x=this.x0+this.a*(PM+x)*Math.sin(B),t.y=this.y0+this.a*(PM+x)*Math.cos(B),t):(m=this.sin_p12*w+this.cos_p12*M*Math.cos(B),y=(g=Math.acos(m))/Math.sin(g),t.x=this.x0+this.a*y*M*Math.sin(B),t.y=this.y0+this.a*y*(this.cos_p12*w-this.sin_p12*M*Math.cos(B)),t):(e=__(this.es),n=S_(this.es),r=Q_(this.es),i=R_(this.es),Math.abs(this.sin_p12-1)<=jM?(o=this.a*B_(e,n,r,i,PM),s=this.a*B_(e,n,r,i,x),t.x=this.x0+(o-s)*Math.sin(B),t.y=this.y0-(o-s)*Math.cos(B),t):Math.abs(this.sin_p12+1)<=jM?(o=this.a*B_(e,n,r,i,PM),s=this.a*B_(e,n,r,i,x),t.x=this.x0+(o+s)*Math.sin(B),t.y=this.y0+(o+s)*Math.cos(B),t):(a=w/M,u=D_(this.a,this.e,this.sin_p12),c=D_(this.a,this.e,w),l=Math.atan((1-this.es)*a+this.es*u*this.sin_p12/(c*M)),I=0===(h=Math.atan2(Math.sin(B),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(B)))?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(h)-Math.PI)<=jM?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(B)*Math.cos(l)/Math.sin(h)),A=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*I*(1-(C=I*I)*(d=(f=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*f)*(1-d)/6+(E=C*I)/8*(p=A*f)*(1-2*d)+(b=E*I)/120*(d*(4-7*d)-3*A*A*(1-7*d))-b*I/48*p),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,s,a,u,c,l,h,A,f,p,d,g,y,m,I,C,E,b;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*PM*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=jM?s=this.lat0:(s=K_(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-PM,o=Math.abs(a)<=jM?this.lat0>=0?dB(this.long0+Math.atan2(t.x,-t.y)):dB(this.long0-Math.atan2(-t.x,t.y)):dB(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=s,t}return u=__(this.es),c=S_(this.es),l=Q_(this.es),h=R_(this.es),Math.abs(this.sin_p12-1)<=jM?(A=this.a*B_(u,c,l,h,PM),e=Math.sqrt(t.x*t.x+t.y*t.y),s=O_((A-e)/this.a,u,c,l,h),o=dB(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=s,t):Math.abs(this.sin_p12+1)<=jM?(A=this.a*B_(u,c,l,h,PM),e=Math.sqrt(t.x*t.x+t.y*t.y),s=O_((e-A)/this.a,u,c,l,h),o=dB(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.x,t.y),f=D_(this.a,this.e,this.sin_p12),g=Math.cos(d),m=-(y=this.e*this.cos_p12*g)*y/(1-this.es),I=3*this.es*(1-m)*this.sin_p12*this.cos_p12*g/(1-this.es),b=1-m*(E=(C=e/f)-m*(1+m)*Math.pow(C,3)/6-I*(1+3*m)*Math.pow(C,4)/24)*E/2-C*E*E*E/6,p=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*g),o=dB(this.long0+Math.asin(Math.sin(d)*Math.sin(E)/Math.cos(p))),s=Math.atan((1-this.es*b*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),t.x=o,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var rS={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,u=t.x,c=t.y;return r=dB(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=jM)&&(s=1*this.a*n*Math.sin(r),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=K_(e/this.a),r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=jM?(a=this.lat0,t.x=s,t.y=a,t):(a=K_(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-PM,Math.abs(o)<=jM?(s=this.lat0>=0?dB(this.long0+Math.atan2(t.x,-t.y)):dB(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=dB(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=s,t.y=a,t))},names:["ortho"]},iS=1,oS=2,sS=3,aS=4,uS=5,cS=6,lS=1,hS=2,AS=3,fS=4;function pS(t,e,n,r){var i;return t<jM?(r.value=lS,i=0):(i=Math.atan2(e,n),Math.abs(i)<=KM?r.value=lS:i>KM&&i<=PM+KM?(r.value=hS,i-=PM):i>PM+KM||i<=-(PM+KM)?(r.value=AS,i=i>=0?i-YM:i+YM):(r.value=fS,i+=PM)),i}function dS(t,e){var n=t+e;return n<-YM?n+=HM:n>+YM&&(n-=HM),n}var gS={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=PM-KM/2?this.face=uS:this.lat0<=-(PM-KM/2)?this.face=cS:Math.abs(this.long0)<=KM?this.face=iS:Math.abs(this.long0)<=PM+KM?this.face=this.long0>0?oS:aS:this.face=sS,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,s,a={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===uS)i=PM-e,n>=KM&&n<=PM+KM?(u.value=lS,r=n-PM):n>PM+KM||n<=-(PM+KM)?(u.value=hS,r=n>0?n-YM:n+YM):n>-(PM+KM)&&n<=-KM?(u.value=AS,r=n+PM):(u.value=fS,r=n);else if(this.face===cS)i=PM+e,n>=KM&&n<=PM+KM?(u.value=lS,r=-n+PM):n<KM&&n>=-KM?(u.value=hS,r=-n):n<-KM&&n>=-(PM+KM)?(u.value=AS,r=-n-PM):(u.value=fS,r=n>0?-n+YM:-n-YM);else{var c,l,h,A,f,p;this.face===oS?n=dS(n,+PM):this.face===sS?n=dS(n,+YM):this.face===aS&&(n=dS(n,-PM)),A=Math.sin(e),f=Math.cos(e),p=Math.sin(n),c=f*Math.cos(n),l=f*p,h=A,this.face===iS?r=pS(i=Math.acos(c),h,l,u):this.face===oS?r=pS(i=Math.acos(l),h,-c,u):this.face===sS?r=pS(i=Math.acos(-c),h,-l,u):this.face===aS?r=pS(i=Math.acos(-l),h,c,u):(i=r=0,u.value=lS)}return s=Math.atan(12/YM*(r+Math.acos(Math.sin(r)*Math.cos(KM))-PM)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===hS?s+=PM:u.value===AS?s+=YM:u.value===fS&&(s+=1.5*YM),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,r,i,o,s,a,u,c,l,h,A,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=lS:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=hS,e-=PM):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=AS,e=e<0?e+YM:e-YM):(p.value=fS,e+=PM),c=YM/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),this.face===uS)u=Math.acos(a),f.phi=PM-u,p.value===lS?f.lam=s+PM:p.value===hS?f.lam=s<0?s+YM:s-YM:p.value===AS?f.lam=s-PM:f.lam=s;else if(this.face===cS)u=Math.acos(a),f.phi=u-PM,p.value===lS?f.lam=-s+PM:p.value===hS?f.lam=-s:p.value===AS?f.lam=-s-PM:f.lam=s<0?-s-YM:-s+YM;else{var d,g,y;c=(d=a)*d,g=(c+=(y=c>=1?0:Math.sqrt(1-c)*Math.sin(s))*y)>=1?0:Math.sqrt(1-c),p.value===hS?(c=g,g=-y,y=c):p.value===AS?(g=-g,y=-y):p.value===fS&&(c=g,g=y,y=-c),this.face===oS?(c=d,d=-g,g=c):this.face===sS?(d=-d,g=-g):this.face===aS&&(c=d,d=g,g=-c),f.phi=Math.acos(-y)-PM,f.lam=Math.atan2(g,d),this.face===oS?f.lam=dS(f.lam,-PM):this.face===sS?f.lam=dS(f.lam,-YM):this.face===aS&&(f.lam=dS(f.lam,+PM))}return 0!==this.es&&(l=f.phi<0?1:0,h=Math.tan(f.phi),A=this.b/Math.sqrt(h*h+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-A*A)/(this.one_minus_f*A)),l&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},yS=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],mS=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],IS=.8487,CS=1.3523,ES=qM/5,bS=1/ES,vS=18,xS=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var wS={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=dB(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*ES);r<0?r=0:r>=vS&&(r=17);var i={x:xS(yS[r],n=qM*(n-bS*r))*e,y:xS(mS[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*IS+this.x0,i.y=i.y*this.a*CS+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*IS),y:Math.abs(t.y-this.y0)/(this.a*CS)};if(e.y>=1)e.x/=yS[18][0],e.y=t.y<0?-PM:PM;else{var n=Math.floor(e.y*vS);for(n<0?n=0:n>=vS&&(n=17);;)if(mS[n][0]>e.y)--n;else{if(!(mS[n+1][0]<=e.y))break;++n}var r=mS[n],i=5*(e.y-r[0])/(mS[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(xS(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,jM,100),e.x/=xS(yS[n],i),e.y=(5*n+i)*UM,t.y<0&&(e.y=-e.y)}return e.x=dB(e.x+this.long0),e},names:["Robinson","robin"]};var MS,BS={init:function(){this.name="geocent"},forward:function(t){return SB(t,this.es,this.a)},inverse:function(t){return QB(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};PB.defaultDatum="WGS84",PB.Proj=_B,PB.WGS84=new PB.Proj("WGS84"),PB.Point=i_,PB.toPoint=OB,PB.defs=uB,PB.transform=FB,PB.mgrs=VB,PB.version="2.6.1",(MS=PB).Proj.projections.add(h_),MS.Proj.projections.add(y_),MS.Proj.projections.add(m_),MS.Proj.projections.add(E_),MS.Proj.projections.add(b_),MS.Proj.projections.add(v_),MS.Proj.projections.add(x_),MS.Proj.projections.add(w_),MS.Proj.projections.add(M_),MS.Proj.projections.add(N_),MS.Proj.projections.add(q_),MS.Proj.projections.add(H_),MS.Proj.projections.add(Y_),MS.Proj.projections.add(G_),MS.Proj.projections.add(V_),MS.Proj.projections.add(X_),MS.Proj.projections.add(W_),MS.Proj.projections.add(J_),MS.Proj.projections.add(Z_),MS.Proj.projections.add($_),MS.Proj.projections.add(tS),MS.Proj.projections.add(eS),MS.Proj.projections.add(nS),MS.Proj.projections.add(rS),MS.Proj.projections.add(gS),MS.Proj.projections.add(wS),MS.Proj.projections.add(BS);var _S,SS=(_S=!0,function(t,e){var n=_S?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return _S=!1,n}),QS=SS(void 0,(function(){return QS.toString().search("(((.+)+)+)+$").toString().constructor(QS).search("(((.+)+)+)+$")}));QS();const RS={"EPSG:4490":'GEOGCS["China Geodetic Coordinate System 2000",DATUM["China_2000",SPHEROID["CGCS2000",6378137,298.257222101,AUTHORITY["EPSG","1024"]],AUTHORITY["EPSG","1043"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4490"]]',"EPSG:4214":'GEOGCS["Beijing 1954",DATUM["Beijing_1954",SPHEROID["Krassowsky 1940",6378245,298.3],TOWGS84[15.8,-154.4,-82.3,0,0,0,0]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4214"]]',"EPSG:4610":'GEOGCS["Xian 1980",DATUM["Xian_1980",SPHEROID["IAG 1975",6378140,298.257,AUTHORITY["EPSG","7049"]],AUTHORITY["EPSG","6610"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4610"]]'};class DS{constructor(t,e,n){this.epsgCode=t,this.extent=n,this.sceneMode=gc.SCENE3D,Array.isArray(e)&&(this.extent=e),this.getExtent(),this.WKT=e,(!this.WKT||Array.isArray(this.WKT))&&(this.WKT=RS[t]),this.WKT&&PB.defs(t,this.WKT);var r=PB.defs(t);if(!r)throw new Error(t+" was not defined,make sure the WKT param was not null");this.unit=r.units||"degree",this.proj4Projection=PB(t),this._id=Al++}getExtent(){if(!this._rectifyExtent){var t=this.extent[2]-this.extent[0],e=this.extent[3]-this.extent[1];if(t===e)this._rectifyExtent=[this.extent[0],this.extent[1],this.extent[2],this.extent[3]];else{var n=Math.max(t,e);this._rectifyExtent=[this.extent[0],this.extent[3]-n,this.extent[0]+n,this.extent[3]]}}return this._rectifyExtent}getLngLatCenter(){return this._rectifyLngLatExtent||this.getLngLatExtent(),[this._rectifyLngLatExtent[2]+(this._rectifyLngLatExtent[2]-this._rectifyLngLatExtent[0])/2,this._rectifyLngLatExtent[3]-(this._rectifyLngLatExtent[3]-this._rectifyLngLatExtent[1])/2]}getLngLatExtent(){if(!this._rectifyLngLatExtent){var t=this.proj4Projection.inverse([this.extent[0],this.extent[1]]),e=this.proj4Projection.inverse([this.extent[2],this.extent[3]]),n=e[0]-t[0],r=e[1]-t[1];if(n===r)this._rectifyLngLatExtent=[t[0],t[1],e[0],e[0]];else{var i=Math.max(n,r);this._rectifyLngLatExtent=[t[0],e[1]-i,t[0]+i,e[1]]}}return this._rectifyLngLatExtent}getOrigin(){return[this.extent[0],this.extent[3]]}getEpsgCode(){return this.epsgCode}getUnit(){return this.unit}getWKT(){return this.WKT}getWidth(){return this._rectifyExtent[2]-this._rectifyExtent[0]}getHeight(){return this._rectifyExtent[3]-this._rectifyExtent[1]}getOriginX(){return this._rectifyExtent[0]}getOriginY(){return this._rectifyExtent[3]}toWGS84(t){return this.proj4Projection.inverse(t)}fromWGS84(t){return this.proj4Projection.forward(t)}fromLngLat(t,e){var n=sE.convert(t),r=this.proj4Projection.forward([n.lng,n.lat]);return{x:(r[0]-this.getOriginX())/this.getWidth(),y:(this.getOriginY()-r[1])/this.getHeight(),z:e||0}}toLngLat(t,e){var n=this.proj4Projection.inverse([t*this.getWidth()+this.getOriginX(),this.getOriginY()-e*this.getHeight()]);return new sE(n[0],n[1])}isProj(){return!("degree"==this.unit||"degrees"==this.unit||"d"==this.unit)}static get(t){for(var e in DS)if(DS.hasOwnProperty(e)&&DS[e].getEpsgCode&&DS[e].getEpsgCode()===t)return DS[e];return null}static set(t){var e=t.getEpsgCode().replace(":","").toUpperCase();DS[e]=t}static fromEpsgCode(t,e,n){"number"==typeof t&&(t="EPSG:"+t);let r=DS[t.replace(":","")];if(void 0===r){if(void 0===e||void 0===n)throw new Error("Invalid epsgCode: "+t);return new DS(t,e,n)}return r}}DS.EPSG4326=new DS("EPSG:4326",[-180,-90,180,90]),DS.EPSG4490=new DS("EPSG:4490",[-180,-90,180,90]),DS.EPSG4214=new DS("EPSG:4214",[-180,-90,180,90]),DS.EPSG4610=new DS("EPSG:4610",[-180,-90,180,90]),DS.EPSG3857=new DS("EPSG:3857",[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]);var TS,OS=(TS=!0,function(t,e){var n=TS?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return TS=!1,n}),NS=OS(void 0,(function(){return NS.toString().search("(((.+)+)+)+$").toString().constructor(NS).search("(((.+)+)+)+$")}));NS();const FS=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),zS=FS(void 0,(function(){return zS.toString().search("(((.+)+)+)+$").toString().constructor(zS).search("(((.+)+)+)+$")}));zS();class kS{constructor(t,e,n,r){this.z=t,this.x=e,this.y=n,this.key=jS(0,t,t,e,n),r&&(this.indexExtent=r,this.worldWidth=r[2]-r[0],this.worldHeight=r[3]-r[1])}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}getTileBBox(){var t=Math.pow(2,this.z);return this.indexExtent,this.indexExtent[0]+this.worldWidth*this.x/t+","+(this.indexExtent[3]-this.worldHeight*(this.y+1)/t)+","+(this.indexExtent[0]+this.worldWidth*(this.x+1)/t)+","+(this.indexExtent[3]-this.worldHeight*this.y/t)}url(t,e,n,r){const i=this.getTileBBox(),o=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y),s=this.x,a=this.y,u=this.z;var c,l,h;let A=t[(c=this.x,l=this.y,h=t.length,(c+l)%h)].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(u)).replace(/{x}/g,String(s)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:a)).replace("{quadkey}",o).replace("{bbox-epsg-3857}",i).replace("{bbox}",i).replace("{width}",n).replace("{height}",n);if(this.getViewBounds){var f=this.getViewBounds();f&&(A=A.replace("{viewBounds}",f))}return r&&(A=A.replace("{scale}",r)),A}getViewBounds(){var t=Math.pow(2,this.z);let e=this.indexExtent[0]+this.worldWidth*this.x/t,n=this.indexExtent[0]+this.worldWidth*(this.x+1)/t;return'{"leftBottom":{"x":'+e+',"y":'+(this.indexExtent[3]-this.worldHeight*(this.y+1/t))+'},"rightTop":{"x":'+n+',"y":'+(this.indexExtent[3]-this.worldHeight*(this.y/t))+"}}"}toString(){return this.z+"/"+this.x+"/"+this.y}}class LS{constructor(t,e){this.wrap=t,this.canonical=e,this.key=jS(t,e.z,e.z,e.x,e.y)}}class PS{constructor(t,e,n,r,i,o){this.overscaledZ=t,this.wrap=e,this.canonical=new kS(n,+r,+i,o),this.key=0===e&&t===n?this.canonical.key:jS(e,t,n,r,i),this.indexExtent=o}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new PS(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y,this.indexExtent):new PS(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e,this.indexExtent)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return jS(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return jS(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new PS(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y,this.indexExtent)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new PS(e,this.wrap,e,n,r,this.indexExtent),new PS(e,this.wrap,e,n+1,r,this.indexExtent),new PS(e,this.wrap,e,n,r+1,this.indexExtent),new PS(e,this.wrap,e,n+1,r+1,this.indexExtent)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new PS(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y,this.indexExtent)}unwrapTo(t){return new PS(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y,this.indexExtent)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new LS(this.wrap,this.canonical)}toString(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y}}function jS(t,e,n,r,i){const o=1<<Math.min(n,22);let s=o*(i%o)+r%o;if(t&&n<22){s+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))}return 16*(32*s+n)+(e-n)}Fl(kS,"CanonicalTileID"),Fl(PS,"OverscaledTileID",{omit:["projMatrix"]});const US=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),qS=US(void 0,(function(){return qS.toString().search("(((.+)+)+)+$").toString().constructor(qS).search("(((.+)+)+)+$")}));function KS(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,s=(t.y+1)*n,a=hE(r),u=hE(i),c=AE(o),l=AE(s),h=e.project(a,c),A=e.project(u,c),f=e.project(u,l),p=e.project(a,l);let d=Math.min(h.x,A.x,f.x,p.x),g=Math.min(h.y,A.y,f.y,p.y),y=Math.max(h.x,A.x,f.x,p.x),m=Math.max(h.y,A.y,f.y,p.y);const I=n/16;function C(t,n,r,i,o,s){const a=(r+o)/2,u=(i+s)/2,c=e.project(hE(a),AE(u)),l=Math.max(0,d-c.x,g-c.y,c.x-y,c.y-m);d=Math.min(d,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),m=Math.max(m,c.y),l>I&&(C(t,c,r,i,a,u),C(c,n,a,u,o,s))}C(h,A,r,o,i,o),C(A,f,i,o,i,s),C(f,p,i,s,r,s),C(p,h,r,s,r,o),d-=I,g-=I,y+=I,m+=I;const E=1/Math.max(y-d,m-g);return{scale:E,x:d*E,y:g*E,x2:y*E,y2:m*E,projection:e}}qS();const HS=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),YS=HS(void 0,(function(){return YS.toString().search("(((.+)+)+)+$").toString().constructor(YS).search("(((.+)+)+)+$")}));YS();const GS=lm.mat4.identity(new Float32Array(16));class VS{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new sE(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e,n=!0){return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return lE(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return function(t){const e=t.fovAboveCenter,n=(t._camera.position[2]*t.worldSize-0)/Math.cos(t._pitch),r=Math.sin(e)*n/Math.sin(Math.max(Math.PI/2-t._pitch-e,.01)),i=Math.sin(t._pitch)*r+n,o=n*(1/t._horizonShift);return Math.min(1.01*i,o)}(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,r){const i=t.horizonLineFromTop(!1),o=new Tr(e,Math.max(i,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(o,r))}pointCoordinate3D(t,e,n){const r=new Tr(e,n),i=this.pointCoordinate(t,r.x,r.y,0);return[i.x,i.y,i.z]}isPointAboveHorizon(t,e){const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return GS}createTileMatrix(t,e,n){let r,i,o;const s=n.canonical,a=lm.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const u=KS(s,this);r=1,i=u.x+n.wrap*u.scale,o=u.y,lm.mat4.scale(a,a,[r/u.scale,r/u.scale,t.pixelsPerMeter/e])}else{r=e/t.zoomScale(s.z);i=(s.x+Math.pow(2,s.z)*n.wrap)*r,o=s.y*r}return lm.mat4.translate(a,a,[i,o,0]),lm.mat4.scale(a,a,[r/Ic,r/Ic,1]),a}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}const XS=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),WS=XS(void 0,(function(){return WS.toString().search("(((.+)+)+)+$").toString().constructor(WS).search("(((.+)+)+)+$")}));WS();class JS extends VS{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],r=Math.sin(sl(e));this.n=(r+Math.sin(sl(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:n,c:r,r0:i}=this,o=sl(t-this.center[0]),s=sl(e),a=Math.sqrt(r-2*n*Math.sin(s))/n;return{x:a*Math.sin(o*n),y:a*Math.cos(o*n)-i,z:0}}unproject(t,e){const{n:n,c:r,r0:i}=this,o=i+e;let s=Math.atan2(t,Math.abs(o))*Math.sign(o);o*n<0&&(s-=Math.PI*Math.sign(t)*Math.sign(o));const a=sl(this.center[0])*n;s=cl(s,-Math.PI-a,Math.PI-a);const u=ul(al(s/n)+this.center[0],-180,180),c=Math.asin(ul((r-(t*t+o*o)*n*n)/(2*n),-1,1)),l=ul(al(c),-85.051129,fE);return new sE(u,l)}}const ZS=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),$S=ZS(void 0,(function(){return $S.toString().search("(((.+)+)+)+$").toString().constructor($S).search("(((.+)+)+)+$")}));$S();const tQ=1.340264,eQ=-.081106,nQ=893e-6,rQ=.003796,iQ=Math.sqrt(3)/2;class oQ extends VS{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(iQ*Math.sin(e)),r=n*n,i=r*r*r,o=t*Math.cos(n)/(iQ*(tQ+3*eQ*r+i*(7*nQ+.034164*r))),s=n*(tQ+eQ*r+i*(nQ+rQ*r));return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=n*n,i=r*r*r;for(let t,o,s,a=0;a<12&&(o=n*(tQ+eQ*r+i*(nQ+rQ*r))-e,s=tQ+3*eQ*r+i*(7*nQ+.034164*r),t=o/s,n=ul(n-t,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(t)<1e-12));++a);const o=iQ*t*(tQ+3*eQ*r+i*(7*nQ+.034164*r))/Math.cos(n),s=Math.asin(Math.sin(n)/iQ),a=ul(180*o/Math.PI,-180,180),u=ul(180*s/Math.PI,-85.051129,fE);return new sE(a,u)}}const sQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),aQ=sQ(void 0,(function(){return aQ.toString().search("(((.+)+)+)+$").toString().constructor(aQ).search("(((.+)+)+)+$")}));aQ();class uQ extends VS{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),r=ul(360*(.5-e),-85.051129,fE);return new sE(n,r)}}const cQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),lQ=cQ(void 0,(function(){return lQ.toString().search("(((.+)+)+)+$").toString().constructor(lQ).search("(((.+)+)+)+$")}));lQ();const hQ=Math.PI/2;function AQ(t){return Math.tan((hQ+t)/2)}class fQ extends VS{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let r=sl(e),i=sl(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),s=AQ(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(AQ(i)/s),this.f=o*Math.pow(AQ(r),this.n)/this.n}project(t,e){e=sl(e),this.southernCenter&&(e=-e),t=sl(t-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?e<-hQ+n&&(e=-hQ+n):e>hQ-n&&(e=hQ-n);const o=i/Math.pow(AQ(e),r);let s=o*Math.sin(r*t),a=i-o*Math.cos(r*t);return s=.5*(s/Math.PI+.5),a=.5*(a/Math.PI+.5),{x:s,y:this.southernCenter?a:1-a,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:n,f:r}=this,i=r-e,o=Math.sign(i),s=Math.sign(n)*Math.sqrt(t*t+i*i);let a=Math.atan2(t,Math.abs(i))*o;i*n<0&&(a-=Math.PI*Math.sign(t)*o);const u=ul(al(a/n)+this.center[0],-180,180),c=ul(al(2*Math.atan(Math.pow(r/s,1/n))-hQ),-85.051129,fE);return new sE(u,this.southernCenter?-c:c)}}const pQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),dQ=pQ(void 0,(function(){return dQ.toString().search("(((.+)+)+)+$").toString().constructor(dQ).search("(((.+)+)+)+$")}));dQ();class gQ extends VS{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:(180+t)/360,y:cE(e),z:0}}unproject(t,e){const n=hE(t),r=AE(e);return new sE(n,r)}}const yQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mQ=yQ(void 0,(function(){return mQ.toString().search("(((.+)+)+)+$").toString().constructor(mQ).search("(((.+)+)+)+$")}));mQ();const IQ=sl(fE);class CQ extends VS{project(t,e){const n=(e=sl(e))*e,r=n*n,i=e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)));return{x:.5*((t=sl(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(i/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const t=o*o;i=(n*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),n=ul(n-i,-IQ,IQ)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const s=ul(al(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),a=al(n);return new sE(s,a)}}const EQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),bQ=EQ(void 0,(function(){return bQ.toString().search("(((.+)+)+)+$").toString().constructor(bQ).search("(((.+)+)+)+$")}));bQ();const vQ=sl(fE);class xQ extends VS{project(t,e){e=sl(e),t=sl(t);const n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,s=.5*(t*r+2*n*Math.sin(t/2)/o)||0,a=.5*(e+Math.sin(e)/o)||0;return{x:.5*(s/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let s=0,a=0;do{const i=Math.cos(r),o=Math.sin(r),u=2*o*i,c=o*o,l=i*i,h=Math.cos(n/2),A=Math.sin(n/2),f=2*h*A,p=A*A,d=1-l*h*h,g=d?1/d:0,y=d?Math.acos(i*h)*Math.sqrt(1/d):0,m=.5*(2*y*i*A+2*n/Math.PI)-t,I=.5*(y*o+r)-e,C=.5*g*(l*p+y*i*h*c)+1/Math.PI,E=g*(f*u/4-y*o*A),b=.125*g*(u*A-y*o*l*f),v=.5*g*(c*h+y*p*i)+.5,x=E*b-v*C;s=(I*E-m*v)/x,a=(m*b-I*C)/x,n=ul(n-s,-Math.PI,Math.PI),r=ul(r-a,-vQ,vQ)}while((Math.abs(s)>o||Math.abs(a)>o)&&--i>0);return new sE(al(n),al(r))}}const wQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),MQ=wQ(void 0,(function(){return MQ.toString().search("(((.+)+)+)+$").toString().constructor(MQ).search("(((.+)+)+)+$")}));MQ();class BQ extends VS{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(sl(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:r}=this;return{x:sl(t)*r*n+.5,y:-(Math.sin(sl(e))/r)*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:r}=this,i=-(e-.5)/n,o=ul(al((t-.5)/n)/r,-180,180),s=i*r,a=Math.asin(ul(s,-1,1)),u=ul(al(a),-85.051129,fE);return new sE(o,u)}}const _Q=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),SQ=_Q(void 0,(function(){return SQ.toString().search("(((.+)+)+)+$").toString().constructor(SQ).search("(((.+)+)+)+$")}));function QQ(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new gQ(t);case"equirectangular":return new uQ(t);case"naturalEarth":return new CQ(t);case"equalEarth":return new oQ(t);case"winkelTripel":return new xQ(t);case"albers":return n?new BQ(t):new JS(t);case"lambertConformalConic":return n?new BQ(t):new fQ(t)}throw new Error("Invalid projection name: "+t.name)}SQ();const RQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),DQ=RQ(void 0,(function(){return DQ.toString().search("(((.+)+)+)+$").toString().constructor(DQ).search("(((.+)+)+)+$")}));DQ();let TQ=new ui,OQ=new ui,NQ=new Wr,FQ=new ed;var zQ=["Unknown","Point","LineString","Polygon"];const kQ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0,strideInBytes:1}],LQ=[{name:"a_fade_opacity",components:1,type:"Uint32",offset:0,strideInBytes:4}];function PQ(t,e,n,r,i,o,s,a,u,c,l,h,A){const f=a?Math.min(RM,Math.round(a[0])):0,p=a?Math.min(RM,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,s,(f<<1)+(u?1:0),p,16*c,16*l,256*h,256*A)}function jQ(t){for(const e of t.sections)if(Nx(e.text))return!0;return!1}class UQ{constructor(t){this.layoutVertexArray=new Uh,this.indexArray=new Jh,this.programConfigurations=t,this.segments=new Up,this.dynamicLayoutVertexArray=new sA,this.opacityVertexArray=new Hh,this.placedSymbolArray=new dA,this.alongLine=!0}createLngLatQuadsArray(){this.lngLatQuadsArray=new xA,this.alongLine=!1,this.heightDirty=!0}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||((n||!this.alongLine&&this.heightDirty)&&(void 0===this.dynamicLayoutVertexBuffer?this.dynamicLayoutVertexBuffer=Uf.toVertexBuffer(t,this.dynamicLayoutVertexArray,cv.members,!0):Uf.copyFromArrayView(this.dynamicLayoutVertexBuffer,this.dynamicLayoutVertexArray.arrayBuffer,0),!this.alongLine&&(this.heightDirty=!1)),n&&(this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,uv.members),this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray,e),this.opacityVertexBuffer=Uf.toVertexBuffer(t,this.opacityVertexArray,t.webgpu?LQ:kQ,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}updateElevationRequestor(t,e){let n=this.lngLatQuadsArray.get(e.lngLatQuadsIndex),r=n.lng,i=n.lat,o=n.quads;ui.fromRadians(r,i,0,TQ),TQ.height=t,ui.toCartesian(TQ,void 0,NQ);let s=this._crs;(s.sceneMode==gc.COLUMBUS_VIEW||s.sceneMode==gc.SCENE2D)&&(NQ=pc.convertToColumbusCartesian(NQ)),ed.fromCartesian(NQ,FQ),n.height=TQ.height;let a=this.dynamicLayoutVertexArray.bytesPerElement/4,u=4*a,c=e.quadIndex,l=this.dynamicLayoutVertexArray.float32;for(let t=0;t<o;t++){for(let t=0;t<4;t++){let e=c*u+t*a;l[e+4]=FQ.high.x,l[e+5]=FQ.high.y,l[e+6]=FQ.high.z,l[e+7]=FQ.low.x,l[e+8]=FQ.low.y,l[e+9]=FQ.low.z}c++}this.heightDirty=!0,e.heightCorrectedCallback()}correctHeight(t,e,n){if(this._elevationProvider=t,this._crs=e,!this.alongLine){this.createElevationRequestors(n);for(let e=0;e<this.elevationRequestorArray.length;e++){let n=this.elevationRequestorArray[e];t.requestElevation(n)}}}createElevationRequestors(t){if(this.elevationRequestorArray)return;this.elevationRequestorArray=[];let e=0;for(let n=0;n<this.lngLatQuadsArray.length;n++){let r=this.lngLatQuadsArray.get(n),i=r.lng,o=r.lat,s=ui.fromRadians(i,o,0),a=r.quads;this.elevationRequestorArray.push(new Ry({owner:this,callbackParameter:{quadIndex:e,lngLatQuadsIndex:n,heightCorrectedCallback:t},requesCarto:s})),e+=a}}destroy(){if(this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.lngLatQuadsArray&&this.lngLatQuadsArray.destroy(),this.elevationRequestorArray)){for(let t=0;t<this.elevationRequestorArray.length;t++){let e=this.elevationRequestorArray[t];this._elevationProvider.cancelRequestor(e)}this.elevationRequestorArray=[]}}}Fl(UQ,"SymbolBuffers");class qQ{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Up,this.collisionVertexArray=new Xh,this.collisionVertexArrayExt=new Wh}upload(t){this.layoutVertexBuffer=Uf.toVertexBuffer(t,this.layoutVertexArray,this.layoutAttributes.members),this.indexBuffer=Uf.toIndexBuffer(t,this.indexArray),this.collisionVertexBuffer=Uf.toVertexBuffer(t,this.collisionVertexArray,lv.members,!0),this.collisionVertexBufferExt=Uf.toVertexBuffer(t,this.collisionVertexArrayExt,hv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Fl(qQ,"CollisionBuffers");class KQ{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.webgpu=t.webgpu,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=lm.mat4.identity([]),this.placementViewportMatrix=lm.mat4.identity([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cv(this.zoom,e["text-size"]),this.iconSizeData=Cv(this.zoom,e["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1);const o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>vw[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){var t=uv.members;this.text=new UQ(new op(t,this.layers,this.zoom,(t=>/^text/.test(t))),this.webgpu),this.icon=new UQ(new op(t,this.layers,this.zoom,(t=>/^icon/.test(t))),this.webgpu),this.glyphOffsetArray=new mA,this.lineVertexArray=new IA,this.symbolInstances=new yA}calculateGlyphDependencies(t,e,n,r,i){for(let n=0;n<t.length;n++)if(e[t.charCodeAt(n)]=!0,r&&i){const r=kx[t.charAt(n)];r&&(e[r.charCodeAt(0)]=!0)}}populate(t,e,n,r){const i=this.layers[0],o=i.layout,s=o.get("text-font"),a=o.get("text-field"),u=o.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof Z&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),l="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!l)return;const A=e.iconDependencies,f=e.glyphDependencies,p=e.availableImages,d=new oh(this.zoom);for(const{feature:e,id:r,index:a,sourceLayerIndex:u}of t){const t=i._featureFilter.needGeometry,g=td(e,t);if(!i._featureFilter.filter(d,g,n))continue;let y,m;if(t||(g.geometry=Wp(e)),c){const t=i.getValueAndResolveTokens("text-field",g,n,p),e=Z.factory(t);jQ(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Hx||this.hasRTLText&&Gx.isParsed())&&(y=Mv(e,i,g))}if(l){const t=i.getValueAndResolveTokens("icon-image",g,n,p);m=t instanceof nt?t:nt.fromString(t)}if(!y&&!m)continue;const I=this.sortFeaturesByKey?h.evaluate(g,{},n):void 0,C={id:r,text:y,icon:m,index:a,sourceLayerIndex:u,geometry:g.geometry,properties:e.properties,type:zQ[e.type],sortKey:I};if(this.features.push(C),m&&(A[m.name]=!0),y){const t=s.evaluate(g,{},n).join(","),e="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vw.vertical)>=0;for(const n of y.sections)if(n.image)A[n.image.name]=!0;else{const r=_x(y.toString()),i=n.fontStack||t,o=f[i]=f[i]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function s(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function a(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var c=0;c<t.length;c++){var l=t[c],h=l.geometry,A=l.text?l.text.toString():null;if(A){var f=u(A,h),p=u(A,h,!0);if(f in n&&p in e&&n[f]!==e[p]){var d=a(f,p,h),g=s(f,p,r[d].geometry);delete e[f],delete n[p],n[u(A,r[g].geometry,!0)]=g,r[d].geometry=null}else f in n?s(f,p,h):p in e?a(f,p,h):(o(c),e[f]=i-1,n[p]=i-1)}else o(c)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload||this.text.heightDirty||this.icon.heightDirty}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return!this.projectionInstance&&(this.projectionInstance=QQ(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:t,y:n}of e)this.lineVertexArray.emplaceBack(t,n);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,r,i,o,s,a,u,c,l,h,A,f,p,d){const g=t.indexArray,y=t.layoutVertexArray,m=t.segments.prepareSegment(4*e.length,y,g,this.canOverlap?o.sortKey:void 0),I=this.glyphOffsetArray.length,C=m.vertexLength,E=this.allowVerticalPlacement&&s===vw.vertical?Math.PI/2:0,b=o.text&&o.text.sections;if(!i){let n=vl(d,c,OQ);t.lngLatQuadsArray.emplaceBack(n.longitude,n.latitude,0,e.length)}for(let r=0;r<e.length;r++){const{tl:i,tr:s,bl:a,br:l,tex:h,pixelOffsetTL:A,pixelOffsetBR:d,minFontScaleX:I,minFontScaleY:C,glyphOffset:v,isSDF:x,sectionIndex:w}=e[r],M=m.vertexLength,B=v[1];PQ(y,u.x,u.y,i.x,B+i.y,h.x,h.y,n,x,A.x,A.y,I,C),PQ(y,u.x,u.y,s.x,B+s.y,h.x+h.w,h.y,n,x,d.x,A.y,I,C),PQ(y,u.x,u.y,a.x,B+a.y,h.x,h.y+h.h,n,x,A.x,d.y,I,C),PQ(y,u.x,u.y,l.x,B+l.y,h.x+h.w,h.y+h.h,n,x,d.x,d.y,I,C);const _=ed.fromCartesian(c);KQ.addDynamicAttributes(t.dynamicLayoutVertexArray,u.x,u.y,u.z,E,_.high.x,_.high.y,_.high.z,_.low.x,_.low.y,_.low.z,0,0),g.emplaceBack(M,M+1,M+2),g.emplaceBack(M+1,M+2,M+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v[0]),(r===e.length-1||w!==e[r+1].sectionIndex)&&t.programConfigurations.populatePaintArrays(y.length,o,o.index,{},f,p,b&&b[w])}const v=u;t.placedSymbolArray.emplaceBack(v.x,v.y,v.z,u.x,u.y,I,this.glyphOffsetArray.length-I,C,l,h,u.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],s,0,!1,0,A,0)}_commitLayoutVertex(t,e,n,r,i,o,s){t.emplaceBack(e,n,r,i,o,Math.round(s.x),Math.round(s.y))}_addCollisionDebugVertices(t,e,n,r,i,o,s){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=a.vertexLength,c=s.tileAnchorX,l=s.tileAnchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new Tr(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new Tr(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new Tr(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new Tr(t.x1,t.y2)),a.vertexLength+=4;const h=n.indexArray;h.emplaceBack(u,u+1),h.emplaceBack(u+1,u+2),h.emplaceBack(u+2,u+3),h.emplaceBack(u+3,u),a.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceIconSize(t,e,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qQ(Gh,Av.members,uA),this.iconCollisionBox=new qQ(Gh,Av.members,uA);const n=bv(this.iconSizeData,t),r=bv(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceText(t){let e=this.symbolInstances.get(t);return e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:t}getSymbolInstanceTextSize(t,e,n,r){const i=e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r,o=this.text.placedSymbolArray.get(i),s=Ev(this.textSizeData,t,o)/gv;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,n){const r=this.icon.placedSymbolArray.get(n),i=Ev(this.iconSizeData,t,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s),a=this.textCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(a,i,r.padding)}}_updateIconDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceIconSize(t,e,o),a=this.iconCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(a,i,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=bv(this.iconSizeData,t),r=bv(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.copyFromArrayView(this.textCollisionBox.collisionVertexArrayExt.arrayBuffer),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.copyFromArrayView(this.iconCollisionBox.collisionVertexArrayExt.arrayBuffer)}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,s,a,u){const c={};if(e<n){const{x1:n,y1:r,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,featureIndex:f,ecefX:p,ecefY:d,ecefZ:g}=t.get(e);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,ecefX:p,ecefY:d,ecefZ:g},c.textFeatureIndex=f}if(r<i){const{x1:e,y1:n,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,featureIndex:f,ecefX:p,ecefY:d,ecefZ:g}=t.get(r);c.verticalTextBox={x1:e,y1:n,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,ecefX:p,ecefY:d,ecefZ:g},c.verticalTextFeatureIndex=f}if(o<s){const{x1:e,y1:n,x2:r,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,featureIndex:f,ecefX:p,ecefY:d,ecefZ:g}=t.get(o);c.iconBox={x1:e,y1:n,x2:r,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,ecefX:p,ecefY:d,ecefZ:g},c.iconFeatureIndex=f}if(a<u){const{x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,featureIndex:f,ecefX:p,ecefY:d,ecefZ:g}=t.get(a);c.verticalIconBox={x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:h,tileAnchorY:A,ecefX:p,ecefY:d,ecefZ:g},c.verticalIconFeatureIndex=f}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<r;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const s=this.symbolInstances.get(t);r.push(0|Math.round(e*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:s,verticalPlacedIconSymbolIndex:a}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a)}this.text.indexBuffer&&this.text.indexBuffer.copyFromArrayView(this.text.indexArray.arrayBuffer),this.icon.indexBuffer&&this.icon.indexBuffer.copyFromArrayView(this.icon.indexArray.arrayBuffer)}}static addDynamicAttributes(t,e,n,r,i,o,s,a,u,c,l,h,A){t.emplaceBack(e,n,r,i,o,s,a,u,c,l,h,A),t.emplaceBack(e,n,r,i,o,s,a,u,c,l,h,A),t.emplaceBack(e,n,r,i,o,s,a,u,c,l,h,A),t.emplaceBack(e,n,r,i,o,s,a,u,c,l,h,A)}}Fl(KQ,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]});var HQ,YQ=(HQ=!0,function(t,e){var n=HQ?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return HQ=!1,n}),GQ=YQ(void 0,(function(){return GQ.toString().search("(((.+)+)+)+$").toString().constructor(GQ).search("(((.+)+)+)+$")}));GQ();const VQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),XQ=VQ(void 0,(function(){return XQ.toString().search("(((.+)+)+)+$").toString().constructor(XQ).search("(((.+)+)+)+$")}));XQ();const WQ=new Ih({"symbol-placement":new gh(gp.layout_symbol["symbol-placement"]),"symbol-spacing":new gh(gp.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gh(gp.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yh(gp.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gh(gp.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gh(gp.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new gh(gp.layout_symbol["icon-ignore-placement"]),"icon-optional":new gh(gp.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gh(gp.layout_symbol["icon-rotation-alignment"]),"icon-size":new yh(gp.layout_symbol["icon-size"]),"icon-text-fit":new gh(gp.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gh(gp.layout_symbol["icon-text-fit-padding"]),"icon-image":new yh(gp.layout_symbol["icon-image"]),"icon-rotate":new yh(gp.layout_symbol["icon-rotate"]),"icon-padding":new gh(gp.layout_symbol["icon-padding"]),"icon-keep-upright":new gh(gp.layout_symbol["icon-keep-upright"]),"icon-offset":new yh(gp.layout_symbol["icon-offset"]),"icon-anchor":new yh(gp.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gh(gp.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gh(gp.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gh(gp.layout_symbol["text-rotation-alignment"]),"text-field":new yh(gp.layout_symbol["text-field"]),"text-font":new yh(gp.layout_symbol["text-font"]),"text-size":new yh(gp.layout_symbol["text-size"]),"text-max-width":new yh(gp.layout_symbol["text-max-width"]),"text-line-height":new yh(gp.layout_symbol["text-line-height"]),"text-letter-spacing":new yh(gp.layout_symbol["text-letter-spacing"]),"text-justify":new yh(gp.layout_symbol["text-justify"]),"text-radial-offset":new yh(gp.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gh(gp.layout_symbol["text-variable-anchor"]),"text-anchor":new yh(gp.layout_symbol["text-anchor"]),"text-max-angle":new gh(gp.layout_symbol["text-max-angle"]),"text-writing-mode":new gh(gp.layout_symbol["text-writing-mode"]),"text-rotate":new yh(gp.layout_symbol["text-rotate"]),"text-padding":new gh(gp.layout_symbol["text-padding"]),"text-keep-upright":new gh(gp.layout_symbol["text-keep-upright"]),"text-transform":new yh(gp.layout_symbol["text-transform"]),"text-offset":new yh(gp.layout_symbol["text-offset"]),"text-allow-overlap":new gh(gp.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new gh(gp.layout_symbol["text-ignore-placement"]),"text-optional":new gh(gp.layout_symbol["text-optional"]),"text-keep-upright-alignment":new gh(gp.layout_symbol["text-keep-upright-alignment"])});var JQ={paint:new Ih({"icon-opacity":new yh(gp.paint_symbol["icon-opacity"]),"icon-color":new yh(gp.paint_symbol["icon-color"]),"icon-halo-color":new yh(gp.paint_symbol["icon-halo-color"]),"icon-halo-width":new yh(gp.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yh(gp.paint_symbol["icon-halo-blur"]),"icon-translate":new gh(gp.paint_symbol["icon-translate"]),"icon-translate-anchor":new gh(gp.paint_symbol["icon-translate-anchor"]),"text-opacity":new yh(gp.paint_symbol["text-opacity"]),"text-color":new yh(gp.paint_symbol["text-color"],{runtimeType:D,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new yh(gp.paint_symbol["text-halo-color"]),"text-halo-width":new yh(gp.paint_symbol["text-halo-width"]),"text-halo-blur":new yh(gp.paint_symbol["text-halo-blur"]),"text-translate":new gh(gp.paint_symbol["text-translate"]),"text-translate-anchor":new gh(gp.paint_symbol["text-translate-anchor"])}),layout:WQ};const ZQ=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),$Q=ZQ(void 0,(function(){return $Q.toString().search("(((.+)+)+)+$").toString().constructor($Q).search("(((.+)+)+)+$")}));$Q();class tR{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:_,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){if(!this.defaultValue.isConstant()){t(this.defaultValue.value._styleExpression.expression)}}outputDefined(){return!1}serialize(){return null}}Fl(tR,"FormatSectionOverride",{omit:["defaultValue"]});const eR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),nR=eR(void 0,(function(){return nR.toString().search("(((.+)+)+)+$").toString().constructor(nR).search("(((.+)+)+)+$")}));nR();class rR extends Np{constructor(t){super(t,JQ)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));let n=this.layout.get("text-writing-mode");if(n&&n.findIndex((t=>"line"===t))>=0&&1==n.length&&"point"!==this.layout.get("symbol-placement")&&(n=["horizontal","vertical","line"]),n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else"point"===this.layout.get("symbol-placement")?this.layout._values["text-writing-mode"]=["horizontal"]:this.layout._values["text-writing-mode"]=["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||vr(o.value)||!i?i:(s=e.properties,i.replace(/{([^{}]+)}/g,((t,e)=>e in s?String(s[e]):"")));var s}createBucket(t){return new KQ(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of JQ.paint.overridableProperties){if(!rR.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new tR(e),r=new br(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new wr("source",r):new Mr("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new ph(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&rR.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=JQ.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Z)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{if(!i)if(e instanceof ht&&at(e.value)===F){const t=e.value;o(t.sections)}else e instanceof bt?o(e.sections):e.eachChild(t)},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new ip(this,t)}}const iR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),oR=iR(void 0,(function(){return oR.toString().search("(((.+)+)+)+$").toString().constructor(oR).search("(((.+)+)+)+$")}));oR();var sR={paint:new Ih({"background-color":new gh(gp.paint_background["background-color"]),"background-pattern":new gh(gp.paint_background["background-pattern"]),"background-opacity":new gh(gp.paint_background["background-opacity"])})};const aR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),uR=aR(void 0,(function(){return uR.toString().search("(((.+)+)+)+$").toString().constructor(uR).search("(((.+)+)+)+$")}));uR();const cR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),lR=cR(void 0,(function(){return lR.toString().search("(((.+)+)+)+$").toString().constructor(lR).search("(((.+)+)+)+$")}));lR();var hR,AR={paint:new Ih({"raster-opacity":new gh(gp.paint_raster["raster-opacity"]),"raster-hue-rotate":new gh(gp.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gh(gp.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gh(gp.paint_raster["raster-brightness-max"]),"raster-saturation":new gh(gp.paint_raster["raster-saturation"]),"raster-contrast":new gh(gp.paint_raster["raster-contrast"]),"raster-resampling":new gh(gp.paint_raster["raster-resampling"]),"raster-fade-duration":new gh(gp.paint_raster["raster-fade-duration"])})},fR=(hR=!0,function(t,e){var n=hR?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return hR=!1,n}),pR=fR(void 0,(function(){return pR.toString().search("(((.+)+)+)+$").toString().constructor(pR).search("(((.+)+)+)+$")}));pR();const dR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),gR=dR(void 0,(function(){return gR.toString().search("(((.+)+)+)+$").toString().constructor(gR).search("(((.+)+)+)+$")}));gR();class yR extends Np{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}const mR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),IR=mR(void 0,(function(){return IR.toString().search("(((.+)+)+)+$").toString().constructor(IR).search("(((.+)+)+)+$")}));IR();const CR={circle:class extends Np{constructor(t){super(t,am)}createBucket(t){return new Ly(t)}queryRadius(t){const e=t;return $y("circle-radius",this,e)+$y("circle-stroke-width",this,e)+tm(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,s,a){const u=nm(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return IE(t,r,o,s,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),u,c)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new ip(this,t)}},heatmap:class extends Np{createBucket(t){return new HeatmapBucket(t)}constructor(t){super(t,wE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){const t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=NE({expression:t,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return $y("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,r,i,o,s,a){const u=this.paint.get("heatmap-radius").evaluate(e,n);return IE(t,r,o,s,0,!0,!0,new Tr(0,0),u)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new ip(this,t)}},fill:class extends Np{constructor(t){super(t,ab)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new ip(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new rb(t)}queryRadius(){return tm(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;return qy(em(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends Np{constructor(t){super(t,Nb)}createBucket(t){return new wb(t)}queryRadius(){return tm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new ip(this,t)}queryIntersectsFeature(t,e,n,r,i,o,s,a,u){const c=nm(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),l=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),[A,f]=function(t,e,n,r,i){const o=[],s=[],a=i[8]*e,u=i[9]*e,c=i[10]*e,l=i[11]*e,h=i[8]*n,A=i[9]*n,f=i[10]*n,p=i[11]*n;for(const e of t){const t=[],n=[];for(const o of e){const e=o.x+r.x,s=o.y+r.y,d=i[0]*e+i[4]*s+i[12],g=i[1]*e+i[5]*s+i[13],y=i[2]*e+i[6]*s+i[14],m=i[3]*e+i[7]*s+i[15],I=d+a,C=g+u,E=y+c,b=Math.max(m+l,1e-5),v=d+h,x=g+A,w=y+f,M=Math.max(m+p,1e-5);t.push(new kb(I/b,C/b,E/b)),n.push(new kb(v/M,x/M,w/M))}o.push(t),s.push(n)}return[o,s]}(r,h,l,c,s),p=t.queryGeometry;return function(t,e,n){let r=1/0;qy(n,e)&&(r=Pb(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],s=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=o[t+1],a=s[t],u=[e,i,s[t+1],a,e];Uy(n,u)&&(r=Math.min(r,Pb(n,u)))}}return r!==1/0&&r}(A,f,p.isPointQuery()?p.screenBounds:p.screenGeometry)}},line:class extends Np{constructor(t){super(t,ev),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof xe,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=iv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Jb(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new ip(this,t)}queryRadius(t){const e=t,n=ov($y("line-width",this,e),$y("line-gap-width",this,e)),r=$y("line-offset",this,e);return n/2+Math.abs(r)+tm(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;const s=em(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),a=t.pixelToTileUnitsFactor/2*ov(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(r=function(t,e){const n=[],r=new Tr(0,0);for(let i=0;i<t.length;i++){const o=t[i],s=[];for(let t=0;t<o.length;t++){const n=o[t-1],i=o[t],a=o[t+1],u=0===t?r:i.sub(n)._unit()._perp(),c=t===o.length-1?r:a.sub(i)._unit()._perp(),l=u._add(c)._unit(),h=l.x*c.x+l.y*c.y;l._mult(1/h),s.push(l._mult(e)._add(i))}n.push(s)}return n}(r,u*t.pixelToTileUnitsFactor)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(Xy(t,i[e]))return!0;if(Ky(t,i,n))return!0}return!1}(s,r,a)}isTileClipped(){return!0}},symbol:rR,background:class extends Np{constructor(t){super(t,sR)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Np{constructor(t){super(t,AR)}getProgramIds(){return["raster"]}}};var ER,bR=(ER=!0,function(t,e){var n=ER?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return ER=!1,n}),vR=bR(void 0,(function(){return vR.toString().search("(((.+)+)+)+$").toString().constructor(vR).search("(((.+)+)+)+$")}));vR();var xR=["type","source","source-layer","minzoom","maxzoom","filter","layout"];const wR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),MR=wR(void 0,(function(){return MR.toString().search("(((.+)+)+)+$").toString().constructor(MR).search("(((.+)+)+)+$")}));function BR(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let e="[";for(const n of t)e+=BR(n)+",";return e+"]"}let e="{";for(const n of Object.keys(t).sort())e+=n+":"+BR(t[n])+",";return e+"}"}function _R(t){let e="";for(const n of xR)e+="/"+BR(t[n]);return e}MR();const SR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),QR=SR(void 0,(function(){return QR.toString().search("(((.+)+)+)+$").toString().constructor(QR).search("(((.+)+)+)+$")}));QR();class RR{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(t,e){for(const e of t){this._layerConfigs[e.id]=e;(this._layers[e.id]="custom"===(n=e).type?new yR(n):new CR[n.type](n)).compileFilter(),this.keyCache[e.id]&&delete this.keyCache[e.id]}var n;for(const t of e)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const n={};for(let r=0;r<t.length;r++){const i=e&&e[t[r].id]||_R(t[r]);e&&(e[t[r].id]=i);let o=n[i];!o&&(o=n[i]=[]),o.push(t[r])}const r=[];for(const t in n)r.push(n[t]);return r}(ll(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];!i&&(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let s=i[o];!s&&(s=i[o]=[]),s.push(e)}}}var DR,TR=(DR=!0,function(t,e){var n=DR?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return DR=!1,n}),OR=TR(void 0,(function(){return OR.toString().search("(((.+)+)+)+$").toString().constructor(OR).search("(((.+)+)+)+$")}));function NR(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(FR,this,e)}function FR(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){var n=t.readVarint()+t.pos;for(;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function zR(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)e=t[i],r+=((n=t[s]).x-e.x)*(e.y+n.y);return r}OR(),NR.types=["Unknown","Point","LineString","Polygon"],NR.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,s=0,a=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}i--,1===r||2===r?(o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new Tr(o,s))):7===r?e&&e.push(e[0].clone()):console.log("VectorTileFeature loadGeometry unknown command "+r)}return e&&a.push(e),a},NR.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,s=1/0,a=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<s&&(s=i),i>a&&(a=i),(o+=t.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,u,a,c]},NR.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),s=this.extent*t,a=this.extent*e,u=this.loadGeometry(),c=NR.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+a)/o;t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];l(u=h);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var s=zR(t[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}n&&i.push(n);return i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var A={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(A.id=this.id),A};var kR,LR=(kR=!0,function(t,e){var n=kR?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return kR=!1,n}),PR=LR(void 0,(function(){return PR.toString().search("(((.+)+)+)+$").toString().constructor(PR).search("(((.+)+)+)+$")}));function jR(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(UR,this,e),this.length=this._features.length}function UR(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){var e=null,n=t.readVarint()+t.pos;for(;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}PR(),jR.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new NR(this._pbf,e,this.extent,this._keys,this._values)};var qR,KR=(qR=!0,function(t,e){var n=qR?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return qR=!1,n}),HR=KR(void 0,(function(){return HR.toString().search("(((.+)+)+)+$").toString().constructor(HR).search("(((.+)+)+)+$")}));function YR(t,e){this.layers=t.readFields(GR,{},e)}function GR(t,e,n){if(3===t){var r=new jR(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}HR();const VR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),XR=VR(void 0,(function(){return XR.toString().search("(((.+)+)+)+$").toString().constructor(XR).search("(((.+)+)+)+$")}));XR();class WR{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const JR=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),ZR=JR(void 0,(function(){return ZR.toString().search("(((.+)+)+)+$").toString().constructor(ZR).search("(((.+)+)+)+$")}));ZR();const $R=["tile","layer","source","sourceLayer","state"];class tD{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of $R)void 0!==this[e]&&(t[e]=this[e]);return t}}const eD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),nD=eD(void 0,(function(){return nD.toString().search("(((.+)+)+)+$").toString().constructor(nD).search("(((.+)+)+)+$")}));nD();var rD,iD=(rD=!0,function(t,e){var n=rD?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return rD=!1,n}),oD=iD(void 0,(function(){return oD.toString().search("(((.+)+)+)+$").toString().constructor(oD).search("(((.+)+)+)+$")}));oD();const sD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),aD=sD(void 0,(function(){return aD.toString().search("(((.+)+)+)+$").toString().constructor(aD).search("(((.+)+)+)+$")}));aD();const uD=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,r=0,i=0,o=0,s=0,a=0;for(1&e?i=o=s=32:n=r=a=32;(e>>=1)>1;){const t=n+i>>1,u=r+o>>1;1&e?(i=n,o=r,n=s,r=a):(n=i,r=o,i=s,o=a),s=t,a=u}const u=4*t;uD[u+0]=n,uD[u+1]=r,uD[u+2]=i,uD[u+3]=o}var cD,lD=(cD=!0,function(t,e){var n=cD?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return cD=!1,n}),hD=lD(void 0,(function(){return hD.toString().search("(((.+)+)+)+$").toString().constructor(hD).search("(((.+)+)+)+$")}));hD(),Sh([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);var AD,fD=(AD=!0,function(t,e){var n=AD?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return AD=!1,n}),pD=fD(void 0,(function(){return pD.toString().search("(((.+)+)+)+$").toString().constructor(pD).search("(((.+)+)+)+$")}));pD(),Sh([{name:"a_pos",type:"Int16",components:2}]);const dD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),gD=dD(void 0,(function(){return gD.toString().search("(((.+)+)+)+$").toString().constructor(gD).search("(((.+)+)+)+$")}));gD(),new vc;const yD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mD=yD(void 0,(function(){return mD.toString().search("(((.+)+)+)+$").toString().constructor(mD).search("(((.+)+)+)+$")}));mD();const ID=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),CD=ID(void 0,(function(){return CD.toString().search("(((.+)+)+)+$").toString().constructor(CD).search("(((.+)+)+)+$")}));CD();class ED{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new i(Ic,16,0),this.featureIndexArray=new EA,this.promoteId=e}insert(t,e,n,r,i,o=0){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const a=this.grid;for(let t=0;t<e.length;t++){const n=e[t],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];r[0]=Math.min(r[0],e.x),r[1]=Math.min(r[1],Ic-e.y),r[2]=Math.max(r[2],e.x),r[3]=Math.max(r[3],Ic-e.y)}r[0]<Ic&&r[1]<Ic&&r[2]>=0&&r[3]>=0&&a.insert(s,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new YR(new Wx(this.rawTileData)).layers,this.sourceLayerCoder=new WR(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},o=Cp(i.filter),s=t.tileResult;t.transform;const a=s.bufferedTilespaceBounds,u=this.grid.query(a.min.x,a.min.y,a.max.x,a.max.y,((t,e,n,r)=>function(t,e,n,r,i){for(const o of t)if(e<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0;const o=[new Tr(e,n),new Tr(e,i),new Tr(r,i),new Tr(r,n)];if(t.length>2)for(const e of o)if(Xy(t,e))return!0;for(let e=0;e<t.length-1;e++)if(Wy(t[e],t[e+1],o))return!0;return!1}(s.bufferedTilespaceGeometry,t,e,n,r)));u.sort(vD);const c={};let l;for(let a=0;a<u.length;a++){const h=u[a];if(h===l)continue;l=h;const A=this.featureIndexArray.get(h);let f=null;this.loadMatchingFeature(c,A,o,i.layers,i.availableImages,e,n,r,((e,n,r,i=0)=>(!f&&(f=Wp(e,!1)),n.queryIntersectsFeature(s,e,r,f,this.z,t.transform,t.pixelPosMatrix,null,i))))}return c}loadMatchingFeature(t,e,n,r,i,o,s,a,u){const{featureIndex:c,bucketIndex:l,sourceLayerIndex:h,layoutVertexArrayOffset:A}=e,f=this.bucketLayerIDs[l];if(r&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,f))return;const p=this.sourceLayerCoder.decode(h),d=this.vtLayers[p].feature(c);if(n.needGeometry){const t=td(d,!0);if(!n.filter(new oh(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new oh(this.tileID.overscaledZ),d))return;const g=this.getId(d,p);for(let e=0;e<f.length;e++){const n=f[e];if(r&&r.indexOf(n)<0)continue;const l=o[n];if(!l)continue;let h={};void 0!==g&&a&&(h=a.getState(l.sourceLayer||"_geojsonTileLayer",g));const p=hl({},s[n]);p.paint=bD(p.paint,l.paint,d,h,i),p.layout=bD(p.layout,l.layout,d,h,i);const y=!u||u(d,l,h,A);if(!y)continue;const m=new tD(d,this.z,this.x,this.y,g);m.layer=p;let I=t[n];void 0===I&&(I=t[n]=[]),I.push({featureIndex:c,feature:m,intersectionZ:y})}}lookupSymbolFeatures(t,e,n,r,i,o,s,a){const u={};this.loadVTLayers();const c=Cp(i);for(const i of t)this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},c,o,s,a,e);return u}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];const o=this.vtLayers[r].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=r&&(n=t.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function bD(t,e,n,r,i){return pl(t,((t,o)=>{const s=e instanceof dh?e.get(o):null;return s&&s.evaluate?s.evaluate(n,r,i):s}))}function vD(t,e){return e-t}Fl(ED,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const xD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),wD=xD(void 0,(function(){return wD.toString().search("(((.+)+)+)+$").toString().constructor(wD).search("(((.+)+)+)+$")}));wD();class MD{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new RE({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=(n=this.nextRow)<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2));var n;this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,s=!0;r.push({left:i,right:o,isDash:s,zeroLength:0===t[0]});let a=t[0];for(let e=1;e<t.length;e++){s=!s;const u=t[e];i=a*n,a+=u,o=a*n,r.push({left:i,right:o,isDash:s,zeroLength:0===u})}return r}addRoundDash(t,e,n){const r=e/2;for(let e=-n;e<=n;e++){const i=this.nextRow+n+e,o=this.width*i;let s=0,a=t[s];for(let i=0;i<this.width;i++){i/a.right>1&&(a=t[++s]);const u=Math.abs(i-a.left),c=Math.abs(i-a.right),l=Math.min(u,c);let h;const A=e/n*(r+1);if(a.isDash){const t=r-Math.abs(A);h=Math.sqrt(l*l+t*t)}else h=r-Math.sqrt(l*l+A*A);this.image.data[o+i]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}const n=t[0],r=t[t.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,s=t[o];for(let n=0;n<this.width;n++){n/s.right>1&&(s=t[++o]);const r=Math.abs(n-s.left),a=Math.abs(n-s.right),u=Math.min(r,a),c=(s.isDash?u:-u)+e;this.image.data[i+n]=Math.max(0,Math.min(255,c+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return yl("LineAtlas out of space"),null;0===t.length&&t.push(1);let s=0;for(let e=0;e<t.length;e++)t[e]<0&&(yl("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),s+=t[e];if(0!==s){const n=this.width/s,o=this.getDashRanges(t,this.width,n);if(r)this.addRoundDash(o,n,i);else{const t="square"===e?.5*n:0;this.addRegularDash(o,t)}}const a=this.nextRow+i;this.nextRow+=o;const u={tl:[a,i],br:[s,0]};return this.positions[n]=u,u}}Fl(MD,"LineAtlas");const BD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),_D=BD(void 0,(function(){return _D.toString().search("(((.+)+)+)+$").toString().constructor(_D).search("(((.+)+)+)+$")}));_D();class SD{constructor(t){const e={},n=[];for(const r in t){const i=t[r],o=e[r]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const r=e.metrics.localGlyph?2:1,s={x:0,y:0,w:e.bitmap.width+2*r,h:e.bitmap.height+2*r};n.push(s),o[t]=s}}const{w:r,h:i}=gw(n),o=new RE({width:r||1,height:i||1});for(const n in t){const r=t[n];for(const t in r.glyphs){const i=r.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const s=e[n][t],a=i.metrics.localGlyph?2:1;RE.copy(i.bitmap,o,{x:0,y:0},{x:s.x+a,y:s.y+a},i.bitmap)}}this.image=o,this.positions=e}}Fl(SD,"GlyphAtlas");const QD=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),RD=QD(void 0,(function(){return RD.toString().search("(((.+)+)+)+$").toString().constructor(RD).search("(((.+)+)+)+$")}));RD();class DD{constructor(t){this.tileID=new PS(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y,t.tileID.canonical.indexExtent),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=KS(t.tileID.canonical,t.projection),this.projection=t.projection,this.crs=t.crs,this.detailLevelOffset=t.detailLevelOffset||0}parse(t,e,n,r,i,o){this.status="parsing",this.data=e,this.collisionBoxArray=new fA;const s=new WR(Object.keys(e.layers).sort()),a=new ED(this.tileID,this.promoteId);a.bucketLayerIDs=[];const u={},c=new MD(256,256),l={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:c,availableImages:r,crs:this.crs},h=n.familiesBySource[this.source];for(const n in h){const i=e.layers[n];if(!i)continue;let o=!1,c=!1;for(const t of h[n])"symbol"===t[0].type?o=!0:c=!0;if(!0===this.isSymbolTile&&!o)continue;if(!1===this.isSymbolTile&&!c)continue;1===i.version&&yl('Vector tile source "'+this.source+'" layer "'+n+'" does not use vector tile spec v2 and therefore may have some rendering errors.');const A=s.encode(n),f=[];for(let t=0;t<i.length;t++){const e=i.feature(t),r=a.getId(e,n);f.push({feature:e,id:r,index:t,sourceLayerIndex:A})}for(const e of h[n]){const n=e[0];if(void 0!==this.isSymbolTile&&"symbol"===n.type!==this.isSymbolTile)continue;if(n.minzoom&&this.zoom<Math.max(Math.floor(n.minzoom-this.detailLevelOffset),0))continue;if(n.maxzoom&&this.zoom>=n.maxzoom)continue;if("none"===n.visibility)continue;TD(e,this.zoom,r);(u[n.id]=n.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:A,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r,webgpu:t.webgpu})).populate(f,l,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((t=>t.id)))}}let A,f,p,d;c.trim();const g={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},y=()=>{if(A)return o(A);if(f&&p&&d){const t=new SD(f),e=new Cw(p,d);for(const n in u){const i=u[n];if(i instanceof KQ)TD(i.layers,this.zoom,r),BM(i,f,t.positions,p,e.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection,this.crs);else if(i.hasPattern&&(i instanceof Jb||i instanceof rb)){TD(i.layers,this.zoom,r);const t=e.patternPositions;i.addFeatures(l,this.tileID.canonical,t,r,this.tileTransform)}}this.status="done",o(null,{buckets:ll(u).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:c,imageAtlas:e,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}},m=pl(l.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(m).length?i.send("getGlyphs",{uid:this.uid,stacks:m,source:this.source},((t,e)=>{!A&&(A=t,f=e,y())}),void 0,!1,g):f={};const I=Object.keys(l.iconDependencies);I.length?i.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{!A&&(A=t,p=e,y())}),void 0,!1,g):p={};const C=Object.keys(l.patternDependencies);C.length?i.send("getImages",{icons:C,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{!A&&(A=t,d=e,y())}),void 0,!1,g):d={},y()}}function TD(t,e,n){const r=new oh(e);for(const e of t)e.recalculate(r,n)}var OD,ND,FD=void 0!==FD?FD:{},zD=Object.assign({},FD),kD="object"==typeof window,LD="function"==typeof importScripts,PD="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,jD="";if(PD){var UD=require("fs"),qD=require("path");jD=LD?qD.dirname(jD)+"/":__dirname+"/",OD=(t,e)=>(t=aT(t)?new URL(t):qD.normalize(t),UD.readFileSync(t,e?void 0:"utf8")),ND=t=>{var e=OD(t,!0);return e.buffer||(e=new Uint8Array(e)),e},!FD.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),"undefined"!=typeof module&&(module.exports=FD),process.on("uncaughtException",(t=>{if(!("unwind"===t||t instanceof lT||t.context instanceof lT))throw t})),FD.inspect=()=>"[Emscripten Module object]"}else(kD||LD)&&(LD?jD=self.location.href:"undefined"!=typeof document&&document.currentScript&&(jD=document.currentScript.src),jD=0!==jD.indexOf("blob:")?jD.substr(0,jD.replace(/[?#].*/,"").lastIndexOf("/")+1):"",OD=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},LD&&(ND=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));FD.print||console.log.bind(console);var KD,HD,YD=FD.printErr||console.error.bind(console);function GD(t){if(sT(t))return function(t){if(void 0!==PD&&PD){var e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.length)}for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(t.slice(oT.length))}Object.assign(FD,zD),zD=null,FD.arguments&&FD.arguments,FD.thisProgram&&FD.thisProgram,FD.quit&&FD.quit,FD.wasmBinary&&(KD=FD.wasmBinary),"object"!=typeof WebAssembly&&nT("no native wasm support detected");var VD,XD=!1;function WD(){var t=HD.buffer;FD.HEAP8=new Int8Array(t),FD.HEAP16=new Int16Array(t),FD.HEAPU8=VD=new Uint8Array(t),FD.HEAPU16=new Uint16Array(t),FD.HEAP32=new Int32Array(t),FD.HEAPU32=new Uint32Array(t),FD.HEAPF32=new Float32Array(t),FD.HEAPF64=new Float64Array(t)}var JD=[],ZD=[],$D=[];var tT=0,eT=null;function nT(t){throw FD.onAbort&&FD.onAbort(t),YD(t="Aborted("+t+")"),XD=!0,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var rT,iT,oT="data:application/octet-stream;base64,",sT=t=>t.startsWith(oT),aT=t=>t.startsWith("file://");function uT(t){return Promise.resolve().then((()=>function(t){if(t==rT&&KD)return new Uint8Array(KD);var e=GD(t);if(e)return e;if(ND)return ND(t);throw"both async and sync fetching of the wasm failed"}(t)))}function cT(t,e,n,r){return function(t,e,n){return uT(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{YD(`failed to asynchronously prepare wasm: ${t}`),nT(t)}))}(e,n,r)}function lT(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}sT(rT="data:application/octet-stream;base64,AGFzbQEAAAABHwZgAX8Bf2ABfwBgAABgA39/fwBgA39/fwF/YAJ/fwACDQIBYQFhAAABYQFiAAIDExIAAwAAAgEBAQUDAAMFAQQEAQQEBQFwAQEBBQcBAYACgIACBggBfwFBkJAECwchCAFjAgABZAAGAWUAEwFmABEBZwAQAWgBAAFpAAwBagASCuZdEioBAX8jAEEQayIBIAA6AA8gAS0ADyIAQQF0IABBB3VBAXFBG2xzQf8BcQufAQEBfyMAQRBrIgMgADoADyADIAE2AgggAyACNgIEIANBADoAAwNAIAMtAANBBE9FBEAgA0EAOgACA0AgAy0AAiIBQQRPRQRAIAEgAy0AA0ECdCICIAMoAghqaiIAIAMoAgQgASACIAMtAA9BBHRqamotAAAgAC0AAHM6AAAgAyADLQACQQFqOgACDAELCyADIAMtAANBAWo6AAMMAQsLC08BAn9BkAwoAgAiASAAQQdqQXhxIgJqIQACQCACQQAgACABTRsNACAAPwBBEHRLBEAgABAARQ0BC0GQDCAANgIAIAEPC0GUDEEwNgIAQX8LNQEBf0EBIAAgAEEBTRshAAJAA0AgABAMIgENAUGIECgCACIBBEAgARECAAwBCwsQAQALIAELAgAL+AEBAX8jAEEQayIBIAA2AgwgASABKAIMLQANOgALIAEoAgwgASgCDC0ACToADSABKAIMIAEoAgwtAAU6AAkgASgCDCABKAIMLQABOgAFIAEoAgwgAS0ACzoAASABIAEoAgwtAAI6AAsgASgCDCABKAIMLQAKOgACIAEoAgwgAS0ACzoACiABIAEoAgwtAAY6AAsgASgCDCABKAIMLQAOOgAGIAEoAgwgAS0ACzoADiABIAEoAgwtAAM6AAsgASgCDCABKAIMLQAHOgADIAEoAgwgASgCDC0ACzoAByABKAIMIAEoAgwtAA86AAsgASgCDCABLQALOgAPC/gBAQF/IwBBEGsiASAANgIMIAEgASgCDC0AAToACyABKAIMIAEoAgwtAAU6AAEgASgCDCABKAIMLQAJOgAFIAEoAgwgASgCDC0ADToACSABKAIMIAEtAAs6AA0gASABKAIMLQACOgALIAEoAgwgASgCDC0ACjoAAiABKAIMIAEtAAs6AAogASABKAIMLQAGOgALIAEoAgwgASgCDC0ADjoABiABKAIM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")||(iT=rT,rT=FD.locateFile?FD.locateFile(iT,jD):jD+iT);var hT=t=>{for(;t.length>0;)t.shift()(FD)};FD.noExitRuntime;var AT,fT=t=>{var e=(t-HD.buffer.byteLength+65535)/65536;try{return HD.grow(e),WD(),1}catch(t){}},pT={b:()=>{nT("")},a:t=>{var e=VD.length,n=2147483648;if((t>>>=0)>n)return!1;for(var r=(t,e)=>t+(e-t%e)%e,i=1;i<=4;i*=2){var o=e*(1+.2/i);o=Math.min(o,t+100663296);var s=Math.min(n,r(Math.max(t,o),65536));if(fT(s))return!0}return!1}},dT=function(){var t={a:pT};function e(t,e){var n;return dT=t.exports,HD=dT.c,WD(),n=dT.d,ZD.unshift(n),function(){if(tT--,FD.monitorRunDependencies&&FD.monitorRunDependencies(tT),0==tT&&eT){var t=eT;eT=null,t()}}(),dT}if(tT++,FD.monitorRunDependencies&&FD.monitorRunDependencies(tT),FD.instantiateWasm)try{return FD.instantiateWasm(t,e)}catch(t){return YD(`Module.instantiateWasm callback failed with error: ${t}`),!1}return cT(0,rT,t,(function(t){e(t.instance)})),{}}();function gT(){function t(){AT||(AT=!0,FD.calledRun=!0,XD||(hT(ZD),FD.onRuntimeInitialized&&FD.onRuntimeInitialized(),function(){if(FD.postRun)for("function"==typeof FD.postRun&&(FD.postRun=[FD.postRun]);FD.postRun.length;)t=FD.postRun.shift(),$D.unshift(t);var t;hT($D)}()))}tT>0||(!function(){if(FD.preRun)for("function"==typeof FD.preRun&&(FD.preRun=[FD.preRun]);FD.preRun.length;)t=FD.preRun.shift(),JD.unshift(t);var t;hT(JD)}(),tT>0||(FD.setStatus?(FD.setStatus("Running..."),setTimeout((function(){setTimeout((function(){FD.setStatus("")}),1),t()}),1)):t()))}if(FD._UGCWasm_CipherAES_New=(t,e,n)=>(FD._UGCWasm_CipherAES_New=dT.e)(t,e,n),FD._UGCWasm_CipherAES_Encrypt=(t,e,n)=>(FD._UGCWasm_CipherAES_Encrypt=dT.f)(t,e,n),FD._UGCWasm_CipherAES_Decrypt=(t,e,n)=>(FD._UGCWasm_CipherAES_Decrypt=dT.g)(t,e,n),FD._malloc=t=>(FD._malloc=dT.i)(t),FD._free=t=>(FD._free=dT.j)(t),eT=function t(){AT||gT(),AT||(eT=t)},FD.preInit)for("function"==typeof FD.preInit&&(FD.preInit=[FD.preInit]);FD.preInit.length>0;)FD.preInit.pop()();gT();var yT=function(t){t=void 0!==t?t:{};var e,n,r=Object.assign({},t),i="object"==typeof window,o="function"==typeof importScripts,s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,a="";if(s){var u=require("fs"),c=require("path");a=o?c.dirname(a)+"/":__dirname+"/",e=(t,e)=>(t=w(t)?new URL(t):c.normalize(t),u.readFileSync(t,e?void 0:"utf8")),n=t=>{var n=e(t,!0);return n.buffer||(n=new Uint8Array(n)),n},!t.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),"undefined"!=typeof module&&(module.exports=t),process.on("uncaughtException",(t=>{if(!("unwind"===t||t instanceof _||t.context instanceof _))throw t})),t.inspect=()=>"[Emscripten Module object]"}else(i||o)&&(o?a=self.location.href:"undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),a=0!==a.indexOf("blob:")?a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):"",e=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},o&&(n=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));t.print||console.log.bind(console);var l,h,A=t.printErr||console.error.bind(console);Object.assign(t,r),r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(l=t.wasmBinary),"object"!=typeof WebAssembly&&E("no native wasm support detected");var f,p=!1;function d(){var e=h.buffer;t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=f=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var g=[],y=[],m=[],I=0,C=null;function E(e){throw t.onAbort&&t.onAbort(e),A(e="Aborted("+e+")"),p=!0,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var b,v="data:application/octet-stream;base64,",x=t=>t.startsWith(v),w=t=>t.startsWith("file://");function M(t){if(t==b&&l)return new Uint8Array(l);var e=function(t){if(x(t))return function(t){if(void 0!==s&&s){var e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.length)}for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(t.slice(37))}(t);if(e)return e;if(n)return n(t);throw"both async and sync fetching of the wasm failed"}function B(t,e,n){return function(t){return Promise.resolve().then((()=>M(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{A(`failed to asynchronously prepare wasm: ${t}`),E(t)}))}function _(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}x(b="data:application/octet-stream;base64,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gAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AiQgAkG4EigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AiggAkG8EigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AiwgAkHAEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AjAgAkHEEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AjQgAkHIEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AjggAkHMEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AjwgAkHQEigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AkAgAkHUEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AkQgAkHYEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AkggAkHcEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AkwgAkHgEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AlAgAkHkEigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AlQgAkHoEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AlggAkHsEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AlwgAkHwEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AmAgAkH0EigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AmQgAkH4EigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AmggAkH8EigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AmwgAkGAEygCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AnAgAkGEEygCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AnQgAkGIEygCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AnggAkGMEygCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AnwgAkEANgIAIAJBADYCBCACQQA2AgggAkEANgIMIAJBADYCEAuHAgEBfyMAQUBqIgUkACAFIAA2AjwgBSABNgI4IAUgAjYCNCAFIAM2AjAgBSAENgIsA0AgBSgCMCIABEAgBUEQIAAgAEEQTxs2AgwgBSgCPCAFKAI4IAVBEGoiABAGIAUoAiwgBSgCNCAAIAUoAgwQCSMAQRBrIgAgBSgCODYCDCAAQQ82AggDQAJAIAAoAggiAUEASA0AIAEgACgCDGoiASABLQAAQQFqOgAAIAAoAgwgACgCCGotAAANACAAIAAoAghBAWs2AggMAQsLIAUgBSgCDCAFKAI0ajYCNCAFIAUoAgwgBSgCLGo2AiwgBSAFKAIwIAUoAgxrNgIwDAELCyAFQUBrJAALxicBDH8jAEEQayIKJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBBmBMoAgAiBkEQIABBC2pBeHEgAEELSRsiBUEDdiIAdiIBQQNxBEACQCABQX9zQQFxIABqIgJBA3QiAUHAE2oiACABQcgTaigCACIBKAIIIgRGBEBBmBMgBkF+IAJ3cTYCAAwBCyAEIAA2AgwgACAENgIICyABQQhqIQAgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDwsgBUGgEygCACIHTQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAUEDdCIAQcATaiICIABByBNqKAIAIgAoAggiBEYEQEGYEyAGQX4gAXdxIgY2AgAMAQsgBCACNgIMIAIgBDYCCAsgACAFQQNyNgIEIAAgBWoiCCABQQN0IgEgBWsiBEEBcjYCBCAAIAFqIAQ2AgAgBwRAIAdBeHFBwBNqIQFBrBMoAgAhAgJ/IAZBASAHQQN2dCIDcUUEQEGYEyADIAZyNgIAIAEMAQsgASgCCAshAyABIAI2AgggAyACNgIMIAIgATYCDCACIAM2AggLIABBCGohAEGsEyAINgIAQaATIAQ2AgAMDwtBnBMoAgAiC0UNASALaEECdEHIFWooAgAiAigCBEF4cSAFayEDIAIhAQNAAkAgASgCECIARQRAIAEoAhQiAEUNAQsgACgCBEF4cSAFayIBIAMgASADSSIBGyEDIAAgAiABGyECIAAhAQwBCwsgAigCGCEJIAIgAigCDCIERwRAQagTKAIAGiACKAIIIgAgBDYCDCAEIAA2AggMDgsgAkEUaiIBKAIAIgBFBEAgAigCECIARQ0DIAJBEGohAQsDQCABIQggACIEQRRqIgEoAgAiAA0AIARBEGohASAEKAIQIgANAAsgCEEANgIADA0LQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQZwTKAIAIghFDQBBACAFayEDAkACQAJAAn9BACAFQYACSQ0AGkEfIAVB////B0sNABogBUEmIABBCHZnIgBrdkEBcSAAQQF0a0E+agsiB0ECdEHIFWooAgAiAUUEQEEAIQAMAQtBACEAIAVBGSAHQQF2a0EAIAdBH0cbdCECA0ACQCABKAIEQXhxIAVrIgYgA08NACABIQQgBiIDDQBBACEDIAEhAAwDCyAAIAEoAhQiBiAGIAEgAkEddkEEcWooAhAiAUYbIAAgBhshACACQQF0IQIgAQ0ACwsgACAEckUEQEEAIQRBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAGhBAnRByBVqKAIAIQALIABFDQELA0AgACgCBEF4cSAFayICIANJIQEgAiADIAEbIQMgACAEIAEbIQQgACgCECIBBH8gAQUgACgCFAsiAA0ACwsgBEUNACADQaATKAIAIAVrTw0AIAQoAhghByAEIAQoAgwiAkcEQEGoEygCABogBCgCCCIAIAI2AgwgAiAANgIIDAwLIARBFGoiASgCACIARQRAIAQoAhAiAEUNAyAEQRBqIQELA0AgASEGIAAiAkEUaiIBKAIAIgANACACQRBqIQEgAigCECIADQALIAZBADYCAAwLCyAFQaATKAIAIgRNBEBBrBMoAgAhAAJAIAQgBWsiAUEQTwRAIAAgBWoiAiABQQFyNgIEIAAgBGogATYCACAAIAVBA3I2AgQMAQsgACAEQQNyNgIE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")||(b=function(e){return t.locateFile?t.locateFile(e,a):a+e}(b));var S=e=>{for(;e.length>0;)e.shift()(t)};t.noExitRuntime;var Q,R=t=>{var e=(t-h.buffer.byteLength+65535)/65536;try{return h.grow(e),d(),1}catch(t){}},D={a:()=>{E("")},c:(t,e,n)=>f.copyWithin(t,e,e+n),b:t=>{var e=f.length,n=2147483648;if((t>>>=0)>n)return!1;for(var r=(t,e)=>t+(e-t%e)%e,i=1;i<=4;i*=2){var o=e*(1+.2/i);o=Math.min(o,t+100663296);var s=Math.min(n,r(Math.max(t,o),65536));if(R(s))return!0}return!1}},T=function(){var e={a:D};function n(e,n){var r;return T=e.exports,h=T.d,d(),r=T.e,y.unshift(r),function(){if(I--,t.monitorRunDependencies&&t.monitorRunDependencies(I),0==I&&C){var e=C;C=null,e()}}(),T}if(I++,t.monitorRunDependencies&&t.monitorRunDependencies(I),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(t){return A(`Module.instantiateWasm callback failed with error: ${t}`),!1}return B(b,e,(function(t){n(t.instance)})),{}}();function O(){function e(){Q||(Q=!0,t.calledRun=!0,p||(S(y),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),m.unshift(e);var e;S(m)}()))}I>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),g.unshift(e);var e;S(g)}(),I>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e()))}if(t._UGCWasm_CipherSM4_New=(e,n,r)=>(t._UGCWasm_CipherSM4_New=T.f)(e,n,r),t._UGCWasm_CipherSM4_Encrypt=(e,n,r)=>(t._UGCWasm_CipherSM4_Encrypt=T.g)(e,n,r),t._UGCWasm_CipherSM4_Decrypt=(e,n,r)=>(t._UGCWasm_CipherSM4_Decrypt=T.h)(e,n,r),t._UGCWasm_CipherSM4_Delete=e=>(t._UGCWasm_CipherSM4_Delete=T.i)(e),t._malloc=e=>(t._malloc=T.k)(e),t._free=e=>(t._free=T.l)(e),C=function t(){Q||O(),Q||(C=t)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return O(),t}();function mT(){}var IT=!1,CT=!1,ET=!1;function bT(t,e){if(t.byteLength<=e)return t;return t.subarray(0,e)}function vT(t,e){for(let n=0;n<t.length;n++)e[n]=t[n];return e}FD.onRuntimeInitialized=()=>{(IT=!0)&&CT&&(ET=!0)},yT.onRuntimeInitialized=()=>{CT=!0,IT&&CT&&(ET=!0)},mT.parse=function(t,e){return ET?e="SM4"===t.type?function(t,e){const n=new Uint8Array(e),r=bT(n,256),i=new Uint8Array(t),o=yT._malloc(i.length*i.BYTES_PER_ELEMENT);yT.HEAPU8.set(i,o/i.BYTES_PER_ELEMENT);const s=new Uint8Array([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),a=yT._malloc(s.length*s.BYTES_PER_ELEMENT);yT.HEAPU8.set(s,a/s.BYTES_PER_ELEMENT);const u=yT._UGCWasm_CipherSM4_New(2,o,a);yT._free(o),yT._free(a);const c=yT._malloc(r.length*r.BYTES_PER_ELEMENT);yT.HEAPU8.set(r,c/r.BYTES_PER_ELEMENT),yT._UGCWasm_CipherSM4_Decrypt(u,c,r.length);const l=vT(yT.HEAPU8.subarray(c,c+r.length),n);return yT._UGCWasm_CipherSM4_Delete(u),yT._free(c),l.buffer}(t.key,e):function(t,e){var n=new Uint8Array(e);const r=new Uint8Array(t),i=FD._malloc(r.length*r.BYTES_PER_ELEMENT);FD.HEAPU8.set(r,i/r.BYTES_PER_ELEMENT);var o=new Uint8Array([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),s=FD._malloc(o.length*o.BYTES_PER_ELEMENT);FD.HEAPU8.set(o,s/o.BYTES_PER_ELEMENT);var a=FD._UGCWasm_CipherAES_New(2,i,s);FD._free(i),FD._free(s);const u=bT(n,256);return function(t,e,n){const r=FD._malloc(t.length*t.BYTES_PER_ELEMENT);FD.HEAPU8.set(t,r/t.BYTES_PER_ELEMENT),FD._UGCWasm_CipherAES_Encrypt(e,r,t.length);let i=FD.HEAPU8.subarray(r,r+t.length);const o=vT(i,n);return FD._free(r),o}(u,a,n).buffer}(t.key,e):null};const xT=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),wT=xT(void 0,(function(){return wT.toString().search("(((.+)+)+)+$").toString().constructor(wT).search("(((.+)+)+)+$")}));wT();class MT{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,r){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(t,n)}),e):r(t,n),()=>{}}return i.callbacks.push(r),!i.cancel&&(i.cancel=n(((n,r)=>{i.result=[n,r];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,r)}),e):t(n,r);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==r)),!i.callbacks.length&&(i.cancel(),delete this.entries[t]))}}}function BT(t,e,n){const r=JSON.stringify(t.request);t.data&&(this.deduped.entries[r]={result:[null,t.data]});const i={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};return this.deduped.request(r,i,(e=>{const n=(r=t.request,i=(n,r,i,o)=>{if(n)e(n);else if(r){if(Or(t.encryptInfo)&&null==(r=mT.parse(t.encryptInfo,r)))return void e(null);r.byteLength,e(null,{vectorTile:new YR(new Wx(r)),rawData:r,cacheControl:i,expires:o})}},Ol(hl(r,{type:"arrayBuffer"}),i));var r,i;return()=>{n.cancel(),e()}}),e)}class _T extends Jl{constructor(t,e,n,r,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||BT,this.loading={},this.loaded={},this.deduped=new MT(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,r=t&&t.request;r&&r.collectResourceTiming;const i=this.loading[n]=new DD(t);i.abort=this.loadVectorData(t,((r,o)=>{const s=!this.loading[n];if(delete this.loading[n],s||r||!o)return i.status="done",s||(this.loaded[n]=i),e(r);const a=o.rawData,u={};o.expires&&(u.expires=o.expires),o.cacheControl&&(u.cacheControl=o.cacheControl),i.vectorTile=o.vectorTile||new YR(new Wx(a));const c=()=>{i.parse(t,i.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);e(null,hl({rawTileData:a.slice(0)},n,u,{}))}))};this.isSpriteLoaded?c():this.once("isSpriteLoaded",(()=>{if(this.scheduler){const e={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};this.scheduler.add(c,e)}else c()})),this.loaded=this.loaded||{},this.loaded[n]=i}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain,o.projection=t.projection,o.tileTransform=KS(t.tileID.canonical,t.projection);const s=(n,r)=>{const s=o.reloadCallback;s&&(delete o.reloadCallback,o.parse(t,o.vectorTile,i.layerIndex,this.availableImages,i.actor,s)),e(n,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(t,o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}var ST,QT=(ST=!0,function(t,e){var n=ST?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return ST=!1,n}),RT=QT(void 0,(function(){return RT.toString().search("(((.+)+)+)+$").toString().constructor(RT).search("(((.+)+)+)+$")}));function DT(t,e){var n,r=t&&t.type;if("FeatureCollection"===r)for(n=0;n<t.features.length;n++)DT(t.features[n],e);else if("GeometryCollection"===r)for(n=0;n<t.geometries.length;n++)DT(t.geometries[n],e);else if("Feature"===r)DT(t.geometry,e);else if("Polygon"===r)TT(t.coordinates,e);else if("MultiPolygon"===r)for(n=0;n<t.coordinates.length;n++)TT(t.coordinates[n],e);return t}function TT(t,e){if(0!==t.length){OT(t[0],e);for(var n=1;n<t.length;n++)OT(t[n],!e)}}function OT(t,e){for(var n=0,r=0,i=0,o=t.length,s=o-1;i<o;s=i++){var a=(t[i][0]-t[s][0])*(t[s][1]+t[i][1]),u=n+a;r+=Math.abs(n)>=Math.abs(a)?n-u+a:a-u+n,n=u}n+r>=0!=!!e&&t.reverse()}RT();const NT=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),FT=NT(void 0,(function(){return FT.toString().search("(((.+)+)+)+$").toString().constructor(FT).search("(((.+)+)+)+$")}));FT();class zT{constructor(t){this._feature=t,this.extent=Ic,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const e of this._feature.geometry)t.push([new Tr(e[0],e[1])]);return t}{const t=[];for(const e of this._feature.geometry){const n=[];for(const t of e)n.push(new Tr(t[0],t[1]));t.push(n)}return t}}toGeoJSON(t,e,n){return NR.prototype.toGeoJSON.call(this,t,e,n)}}class kT{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=Ic,this.length=t.length,this._features=t}feature(t){return new zT(this._features[t])}}var LT,PT=(LT=!0,function(t,e){var n=LT?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return LT=!1,n}),jT=PT(void 0,(function(){return jT.toString().search("(((.+)+)+)+$").toString().constructor(jT).search("(((.+)+)+)+$")}));jT();var UT,qT=(UT=!0,function(t,e){var n=UT?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return UT=!1,n}),KT=qT(void 0,(function(){return KT.toString().search("(((.+)+)+)+$").toString().constructor(KT).search("(((.+)+)+)+$")}));function HT(t){var e=new Wx;return function(t,e){for(var n in t.layers)e.writeMessage(3,YT,t.layers[n])}(t,e),e.finish()}function YT(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,GT,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,ZT,o[n])}function GT(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,VT,t),e.writeVarintField(3,n.type),e.writeMessage(4,JT,n)}function VT(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,s=t.valuecache;for(var a in n.properties){var u=n.properties[a],c=o[a];if(null!==u){void 0===c&&(r.push(a),c=r.length-1,o[a]=c),e.writeVarint(c);var l=typeof u;"string"!==l&&"boolean"!==l&&"number"!==l&&(u=JSON.stringify(u));var h=l+":"+u,A=s[h];void 0===A&&(i.push(u),A=i.length-1,s[h]=A),e.writeVarint(A)}}}function XT(t,e){return(e<<3)+(7&t)}function WT(t){return t<<1^t>>31}function JT(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,s=n.length,a=0;a<s;a++){var u=n[a],c=1;1===r&&(c=u.length),e.writeVarint(XT(1,c));for(var l=3===r?u.length-1:u.length,h=0;h<l;h++){1===h&&1!==r&&e.writeVarint(XT(2,l-1));var A=u[h].x-i,f=u[h].y-o;e.writeVarint(WT(A)),e.writeVarint(WT(f)),i+=A,o+=f}3===r&&e.writeVarint(XT(7,1))}}function ZT(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}KT();const $T=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function tO(t,e=64,n=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=$T.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}function eO(t,e,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;nO(t,e,s,r,i,o),eO(t,e,n,r,s-1,1-o),eO(t,e,n,s+1,i,1-o)}function nO(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);nO(t,e,n,Math.max(r,Math.floor(n-a*c/s+l)),Math.min(i,Math.floor(n+(s-a)*c/s+l)),o)}const s=e[2*n+o];let a=r,u=i;for(rO(t,e,r,n),e[2*i+o]>s&&rO(t,e,r,i);a<u;){for(rO(t,e,a,u),a++,u--;e[2*a+o]<s;)a++;for(;e[2*u+o]>s;)u--}e[2*r+o]===s?rO(t,e,r,u):(u++,rO(t,e,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function rO(t,e,n,r){iO(t,n,r),iO(e,2*n,2*r),iO(e,2*n+1,2*r+1)}function iO(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function oO(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function sO(t,e,n,r,i,o){var s=i-n,a=o-r,u={x:t-.5*s,y:e-.5*a,width:s,height:a},c={x:n,y:r,width:s,height:a},l=u.x,h=u.y,A=c.x,f=c.y;return!(l>A+c.width||l+u.width<A||h+u.height<f||h>f+c.height)}tO.prototype.add=function(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n},tO.prototype.finish=function(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return eO(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this},tO.prototype.range=function(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:s}=this,a=[0,i.length-1,0],u=[];for(;a.length;){const c=a.pop()||0,l=a.pop()||0,h=a.pop()||0;if(l-h<=s){for(let s=h;s<=l;s++){const a=o[2*s],c=o[2*s+1];a>=t&&a<=n&&c>=e&&c<=r&&u.push(i[s])}continue}const A=h+l>>1,f=o[2*A],p=o[2*A+1];f>=t&&f<=n&&p>=e&&p<=r&&u.push(i[A]),(0===c?t<=f:e<=p)&&(a.push(h),a.push(A-1),a.push(1-c)),(0===c?n>=f:r>=p)&&(a.push(A+1),a.push(l),a.push(1-c))}return u},tO.prototype.within=function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,s=[0,r.length-1,0],a=[],u=n*n;for(;s.length;){const c=s.pop()||0,l=s.pop()||0,h=s.pop()||0;if(l-h<=o){for(let n=h;n<=l;n++)oO(i[2*n],i[2*n+1],t,e)<=u&&a.push(r[n]);continue}const A=h+l>>1,f=i[2*A],p=i[2*A+1];oO(f,p,t,e)<=u&&a.push(r[A]),(0===c?t-n<=f:e-n<=p)&&(s.push(h),s.push(A-1),s.push(1-c)),(0===c?t+n>=f:e+n>=p)&&(s.push(A+1),s.push(l),s.push(1-c))}return a},tO.prototype.intersect=function(t,e,n,r,i){const{ids:o,coords:s,nodeSize:a}=this;var u,c,l=[0,o.length-1,0],h=[];for(i=i||sO;l.length;){var A=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)i(u=s[2*d],c=s[2*d+1],t,e,n,r,d,o[d])&&h.push(o[d]);else{var g=p+f>>1;i(u=s[2*g],c=s[2*g+1],t,e,n,r,g,o[g])&&h.push(o[g]);var y=1-A;(0===A?t<=u:e<=c)&&(l.push(p),l.push(g-1),l.push(y)),(0===A?n>=u:r>=c)&&(l.push(g+1),l.push(f),l.push(y))}}return h},tO.from=function(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=$T[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new tO(s,o,i,t)};const aO=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),uO=aO(void 0,(function(){return uO.toString().search("(((.+)+)+)+$").toString().constructor(uO).search("(((.+)+)+)+$")}));uO();const cO={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},lO=Math.fround||(hO=new Float32Array(1),t=>(hO[0]=+t,hO[0]));var hO;class AO{constructor(t){this.options=Object.assign(Object.create(cO),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:r}=this.options;e&&console.time("total time");const i="prepare "+t.length+" points";e&&console.time(i),this.points=t;const o=[];for(let e=0;e<t.length;e++){const n=t[e];if(!n.geometry)continue;const[r,i]=n.geometry.coordinates,s=lO(dO(r)),a=lO(gO(i));o.push(s,a,1/0,e,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[r+1]=this._createTree(o);e&&console.timeEnd(i);for(let t=r;t>=n;t--){const n=+Date.now();s=this.trees[t]=this._createTree(this._cluster(s,t)),e&&console.log("z%d: %d clusters in %dms",t,s.numItems,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(dO(n),gO(o),dO(i),gO(r)),u=s.data,c=[];for(const t of a){const e=this.stride*t;c.push(u[e+5]>1?fO(u,e,this.clusterProps):this.points[u[e+3]])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(e*this.stride>=o.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[e*this.stride],u=o[e*this.stride+1],c=i.within(a,u,s),l=[];for(const e of c){const n=e*this.stride;o[n+4]===t&&l.push(o[n+5]>1?fO(o,n,this.clusterProps):this.points[o[n+3]])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){e=e||10,n=n||0;const r=[];return this._appendLeaves(r,t,e,n,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,u=(n-a)/i,c=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,u,(e+1+a)/i,c),r.data,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,u,1,c),r.data,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,u,a/i,c),r.data,-1,n,i,l),l.features.length?l:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(t,o.cluster_id,n,r,i):i<r?i++:t.push(e),t.length===n)break}return i}_createTree(t){const e=new tO(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)e.add(t[n],t[n+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,n,r,i,o){for(const s of t){const t=s*this.stride,a=e[t+5]>1;let u,c,l;if(a)u=pO(e,t,this.clusterProps),c=e[t],l=e[t+1];else{const n=this.points[e[t+3]];u=n.properties;const[r,i]=n.geometry.coordinates;c=dO(r),l=gO(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(l*i-r))]],tags:u};let A;A=a||this.options.generateId?e[t+3]:this.points[e[t+3]].id,void 0!==A&&(h.id=A),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,s=n/(r*Math.pow(2,e)),a=t.data,u=[],c=this.stride;for(let n=0;n<a.length;n+=c){if(a[n+2]<=e)continue;a[n+2]=e;const r=a[n],l=a[n+1],h=t.within(a[n],a[n+1],s),A=a[n+5];let f=A;for(const t of h){const n=t*c;a[n+2]>e&&(f+=a[n+5])}if(f>A&&f>=o){let t,o=r*A,s=l*A,p=-1;const d=(n/c<<5)+(e+1)+this.points.length;for(const r of h){const u=r*c;if(a[u+2]<=e)continue;a[u+2]=e;const l=a[u+5];o+=a[u]*l,s+=a[u+1]*l,a[u+4]=d,i&&(!t&&(t=this._map(a,n,!0),p=this.clusterProps.length,this.clusterProps.push(t)),i(t,this._map(a,u)))}a[n+4]=d,u.push(o/f,s/f,1/0,d,-1,f),i&&u.push(p)}else{for(let t=0;t<c;t++)u.push(a[n+t]);if(f>1)for(const t of h){const n=t*c;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<c;t++)u.push(a[n+t])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+5]>1){const r=this.clusterProps[t[e+6]];return n?Object.assign({},r):r}const r=this.points[t[e+3]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function fO(t,e,n){return{type:"Feature",id:t[e+3],properties:pO(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),yO(t[e+1])]}};var r}function pO(t,e,n){const r=t[e+5],i=r>=1e4?Math.round(r/1e3)+"k":r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+6],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+3],point_count:r,point_count_abbreviated:i})}function dO(t){return t/360+.5}function gO(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function yO(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}var mO,IO=(mO=!0,function(t,e){var n=mO?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return mO=!1,n}),CO=IO(void 0,(function(){return CO.toString().search("(((.+)+)+)+$").toString().constructor(CO).search("(((.+)+)+)+$")}));function EO(t,e,n,r){for(var i,o=r,s=n-e>>1,a=n-e,u=t[e],c=t[e+1],l=t[n],h=t[n+1],A=e+3;A<n;A+=3){var f=bO(t[A],t[A+1],u,c,l,h);if(f>o)i=A,o=f;else if(f===o){var p=Math.abs(A-s);p<a&&(i=A,a=p)}}o>r&&(i-e>3&&EO(t,e,i,r),t[i+2]=o,n-i>3&&EO(t,i,n,r))}function bO(t,e,n,r,i,o){var s=i-n,a=o-r;if(0!==s||0!==a){var u=((t-n)*s+(e-r)*a)/(s*s+a*a);u>1?(n=i,r=o):u>0&&(n+=s*u,r+=a*u)}return(s=t-n)*s+(a=e-r)*a}CO();var vO,xO=(vO=!0,function(t,e){var n=vO?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return vO=!1,n}),wO=xO(void 0,(function(){return wO.toString().search("(((.+)+)+)+$").toString().constructor(wO).search("(((.+)+)+)+$")}));function MO(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)BO(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)BO(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)BO(t,e[r][i])}(i),i}function BO(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}wO();var _O,SO=(_O=!0,function(t,e){var n=_O?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return _O=!1,n}),QO=SO(void 0,(function(){return QO.toString().search("(((.+)+)+)+$").toString().constructor(QO).search("(((.+)+)+)+$")}));function RO(t,e,n,r,i){if(e.geometry){var o=e.geometry.coordinates,s=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),u=[],c=e.id;if(n.promoteId?c=e.properties[n.promoteId]:n.generateId&&(c=r||0),"Point"===s)DO(o,u,i);else if("MultiPoint"===s)for(var l=0;l<o.length;l++)DO(o[l],u,i);else if("LineString"===s)TO(o,u,a,!1,i);else if("MultiLineString"===s){if(n.lineMetrics){for(l=0;l<o.length;l++)u=[],TO(o[l],u,a,!1,i),t.push(MO(c,"LineString",u,e.properties));return}OO(o,u,a,!1,i)}else if("Polygon"===s)OO(o,u,a,!0,i);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(l=0;l<e.geometry.geometries.length;l++)RO(t,{id:c,geometry:e.geometry.geometries[l],properties:e.properties},n,r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<o.length;l++){var h=[];OO(o[l],h,a,!0,i),u.push(h)}}t.push(MO(c,s,u,e.properties))}}function DO(t,e,n){var{x:r,y:i}=n.fromLngLat(t);e.push(r,i),e.push(0)}function TO(t,e,n,r,i){for(var o,s,a=0,u=0;u<t.length;u++){var{x:c,y:l}=i.fromLngLat(t[u]);e.push(c,l),e.push(0),u>0&&(a+=r?(o*l-c*s)/2:Math.sqrt(Math.pow(c-o,2)+Math.pow(l-s,2))),o=c,s=l}var h=e.length-3;e[2]=1,EO(e,0,h,n),e[h+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function OO(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=[];TO(t[o],s,n,r,i),e.push(s)}}QO();var NO,FO=(NO=!0,function(t,e){var n=NO?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return NO=!1,n}),zO=FO(void 0,(function(){return zO.toString().search("(((.+)+)+)+$").toString().constructor(zO).search("(((.+)+)+)+$")}));function kO(t,e,n,r,i,o,s,a){if(r/=e,o>=(n/=e)&&s<r)return t;if(s<n||o>=r)return null;for(var u=[],c=0;c<t.length;c++){var l=t[c],h=l.geometry,A=l.type,f=0===i?l.minX:l.minY,p=0===i?l.maxX:l.maxY;if(f>=n&&p<r)u.push(l);else if(!(p<n||f>=r)){var d=[];if("Point"===A||"MultiPoint"===A)LO(h,d,n,r,i);else if("LineString"===A)PO(h,d,n,r,i,!1,a.lineMetrics);else if("MultiLineString"===A)UO(h,d,n,r,i,!1);else if("Polygon"===A)UO(h,d,n,r,i,!0);else if("MultiPolygon"===A)for(var g=0;g<h.length;g++){var y=[];UO(h[g],y,n,r,i,!0),y.length&&d.push(y)}if(d.length){if(a.lineMetrics&&"LineString"===A){for(g=0;g<d.length;g++)u.push(MO(l.id,A,d[g],l.tags));continue}("LineString"===A||"MultiLineString"===A)&&(1===d.length?(A="LineString",d=d[0]):A="MultiLineString"),("Point"===A||"MultiPoint"===A)&&(A=3===d.length?"Point":"MultiPoint"),u.push(MO(l.id,A,d,l.tags))}}}return u.length?u:null}function LO(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var s=t[o+i];s>=n&&s<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function PO(t,e,n,r,i,o,s){for(var a,u,c=jO(t),l=0===i?KO:HO,h=t.start,A=0;A<t.length-3;A+=3){var f=t[A],p=t[A+1],d=t[A+2],g=t[A+3],y=t[A+4],m=0===i?f:p,I=0===i?g:y,C=!1;s&&(a=Math.sqrt(Math.pow(f-g,2)+Math.pow(p-y,2))),m<n?I>n&&(u=l(c,f,p,g,y,n),s&&(c.start=h+a*u)):m>r?I<r&&(u=l(c,f,p,g,y,r),s&&(c.start=h+a*u)):qO(c,f,p,d),I<n&&m>=n&&(u=l(c,f,p,g,y,n),C=!0),I>r&&m<=r&&(u=l(c,f,p,g,y,r),C=!0),!o&&C&&(s&&(c.end=h+a*u),e.push(c),c=jO(t)),s&&(h+=a)}var E=t.length-3;f=t[E],p=t[E+1],d=t[E+2],(m=0===i?f:p)>=n&&m<=r&&qO(c,f,p,d),E=c.length-3,o&&E>=3&&(c[E]!==c[0]||c[E+1]!==c[1])&&qO(c,c[0],c[1],c[2]),c.length&&e.push(c)}function jO(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function UO(t,e,n,r,i,o){for(var s=0;s<t.length;s++)PO(t[s],e,n,r,i,o,!1)}function qO(t,e,n,r){t.push(e),t.push(n),t.push(r)}function KO(t,e,n,r,i,o){var s=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*s),t.push(1),s}function HO(t,e,n,r,i,o){var s=(o-n)/(i-n);return t.push(e+(r-e)*s),t.push(o),t.push(1),s}zO();var YO,GO=(YO=!0,function(t,e){var n=YO?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return YO=!1,n}),VO=GO(void 0,(function(){return VO.toString().search("(((.+)+)+)+$").toString().constructor(VO).search("(((.+)+)+)+$")}));function XO(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=WO(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var a=0;a<o.geometry.length;a++)i.push(WO(o.geometry[a],e))}else if("MultiPolygon"===s)for(i=[],a=0;a<o.geometry.length;a++){for(var u=[],c=0;c<o.geometry[a].length;c++)u.push(WO(o.geometry[a][c],e));i.push(u)}n.push(MO(o.id,s,i,o.tags))}return n}function WO(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}VO();var JO,ZO=(JO=!0,function(t,e){var n=JO?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return JO=!1,n}),$O=ZO(void 0,(function(){return $O.toString().search("(((.+)+)+)+$").toString().constructor($O).search("(((.+)+)+)+$")}));function tN(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,s=t.x,a=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(eN(c[r],c[r+1],e,o,s,a));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(eN(c[r][i],c[r][i+1],e,o,s,a));u.geometry.push(h)}}return t.transformed=!0,t}function eN(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}$O();var nN,rN=(nN=!0,function(t,e){var n=nN?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return nN=!1,n}),iN=rN(void 0,(function(){return iN.toString().search("(((.+)+)+)+$").toString().constructor(iN).search("(((.+)+)+)+$")}));function oN(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,sN(s,t[a],o,i);var u=t[a].minX,c=t[a].minY,l=t[a].maxX,h=t[a].maxY;u<s.minX&&(s.minX=u),c<s.minY&&(s.minY=c),l>s.maxX&&(s.maxX=l),h>s.maxY&&(s.maxY=h)}return s}function sN(t,e,n,r){var i=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<i.length;a+=3)s.push(i[a]),s.push(i[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)aN(s,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<i.length;a++)aN(s,i[a],t,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(a=0;a<c.length;a++)aN(s,c[a],t,n,!0,0===a)}if(s.length){var l=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in l={},e.tags)l[h]=e.tags[h];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var A={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(A.id=e.id),t.features.push(A)}}function aN(t,e,n,r,i,o){var s=r*r;if(r>0&&e.size<(i?s:r))n.numPoints+=e.length/3;else{for(var a=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>s)&&(n.numSimplified++,a.push(e[u]),a.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var s=t[r],a=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=s,t[i-1-r]=a}}(a,o),t.push(a)}}iN();var uN,cN=(uN=!0,function(t,e){var n=uN?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return uN=!1,n}),lN=cN(void 0,(function(){return lN.toString().search("(((.+)+)+)+$").toString().constructor(lN).search("(((.+)+)+)+$")}));function hN(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,i,o,s,a,u,c=function(t,e){var n=[],r=e.epsgCode||3857,i=DS.fromEpsgCode(r);if("FeatureCollection"===t.type)for(var o=0;o<t.features.length;o++)RO(n,t.features[o],e,o,i);else"Feature"===t.type?RO(n,t,e,void 0,i):RO(n,{geometry:t},e,void 0,i);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=c,o=(i=e).buffer/i.extent,s=r,a=kO(r,1,-1-o,o,0,-1,2,i),u=kO(r,1,1-o,2+o,0,-1,2,i),(a||u)&&(s=kO(r,1,-o,1+o,0,-1,2,i)||[],a&&(s=XO(a,1).concat(s)),u&&(s=s.concat(XO(u,-1)))),(c=s).length&&this.splitTile(c,0,0,0),n&&(c.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function AN(t,e,n){return 32*((1<<t)*n+e)+t}lN(),hN.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hN.prototype.splitTile=function(t,e,n,r,i,o,s){for(var a=[t,e,n,r],u=this.options,c=u.debug;a.length;){r=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var l=1<<e,h=AN(e,n,r),A=this.tiles[h];if(!A&&(c>1&&console.time("creation"),A=this.tiles[h]=oN(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,A.numFeatures,A.numPoints,A.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(A.source=t,i){if(e===u.maxZoom||e===i)continue;var p=1<<i-e;if(n!==Math.floor(o/p)||r!==Math.floor(s/p))continue}else if(e===u.indexMaxZoom||A.numPoints<=u.indexMaxPoints)continue;if(A.source=null,0!==t.length){c>1&&console.time("clipping");var d,g,y,m,I,C,E=.5*u.buffer/u.extent,b=.5-E,v=.5+E,x=1+E;d=g=y=m=null,I=kO(t,l,n-E,n+v,0,A.minX,A.maxX,u),C=kO(t,l,n+b,n+x,0,A.minX,A.maxX,u),t=null,I&&(d=kO(I,l,r-E,r+v,1,A.minY,A.maxY,u),g=kO(I,l,r+b,r+x,1,A.minY,A.maxY,u),I=null),C&&(y=kO(C,l,r-E,r+v,1,A.minY,A.maxY,u),m=kO(C,l,r+b,r+x,1,A.minY,A.maxY,u),C=null),c>1&&console.timeEnd("clipping"),a.push(d||[],e+1,2*n,2*r),a.push(g||[],e+1,2*n,2*r+1),a.push(y||[],e+1,2*n+1,2*r),a.push(m||[],e+1,2*n+1,2*r+1)}}},hN.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var s=1<<t,a=AN(t,e=(e%s+s)%s,n);if(this.tiles[a])return tN(this.tiles[a],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,c=t,l=e,h=n;!u&&c>0;)c--,l=Math.floor(l/2),h=Math.floor(h/2),u=this.tiles[AN(c,l,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,h),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[a]?tN(this.tiles[a],i):null):null};const fN=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),pN=fN(void 0,(function(){return pN.toString().search("(((.+)+)+)+$").toString().constructor(pN).search("(((.+)+)+)+$")}));function dN(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);const i=new kT(r.features);let o=HT(i);(0!==o.byteOffset||o.byteLength!==o.buffer.byteLength)&&(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}pN();class gN extends _T{constructor(t,e,n,r,i){super(t,e,n,r,dN),i&&(this.loadGeoJSON=i)}loadData(t,e){const n=t&&t.request;n&&n.collectResourceTiming,this.loadGeoJSON(t,((n,r)=>{if(n||!r)return e(n);if("object"!=typeof r)return e(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));DT(r,!0);try{if(t.filter){const e=xr(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===e.result)throw new Error(e.value.map((t=>t.key+": "+t.message)).join(", "));const n=r.features.filter((t=>e.value.evaluate({zoom:0},t)));r={type:"FeatureCollection",features:n}}t.geojsonVtOptions.epsgCode=t.epsgCode,this._geoJSONIndex=t.cluster?new AO(function({superclusterOptions:t,clusterProperties:e}){if(!e||!t)return t;const n={},r={},i={accumulated:null,zoom:0},o={properties:null},s=Object.keys(e);for(const t of s){const[i,o]=e[t],s=xr(o),a=xr("string"==typeof i?[i,["accumulated"],["get",t]]:i);n[t]=s.value,r[t]=a.value}return t.map=t=>{o.properties=t;const e={};for(const t of s)e[t]=n[t].evaluate(i,o);return e},t.reduce=(t,e)=>{o.properties=e;for(const e of s)i.accumulated=t[e],t[e]=r[e].evaluate(i,o)},t}(t)).load(r.features):(i=r,o=t.geojsonVtOptions,new hN(i,o))}catch(t){return e(t)}this.loaded={};e(null,{});var i,o}))}reloadTile(t,e){const n=this.loaded,r=t.uid;return n&&n[r]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(t,e){if(t.request)n=t.request,r=e,Ol(hl(n,{type:"json"}),r);else{if("string"!=typeof t.data)return e(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(n){return e(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}var n,r}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}const yN=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}(),mN=yN(void 0,(function(){return mN.toString().search("(((.+)+)+)+$").toString().constructor(mN).search("(((.+)+)+)+$")}));mN();"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new class{constructor(t){this.self=t,this.actor=new Yl(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.coordinateReferenceSystems={},this.defaultProjection=QQ({name:"mercator"}),this.defaultCrs=DS.EPSG3857,this.webgpu=!1,this.workerSourceTypes={vector:_T,geojson:gN},this.workerSources={},this.demWorkerSources={}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(t,e){this.isSpriteLoaded[t]=e;for(const n in this.workerSources[t]){const r=this.workerSources[t][n];for(const t in r)r[t]instanceof _T&&(r[t].isSpriteLoaded=e,r[t].fire(new Xl("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e,n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(t,e){this.projections[t]=QQ(e)}setCrs(t,e){let n=DS.fromEpsgCode(e.epsgCode,e.WKT,e.extent);(n.extent[2]!=e.extent[2]||n.extent[3]!=e.extent[3])&&(n=new DS(e.epsgCode,e.extent)),this.coordinateReferenceSystems[t]=n,this.setSceneMode(t,e.sceneMode)}setSceneMode(t,e){this.coordinateReferenceSystems[t].sceneMode=e}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(t,e,n){const r=e;r.projection=this.projections[t]||this.defaultProjection,r.crs=this.coordinateReferenceSystems[t]||this.defaultCrs,r.webgpu=this.webgpu,this.getWorkerSource(t,e.type,e.source).loadTile(r,n)}reloadTile(t,e,n){const r=e;r.projection=this.projections[t]||this.defaultProjection,r.crs=this.coordinateReferenceSystems[t]||this.defaultCrs,r.webgpu=this.webgpu,this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return!e&&(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return!e&&(e=this.layerIndexes[t]=new RR),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r)=>{this.actor.send(e,n,r,t)}};!this.workerSourceTypes[e]&&console.log("no "+e),this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}enforceCacheSizeLimit(t,e){}setUseWebgpu(t,e){this.webgpu=e}}(self))}));

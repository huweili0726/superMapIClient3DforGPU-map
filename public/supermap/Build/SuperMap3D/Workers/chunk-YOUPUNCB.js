import{a as _}from"./chunk-ZIZDQ7PT.js";import{a as G}from"./chunk-RRHLFRBE.js";import{a as k}from"./chunk-JTWCWMT6.js";import{a as T}from"./chunk-3CEYC7M5.js";import{b as ia}from"./chunk-SVO3L3ZS.js";import{b as W}from"./chunk-E37TXANJ.js";import{a}from"./chunk-DJQWO2NJ.js";import{a as ca}from"./chunk-Y2ETSBLW.js";import{a as q}from"./chunk-UBHQMGET.js";import{a as S}from"./chunk-EDZQSM3T.js";import{a as h}from"./chunk-NUC3LT2W.js";var da={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},A=Object.freeze(da);function ua(e,r){this.start=q(e,0),this.stop=q(r,0)}var fa=ua;function i(e,r){this.center=a.clone(q(e,a.ZERO)),this.radius=q(r,0)}var K=new a,Q=new a,$=new a,L=new a,H=new a,s=new a,aa=new a,M=new a,ra=new a,ea=new a,na=new a,ta=new a,ma=4/3*ca.PI;i.fromPoints=function(e,r){if(h(r)||(r=new i),!h(e)||e.length===0)return r.center=a.clone(a.ZERO,r.center),r.radius=0,r;var n=a.clone(e[0],aa),t=a.clone(n,K),c=a.clone(n,Q),o=a.clone(n,$),v=a.clone(n,L),d=a.clone(n,H),u=a.clone(n,s),z=e.length,y;for(y=1;y<z;y++){a.clone(e[y],n);var m=n.x,f=n.y,B=n.z;m<t.x&&a.clone(n,t),m>v.x&&a.clone(n,v),f<c.y&&a.clone(n,c),f>d.y&&a.clone(n,d),B<o.z&&a.clone(n,o),B>u.z&&a.clone(n,u)}var j=a.magnitudeSquared(a.subtract(v,t,M)),P=a.magnitudeSquared(a.subtract(d,c,M)),U=a.magnitudeSquared(a.subtract(u,o,M)),D=t,R=v,b=j;P>b&&(b=P,D=c,R=d),U>b&&(b=U,D=o,R=u);var p=ra;p.x=(D.x+R.x)*.5,p.y=(D.y+R.y)*.5,p.z=(D.z+R.z)*.5;var O=a.magnitudeSquared(a.subtract(R,p,M)),x=Math.sqrt(O),g=ea;g.x=t.x,g.y=c.y,g.z=o.z;var w=na;w.x=v.x,w.y=d.y,w.z=u.z;var E=a.midpoint(g,w,ta),l=0;for(y=0;y<z;y++){a.clone(e[y],n);var I=a.magnitude(a.subtract(n,E,M));I>l&&(l=I);var N=a.magnitudeSquared(a.subtract(n,p,M));if(N>O){var Z=Math.sqrt(N);x=(x+Z)*.5,O=x*x;var C=Z-x;p.x=(x*p.x+C*n.x)/Z,p.y=(x*p.y+C*n.y)/Z,p.z=(x*p.z+C*n.z)/Z}}return x<l?(a.clone(p,r.center),r.radius=x):(a.clone(E,r.center),r.radius=l),r};var ya=new _,xa=new a,Sa=new a,F=new W,J=new W;i.fromRectangle2D=function(e,r,n){return i.fromRectangleWithHeights2D(e,r,0,0,n)};i.fromRectangleWithHeights2D=function(e,r,n,t,c){if(h(c)||(c=new i),!h(e))return c.center=a.clone(a.ZERO,c.center),c.radius=0,c;r=q(r,ya),T.southwest(e,F),F.height=n,T.northeast(e,J),J.height=t;var o=r.project(F,xa),v=r.project(J,Sa),d=v.x-o.x,u=v.y-o.y,z=v.z-o.z;c.radius=Math.sqrt(d*d+u*u+z*z)*.5;var y=c.center;return y.x=o.x+d*.5,y.y=o.y+u*.5,y.z=o.z+z*.5,c};var za=[];i.fromRectangle3D=function(e,r,n,t){if(r=q(r,ia.WGS84),n=q(n,0),h(t)||(t=new i),!h(e))return t.center=a.clone(a.ZERO,t.center),t.radius=0,t;var c=T.subsample(e,r,n,za);return i.fromPoints(c,t)};i.fromVertices=function(e,r,n,t){if(h(t)||(t=new i),!h(e)||e.length===0)return t.center=a.clone(a.ZERO,t.center),t.radius=0,t;r=q(r,a.ZERO),n=q(n,3),S.typeOf.number.greaterThanOrEquals("stride",n,3);var c=aa;c.x=e[0]+r.x,c.y=e[1]+r.y,c.z=e[2]+r.z;var o=a.clone(c,K),v=a.clone(c,Q),d=a.clone(c,$),u=a.clone(c,L),z=a.clone(c,H),y=a.clone(c,s),m=e.length,f;for(f=0;f<m;f+=n){var B=e[f]+r.x,j=e[f+1]+r.y,P=e[f+2]+r.z;c.x=B,c.y=j,c.z=P,B<o.x&&a.clone(c,o),B>u.x&&a.clone(c,u),j<v.y&&a.clone(c,v),j>z.y&&a.clone(c,z),P<d.z&&a.clone(c,d),P>y.z&&a.clone(c,y)}var U=a.magnitudeSquared(a.subtract(u,o,M)),D=a.magnitudeSquared(a.subtract(z,v,M)),R=a.magnitudeSquared(a.subtract(y,d,M)),b=o,p=u,O=U;D>O&&(O=D,b=v,p=z),R>O&&(O=R,b=d,p=y);var x=ra;x.x=(b.x+p.x)*.5,x.y=(b.y+p.y)*.5,x.z=(b.z+p.z)*.5;var g=a.magnitudeSquared(a.subtract(p,x,M)),w=Math.sqrt(g),E=ea;E.x=o.x,E.y=v.y,E.z=d.z;var l=na;l.x=u.x,l.y=z.y,l.z=y.z;var I=a.midpoint(E,l,ta),N=0;for(f=0;f<m;f+=n){c.x=e[f]+r.x,c.y=e[f+1]+r.y,c.z=e[f+2]+r.z;var Z=a.magnitude(a.subtract(c,I,M));Z>N&&(N=Z);var C=a.magnitudeSquared(a.subtract(c,x,M));if(C>g){var V=Math.sqrt(C);w=(w+V)*.5,g=w*w;var Y=V-w;x.x=(w*x.x+Y*c.x)/V,x.y=(w*x.y+Y*c.y)/V,x.z=(w*x.z+Y*c.z)/V}}return w<N?(a.clone(x,t.center),t.radius=w):(a.clone(I,t.center),t.radius=N),t};i.fromEncodedCartesianVertices=function(e,r,n){if(h(n)||(n=new i),!h(e)||!h(r)||e.length!==r.length||e.length===0)return n.center=a.clone(a.ZERO,n.center),n.radius=0,n;var t=aa;t.x=e[0]+r[0],t.y=e[1]+r[1],t.z=e[2]+r[2];var c=a.clone(t,K),o=a.clone(t,Q),v=a.clone(t,$),d=a.clone(t,L),u=a.clone(t,H),z=a.clone(t,s),y=e.length,m;for(m=0;m<y;m+=3){var f=e[m]+r[m],B=e[m+1]+r[m+1],j=e[m+2]+r[m+2];t.x=f,t.y=B,t.z=j,f<c.x&&a.clone(t,c),f>d.x&&a.clone(t,d),B<o.y&&a.clone(t,o),B>u.y&&a.clone(t,u),j<v.z&&a.clone(t,v),j>z.z&&a.clone(t,z)}var P=a.magnitudeSquared(a.subtract(d,c,M)),U=a.magnitudeSquared(a.subtract(u,o,M)),D=a.magnitudeSquared(a.subtract(z,v,M)),R=c,b=d,p=P;U>p&&(p=U,R=o,b=u),D>p&&(p=D,R=v,b=z);var O=ra;O.x=(R.x+b.x)*.5,O.y=(R.y+b.y)*.5,O.z=(R.z+b.z)*.5;var x=a.magnitudeSquared(a.subtract(b,O,M)),g=Math.sqrt(x),w=ea;w.x=c.x,w.y=o.y,w.z=v.z;var E=na;E.x=d.x,E.y=u.y,E.z=z.z;var l=a.midpoint(w,E,ta),I=0;for(m=0;m<y;m+=3){t.x=e[m]+r[m],t.y=e[m+1]+r[m+1],t.z=e[m+2]+r[m+2];var N=a.magnitude(a.subtract(t,l,M));N>I&&(I=N);var Z=a.magnitudeSquared(a.subtract(t,O,M));if(Z>x){var C=Math.sqrt(Z);g=(g+C)*.5,x=g*g;var V=C-g;O.x=(g*O.x+V*t.x)/C,O.y=(g*O.y+V*t.y)/C,O.z=(g*O.z+V*t.z)/C}}return g<I?(a.clone(O,n.center),n.radius=g):(a.clone(l,n.center),n.radius=I),n};i.fromCornerPoints=function(e,r,n){S.typeOf.object("corner",e),S.typeOf.object("oppositeCorner",r),h(n)||(n=new i);var t=a.midpoint(e,r,n.center);return n.radius=a.distance(t,r),n};i.fromEllipsoid=function(e,r){return S.typeOf.object("ellipsoid",e),h(r)||(r=new i),a.clone(a.ZERO,r.center),r.radius=e.maximumRadius,r};var ha=new a;i.fromBoundingSpheres=function(e,r){if(h(r)||(r=new i),!h(e)||e.length===0)return r.center=a.clone(a.ZERO,r.center),r.radius=0,r;var n=e.length;if(n===1)return i.clone(e[0],r);if(n===2)return i.union(e[0],e[1],r);var t=[],c;for(c=0;c<n;c++)t.push(e[c].center);r=i.fromPoints(t,r);var o=r.center,v=r.radius;for(c=0;c<n;c++){var d=e[c];v=Math.max(v,a.distance(o,d.center,ha)+d.radius)}return r.radius=v,r};var pa=new a,Oa=new a,wa=new a;i.fromOrientedBoundingBox=function(e,r){S.defined("orientedBoundingBox",e),h(r)||(r=new i);var n=e.halfAxes,t=k.getColumn(n,0,pa),c=k.getColumn(n,1,Oa),o=k.getColumn(n,2,wa);return a.add(t,c,t),a.add(t,o,t),r.center=a.clone(e.center,r.center),r.radius=a.magnitude(t),r};i.clone=function(e,r){if(!!h(e))return h(r)?(r.center=a.clone(e.center,r.center),r.radius=e.radius,r):new i(e.center,e.radius)};i.packedLength=4;i.pack=function(e,r,n){S.typeOf.object("value",e),S.defined("array",r),n=q(n,0);var t=e.center;return r[n++]=t.x,r[n++]=t.y,r[n++]=t.z,r[n]=e.radius,r};i.unpack=function(e,r,n){S.defined("array",e),r=q(r,0),h(n)||(n=new i);var t=n.center;return t.x=e[r++],t.y=e[r++],t.z=e[r++],n.radius=e[r],n};var ba=new a,ga=new a;i.union=function(e,r,n){S.typeOf.object("left",e),S.typeOf.object("right",r),h(n)||(n=new i);var t=e.center,c=e.radius,o=r.center,v=r.radius,d=a.subtract(o,t,ba),u=a.magnitude(d);if(c>=u+v)return e.clone(n),n;if(v>=u+c)return r.clone(n),n;var z=(c+u+v)*.5,y=a.multiplyByScalar(d,(-c+z)/u,ga);return a.add(y,t,y),a.clone(y,n.center),n.radius=z,n};var Ma=new a;i.expand=function(e,r,n){S.typeOf.object("sphere",e),S.typeOf.object("point",r),n=i.clone(e,n);var t=a.magnitude(a.subtract(r,n.center,Ma));return t>n.radius&&(n.radius=t),n};i.intersectPlane=function(e,r){S.typeOf.object("sphere",e),S.typeOf.object("plane",r);var n=e.center,t=e.radius,c=r.normal,o=a.dot(c,n)+r.distance;return o<-t?A.OUTSIDE:o<t?A.INTERSECTING:A.INSIDE};i.transform=function(e,r,n){return S.typeOf.object("sphere",e),S.typeOf.object("transform",r),h(n)||(n=new i),n.center=G.multiplyByPoint(r,e.center,n.center),n.radius=G.getMaximumScale(r)*e.radius,n};var Ra=new a;i.distanceSquaredTo=function(e,r){S.typeOf.object("sphere",e),S.typeOf.object("cartesian",r);var n=a.subtract(e.center,r,Ra);return a.magnitudeSquared(n)-e.radius*e.radius};i.transformWithoutScale=function(e,r,n){return S.typeOf.object("sphere",e),S.typeOf.object("transform",r),h(n)||(n=new i),n.center=G.multiplyByPoint(r,e.center,n.center),n.radius=e.radius,n};var qa=new a;i.computePlaneDistances=function(e,r,n,t){S.typeOf.object("sphere",e),S.typeOf.object("position",r),S.typeOf.object("direction",n),h(t)||(t=new fa);var c=a.subtract(e.center,r,qa),o=a.dot(n,c);return t.start=o-e.radius,t.stop=o+e.radius,t};var va=new a,ja=new a,Pa=new a,Da=new a,Ba=new a,Ea=new W,oa=new Array(8);for(X=0;X<8;++X)oa[X]=new a;var X,la=new _;i.projectTo2D=function(e,r,n){S.typeOf.object("sphere",e),r=q(r,la);var t=r.ellipsoid,c=e.center,o=e.radius,v;a.equals(c,a.ZERO)?v=a.clone(a.UNIT_X,va):v=t.geodeticSurfaceNormal(c,va);var d=a.cross(a.UNIT_Z,v,ja);a.normalize(d,d);var u=a.cross(v,d,Pa);a.normalize(u,u),a.multiplyByScalar(v,o,v),a.multiplyByScalar(u,o,u),a.multiplyByScalar(d,o,d);var z=a.negate(u,Ba),y=a.negate(d,Da),m=oa,f=m[0];a.add(v,u,f),a.add(f,d,f),f=m[1],a.add(v,u,f),a.add(f,y,f),f=m[2],a.add(v,z,f),a.add(f,y,f),f=m[3],a.add(v,z,f),a.add(f,d,f),a.negate(v,v),f=m[4],a.add(v,u,f),a.add(f,d,f),f=m[5],a.add(v,u,f),a.add(f,y,f),f=m[6],a.add(v,z,f),a.add(f,y,f),f=m[7],a.add(v,z,f),a.add(f,d,f);for(var B=m.length,j=0;j<B;++j){var P=m[j];a.add(c,P,P);var U=t.cartesianToCartographic(P,Ea);r.project(U,P)}n=i.fromPoints(m,n),c=n.center;var D=c.x,R=c.y,b=c.z;return c.x=b,c.y=D,c.z=R,n};i.isOccluded=function(e,r){return S.typeOf.object("sphere",e),S.typeOf.object("occluder",r),!r.isBoundingSphereVisible(e)};i.equals=function(e,r){return e===r||h(e)&&h(r)&&a.equals(e.center,r.center)&&e.radius===r.radius};i.prototype.intersectPlane=function(e){return i.intersectPlane(this,e)};i.prototype.distanceSquaredTo=function(e){return i.distanceSquaredTo(this,e)};i.prototype.computePlaneDistances=function(e,r,n){return i.computePlaneDistances(this,e,r,n)};i.prototype.isOccluded=function(e){return i.isOccluded(this,e)};i.prototype.equals=function(e){return i.equals(this,e)};i.prototype.clone=function(e){return i.clone(this,e)};i.prototype.volume=function(){var e=this.radius;return ma*e*e*e};var Ka=i;export{A as a,fa as b,Ka as c};

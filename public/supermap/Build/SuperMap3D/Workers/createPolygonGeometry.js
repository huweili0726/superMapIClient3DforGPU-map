import{a as Ee}from"./chunk-3YVIVL5K.js";import{a as se,b as de}from"./chunk-MPSLJKIO.js";import{a as Se}from"./chunk-N2FX2XTT.js";import{a as x}from"./chunk-RYEDLSXB.js";import{a as B}from"./chunk-PGYTNZCJ.js";import{a as K}from"./chunk-SP6GVFX5.js";import{b as ie}from"./chunk-L6Z5JM56.js";import{a as we,b as ae}from"./chunk-RMFPWQ3G.js";import"./chunk-4WVDVRKW.js";import"./chunk-4XC5RTMX.js";import{a as ve}from"./chunk-Y3BJXBMN.js";import{a as Re}from"./chunk-I77OHWKX.js";import"./chunk-Q4ZRVZUS.js";import"./chunk-TAREIYKN.js";import{a as be,b as Ce}from"./chunk-KBENTI6G.js";import"./chunk-L77WLOIG.js";import{a as _e}from"./chunk-DAQQE4FA.js";import"./chunk-UIA2BV6O.js";import{c as ge,g as Te,h as ee}from"./chunk-T3RVX7V2.js";import"./chunk-NPAFDOYL.js";import{c as Le}from"./chunk-YOUPUNCB.js";import"./chunk-ZIZDQ7PT.js";import"./chunk-QO3RRUEO.js";import"./chunk-RRHLFRBE.js";import{a as $}from"./chunk-SRPTWKHW.js";import"./chunk-6S43R6PL.js";import"./chunk-GMH62RQ6.js";import"./chunk-6NA2GRXE.js";import{a as j}from"./chunk-JTWCWMT6.js";import"./chunk-NBA64YIR.js";import"./chunk-EHDXVZQM.js";import{a as pe}from"./chunk-3CEYC7M5.js";import{a as R,b as S}from"./chunk-SVO3L3ZS.js";import"./chunk-ZCGLU37G.js";import{b as X}from"./chunk-E37TXANJ.js";import{a as s}from"./chunk-DJQWO2NJ.js";import{a as u}from"./chunk-Y2ETSBLW.js";import{a as T}from"./chunk-UBHQMGET.js";import{a as V}from"./chunk-EDZQSM3T.js";import{a as le}from"./chunk-PJGSCWXZ.js";import{a as N}from"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";function E(e,t){this.position=e,N(this.position)||(this.position=new R),this.tangentPlane=t,N(this.tangentPlane)||(this.tangentPlane=E.NORTH_POLE_TANGENT_PLANE)}Object.defineProperties(E.prototype,{ellipsoid:{get:function(){return this.tangentPlane.ellipsoid}},x:{get:function(){return this.position.x}},y:{get:function(){return this.position.y}},conformalLatitude:{get:function(){let e=R.magnitude(this.position),t=2*this.ellipsoid.maximumRadius;return this.tangentPlane.plane.normal.z*(u.PI_OVER_TWO-2*Math.atan2(e,t))}},longitude:{get:function(){let e=u.PI_OVER_TWO+Math.atan2(this.y,this.x);return e>Math.PI&&(e-=u.TWO_PI),e}}});var oe=new X,Ue=new s;E.prototype.getLatitude=function(e){N(e)||(e=S.WGS84),oe.latitude=this.conformalLatitude,oe.longitude=this.longitude,oe.height=0;let t=this.ellipsoid.cartographicToCartesian(oe,Ue);return e.cartesianToCartographic(t,oe),oe.latitude};var We=new be,ke=new s,Ye=new s;E.fromCartesian=function(e,t){V.defined("cartesian",e);let r=u.signNotZero(e.z),i=E.NORTH_POLE_TANGENT_PLANE,a=E.SOUTH_POLE;r<0&&(i=E.SOUTH_POLE_TANGENT_PLANE,a=E.NORTH_POLE);let o=We;o.origin=i.ellipsoid.scaleToGeocentricSurface(e,o.origin),o.direction=s.subtract(o.origin,a,ke),s.normalize(o.direction,o.direction);let n=Ce.rayPlane(o,i.plane,Ye),c=s.subtract(n,a,n),v=s.dot(i.xAxis,c),m=r*s.dot(i.yAxis,c);return N(t)?(t.position=new R(v,m),t.tangentPlane=i,t):new E(new R(v,m),i)};E.fromCartesianArray=function(e,t){V.defined("cartesians",e);let r=e.length;N(t)?t.length=r:t=new Array(r);for(let i=0;i<r;i++)t[i]=E.fromCartesian(e[i],t[i]);return t};E.clone=function(e,t){if(!!N(e))return N(t)?(t.position=e.position,t.tangentPlane=e.tangentPlane,t):new E(e.position,e.tangentPlane)};E.HALF_UNIT_SPHERE=Object.freeze(new S(.5,.5,.5));E.NORTH_POLE=Object.freeze(new s(0,0,.5));E.SOUTH_POLE=Object.freeze(new s(0,0,-.5));E.NORTH_POLE_TANGENT_PLANE=Object.freeze(new ie(E.NORTH_POLE,E.HALF_UNIT_SPHERE));E.SOUTH_POLE_TANGENT_PLANE=Object.freeze(new ie(E.SOUTH_POLE,E.HALF_UNIT_SPHERE));var J=E;var xe=new X,Fe=new X;function Ge(e,t,r,i){var a=i.cartesianToCartographic(e,xe),o=a.height,n=i.cartesianToCartographic(t,Fe);n.height=o,i.cartographicToCartesian(n,t);var c=i.cartesianToCartographic(r,Fe);c.height=o-100,i.cartographicToCartesian(c,r)}var qe=new Se,Qe=new s,Ze=new s,Ke=new s,Je=new s,Xe=new s,$e=new s,Pe=new s,Q=new s,ne=new s,et=new R,tt=new R,rt=new s,De=new ge,it=new j,at=new j;function ye(e){var t=e.vertexFormat,r=e.geometry,i=e.shadowVolume,a=r.attributes.position.values,o=a.length,n=e.wall,c=e.top||n,v=e.bottom||n;if(t.st||t.normal||t.tangent||t.bitangent||i){var m=e.boundingRectangle,p=e.tangentPlane,h=e.ellipsoid,_=e.stRotation,H=e.perPositionHeight,A=et;A.x=m.x,A.y=m.y;var D=e.isComputeTexCoord?new Float32Array(o):new Float32Array(2*(o/3)),l=t.st?D:void 0,P;t.normal&&(H&&c&&!n?P=r.attributes.normal.values:P=new Float32Array(o));var w=t.tangent?new Float32Array(o):void 0,F=t.bitangent?new Float32Array(o):void 0,y=i?new Float32Array(o):void 0,b=0,O=0,f=Ze,g=Ke,L=Je,W=!0,C=it,I=at;if(_!==0){var Z=ge.fromAxisAngle(p._plane.normal,_,De);C=j.fromQuaternion(Z,C),Z=ge.fromAxisAngle(p._plane.normal,-_,De),I=j.fromQuaternion(Z,I)}else C=j.clone(j.IDENTITY,C),I=j.clone(j.IDENTITY,I);var d=0,M=0;c&&v&&(d=o/2,M=o/3,o/=2);for(var G=0;G<o;G+=3){var q=s.fromArray(a,G,rt);if(t.st){var fe=j.multiplyByVector(C,q,Qe);fe=h.scaleToGeodeticSurface(fe,fe);var ue=p.projectPointOntoPlane(fe,tt);R.subtract(ue,A,ue);var Ne=u.clamp(ue.x/m.width,0,1),Ae=u.clamp(ue.y/m.height,0,1);v&&(l[b+M]=Ne,l[b+1+M]=Ae),c&&(l[b]=Ne,l[b+1]=Ae),b+=2}if(t.normal||t.tangent||t.bitangent||i){var k=O+1,Y=O+2;if(n){if(G+3<o){var he=s.fromArray(a,G+3,Xe);if(W){var me=s.fromArray(a,G+o,$e);H&&Ge(q,he,me,h),s.subtract(he,q,he),s.subtract(me,q,me),f=s.normalize(s.cross(me,he,f),f),W=!1}s.equalsEpsilon(he,q,u.EPSILON10)&&(W=!0)}(t.tangent||t.bitangent)&&(L=h.geodeticSurfaceNormal(q,L),t.tangent&&(g=s.normalize(s.cross(L,f,g),g)))}else f=h.geodeticSurfaceNormal(q,f),(t.tangent||t.bitangent)&&(H&&(Pe=s.fromArray(P,O,Pe),Q=s.cross(s.UNIT_Z,Pe,Q),Q=s.normalize(j.multiplyByVector(I,Q,Q),Q),t.bitangent&&(ne=s.normalize(s.cross(Pe,Q,ne),ne))),g=s.cross(s.UNIT_Z,f,g),g=s.normalize(j.multiplyByVector(I,g,g),g),t.bitangent&&(L=s.normalize(s.cross(f,g,L),L)));t.normal&&(e.wall?(P[O+d]=f.x,P[k+d]=f.y,P[Y+d]=f.z):v&&(P[O+d]=-f.x,P[k+d]=-f.y,P[Y+d]=-f.z),(c&&!H||n)&&(P[O]=f.x,P[k]=f.y,P[Y]=f.z)),i&&(n&&(f=h.geodeticSurfaceNormal(q,f)),y[O+d]=-f.x,y[k+d]=-f.y,y[Y+d]=-f.z),t.tangent&&(e.wall?(w[O+d]=g.x,w[k+d]=g.y,w[Y+d]=g.z):v&&(w[O+d]=-g.x,w[k+d]=-g.y,w[Y+d]=-g.z),c&&(H?(w[O]=Q.x,w[k]=Q.y,w[Y]=Q.z):(w[O]=g.x,w[k]=g.y,w[Y]=g.z))),t.bitangent&&(v&&(F[O+d]=L.x,F[k+d]=L.y,F[Y+d]=L.z),c&&(H?(F[O]=ne.x,F[k]=ne.y,F[Y]=ne.z):(F[O]=L.x,F[k]=L.y,F[Y]=L.z))),O+=3}}t.st&&(r.attributes.st=new ee({componentDatatype:$.FLOAT,componentsPerAttribute:2,values:l})),t.normal&&(r.attributes.normal=new ee({componentDatatype:$.FLOAT,componentsPerAttribute:3,values:P})),t.tangent&&(r.attributes.tangent=new ee({componentDatatype:$.FLOAT,componentsPerAttribute:3,values:w})),t.bitangent&&(r.attributes.bitangent=new ee({componentDatatype:$.FLOAT,componentsPerAttribute:3,values:F})),i&&(r.attributes.extrudeDirection=new ee({componentDatatype:$.FLOAT,componentsPerAttribute:3,values:y}))}if(e.extrude&&N(e.offsetAttribute)){var He=a.length/3,re=new Uint8Array(He);if(e.offsetAttribute===de.TOP)c&&v||n?re=se(re,1,0,He/2):c&&(re=se(re,1));else{var ze=e.offsetAttribute===de.NONE?0:1;re=se(re,ze)}r.attributes.applyOffset=new ee({componentDatatype:$.UNSIGNED_BYTE,componentsPerAttribute:1,values:re})}return r}var ot=new X,nt=new X,te={westOverIDL:0,eastOverIDL:0},ce=new Ee;function Be(e,t,r,i,a){if(a=T(a,new pe),!N(e)||e.length<3)return a.west=0,a.north=0,a.south=0,a.east=0,a;if(r===K.RHUMB)return pe.fromCartesianArray(e,t,a);ce.ellipsoid.equals(t)||(ce=new Ee(void 0,void 0,t)),a.west=Number.POSITIVE_INFINITY,a.east=Number.NEGATIVE_INFINITY,a.south=Number.POSITIVE_INFINITY,a.north=Number.NEGATIVE_INFINITY,te.westOverIDL=Number.POSITIVE_INFINITY,te.eastOverIDL=Number.NEGATIVE_INFINITY;for(var o=1/u.chordLength(i,t.maximumRadius),n=e.length,c=t.cartesianToCartographic(e[0],nt),v=ot,m,p=1;p<n;p++)m=v,v=c,c=t.cartesianToCartographic(e[p],m),ce.setEndPoints(v,c),Ie(ce,o,a,te);return m=v,v=c,c=t.cartesianToCartographic(e[0],m),ce.setEndPoints(v,c),Ie(ce,o,a,te),a.east-a.west>te.eastOverIDL-te.westOverIDL&&(a.west=te.westOverIDL,a.east=te.eastOverIDL,a.east>u.PI&&(a.east=a.east-u.TWO_PI),a.west>u.PI&&(a.west=a.west-u.TWO_PI)),a}var ct=new X;function Ie(e,t,r,i){for(var a=e.surfaceDistance,o=Math.ceil(a*t),n=o>0?a/(o-1):Number.POSITIVE_INFINITY,c=0,v=0;v<o;v++){var m=e.interpolateUsingSurfaceDistance(c,ct);c+=n;var p=m.longitude,h=m.latitude;r.west=Math.min(r.west,p),r.east=Math.max(r.east,p),r.south=Math.min(r.south,h),r.north=Math.max(r.north,h);let _=p>=0?p:p+u.TWO_PI;i.westOverIDL=Math.min(i.westOverIDL,_),i.eastOverIDL=Math.max(i.eastOverIDL,_)}}var Ve=[];function ht(e,t,r,i,a,o,n,c,v,m){var p={walls:[]},h;if(o||n){var _=B.createGeometryFromPositions(e,t,r,a,c,v),H=_.attributes.position.values,A=_.indices,D,l;if(o&&n){var P=H.concat(H);D=P.length/3,l=_e.createTypedArray(D,A.length*2),l.set(A);var w=A.length,F=D/2;for(h=0;h<w;h+=3){var y=l[h]+F,b=l[h+1]+F,O=l[h+2]+F;l[h+w]=O,l[h+1+w]=b,l[h+2+w]=y}if(_.attributes.position.values=P,a&&c.normal){var f=_.attributes.normal.values;_.attributes.normal.values=new Float32Array(P.length),_.attributes.normal.values.set(f)}_.indices=l}else if(n){for(D=H.length/3,l=_e.createTypedArray(D,A.length),h=0;h<A.length;h+=3)l[h]=A[h+2],l[h+1]=A[h+1],l[h+2]=A[h];_.indices=l}p.topAndBottom=new ve({geometry:_})}var g=i.outerRing,L=ie.fromPoints(g,e),W=L.projectPointsOntoPlane(g,Ve),C=ae.computeWindingOrder2D(W);C===we.CLOCKWISE&&(g=g.slice().reverse());var I;m&&(I=B.computeWallGeometry(g,e,r,a,v),p.walls.push(new ve({geometry:I})));var Z=i.holes;for(h=0;h<Z.length;h++){var d=Z[h];L=ie.fromPoints(d,e),W=L.projectPointsOntoPlane(d,Ve),C=ae.computeWindingOrder2D(W),C===we.COUNTER_CLOCKWISE&&(d=d.slice().reverse()),I=B.computeWallGeometry(d,e,r,a,v),p.walls.push(new ve({geometry:I}))}return p}function U(e){if(V.typeOf.object("options",e),V.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),N(e.perPositionHeight)&&e.perPositionHeight&&N(e.height))throw new le("Cannot use both options.perPositionHeight and options.height");if(N(e.arcType)&&e.arcType!==K.GEODESIC&&e.arcType!==K.RHUMB)throw new le("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");var t=e.polygonHierarchy,r=T(e.vertexFormat,x.DEFAULT),i=T(e.ellipsoid,S.WGS84),a=T(e.granularity,u.RADIANS_PER_DEGREE),o=T(e.stRotation,0),n=T(e.perPositionHeight,!1),c=n&&N(e.extrudedHeight),v=T(e.height,0),m=T(e.extrudedHeight,v);if(!c){var p=Math.max(v,m);m=Math.min(v,m),v=p}this._vertexFormat=x.clone(r),this._ellipsoid=S.clone(i),this._granularity=a,this._stRotation=o,this._height=v,this._extrudedHeight=m,this._closeTop=T(e.closeTop,!0),this._closeBottom=T(e.closeBottom,!0),this._extrudeOutering=T(e.extrudeOutering,!0),this._polygonHierarchy=t,this._perPositionHeight=n,this._perPositionHeightExtrude=c,this._shadowVolume=T(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=T(e.arcType,K.GEODESIC),this._groundBottomAltitude=T(e.groundBottomAltitude,0),this._groundExtrudedHeight=T(e.groundExtrudedHeight,0),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this.packedLength=B.computeHierarchyPackedLength(t)+S.packedLength+x.packedLength+12}U.fromPositions=function(e){e=T(e,T.EMPTY_OBJECT),V.defined("options.positions",e.positions);var t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType};return new U(t)};U.pack=function(e,t,r){return V.typeOf.object("value",e),V.defined("array",t),r=T(r,0),r=B.packPolygonHierarchy(e._polygonHierarchy,t,r),S.pack(e._ellipsoid,t,r),r+=S.packedLength,x.pack(e._vertexFormat,t,r),r+=x.packedLength,t[r++]=e._height,t[r++]=e._extrudedHeight,t[r++]=e._granularity,t[r++]=e._stRotation,t[r++]=e._perPositionHeightExtrude?1:0,t[r++]=e._perPositionHeight?1:0,t[r++]=e._closeTop?1:0,t[r++]=e._closeBottom?1:0,t[r++]=e._shadowVolume?1:0,t[r++]=T(e._offsetAttribute,-1),t[r++]=e._arcType,t[r]=e.packedLength,t};var st=S.clone(S.UNIT_SPHERE),vt=new x,ft={polygonHierarchy:{}};U.unpack=function(e,t,r){V.defined("array",e),t=T(t,0);var i=B.unpackPolygonHierarchy(e,t);t=i.startingIndex,delete i.startingIndex;var a=S.unpack(e,t,st);t+=S.packedLength;var o=x.unpack(e,t,vt);t+=x.packedLength;var n=e[t++],c=e[t++],v=e[t++],m=e[t++],p=e[t++]===1,h=e[t++]===1,_=e[t++]===1,H=e[t++]===1,A=e[t++]===1,D=e[t++],l=e[t++],P=e[t];return N(r)||(r=new U(ft)),r._polygonHierarchy=i,r._ellipsoid=S.clone(a,r._ellipsoid),r._vertexFormat=x.clone(o,r._vertexFormat),r._height=n,r._extrudedHeight=c,r._granularity=v,r._stRotation=m,r._perPositionHeightExtrude=p,r._perPositionHeight=h,r._closeTop=_,r._closeBottom=H,r._shadowVolume=A,r._offsetAttribute=D===-1?void 0:D,r._arcType=l,r.packedLength=P,r};U.computeRectangle=function(e,t){V.typeOf.object("options",e),V.typeOf.object("options.polygonHierarchy",e.polygonHierarchy);var r=T(e.granularity,u.RADIANS_PER_DEGREE),i=T(e.arcType,K.GEODESIC);if(i!==K.GEODESIC&&i!==K.RHUMB)throw new le("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");var a=e.polygonHierarchy,o=T(e.ellipsoid,S.WGS84);return Be(a.positions,o,i,r,t)};U.createGeometry=function(e){var t=e._vertexFormat,r=e._ellipsoid,i=e._granularity,a=e._stRotation,o=e._polygonHierarchy,n=e._perPositionHeight,c=e._closeTop,v=e._closeBottom,m=e._arcType,p=o.positions;if(!(p.length<3)){var h=ie.fromPoints(p,r),_=B.polygonsFromHierarchy(o,h.projectPointsOntoPlane.bind(h),!n,r),H=_.hierarchy,A=_.polygons;if(H.length!==0){p=H[0].outerRing;var D=B.computeBoundingRectangle(h.plane.normal,h.projectPointOntoPlane.bind(h),p,a,qe),l=[],P=e._height,w=e._extrudedHeight,F=e._perPositionHeightExtrude||!u.equalsEpsilon(P,w,0,u.EPSILON2),y={perPositionHeight:n,vertexFormat:t,geometry:void 0,tangentPlane:h,boundingRectangle:D,ellipsoid:r,stRotation:a,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:m},b;if(F)for(y.extrude=!0,y.top=c,y.bottom=v,y.shadowVolume=e._shadowVolume,y.offsetAttribute=e._offsetAttribute,b=0;b<A.length;b++){var O=ht(r,A[b],i,H[b],n,c,v,t,m,e._extrudeOutering),f;c&&v?(f=O.topAndBottom,y.geometry=B.scaleToGeodeticHeightExtruded(f.geometry,P,w,r,n)):c?(f=O.topAndBottom,f.geometry.attributes.position.values=ae.scaleToGeodeticHeight(f.geometry.attributes.position.values,P,r,!n),y.geometry=f.geometry):v&&(f=O.topAndBottom,f.geometry.attributes.position.values=ae.scaleToGeodeticHeight(f.geometry.attributes.position.values,w,r,!0),y.geometry=f.geometry),(c||v)&&(y.wall=!1,f.geometry=ye(y),l.push(f));var g=O.walls;y.wall=!0;for(var L=0;L<g.length;L++){var W=g[L];y.geometry=B.scaleToGeodeticHeightExtruded(W.geometry,P,w,r,n),W.geometry=ye(y),l.push(W)}}else for(b=0;b<A.length;b++){var C=new ve({geometry:B.createGeometryFromPositions(r,A[b],i,n,t,m)});if(C.geometry.attributes.position.values=ae.scaleToGeodeticHeight(C.geometry.attributes.position.values,P,r,!n),y.geometry=C.geometry,C.geometry=ye(y),N(e._offsetAttribute)){var I=C.geometry.attributes.position.values.length,Z=new Uint8Array(I/3),d=e._offsetAttribute===de.NONE?0:1;se(Z,d),C.geometry.attributes.applyOffset=new ee({componentDatatype:$.UNSIGNED_BYTE,componentsPerAttribute:1,values:Z})}l.push(C)}var M=Re.combineInstances(l)[0];M.attributes.position.values=new Float64Array(M.attributes.position.values),M.indices=_e.createTypedArray(M.attributes.position.values.length/3,M.indices);var G=M.attributes,q=Le.fromVertices(G.position.values);return t.position||delete G.position,new Te({attributes:G,indices:M.indices,primitiveType:M.primitiveType,boundingSphere:q,offsetAttribute:e._offsetAttribute})}}};U.createShadowVolume=function(e,t,r){var i=e._granularity,a=e._ellipsoid,o=e._groundBottomAltitude+e._groundExtrudedHeight,n=e._groundBottomAltitude?e._groundBottomAltitude:t(i,a),c=o!==e._groundBottomAltitude?o:r(i,a);return new U({polygonHierarchy:e._polygonHierarchy,ellipsoid:a,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:n,height:c,vertexFormat:x.POSITION_ONLY,shadowVolume:!e._groundBottomAltitude,arcType:e._arcType})};function ut(e){var t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];var r=e._ellipsoid,i=e._polygonHierarchy.positions,a=e.rectangle;return Te._textureCoordinateRotationPoints(i,t,r,a)}Object.defineProperties(U.prototype,{rectangle:{get:function(){if(!N(this._rectangle)){var e=this._polygonHierarchy.positions;this._rectangle=Be(e,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return N(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=ut(this)),this._textureCoordinateRotationPoints}}});var mt=new R,lt=new R,pt=new J;function Me(e,t,r,i,a,o){let n=e.longitude,c=n>=0?n:n+u.TWO_PI;a.westOverIdl=Math.min(a.westOverIdl,c),a.eastOverIdl=Math.max(a.eastOverIdl,c),o.west=Math.min(o.west,n),o.east=Math.max(o.east,n);let v=e.getLatitude(r),m=v;if(o.south=Math.min(o.south,v),o.north=Math.max(o.north,v),i!==K.RHUMB){let _=R.subtract(t.position,e.position,mt),H=R.dot(t.position,_)/R.dot(_,_);if(H>0&&H<1){let A=R.add(t.position,R.multiplyByScalar(_,-H,_),lt),D=J.clone(t,pt);D.position=A;let l=D.getLatitude(r);o.south=Math.min(o.south,l),o.north=Math.max(o.north,l),Math.abs(v)>Math.abs(l)&&(m=l)}}let p=t.x*e.y-e.x*t.y,h=Math.sign(p);h!==0&&(h*=R.angleBetween(t.position,e.position)),m>=0&&(a.northAngle+=h),m<=0&&(a.southAngle+=h)}var je=new J,gt=new J,z={northAngle:0,southAngle:0,westOverIdl:0,eastOverIdl:0};U.computeRectangleFromPositions=function(e,t,r,i){if(V.defined("positions",e),N(i)||(i=new pe),e.length<3)return i;i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,z.northAngle=0,z.southAngle=0,z.westOverIdl=Number.POSITIVE_INFINITY,z.eastOverIdl=Number.NEGATIVE_INFINITY;let a=e.length,o=J.fromCartesian(e[0],gt);for(let n=1;n<a;n++){let c=J.fromCartesian(e[n],je);Me(c,o,t,r,z,i),o=J.clone(c,o)}return Me(J.fromCartesian(e[0],je),o,t,r,z,i),i.east-i.west>z.eastOverIdl-z.westOverIdl&&(i.west=z.westOverIdl,i.east=z.eastOverIdl,i.east>u.PI&&(i.east=i.east-u.TWO_PI),i.west>u.PI&&(i.west=i.west-u.TWO_PI)),u.equalsEpsilon(Math.abs(z.northAngle),u.TWO_PI,u.EPSILON10)&&(i.north=u.PI_OVER_TWO,i.east=u.PI,i.west=-u.PI),u.equalsEpsilon(Math.abs(z.southAngle),u.TWO_PI,u.EPSILON10)&&(i.south=-u.PI_OVER_TWO,i.east=u.PI,i.west=-u.PI),i};var Oe=U;function _t(e,t){return N(t)&&(e=Oe.unpack(e,t)),e._ellipsoid=S.clone(e._ellipsoid),Oe.createGeometry(e)}var sr=_t;export{sr as default};

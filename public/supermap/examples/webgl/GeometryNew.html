<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>几何体对象</title>
    <link href="../../Build/SuperMap3D/Widgets/widgets.css" rel="stylesheet">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/pretty.css" rel="stylesheet">
    <link href="./css/bootstrap-select.min.css" rel="stylesheet">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/bootstrap-select.min.js"></script>
    <script src="./js/config.js"></script>
    <script type="text/javascript" src="../../Build/SuperMap3D/SuperMap3D.js"></script>
</head>

<body>
    <div id="Container"></div>
    <div id='loadingbar' class="spinner">
        <div class="spinner-container container1">
            <div class="circle1"></div>
            <div class="circle2"></div>
            <div class="circle3"></div>
            <div class="circle4"></div>
        </div>
        <div class="spinner-container container2">
            <div class="circle1"></div>
            <div class="circle2"></div>
            <div class="circle3"></div>
            <div class="circle4"></div>
        </div>
        <div class="spinner-container container3">
            <div class="circle1"></div>
            <div class="circle2"></div>
            <div class="circle3"></div>
            <div class="circle4"></div>
        </div>
    </div>

    <script>
        function onload(SuperMap3D) {
            // 通过config.js中的getEngineType,获取引擎类型（EngineType）用于设置启动方式
            let EngineType = getEngineType();
            let viewer = new SuperMap3D.Viewer('Container', {
                navigation: false,
                contextOptions: {
                    contextType: Number(EngineType), // Webgl2:2 ; WebGPU:3
                },
            });

            viewer.scenePromise.then(function (scene) {
                init(SuperMap3D, scene, viewer);
            });
        }

        function init(SuperMap3D, scene, viewer) {
            viewer.resolutionScale = window.devicePixelRatio;
            viewer.imageryLayers.addImageryProvider(
                new SuperMap3D.SuperMapImageryProvider({
                    url: "http://www.supermapol.com/realspace/services/map-China400/rest/maps/China400",
                })
            );

            viewer.entities.add({
                name: '红色圆柱',
                position: SuperMap3D.Cartesian3.fromDegrees(116.4562704879549, 39.91212485018824, 30),
                cylinder: {
                    length: 40.0,
                    topRadius: 20.0,
                    bottomRadius: 20.0,
                    material: SuperMap3D.Color.RED
                }
            });

            viewer.entities.add({
                name: '绿色拉伸面',
                polygon: {
                    hierarchy: SuperMap3D.Cartesian3.fromDegreesArray([116.45687396660284, 39.91217394882386,
                        116.45689442131189, 39.91203876578616,
                        116.45713129789296, 39.912168222330116]),
                    extrudedHeight: 30.0,
                    material: SuperMap3D.Color.GREEN,
                    closeTop: false,
                    closeBottom: false
                }
            });

            viewer.entities.add({
                name: '带边框的绿色圆锥',
                position: SuperMap3D.Cartesian3.fromDegrees(116.45778698728255, 39.9121425061035, 30),
                cylinder: {
                    length: 40.0,
                    topRadius: 0.0,
                    bottomRadius: 20.0,
                    material: SuperMap3D.Color.GREEN.withAlpha(0.5),
                    outline: true,
                    outlineColor: SuperMap3D.Color.DARK_GREEN
                }
            });

            viewer.entities.add({
                name: '蓝色四棱锥',
                position: SuperMap3D.Cartesian3.fromDegrees(116.45978278766857, 39.912196136008255, 30),
                cylinder: {
                    length: 40.0,
                    topRadius: 0.0,
                    bottomRadius: 20.0,
                    slices: 4,
                    outline: true,
                    material: SuperMap3D.Color.BLUE.withAlpha(0.5),
                }
            });

            viewer.entities.add({
                name: '蓝色六棱台',
                position: SuperMap3D.Cartesian3.fromDegrees(116.4597125840581, 39.912915655731204, 30),
                cylinder: {
                    length: 40.0,
                    topRadius: 10.0,
                    bottomRadius: 20.0,
                    slices: 6,
                    outline: true,
                    material: SuperMap3D.Color.BLUE.withAlpha(0.5),
                }
            });

            viewer.entities.add({
                name: '带边框的红色圆球',
                position: SuperMap3D.Cartesian3.fromDegrees(116.45890618853532, 39.91214653616994, 30),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(30.0, 30.0, 30.0),
                    material: SuperMap3D.Color.RED.withAlpha(0.5),
                    outline: true,
                    outlineColor: SuperMap3D.Color.BLACK
                }
            });

            viewer.entities.add({
                name: '浅蓝色线框椭圆',
                position: SuperMap3D.Cartesian3.fromDegrees(116.46049245131671, 39.91216500400224, 30),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(20.0, 20.0, 30.0),
                    fill: false,
                    outline: true,
                    outlineColor: SuperMap3D.Color.AQUA,
                    slicePartitions: 24,
                    stackPartitions: 36
                }
            });

            viewer.entities.add({
                name: '蓝色半球',
                position: SuperMap3D.Cartesian3.fromDegrees(116.46151827998321, 39.9121716273806, 30),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(20.0, 20.0, 20.0),
                    maximumCone: SuperMap3D.Math.PI_OVER_TWO,
                    material: SuperMap3D.Color.BLUE.withAlpha(0.5),
                }
            });

            viewer.entities.add({
                name: '红色双半球',
                position: SuperMap3D.Cartesian3.fromDegrees(116.4626644826499, 39.912169556998975, 30),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(20.0, 20.0, 20.0),
                    innerRadii: new SuperMap3D.Cartesian3(10.0, 10.0, 10.0),
                    maximumCone: SuperMap3D.Math.PI_OVER_TWO,
                    material: SuperMap3D.Color.RED.withAlpha(0.3),
                    outline: true
                }
            });

            viewer.entities.add({
                name: '带高度的点构成的几何面',
                polygon: {
                    hierarchy: SuperMap3D.Cartesian3.fromDegreesArrayHeights([116.45695157129417, 39.912774140374154, 10,
                        116.45730316081183, 39.91280219969743, 10,
                        116.45729308876739, 39.912613718084735, 10,
                        116.45692513049745, 39.91259635361328, 30]),
                    height: 20,
                    extrudedHeight: 0,
                    perPositionHeight: true,
                    material: SuperMap3D.Color.ORANGE.withAlpha(0.5),
                    outline: true,
                    outlineColor: SuperMap3D.Color.BLACK
                }
            });

            let position_ring = SuperMap3D.Cartesian3.fromDegrees(116.4582680966707, 39.91285634141626, 30);
            viewer.entities.add({
                name: "圆环",
                position: position_ring,
                orientation: SuperMap3D.Transforms.headingPitchRollQuaternion(
                    position_ring,
                    new SuperMap3D.HeadingPitchRoll(SuperMap3D.Math.toRadians(30.0), SuperMap3D.Math.toRadians(30.0), 0.0)
                ),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(40.0, 40.0, 40.0),
                    innerRadii: new SuperMap3D.Cartesian3(30.0, 30.0, 30.0),
                    minimumCone: SuperMap3D.Math.toRadians(89.8),
                    maximumCone: SuperMap3D.Math.toRadians(90.2),
                    material: new SuperMap3D.Color(0.95, 0.82, 0.49, 0.5)
                }
            });

            viewer.entities.add({
                name: '敞开的半球',
                position: SuperMap3D.Cartesian3.fromDegrees(116.46101242251503, 39.912950675839376, 30),
                ellipsoid: {
                    radii: new SuperMap3D.Cartesian3(30.0, 30.0, 30.0),
                    innerRadii: new SuperMap3D.Cartesian3(7.0, 7.0, 7.0),
                    minimumClock: SuperMap3D.Math.toRadians(180.0),
                    maximumClock: SuperMap3D.Math.toRadians(400.0),
                    maximumCone: SuperMap3D.Math.toRadians(90.0),
                    material: SuperMap3D.Color.DARKCYAN.withAlpha(0.3),
                    outline: true
                }
            });

            viewer.zoomTo(viewer.entities);

            $('#loadingbar').remove();
        }
        if (typeof SuperMap3D !== 'undefined') {
            window.startupCalled = true;
            onload(SuperMap3D);
        }
    </script>
</body>

</html>
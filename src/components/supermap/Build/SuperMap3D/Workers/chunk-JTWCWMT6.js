import{a as h}from"./chunk-DJQWO2NJ.js";import{a as A}from"./chunk-Y2ETSBLW.js";import{a as T}from"./chunk-UBHQMGET.js";import{a as v}from"./chunk-EDZQSM3T.js";import{a as V}from"./chunk-PJGSCWXZ.js";import{a as R}from"./chunk-NUC3LT2W.js";function p(n,o,c,O,b,f,M,y,w){this[0]=T(n,0),this[1]=T(O,0),this[2]=T(M,0),this[3]=T(o,0),this[4]=T(b,0),this[5]=T(y,0),this[6]=T(c,0),this[7]=T(f,0),this[8]=T(w,0),this.isMatrix3=!0}p.packedLength=9;p.pack=function(n,o,c){return v.typeOf.object("value",n),v.defined("array",o),c=T(c,0),o[c++]=n[0],o[c++]=n[1],o[c++]=n[2],o[c++]=n[3],o[c++]=n[4],o[c++]=n[5],o[c++]=n[6],o[c++]=n[7],o[c++]=n[8],o};p.unpack=function(n,o,c){return v.defined("array",n),o=T(o,0),R(c)||(c=new p),c[0]=n[o++],c[1]=n[o++],c[2]=n[o++],c[3]=n[o++],c[4]=n[o++],c[5]=n[o++],c[6]=n[o++],c[7]=n[o++],c[8]=n[o++],c};p.clone=function(n,o){if(!!R(n))return R(o)?(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o):new p(n[0],n[3],n[6],n[1],n[4],n[7],n[2],n[5],n[8])};p.fromArray=function(n,o,c){return v.defined("array",n),o=T(o,0),R(c)||(c=new p),c[0]=n[o],c[1]=n[o+1],c[2]=n[o+2],c[3]=n[o+3],c[4]=n[o+4],c[5]=n[o+5],c[6]=n[o+6],c[7]=n[o+7],c[8]=n[o+8],c};p.fromColumnMajorArray=function(n,o){return v.defined("values",n),p.clone(n,o)};p.fromRowMajorArray=function(n,o){return v.defined("values",n),R(o)?(o[0]=n[0],o[1]=n[3],o[2]=n[6],o[3]=n[1],o[4]=n[4],o[5]=n[7],o[6]=n[2],o[7]=n[5],o[8]=n[8],o):new p(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])};p.fromQuaternion=function(n,o){v.typeOf.object("quaternion",n);var c=n.x*n.x,O=n.x*n.y,b=n.x*n.z,f=n.x*n.w,M=n.y*n.y,y=n.y*n.z,w=n.y*n.w,j=n.z*n.z,E=n.z*n.w,z=n.w*n.w,N=c-M-j+z,S=2*(O-E),m=2*(b+w),C=2*(O+E),L=-c+M-j+z,q=2*(y-f),B=2*(b-w),P=2*(y+f),Y=-c-M+j+z;return R(o)?(o[0]=N,o[1]=C,o[2]=B,o[3]=S,o[4]=L,o[5]=P,o[6]=m,o[7]=q,o[8]=Y,o):new p(N,S,m,C,L,q,B,P,Y)};p.fromHeadingPitchRoll=function(n,o){v.typeOf.object("headingPitchRoll",n);var c=Math.cos(-n.pitch),O=Math.cos(-n.heading),b=Math.cos(n.roll),f=Math.sin(-n.pitch),M=Math.sin(-n.heading),y=Math.sin(n.roll),w=c*O,j=-b*M+y*f*O,E=y*M+b*f*O,z=c*M,N=b*O+y*f*M,S=-y*O+b*f*M,m=-f,C=y*c,L=b*c;return R(o)?(o[0]=w,o[1]=z,o[2]=m,o[3]=j,o[4]=N,o[5]=C,o[6]=E,o[7]=S,o[8]=L,o):new p(w,j,E,z,N,S,m,C,L)};p.fromScale=function(n,o){return v.typeOf.object("scale",n),R(o)?(o[0]=n.x,o[1]=0,o[2]=0,o[3]=0,o[4]=n.y,o[5]=0,o[6]=0,o[7]=0,o[8]=n.z,o):new p(n.x,0,0,0,n.y,0,0,0,n.z)};p.fromUniformScale=function(n,o){return v.typeOf.number("scale",n),R(o)?(o[0]=n,o[1]=0,o[2]=0,o[3]=0,o[4]=n,o[5]=0,o[6]=0,o[7]=0,o[8]=n,o):new p(n,0,0,0,n,0,0,0,n)};p.fromCrossProduct=function(n,o){return v.typeOf.object("vector",n),R(o)?(o[0]=0,o[1]=n.z,o[2]=-n.y,o[3]=-n.z,o[4]=0,o[5]=n.x,o[6]=n.y,o[7]=-n.x,o[8]=0,o):new p(0,-n.z,n.y,n.z,0,-n.x,-n.y,n.x,0)};p.fromRotationX=function(n,o){v.typeOf.number("angle",n);var c=Math.cos(n),O=Math.sin(n);return R(o)?(o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=c,o[5]=O,o[6]=0,o[7]=-O,o[8]=c,o):new p(1,0,0,0,c,-O,0,O,c)};p.fromRotationY=function(n,o){v.typeOf.number("angle",n);var c=Math.cos(n),O=Math.sin(n);return R(o)?(o[0]=c,o[1]=0,o[2]=-O,o[3]=0,o[4]=1,o[5]=0,o[6]=O,o[7]=0,o[8]=c,o):new p(c,0,O,0,1,0,-O,0,c)};p.fromRotationZ=function(n,o){v.typeOf.number("angle",n);var c=Math.cos(n),O=Math.sin(n);return R(o)?(o[0]=c,o[1]=O,o[2]=0,o[3]=-O,o[4]=c,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o):new p(c,-O,0,O,c,0,0,0,1)};p.toArray=function(n,o){return v.typeOf.object("matrix",n),R(o)?(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o):[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]]};p.getElementIndex=function(n,o){return v.typeOf.number.greaterThanOrEquals("row",o,0),v.typeOf.number.lessThanOrEquals("row",o,2),v.typeOf.number.greaterThanOrEquals("column",n,0),v.typeOf.number.lessThanOrEquals("column",n,2),n*3+o};p.getColumn=function(n,o,c){v.typeOf.object("matrix",n),v.typeOf.number.greaterThanOrEquals("index",o,0),v.typeOf.number.lessThanOrEquals("index",o,2),v.typeOf.object("result",c);var O=o*3,b=n[O],f=n[O+1],M=n[O+2];return c.x=b,c.y=f,c.z=M,c};p.setColumn=function(n,o,c,O){v.typeOf.object("matrix",n),v.typeOf.number.greaterThanOrEquals("index",o,0),v.typeOf.number.lessThanOrEquals("index",o,2),v.typeOf.object("cartesian",c),v.typeOf.object("result",O),O=p.clone(n,O);var b=o*3;return O[b]=c.x,O[b+1]=c.y,O[b+2]=c.z,O};p.getRow=function(n,o,c){v.typeOf.object("matrix",n),v.typeOf.number.greaterThanOrEquals("index",o,0),v.typeOf.number.lessThanOrEquals("index",o,2),v.typeOf.object("result",c);var O=n[o],b=n[o+3],f=n[o+6];return c.x=O,c.y=b,c.z=f,c};p.setRow=function(n,o,c,O){return v.typeOf.object("matrix",n),v.typeOf.number.greaterThanOrEquals("index",o,0),v.typeOf.number.lessThanOrEquals("index",o,2),v.typeOf.object("cartesian",c),v.typeOf.object("result",O),O=p.clone(n,O),O[o]=c.x,O[o+3]=c.y,O[o+6]=c.z,O};var W=new h;p.getScale=function(n,o){return v.typeOf.object("matrix",n),v.typeOf.object("result",o),o.x=h.magnitude(h.fromElements(n[0],n[1],n[2],W)),o.y=h.magnitude(h.fromElements(n[3],n[4],n[5],W)),o.z=h.magnitude(h.fromElements(n[6],n[7],n[8],W)),o};var d=new h;p.getMaximumScale=function(n){return p.getScale(n,d),h.maximumComponent(d)};p.multiply=function(n,o,c){v.typeOf.object("left",n),v.typeOf.object("right",o),v.typeOf.object("result",c);var O=n[0]*o[0]+n[3]*o[1]+n[6]*o[2],b=n[1]*o[0]+n[4]*o[1]+n[7]*o[2],f=n[2]*o[0]+n[5]*o[1]+n[8]*o[2],M=n[0]*o[3]+n[3]*o[4]+n[6]*o[5],y=n[1]*o[3]+n[4]*o[4]+n[7]*o[5],w=n[2]*o[3]+n[5]*o[4]+n[8]*o[5],j=n[0]*o[6]+n[3]*o[7]+n[6]*o[8],E=n[1]*o[6]+n[4]*o[7]+n[7]*o[8],z=n[2]*o[6]+n[5]*o[7]+n[8]*o[8];return c[0]=O,c[1]=b,c[2]=f,c[3]=M,c[4]=y,c[5]=w,c[6]=j,c[7]=E,c[8]=z,c};p.add=function(n,o,c){return v.typeOf.object("left",n),v.typeOf.object("right",o),v.typeOf.object("result",c),c[0]=n[0]+o[0],c[1]=n[1]+o[1],c[2]=n[2]+o[2],c[3]=n[3]+o[3],c[4]=n[4]+o[4],c[5]=n[5]+o[5],c[6]=n[6]+o[6],c[7]=n[7]+o[7],c[8]=n[8]+o[8],c};p.subtract=function(n,o,c){return v.typeOf.object("left",n),v.typeOf.object("right",o),v.typeOf.object("result",c),c[0]=n[0]-o[0],c[1]=n[1]-o[1],c[2]=n[2]-o[2],c[3]=n[3]-o[3],c[4]=n[4]-o[4],c[5]=n[5]-o[5],c[6]=n[6]-o[6],c[7]=n[7]-o[7],c[8]=n[8]-o[8],c};p.multiplyByVector=function(n,o,c){v.typeOf.object("matrix",n),v.typeOf.object("cartesian",o),v.typeOf.object("result",c);var O=o.x,b=o.y,f=o.z,M=n[0]*O+n[3]*b+n[6]*f,y=n[1]*O+n[4]*b+n[7]*f,w=n[2]*O+n[5]*b+n[8]*f;return c.x=M,c.y=y,c.z=w,c};p.multiplyByScalar=function(n,o,c){return v.typeOf.object("matrix",n),v.typeOf.number("scalar",o),v.typeOf.object("result",c),c[0]=n[0]*o,c[1]=n[1]*o,c[2]=n[2]*o,c[3]=n[3]*o,c[4]=n[4]*o,c[5]=n[5]*o,c[6]=n[6]*o,c[7]=n[7]*o,c[8]=n[8]*o,c};p.multiplyByScale=function(n,o,c){return v.typeOf.object("matrix",n),v.typeOf.object("scale",o),v.typeOf.object("result",c),c[0]=n[0]*o.x,c[1]=n[1]*o.x,c[2]=n[2]*o.x,c[3]=n[3]*o.y,c[4]=n[4]*o.y,c[5]=n[5]*o.y,c[6]=n[6]*o.z,c[7]=n[7]*o.z,c[8]=n[8]*o.z,c};p.negate=function(n,o){return v.typeOf.object("matrix",n),v.typeOf.object("result",o),o[0]=-n[0],o[1]=-n[1],o[2]=-n[2],o[3]=-n[3],o[4]=-n[4],o[5]=-n[5],o[6]=-n[6],o[7]=-n[7],o[8]=-n[8],o};p.transpose=function(n,o){v.typeOf.object("matrix",n),v.typeOf.object("result",o);var c=n[0],O=n[3],b=n[6],f=n[1],M=n[4],y=n[7],w=n[2],j=n[5],E=n[8];return o[0]=c,o[1]=O,o[2]=b,o[3]=f,o[4]=M,o[5]=y,o[6]=w,o[7]=j,o[8]=E,o};var F=new h(1,1,1);p.getRotation=function(n,o){v.typeOf.object("matrix",n),v.typeOf.object("result",o);var c=h.divideComponents(F,p.getScale(n,d),d);return o=p.multiplyByScale(n,c,o),o};function X(n){for(var o=0,c=0;c<9;++c){var O=n[c];o+=O*O}return Math.sqrt(o)}var D=[1,0,0],k=[2,2,1];function H(n){for(var o=0,c=0;c<3;++c){var O=n[p.getElementIndex(k[c],D[c])];o+=2*O*O}return Math.sqrt(o)}function Q(n,o){for(var c=A.EPSILON15,O=0,b=1,f=0;f<3;++f){var M=Math.abs(n[p.getElementIndex(k[f],D[f])]);M>O&&(b=f,O=M)}var y=1,w=0,j=D[b],E=k[b];if(Math.abs(n[p.getElementIndex(E,j)])>c){var z=n[p.getElementIndex(E,E)],N=n[p.getElementIndex(j,j)],S=n[p.getElementIndex(E,j)],m=(z-N)/2/S,C;m<0?C=-1/(-m+Math.sqrt(1+m*m)):C=1/(m+Math.sqrt(1+m*m)),y=1/Math.sqrt(1+C*C),w=C*y}return o=p.clone(p.IDENTITY,o),o[p.getElementIndex(j,j)]=o[p.getElementIndex(E,E)]=y,o[p.getElementIndex(E,j)]=w,o[p.getElementIndex(j,E)]=-w,o}var U=new p,Z=new p;p.computeEigenDecomposition=function(n,o){v.typeOf.object("matrix",n);var c=A.EPSILON20,O=10,b=0,f=0;R(o)||(o={});for(var M=o.unitary=p.clone(p.IDENTITY,o.unitary),y=o.diagonal=p.clone(n,o.diagonal),w=c*X(y);f<O&&H(y)>w;)Q(y,U),p.transpose(U,Z),p.multiply(y,U,y),p.multiply(Z,y,y),p.multiply(M,U,M),++b>2&&(++f,b=0);return o};p.abs=function(n,o){return v.typeOf.object("matrix",n),v.typeOf.object("result",o),o[0]=Math.abs(n[0]),o[1]=Math.abs(n[1]),o[2]=Math.abs(n[2]),o[3]=Math.abs(n[3]),o[4]=Math.abs(n[4]),o[5]=Math.abs(n[5]),o[6]=Math.abs(n[6]),o[7]=Math.abs(n[7]),o[8]=Math.abs(n[8]),o};p.determinant=function(n){v.typeOf.object("matrix",n);var o=n[0],c=n[3],O=n[6],b=n[1],f=n[4],M=n[7],y=n[2],w=n[5],j=n[8];return o*(f*j-w*M)+b*(w*O-c*j)+y*(c*M-f*O)};p.inverse=function(n,o){v.typeOf.object("matrix",n),v.typeOf.object("result",o);var c=n[0],O=n[1],b=n[2],f=n[3],M=n[4],y=n[5],w=n[6],j=n[7],E=n[8],z=p.determinant(n);if(Math.abs(z)<=A.EPSILON15)throw new V("matrix is not invertible");o[0]=M*E-j*y,o[1]=j*b-O*E,o[2]=O*y-M*b,o[3]=w*y-f*E,o[4]=c*E-w*b,o[5]=f*b-c*y,o[6]=f*j-w*M,o[7]=w*O-c*j,o[8]=c*M-f*O;var N=1/z;return p.multiplyByScalar(o,N,o)};p.equals=function(n,o){return n===o||R(n)&&R(o)&&n[0]===o[0]&&n[1]===o[1]&&n[2]===o[2]&&n[3]===o[3]&&n[4]===o[4]&&n[5]===o[5]&&n[6]===o[6]&&n[7]===o[7]&&n[8]===o[8]};p.equalsEpsilon=function(n,o,c){return v.typeOf.number("epsilon",c),n===o||R(n)&&R(o)&&Math.abs(n[0]-o[0])<=c&&Math.abs(n[1]-o[1])<=c&&Math.abs(n[2]-o[2])<=c&&Math.abs(n[3]-o[3])<=c&&Math.abs(n[4]-o[4])<=c&&Math.abs(n[5]-o[5])<=c&&Math.abs(n[6]-o[6])<=c&&Math.abs(n[7]-o[7])<=c&&Math.abs(n[8]-o[8])<=c};p.IDENTITY=Object.freeze(new p(1,0,0,0,1,0,0,0,1));p.ZERO=Object.freeze(new p(0,0,0,0,0,0,0,0,0));p.COLUMN0ROW0=0;p.COLUMN0ROW1=1;p.COLUMN0ROW2=2;p.COLUMN1ROW0=3;p.COLUMN1ROW1=4;p.COLUMN1ROW2=5;p.COLUMN2ROW0=6;p.COLUMN2ROW1=7;p.COLUMN2ROW2=8;Object.defineProperties(p.prototype,{length:{get:function(){return p.packedLength}}});p.prototype.clone=function(n){return p.clone(this,n)};p.prototype.equals=function(n){return p.equals(this,n)};p.equalsArray=function(n,o,c){return n[0]===o[c]&&n[1]===o[c+1]&&n[2]===o[c+2]&&n[3]===o[c+3]&&n[4]===o[c+4]&&n[5]===o[c+5]&&n[6]===o[c+6]&&n[7]===o[c+7]&&n[8]===o[c+8]};p.prototype.equalsEpsilon=function(n,o){return p.equalsEpsilon(this,n,o)};p.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+`)
(`+this[1]+", "+this[4]+", "+this[7]+`)
(`+this[2]+", "+this[5]+", "+this[8]+")"};p.prototype.toArray=function(n,o){p.pack(this,n,o)};var a=p;export{a};

import{a as ke}from"./chunk-3YVIVL5K.js";import{a as Ie}from"./chunk-G5JLXMFE.js";import{a as J}from"./chunk-SP6GVFX5.js";import{a as xe}from"./chunk-4WVDVRKW.js";import{a as re}from"./chunk-4XC5RTMX.js";import{a as Or}from"./chunk-TAREIYKN.js";import{b as jr}from"./chunk-KBENTI6G.js";import{a as Wr}from"./chunk-L77WLOIG.js";import{c as $r,d as Le,e as Ce,g as Oe,h as Fr}from"./chunk-T3RVX7V2.js";import"./chunk-NPAFDOYL.js";import{c as V}from"./chunk-YOUPUNCB.js";import{a as Dr}from"./chunk-ZIZDQ7PT.js";import"./chunk-QO3RRUEO.js";import"./chunk-RRHLFRBE.js";import{a as Hr}from"./chunk-SRPTWKHW.js";import"./chunk-6S43R6PL.js";import"./chunk-GMH62RQ6.js";import"./chunk-6NA2GRXE.js";import{a as Nr}from"./chunk-JTWCWMT6.js";import"./chunk-NBA64YIR.js";import"./chunk-EHDXVZQM.js";import{a as z}from"./chunk-3CEYC7M5.js";import{a as Cr,b as W}from"./chunk-SVO3L3ZS.js";import"./chunk-ZCGLU37G.js";import{b as _}from"./chunk-E37TXANJ.js";import{a as r}from"./chunk-DJQWO2NJ.js";import{a as f}from"./chunk-Y2ETSBLW.js";import{a as C}from"./chunk-UBHQMGET.js";import{a as ar}from"./chunk-EDZQSM3T.js";import{a as wr}from"./chunk-PJGSCWXZ.js";import{a as l}from"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";function ir(e){e=C(e,{}),this._ellipsoid=C(e.ellipsoid,W.WGS84),this._rectangle=C(e.rectangle,z.MAX_VALUE),this._projection=new Dr(this._ellipsoid),this._numberOfLevelZeroTilesX=C(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=C(e.numberOfLevelZeroTilesY,1),this._customDPI=e.customDPI,this._scaleDenominators=e.scaleDenominators,this._tileWidth=C(e.tileWidth,256),this._tileHeight=C(e.tileHeight,256),this._beginLevel=C(e.beginLevel,0),this._origin=C(e.origin,void 0)}Object.defineProperties(ir.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}},beginLevel:{get:function(){return this._beginLevel}},origin:{get:function(){return this._origin}}});ir.prototype.getNumberOfXTilesAtLevel=function(e){if(l(this._customDPI)&&l(this._scaleDenominators)){var i=this.calculateResolution(e),n=this._tileWidth*i.x;return Math.ceil(this._rectangle.width/n)}return this._numberOfLevelZeroTilesX<<e-this._beginLevel};ir.prototype.getNumberOfYTilesAtLevel=function(e){if(l(this._customDPI)&&l(this._scaleDenominators)){var i=this.calculateResolution(e),n=this._tileHeight*i.y;return Math.ceil(this._rectangle.height/n)}return this._numberOfLevelZeroTilesY<<e-this._beginLevel};ir.prototype.rectangleToNativeRectangle=function(e,i){ar.defined("rectangle",e);var n=f.toDegrees(e.west),a=f.toDegrees(e.south),t=f.toDegrees(e.east),o=f.toDegrees(e.north);return l(i)?(i.west=n,i.south=a,i.east=t,i.north=o,i):new z(n,a,t,o)};ir.prototype.tileXYToNativeRectangle=function(e,i,n,a){var t=this.tileXYToRectangle(e,i,n,a);return t.west=f.toDegrees(t.west),t.south=f.toDegrees(t.south),t.east=f.toDegrees(t.east),t.north=f.toDegrees(t.north),t};ir.prototype.tileXYToRectangle=function(e,i,n,a){var t=this._rectangle,o=l(this._origin)?this._origin.longitude:t.west,c=l(this._origin)?this._origin.latitude:t.north;if(l(this._customDPI)&&l(this._scaleDenominators)){var s=this.calculateResolution(n),m=o+e*this._tileWidth*s.x,g=o+(e+1)*this._tileWidth*s.x,S=c-i*this._tileHeight*s.y,E=c-(i+1)*this._tileHeight*s.y;return l(a)?(a.west=m,a.south=E,a.east=g,a.north=S,a):new z(m,E,g,S)}var v=this.getNumberOfXTilesAtLevel(n),p=this.getNumberOfYTilesAtLevel(n),h=t.width/v,m=e*h+t.west,g=(e+1)*h+t.west,w=t.height/p,S=t.north-i*w,E=t.north-(i+1)*w;return l(a)||(a=new z(m,E,g,S)),a.west=m,a.south=E,a.east=g,a.north=S,a};ir.prototype.positionToTileXY=function(e,i,n){var a=this._rectangle;if(!!z.contains(a,e)){var t=this.getNumberOfXTilesAtLevel(i),o=this.getNumberOfYTilesAtLevel(i),c=l(this._origin)?this._origin.longitude:a.west,s=l(this._origin)?this._origin.latitude:a.north,v=a.width/t,p=a.height/o;if(l(this._customDPI)&&l(this._scaleDenominators)){var h=this.calculateResolution(i);v=this._tileWidth*h.x,p=this._tileHeight*h.y}var m=e.longitude;a.east<a.west&&(m+=f.TWO_PI),l(this._origin)&&(t+=this._origin.longitude!=a.west?Math.ceil((e.longitude-this._origin.longitude)/v):0,o+=this._origin.latitude!=a.north?Math.ceil((this._origin.latitude-e.latitude)/p):0);var g=(m-c)/v|0;g>=t&&(g=t-1);var w=(s-e.latitude)/p|0;return w>=o&&(w=o-1),l(n)?(n.x=g,n.y=w,n):new Cr(g,w)}};ir.prototype.calculateResolution=function(e){var i=Math.min(e-this._beginLevel,this._scaleDenominators.length-1),n=this._scaleDenominators[i]*.0254/this._customDPI.x,a=this._scaleDenominators[i]*.0254/this._customDPI.y,t=W.WGS84.maximumRadius;return new Cr(n/t,a/t)};var be=ir;var Re=new r,Ae=new r,Me=new _,ee=new r,pa=new r,Pe=new V,ua=new be,Ir=[new _,new _,new _,new _],xr=new Cr,T={};T.initialize=function(){var e=T._initPromise;return l(e)||(e=Le.fetchJson(Ce("Assets/approximateTerrainHeights.json")).then(function(i){T._terrainHeights=i}),T._initPromise=e),e};T.getMinimumMaximumHeights=function(e,i){if(ar.defined("rectangle",e),!l(T._terrainHeights))throw new wr("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");i=C(i,W.WGS84);var n=ye(e),a=T._defaultMinTerrainHeight,t=T._defaultMaxTerrainHeight;if(l(n)){var o=n.level+"-"+n.x+"-"+n.y,c=T._terrainHeights[o];l(c)&&(a=c[0],t=c[1]),i.cartographicToCartesian(z.northeast(e,Me),Re),i.cartographicToCartesian(z.southwest(e,Me),Ae),r.midpoint(Ae,Re,ee);var s=i.scaleToGeodeticSurface(ee,pa);if(l(s)){var v=r.distance(ee,s);a=Math.min(a,-v)}else a=T._defaultMinTerrainHeight}return a=Math.max(T._defaultMinTerrainHeight,a),{minimumTerrainHeight:a,maximumTerrainHeight:t}};T.getBoundingSphere=function(e,i){if(ar.defined("rectangle",e),!l(T._terrainHeights))throw new wr("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");i=C(i,W.WGS84);var n=ye(e),a=T._defaultMaxTerrainHeight;if(l(n)){var t=n.level+"-"+n.x+"-"+n.y,o=T._terrainHeights[t];l(o)&&(a=o[1])}var c=V.fromRectangle3D(e,i,0);return l(n)?(V.fromRectangle3D(e,i,a,Pe),V.union(c,Pe,c)):c};function ye(e){_.fromRadians(e.east,e.north,0,Ir[0]),_.fromRadians(e.west,e.north,0,Ir[1]),_.fromRadians(e.east,e.south,0,Ir[2]),_.fromRadians(e.west,e.south,0,Ir[3]);var i=0,n=0,a=0,t=0,o=T._terrainHeightsMaxLevel,c;for(c=0;c<=o;++c){for(var s=!1,v=0;v<4;++v){var p=Ir[v];if(ua.positionToTileXY(p,c,xr),v===0)a=xr.x,t=xr.y;else if(a!==xr.x||t!==xr.y){s=!0;break}}if(s)break;i=a,n=t}if(c!==0)return{x:i,y:n,level:c>o?o:c-1}}T._terrainHeightsMaxLevel=6;T._defaultMaxTerrainHeight=9e3;T._defaultMinTerrainHeight=-1e5;T._terrainHeights=void 0;T._initPromise=void 0;Object.defineProperties(T,{initialized:{get:function(){return l(T._terrainHeights)}}});var zr=T;var ve=[Dr,Ie],ga=ve.length,ra=Math.cos(f.toRadians(30)),De=Math.cos(f.toRadians(150)),ea=0,aa=1e3;function sr(e){e=C(e,C.EMPTY_OBJECT);var i=e.positions;if(!l(i)||i.length<2)throw new wr("At least two positions are required.");if(l(e.arcType)&&e.arcType!==J.GEODESIC&&e.arcType!==J.RHUMB)throw new wr("Valid options for arcType are ArcType.GEODESIC and ArcType.RHUMB.");this.width=C(e.width,1),this._positions=i,this.granularity=C(e.granularity,9999),this.loop=C(e.loop,!1),this.arcType=C(e.arcType,J.GEODESIC),this._ellipsoid=C(e.ellipsoid,W.WGS84),this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(sr.prototype,{packedLength:{get:function(){return 1+this._positions.length*3+1+1+1+W.packedLength+1+1}}});sr.setProjectionAndEllipsoid=function(e,i){for(var n=0,a=0;a<ga;a++)if(i instanceof ve[a]){n=a;break}e._projectionIndex=n,e._ellipsoid=i.ellipsoid};var ma=new r,Ne=new r,He=new r;function se(e,i,n,a,t){var o=y(a,e,0,ma),c=y(a,e,n,Ne),s=y(a,i,0,He),v=tr(c,o,Ne),p=tr(s,o,He);return r.cross(p,v,t),r.normalize(t,t)}var da=new _,wa=new r,_a=new r,Ta=new r;function ae(e,i,n,a,t,o,c,s,v,p,h){if(t!==0){var m;o===J.GEODESIC?m=new ke(e,i,c):o===J.RHUMB&&(m=new re(e,i,c));var g=m.surfaceDistance;if(!(g<t))for(var w=se(e,i,a,c,Ta),S=Math.ceil(g/t),E=g/S,Y=E,Z=S-1,u=s.length,X=0;X<Z;X++){var N=m.interpolateUsingSurfaceDistance(Y,da),R=y(c,N,n,wa),b=y(c,N,a,_a);r.pack(w,s,u),r.pack(R,v,u),r.pack(b,p,u),h.push(N.latitude),h.push(N.longitude),u+=3,Y+=E}}}var ie=new _;function y(e,i,n,a){return _.clone(i,ie),ie.height=n,_.toCartesian(ie,e,a)}sr.pack=function(e,i,n){ar.typeOf.object("value",e),ar.defined("array",i);var a=C(n,0),t=e._positions,o=t.length;i[a++]=o;for(var c=0;c<o;++c){var s=t[c];r.pack(s,i,a),a+=3}return i[a++]=e.granularity,i[a++]=e.loop?1:0,i[a++]=e.arcType,W.pack(e._ellipsoid,i,a),a+=W.packedLength,i[a++]=e._projectionIndex,i[a++]=e._scene3DOnly?1:0,i};sr.unpack=function(e,i,n){ar.defined("array",e);for(var a=C(i,0),t=e[a++],o=new Array(t),c=0;c<t;c++)o[c]=r.unpack(e,a),a+=3;var s=e[a++],v=e[a++]===1,p=e[a++],h=W.unpack(e,a);a+=W.packedLength;var m=e[a++],g=e[a++]===1;if(!l(n)){var w=new sr({positions:o,granularity:s,loop:v,arcType:p,ellipsoid:h});return w._projectionIndex=m,w._scene3DOnly=g,w}return n._positions=o,n.granularity=s,n.loop=v,n.arcType=p,n._ellipsoid=h,n._projectionIndex=m,n._scene3DOnly=g,n};function tr(e,i,n){return r.subtract(e,i,n),r.normalize(n,n),n}function Fe(e,i,n,a){return a=tr(e,i,a),a=r.cross(a,n,a),a=r.normalize(a,a),a=r.cross(n,a,a),a}var Sa=new r,Ea=new r,La=new r,ia=new r,Ca=0,Oa=-1;function te(e,i,n,a,t){var o=tr(n,i,ia),c=Fe(e,i,o,Sa),s=Fe(a,i,o,Ea);if(f.equalsEpsilon(r.dot(c,s),Oa,f.EPSILON5))return t=r.cross(o,c,t),t=r.normalize(t,t),t;t=r.add(s,c,t),t=r.normalize(t,t);var v=r.cross(o,t,La);return r.dot(s,v)<Ca&&(t=r.negate(t,t)),t}var Vr=Wr.fromPointNormal(r.ZERO,r.UNIT_Y),Ia=new r,xa=new r,ka=new r,ba=new r,Ra=new r,Yr=new r,Xr=new _,We=new _,ze=new _;sr.createGeometry=function(e){var i=!e._scene3DOnly,n=e.loop,a=e._ellipsoid,t=e.granularity,o=e.arcType,c=new ve[e._projectionIndex](a),s=ea,v=aa,p,h,m=e._positions,g=m.length;g===2&&(n=!1);var w,S,E,Y,Z=new re(void 0,void 0,a),u,X,N,R=[m[0]];for(h=0;h<g-1;h++)w=m[h],S=m[h+1],u=jr.lineSegmentPlane(w,S,Vr,Yr),l(u)&&!r.equalsEpsilon(u,w,f.EPSILON7)&&!r.equalsEpsilon(u,S,f.EPSILON7)&&(e.arcType===J.GEODESIC?R.push(r.clone(u)):e.arcType===J.RHUMB&&(N=a.cartesianToCartographic(u,Xr).longitude,E=a.cartesianToCartographic(w,Xr),Y=a.cartesianToCartographic(S,We),Z.setEndPoints(E,Y),X=Z.findIntersectionWithLongitude(N,ze),u=a.cartographicToCartesian(X,Yr),l(u)&&!r.equalsEpsilon(u,w,f.EPSILON7)&&!r.equalsEpsilon(u,S,f.EPSILON7)&&R.push(r.clone(u)))),R.push(S);n&&(w=m[g-1],S=m[0],u=jr.lineSegmentPlane(w,S,Vr,Yr),l(u)&&!r.equalsEpsilon(u,w,f.EPSILON7)&&!r.equalsEpsilon(u,S,f.EPSILON7)&&(e.arcType===J.GEODESIC?R.push(r.clone(u)):e.arcType===J.RHUMB&&(N=a.cartesianToCartographic(u,Xr).longitude,E=a.cartesianToCartographic(w,Xr),Y=a.cartesianToCartographic(S,We),Z.setEndPoints(E,Y),X=Z.findIntersectionWithLongitude(N,ze),u=a.cartographicToCartesian(X,Yr),l(u)&&!r.equalsEpsilon(u,w,f.EPSILON7)&&!r.equalsEpsilon(u,S,f.EPSILON7)&&R.push(r.clone(u)))));var b=R.length,x=new Array(b);for(h=0;h<b;h++){var vr=_.fromCartesian(R[h],a);vr.height=0,x[h]=vr}if(x=xe(x,_.equalsEpsilon),b=x.length,!(b<2)){var D=[],A=[],O=[],I=[],M=Ia,L=xa,H=ka,F=ba,d=Ra,P=x[0],pr=x[1],q=x[b-1];for(M=y(a,q,s,M),F=y(a,pr,s,F),L=y(a,P,s,L),H=y(a,P,v,H),n?d=te(M,L,H,F,d):d=se(P,pr,v,a,d),r.pack(d,A,0),r.pack(L,O,0),r.pack(H,I,0),D.push(P.latitude),D.push(P.longitude),ae(P,pr,s,v,t,o,a,A,O,I,D),h=1;h<b-1;++h){M=r.clone(L,M),L=r.clone(F,L);var ur=x[h];y(a,ur,v,H),y(a,x[h+1],s,F),te(M,L,H,F,d),p=A.length,r.pack(d,A,p),r.pack(L,O,p),r.pack(H,I,p),D.push(ur.latitude),D.push(ur.longitude),ae(x[h],x[h+1],s,v,t,o,a,A,O,I,D)}var G=x[b-1],B=x[b-2];if(L=y(a,G,s,L),H=y(a,G,v,H),n){var K=x[0];M=y(a,B,s,M),F=y(a,K,s,F),d=te(M,L,H,F,d)}else d=se(B,G,v,a,d);if(p=A.length,r.pack(d,A,p),r.pack(L,O,p),r.pack(H,I,p),D.push(G.latitude),D.push(G.longitude),n){for(ae(G,P,s,v,t,o,a,A,O,I,D),p=A.length,h=0;h<3;++h)A[p+h]=A[h],O[p+h]=O[h],I[p+h]=I[h];D.push(P.latitude),D.push(P.longitude)}return ai(n,c,O,I,A,D,i)}};var Aa=new r,Ma=new Nr,Pa=new $r;function Ye(e,i,n,a){var t=tr(n,i,Aa),o=r.dot(t,e);if(o>ra||o<De){var c=tr(a,n,ia),s=o<De?f.PI_OVER_TWO:-f.PI_OVER_TWO,v=$r.fromAxisAngle(c,s,Pa),p=Nr.fromQuaternion(v,Ma);return Nr.multiplyByVector(p,e,e),!0}return!1}var Xe=new _,ya=new r,qe=new r;function kr(e,i,n,a,t){var o=_.toCartesian(i,e._ellipsoid,ya),c=r.add(o,n,qe),s=!1,v=e._ellipsoid,p=v.cartesianToCartographic(c,Xe);Math.abs(i.longitude-p.longitude)>f.PI_OVER_TWO&&(s=!0,c=r.subtract(o,n,qe),p=v.cartesianToCartographic(c,Xe)),p.height=0;var h=e.project(p,t);return t=r.subtract(h,a,t),t.z=0,t=r.normalize(t,t),s&&r.negate(t,t),t}var Da=new r,Ve=new r;function Ze(e,i,n,a,t,o){var c=r.subtract(i,e,Da);r.normalize(c,c);var s=n-ea,v=r.multiplyByScalar(c,s,Ve);r.add(e,v,t);var p=a-aa;v=r.multiplyByScalar(c,p,Ve),r.add(i,v,o)}var Na=new r;function qr(e,i){var n=Wr.getPointDistance(Vr,e),a=Wr.getPointDistance(Vr,i),t=Na;f.equalsEpsilon(n,0,f.EPSILON2)?(t=tr(i,e,t),r.multiplyByScalar(t,f.EPSILON2,t),r.add(e,t,e)):f.equalsEpsilon(a,0,f.EPSILON2)&&(t=tr(e,i,t),r.multiplyByScalar(t,f.EPSILON2,t),r.add(i,t,i))}function Ha(e,i){var n=Math.abs(e.longitude),a=Math.abs(i.longitude);if(f.equalsEpsilon(n,f.PI,f.EPSILON11)){var t=f.sign(i.longitude);return e.longitude=t*(n-f.EPSILON11),1}else if(f.equalsEpsilon(a,f.PI,f.EPSILON11)){var o=f.sign(e.longitude);return i.longitude=o*(a-f.EPSILON11),2}return 0}var ta=new _,na=new _,Be=new r,ne=new r,Ue=new r,Je=new r,Fa=new r,Ge=new r,Wa=[ta,na],za=new z,Ya=new r,Xa=new r,qa=new r,Va=new r,Za=new r,Ba=new r,oe=new r,ce=new r,Ua=new r,Ja=new r,Ga=new r,Ke=new r,Ka=new r,Qa=new r,$a=new Or,ja=new Or,Qe=new r,ri=new r,$e=new r,ei=[new V,new V],oa=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],je=oa.length;function ai(e,i,n,a,t,o,c){var s,v,p=i._ellipsoid,h=n.length/3-1,m=h*8,g=m*4,w=h*36,S=m>65535?new Uint32Array(w):new Uint16Array(w),E=new Float64Array(m*3),Y=new Float32Array(g),Z=new Float32Array(g),u=new Float32Array(g),X=new Float32Array(g),N=new Float32Array(g),R,b,x,vr;c&&(R=new Float32Array(g),b=new Float32Array(g),x=new Float32Array(g),vr=new Float32Array(m*2));var D=o.length/2,A=0,O=ta;O.height=0;var I=na;I.height=0;var M=Be,L=ne;if(c)for(v=0,s=1;s<D;s++)O.latitude=o[v],O.longitude=o[v+1],I.latitude=o[v+2],I.longitude=o[v+3],M=i.project(O,M),L=i.project(I,L),A+=r.distance(M,L),v+=2;var H=a.length/3;L=r.unpack(a,0,L);var F=0;for(v=3,s=1;s<H;s++)M=r.clone(L,M),L=r.unpack(a,v,L),F+=r.distance(M,L),v+=3;var d;v=3;var P=0,pr=0,q=0,ur=0,G=!1,B=r.unpack(n,0,Je),K=r.unpack(a,0,ne),U=r.unpack(t,0,Ge);if(e){var ca=r.unpack(n,n.length-6,Ue);Ye(U,ca,B,K)&&(U=r.negate(U,U))}var fe=0,le=0,Zr=0;for(s=0;s<h;s++){var _r=r.clone(B,Ue),Br=r.clone(K,Be),gr=r.clone(U,Fa);G&&(gr=r.negate(gr,gr)),B=r.unpack(n,v,Je),K=r.unpack(a,v,ne),U=r.unpack(t,v,Ge),G=Ye(U,_r,B,K),O.latitude=o[P],O.longitude=o[P+1],I.latitude=o[P+2],I.longitude=o[P+3];var hr,mr,nr,or;if(c){var pe=Ha(O,I);hr=i.project(O,Za),mr=i.project(I,Ba);var Ur=tr(mr,hr,Qe);Ur.y=Math.abs(Ur.y),nr=oe,or=ce,pe===0||r.dot(Ur,r.UNIT_Y)>ra?(nr=kr(i,O,gr,hr,oe),or=kr(i,I,U,mr,ce)):pe===1?(or=kr(i,I,U,mr,ce),nr.x=0,nr.y=f.sign(O.longitude-Math.abs(I.longitude)),nr.z=0):(nr=kr(i,O,gr,hr,oe),or.x=0,or.y=f.sign(O.longitude-I.longitude),or.z=0)}var ue=r.distance(Br,K),ge=Or.fromCartesian(_r,$a),br=r.subtract(B,_r,Ua),sa=r.normalize(br,Ke),Tr=r.subtract(Br,_r,Ja);Tr=r.normalize(Tr,Tr);var dr=r.cross(sa,Tr,Ke);dr=r.normalize(dr,dr);var Rr=r.cross(Tr,gr,Ka);Rr=r.normalize(Rr,Rr);var Ar=r.subtract(K,B,Ga);Ar=r.normalize(Ar,Ar);var Mr=r.cross(U,Ar,Qa);Mr=r.normalize(Mr,Mr);var va=ue/F,ha=fe/F,Jr=0,Sr,Pr,fr,me=0,de=0;if(c){Jr=r.distance(hr,mr),Sr=Or.fromCartesian(hr,ja),Pr=r.subtract(mr,hr,Qe),fr=r.normalize(Pr,ri);var fa=fr.x;fr.x=fr.y,fr.y=-fa,me=Jr/A,de=le/A}for(d=0;d<8;d++){var k=ur+d*4,we=pr+d*2,Er=k+3,_e=d<4?1:-1,yr=d===2||d===3||d===6||d===7?1:-1;r.pack(ge.high,Y,k),Y[Er]=br.x,r.pack(ge.low,Z,k),Z[Er]=br.y,r.pack(Rr,u,k),u[Er]=br.z,r.pack(Mr,X,k),X[Er]=va*_e,r.pack(dr,N,k);var lr=ha*yr;lr===0&&yr<0&&(lr=Number.POSITIVE_INFINITY),N[Er]=lr,c&&(R[k]=Sr.high.x,R[k+1]=Sr.high.y,R[k+2]=Sr.low.x,R[k+3]=Sr.low.y,x[k]=-nr.y,x[k+1]=nr.x,x[k+2]=or.y,x[k+3]=-or.x,b[k]=Pr.x,b[k+1]=Pr.y,b[k+2]=fr.x,b[k+3]=fr.y,vr[we]=me*_e,lr=de*yr,lr===0&&yr<0&&(lr=Number.POSITIVE_INFINITY),vr[we+1]=lr)}var Q=qa,$=Va,j=Ya,rr=Xa,la=z.fromCartographicArray(Wa,za),Te=zr.getMinimumMaximumHeights(la,p),Gr=Te.minimumTerrainHeight,Kr=Te.maximumTerrainHeight;Zr+=Gr,Zr+=Kr,Ze(_r,Br,Gr,Kr,Q,j),Ze(B,K,Gr,Kr,$,rr);var er=r.multiplyByScalar(dr,f.EPSILON5,$e);r.add(Q,er,Q),r.add($,er,$),r.add(j,er,j),r.add(rr,er,rr),qr(Q,$),qr(j,rr),r.pack(Q,E,q),r.pack($,E,q+3),r.pack(rr,E,q+6),r.pack(j,E,q+9),er=r.multiplyByScalar(dr,-2*f.EPSILON5,$e),r.add(Q,er,Q),r.add($,er,$),r.add(j,er,j),r.add(rr,er,rr),qr(Q,$),qr(j,rr),r.pack(Q,E,q+12),r.pack($,E,q+15),r.pack(rr,E,q+18),r.pack(j,E,q+21),P+=2,v+=3,pr+=16,q+=24,ur+=32,fe+=ue,le+=Jr}v=0;var Se=0;for(s=0;s<h;s++){for(d=0;d<je;d++)S[v+d]=oa[d]+Se;Se+=8,v+=je}var Qr=ei;V.fromVertices(n,r.ZERO,3,Qr[0]),V.fromVertices(a,r.ZERO,3,Qr[1]);var Ee=V.fromBoundingSpheres(Qr);Ee.radius+=Zr/(h*2);var Lr={position:new Fr({componentDatatype:Hr.DOUBLE,componentsPerAttribute:3,normalize:!1,values:E}),startHiAndForwardOffsetX:cr(Y),startLoAndForwardOffsetY:cr(Z),startNormalAndForwardOffsetZ:cr(u),endNormalAndTextureCoordinateNormalizationX:cr(X),rightNormalAndTextureCoordinateNormalizationY:cr(N)};return c&&(Lr.startHiLo2D=cr(R),Lr.offsetAndRight2D=cr(b),Lr.startEndNormals2D=cr(x),Lr.texcoordNormalization2D=new Fr({componentDatatype:Hr.FLOAT,componentsPerAttribute:2,normalize:!1,values:vr})),new Oe({attributes:Lr,indices:S,boundingSphere:Ee})}function cr(e){return new Fr({componentDatatype:Hr.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}sr._projectNormal=kr;var he=sr;function ii(e,i){return zr.initialize().then(function(){return l(i)&&(e=he.unpack(e,i)),he.createGeometry(e)})}var at=ii;export{at as default};
